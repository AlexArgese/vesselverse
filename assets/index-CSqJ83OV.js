var b3=Object.defineProperty;var C3=(e,t,i)=>t in e?b3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var $=(e,t,i)=>C3(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();function Pf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ih={exports:{}},Er={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function S3(){if(C2)return Er;C2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:e,type:s,key:l,ref:a!==void 0?a:null,props:o}}return Er.Fragment=t,Er.jsx=i,Er.jsxs=i,Er}var S2;function M3(){return S2||(S2=1,Ih.exports=S3()),Ih.exports}var B=M3(),Bh={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M2;function E3(){if(M2)return St;M2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function p(Y){return Y===null||typeof Y!="object"?null:(Y=g&&Y[g]||Y["@@iterator"],typeof Y=="function"?Y:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function b(Y,it,ct){this.props=Y,this.context=it,this.refs=y,this.updater=ct||A}b.prototype.isReactComponent={},b.prototype.setState=function(Y,it){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,it,"setState")},b.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function C(){}C.prototype=b.prototype;function E(Y,it,ct){this.props=Y,this.context=it,this.refs=y,this.updater=ct||A}var S=E.prototype=new C;S.constructor=E,x(S,b.prototype),S.isPureReactComponent=!0;var M=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function R(Y,it,ct,lt,mt,Ct){return ct=Ct.ref,{$$typeof:e,type:Y,key:it,ref:ct!==void 0?ct:null,props:Ct}}function D(Y,it){return R(Y.type,it,void 0,void 0,void 0,Y.props)}function U(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function F(Y){var it={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(ct){return it[ct]})}var P=/\/+/g;function N(Y,it){return typeof Y=="object"&&Y!==null&&Y.key!=null?F(""+Y.key):it.toString(36)}function k(){}function z(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(k,k):(Y.status="pending",Y.then(function(it){Y.status==="pending"&&(Y.status="fulfilled",Y.value=it)},function(it){Y.status==="pending"&&(Y.status="rejected",Y.reason=it)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function q(Y,it,ct,lt,mt){var Ct=typeof Y;(Ct==="undefined"||Ct==="boolean")&&(Y=null);var At=!1;if(Y===null)At=!0;else switch(Ct){case"bigint":case"string":case"number":At=!0;break;case"object":switch(Y.$$typeof){case e:case t:At=!0;break;case m:return At=Y._init,q(At(Y._payload),it,ct,lt,mt)}}if(At)return mt=mt(Y),At=lt===""?"."+N(Y,0):lt,M(mt)?(ct="",At!=null&&(ct=At.replace(P,"$&/")+"/"),q(mt,it,ct,"",function(Se){return Se})):mt!=null&&(U(mt)&&(mt=D(mt,ct+(mt.key==null||Y&&Y.key===mt.key?"":(""+mt.key).replace(P,"$&/")+"/")+At)),it.push(mt)),1;At=0;var Qt=lt===""?".":lt+":";if(M(Y))for(var Bt=0;Bt<Y.length;Bt++)lt=Y[Bt],Ct=Qt+N(lt,Bt),At+=q(lt,it,ct,Ct,mt);else if(Bt=p(Y),typeof Bt=="function")for(Y=Bt.call(Y),Bt=0;!(lt=Y.next()).done;)lt=lt.value,Ct=Qt+N(lt,Bt++),At+=q(lt,it,ct,Ct,mt);else if(Ct==="object"){if(typeof Y.then=="function")return q(z(Y),it,ct,lt,mt);throw it=String(Y),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return At}function j(Y,it,ct){if(Y==null)return Y;var lt=[],mt=0;return q(Y,lt,"","",function(Ct){return it.call(ct,Ct,mt++)}),lt}function Q(Y){if(Y._status===-1){var it=Y._result;it=it(),it.then(function(ct){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=ct)},function(ct){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=ct)}),Y._status===-1&&(Y._status=0,Y._result=it)}if(Y._status===1)return Y._result.default;throw Y._result}var tt=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function ot(){}return St.Children={map:j,forEach:function(Y,it,ct){j(Y,function(){it.apply(this,arguments)},ct)},count:function(Y){var it=0;return j(Y,function(){it++}),it},toArray:function(Y){return j(Y,function(it){return it})||[]},only:function(Y){if(!U(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},St.Component=b,St.Fragment=i,St.Profiler=a,St.PureComponent=E,St.StrictMode=s,St.Suspense=u,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,St.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return T.H.useMemoCache(Y)}},St.cache=function(Y){return function(){return Y.apply(null,arguments)}},St.cloneElement=function(Y,it,ct){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var lt=x({},Y.props),mt=Y.key,Ct=void 0;if(it!=null)for(At in it.ref!==void 0&&(Ct=void 0),it.key!==void 0&&(mt=""+it.key),it)!I.call(it,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&it.ref===void 0||(lt[At]=it[At]);var At=arguments.length-2;if(At===1)lt.children=ct;else if(1<At){for(var Qt=Array(At),Bt=0;Bt<At;Bt++)Qt[Bt]=arguments[Bt+2];lt.children=Qt}return R(Y.type,mt,void 0,void 0,Ct,lt)},St.createContext=function(Y){return Y={$$typeof:l,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:o,_context:Y},Y},St.createElement=function(Y,it,ct){var lt,mt={},Ct=null;if(it!=null)for(lt in it.key!==void 0&&(Ct=""+it.key),it)I.call(it,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(mt[lt]=it[lt]);var At=arguments.length-2;if(At===1)mt.children=ct;else if(1<At){for(var Qt=Array(At),Bt=0;Bt<At;Bt++)Qt[Bt]=arguments[Bt+2];mt.children=Qt}if(Y&&Y.defaultProps)for(lt in At=Y.defaultProps,At)mt[lt]===void 0&&(mt[lt]=At[lt]);return R(Y,Ct,void 0,void 0,null,mt)},St.createRef=function(){return{current:null}},St.forwardRef=function(Y){return{$$typeof:h,render:Y}},St.isValidElement=U,St.lazy=function(Y){return{$$typeof:m,_payload:{_status:-1,_result:Y},_init:Q}},St.memo=function(Y,it){return{$$typeof:f,type:Y,compare:it===void 0?null:it}},St.startTransition=function(Y){var it=T.T,ct={};T.T=ct;try{var lt=Y(),mt=T.S;mt!==null&&mt(ct,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(ot,tt)}catch(Ct){tt(Ct)}finally{T.T=it}},St.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},St.use=function(Y){return T.H.use(Y)},St.useActionState=function(Y,it,ct){return T.H.useActionState(Y,it,ct)},St.useCallback=function(Y,it){return T.H.useCallback(Y,it)},St.useContext=function(Y){return T.H.useContext(Y)},St.useDebugValue=function(){},St.useDeferredValue=function(Y,it){return T.H.useDeferredValue(Y,it)},St.useEffect=function(Y,it,ct){var lt=T.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return lt.useEffect(Y,it)},St.useId=function(){return T.H.useId()},St.useImperativeHandle=function(Y,it,ct){return T.H.useImperativeHandle(Y,it,ct)},St.useInsertionEffect=function(Y,it){return T.H.useInsertionEffect(Y,it)},St.useLayoutEffect=function(Y,it){return T.H.useLayoutEffect(Y,it)},St.useMemo=function(Y,it){return T.H.useMemo(Y,it)},St.useOptimistic=function(Y,it){return T.H.useOptimistic(Y,it)},St.useReducer=function(Y,it,ct){return T.H.useReducer(Y,it,ct)},St.useRef=function(Y){return T.H.useRef(Y)},St.useState=function(Y){return T.H.useState(Y)},St.useSyncExternalStore=function(Y,it,ct){return T.H.useSyncExternalStore(Y,it,ct)},St.useTransition=function(){return T.H.useTransition()},St.version="19.1.0",St}var E2;function kf(){return E2||(E2=1,Bh.exports=E3()),Bh.exports}var Z=kf();const T3=Pf(Z);var Uh={exports:{}},Tr={},Fh={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2;function D3(){return T2||(T2=1,function(e){function t(j,Q){var tt=j.length;j.push(Q);t:for(;0<tt;){var ot=tt-1>>>1,Y=j[ot];if(0<a(Y,Q))j[ot]=Q,j[tt]=Y,tt=ot;else break t}}function i(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var Q=j[0],tt=j.pop();if(tt!==Q){j[0]=tt;t:for(var ot=0,Y=j.length,it=Y>>>1;ot<it;){var ct=2*(ot+1)-1,lt=j[ct],mt=ct+1,Ct=j[mt];if(0>a(lt,tt))mt<Y&&0>a(Ct,lt)?(j[ot]=Ct,j[mt]=tt,ot=mt):(j[ot]=lt,j[ct]=tt,ot=ct);else if(mt<Y&&0>a(Ct,tt))j[ot]=Ct,j[mt]=tt,ot=mt;else break t}}return Q}function a(j,Q){var tt=j.sortIndex-Q.sortIndex;return tt!==0?tt:j.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();e.unstable_now=function(){return l.now()-h}}var u=[],f=[],m=1,g=null,p=3,A=!1,x=!1,y=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function M(j){for(var Q=i(f);Q!==null;){if(Q.callback===null)s(f);else if(Q.startTime<=j)s(f),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=i(f)}}function T(j){if(y=!1,M(j),!x)if(i(u)!==null)x=!0,I||(I=!0,N());else{var Q=i(f);Q!==null&&q(T,Q.startTime-j)}}var I=!1,R=-1,D=5,U=-1;function F(){return b?!0:!(e.unstable_now()-U<D)}function P(){if(b=!1,I){var j=e.unstable_now();U=j;var Q=!0;try{t:{x=!1,y&&(y=!1,E(R),R=-1),A=!0;var tt=p;try{e:{for(M(j),g=i(u);g!==null&&!(g.expirationTime>j&&F());){var ot=g.callback;if(typeof ot=="function"){g.callback=null,p=g.priorityLevel;var Y=ot(g.expirationTime<=j);if(j=e.unstable_now(),typeof Y=="function"){g.callback=Y,M(j),Q=!0;break e}g===i(u)&&s(u),M(j)}else s(u);g=i(u)}if(g!==null)Q=!0;else{var it=i(f);it!==null&&q(T,it.startTime-j),Q=!1}}break t}finally{g=null,p=tt,A=!1}Q=void 0}}finally{Q?N():I=!1}}}var N;if(typeof S=="function")N=function(){S(P)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,z=k.port2;k.port1.onmessage=P,N=function(){z.postMessage(null)}}else N=function(){C(P,0)};function q(j,Q){R=C(function(){j(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(j){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var tt=p;p=Q;try{return j()}finally{p=tt}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var tt=p;p=j;try{return Q()}finally{p=tt}},e.unstable_scheduleCallback=function(j,Q,tt){var ot=e.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?ot+tt:ot):tt=ot,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=tt+Y,j={id:m++,callback:Q,priorityLevel:j,startTime:tt,expirationTime:Y,sortIndex:-1},tt>ot?(j.sortIndex=tt,t(f,j),i(u)===null&&j===i(f)&&(y?(E(R),R=-1):y=!0,q(T,tt-ot))):(j.sortIndex=Y,t(u,j),x||A||(x=!0,I||(I=!0,N()))),j},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(j){var Q=p;return function(){var tt=p;p=Q;try{return j.apply(this,arguments)}finally{p=tt}}}}(Nh)),Nh}var D2;function V3(){return D2||(D2=1,Fh.exports=D3()),Fh.exports}var Lh={exports:{}},Be={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function R3(){if(V2)return Be;V2=1;var e=kf();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(u,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:u,containerInfo:f,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Be.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Be.createPortal=function(u,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(u,f,null,m)},Be.flushSync=function(u){var f=l.T,m=s.p;try{if(l.T=null,s.p=2,u)return u()}finally{l.T=f,s.p=m,s.d.f()}},Be.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(u,f))},Be.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},Be.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var m=f.as,g=h(m,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?s.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:A}):m==="script"&&s.d.X(u,{crossOrigin:g,integrity:p,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Be.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=h(f.as,f.crossOrigin);s.d.M(u,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(u)},Be.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=h(m,f.crossOrigin);s.d.L(u,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Be.preloadModule=function(u,f){if(typeof u=="string")if(f){var m=h(f.as,f.crossOrigin);s.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(u)},Be.requestFormReset=function(u){s.d.r(u)},Be.unstable_batchedUpdates=function(u,f){return u(f)},Be.useFormState=function(u,f,m){return l.H.useFormState(u,f,m)},Be.useFormStatus=function(){return l.H.useHostTransitionStatus()},Be.version="19.1.0",Be}var R2;function I3(){if(R2)return Lh.exports;R2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lh.exports=R3(),Lh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function B3(){if(I2)return Tr;I2=1;var e=V3(),t=kf(),i=I3();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var r=n,c=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(c=r.return),n=r.return;while(n)}return r.tag===3?c:null}function l(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(s(188))}function u(n){var r=n.alternate;if(!r){if(r=o(n),r===null)throw Error(s(188));return r!==n?null:n}for(var c=n,d=r;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(d=v.return,d!==null){c=d;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return h(v),n;if(w===d)return h(v),r;w=w.sibling}throw Error(s(188))}if(c.return!==d.return)c=v,d=w;else{for(var V=!1,L=v.child;L;){if(L===c){V=!0,c=v,d=w;break}if(L===d){V=!0,d=v,c=w;break}L=L.sibling}if(!V){for(L=w.child;L;){if(L===c){V=!0,c=w,d=v;break}if(L===d){V=!0,d=w,c=v;break}L=L.sibling}if(!V)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?n:r}function f(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=f(n),r!==null)return r;n=n.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),S=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function N(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var k=Symbol.for("react.client.reference");function z(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===k?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList";case U:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case A:return"Portal";case S:return(n.displayName||"Context")+".Provider";case E:return(n._context.displayName||"Context")+".Consumer";case M:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:z(n.type)||"Memo";case D:r=n._payload,n=n._init;try{return z(n(r))}catch{}}return null}var q=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},ot=[],Y=-1;function it(n){return{current:n}}function ct(n){0>Y||(n.current=ot[Y],ot[Y]=null,Y--)}function lt(n,r){Y++,ot[Y]=n.current,n.current=r}var mt=it(null),Ct=it(null),At=it(null),Qt=it(null);function Bt(n,r){switch(lt(At,r),lt(Ct,n),lt(mt,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Jm(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Jm(r),n=_m(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ct(mt),lt(mt,n)}function Se(){ct(mt),ct(Ct),ct(At)}function pe(n){n.memoizedState!==null&&lt(Qt,n);var r=mt.current,c=_m(r,n.type);r!==c&&(lt(Ct,n),lt(mt,c))}function se(n){Ct.current===n&&(ct(mt),ct(Ct)),Qt.current===n&&(ct(Qt),wr._currentValue=tt)}var Xt=Object.prototype.hasOwnProperty,Oi=e.unstable_scheduleCallback,xs=e.unstable_cancelCallback,R0=e.unstable_shouldYield,xc=e.unstable_requestPaint,oi=e.unstable_now,I0=e.unstable_getCurrentPriorityLevel,uo=e.unstable_ImmediatePriority,B0=e.unstable_UserBlockingPriority,ho=e.unstable_NormalPriority,n5=e.unstable_LowPriority,U0=e.unstable_IdlePriority,s5=e.log,a5=e.unstable_setDisableYieldValue,Va=null,Ze=null;function cn(n){if(typeof s5=="function"&&a5(n),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Va,n)}catch{}}var We=Math.clz32?Math.clz32:l5,r5=Math.log,o5=Math.LN2;function l5(n){return n>>>=0,n===0?32:31-(r5(n)/o5|0)|0}var fo=256,mo=4194304;function Gn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function go(n,r,c){var d=n.pendingLanes;if(d===0)return 0;var v=0,w=n.suspendedLanes,V=n.pingedLanes;n=n.warmLanes;var L=d&134217727;return L!==0?(d=L&~w,d!==0?v=Gn(d):(V&=L,V!==0?v=Gn(V):c||(c=L&~n,c!==0&&(v=Gn(c))))):(L=d&~w,L!==0?v=Gn(L):V!==0?v=Gn(V):c||(c=d&~n,c!==0&&(v=Gn(c)))),v===0?0:r!==0&&r!==v&&(r&w)===0&&(w=v&-v,c=r&-r,w>=c||w===32&&(c&4194048)!==0)?r:v}function Ra(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function c5(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F0(){var n=fo;return fo<<=1,(fo&4194048)===0&&(fo=256),n}function N0(){var n=mo;return mo<<=1,(mo&62914560)===0&&(mo=4194304),n}function yc(n){for(var r=[],c=0;31>c;c++)r.push(n);return r}function Ia(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function u5(n,r,c,d,v,w){var V=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var L=n.entanglements,G=n.expirationTimes,J=n.hiddenUpdates;for(c=V&~c;0<c;){var nt=31-We(c),at=1<<nt;L[nt]=0,G[nt]=-1;var _=J[nt];if(_!==null)for(J[nt]=null,nt=0;nt<_.length;nt++){var et=_[nt];et!==null&&(et.lane&=-536870913)}c&=~at}d!==0&&L0(n,d,0),w!==0&&v===0&&n.tag!==0&&(n.suspendedLanes|=w&~(V&~r))}function L0(n,r,c){n.pendingLanes|=r,n.suspendedLanes&=~r;var d=31-We(r);n.entangledLanes|=r,n.entanglements[d]=n.entanglements[d]|1073741824|c&4194090}function O0(n,r){var c=n.entangledLanes|=r;for(n=n.entanglements;c;){var d=31-We(c),v=1<<d;v&r|n[d]&r&&(n[d]|=r),c&=~v}}function wc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function bc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function P0(){var n=Q.p;return n!==0?n:(n=window.event,n===void 0?32:A2(n.type))}function h5(n,r){var c=Q.p;try{return Q.p=n,r()}finally{Q.p=c}}var un=Math.random().toString(36).slice(2),Re="__reactFiber$"+un,je="__reactProps$"+un,ys="__reactContainer$"+un,Cc="__reactEvents$"+un,f5="__reactListeners$"+un,d5="__reactHandles$"+un,k0="__reactResources$"+un,Ba="__reactMarker$"+un;function Sc(n){delete n[Re],delete n[je],delete n[Cc],delete n[f5],delete n[d5]}function ws(n){var r=n[Re];if(r)return r;for(var c=n.parentNode;c;){if(r=c[ys]||c[Re]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(n=i2(n);n!==null;){if(c=n[Re])return c;n=i2(n)}return r}n=c,c=n.parentNode}return null}function bs(n){if(n=n[Re]||n[ys]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Ua(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Cs(n){var r=n[k0];return r||(r=n[k0]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ae(n){n[Ba]=!0}var z0=new Set,j0={};function Hn(n,r){Ss(n,r),Ss(n+"Capture",r)}function Ss(n,r){for(j0[n]=r,n=0;n<r.length;n++)z0.add(r[n])}var m5=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Y0={},G0={};function g5(n){return Xt.call(G0,n)?!0:Xt.call(Y0,n)?!1:m5.test(n)?G0[n]=!0:(Y0[n]=!0,!1)}function po(n,r,c){if(g5(r))if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+c)}}function Ao(n,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+c)}}function Pi(n,r,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(r,c,""+d)}}var Mc,H0;function Ms(n){if(Mc===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Mc=r&&r[1]||"",H0=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mc+n+H0}var Ec=!1;function Tc(n,r){if(!n||Ec)return"";Ec=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var at=function(){throw Error()};if(Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(et){var _=et}Reflect.construct(n,[],at)}else{try{at.call()}catch(et){_=et}n.call(at.prototype)}}else{try{throw Error()}catch(et){_=et}(at=n())&&typeof at.catch=="function"&&at.catch(function(){})}}catch(et){if(et&&_&&typeof et.stack=="string")return[et.stack,_.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),V=w[0],L=w[1];if(V&&L){var G=V.split(`
`),J=L.split(`
`);for(v=d=0;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;for(;v<J.length&&!J[v].includes("DetermineComponentFrameRoot");)v++;if(d===G.length||v===J.length)for(d=G.length-1,v=J.length-1;1<=d&&0<=v&&G[d]!==J[v];)v--;for(;1<=d&&0<=v;d--,v--)if(G[d]!==J[v]){if(d!==1||v!==1)do if(d--,v--,0>v||G[d]!==J[v]){var nt=`
`+G[d].replace(" at new "," at ");return n.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",n.displayName)),nt}while(1<=d&&0<=v);break}}}finally{Ec=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?Ms(c):""}function p5(n){switch(n.tag){case 26:case 27:case 5:return Ms(n.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 15:return Tc(n.type,!1);case 11:return Tc(n.type.render,!1);case 1:return Tc(n.type,!0);case 31:return Ms("Activity");default:return""}}function K0(n){try{var r="";do r+=p5(n),n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function li(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function q0(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function A5(n){var r=q0(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),d=""+n[r];if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,w=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return v.call(this)},set:function(V){d=""+V,w.call(this,V)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(V){d=""+V},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function vo(n){n._valueTracker||(n._valueTracker=A5(n))}function Q0(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return n&&(d=q0(n)?n.checked?"true":"false":n.value),n=d,n!==c?(r.setValue(n),!0):!1}function xo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var v5=/[\n"\\]/g;function ci(n){return n.replace(v5,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Dc(n,r,c,d,v,w,V,L){n.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?n.type=V:n.removeAttribute("type"),r!=null?V==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+li(r)):n.value!==""+li(r)&&(n.value=""+li(r)):V!=="submit"&&V!=="reset"||n.removeAttribute("value"),r!=null?Vc(n,V,li(r)):c!=null?Vc(n,V,li(c)):d!=null&&n.removeAttribute("value"),v==null&&w!=null&&(n.defaultChecked=!!w),v!=null&&(n.checked=v&&typeof v!="function"&&typeof v!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?n.name=""+li(L):n.removeAttribute("name")}function X0(n,r,c,d,v,w,V,L){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),r!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||r!=null))return;c=c!=null?""+li(c):"",r=r!=null?""+li(r):c,L||r===n.value||(n.value=r),n.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=L?n.checked:!!d,n.defaultChecked=!!d,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(n.name=V)}function Vc(n,r,c){r==="number"&&xo(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function Es(n,r,c,d){if(n=n.options,r){r={};for(var v=0;v<c.length;v++)r["$"+c[v]]=!0;for(c=0;c<n.length;c++)v=r.hasOwnProperty("$"+n[c].value),n[c].selected!==v&&(n[c].selected=v),v&&d&&(n[c].defaultSelected=!0)}else{for(c=""+li(c),r=null,v=0;v<n.length;v++){if(n[v].value===c){n[v].selected=!0,d&&(n[v].defaultSelected=!0);return}r!==null||n[v].disabled||(r=n[v])}r!==null&&(r.selected=!0)}}function Z0(n,r,c){if(r!=null&&(r=""+li(r),r!==n.value&&(n.value=r),c==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=c!=null?""+li(c):""}function W0(n,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(s(92));if(q(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=li(r),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d)}function Ts(n,r){if(r){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=r;return}}n.textContent=r}var x5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function J0(n,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":d?n.setProperty(r,c):typeof c!="number"||c===0||x5.has(r)?r==="float"?n.cssFloat=c:n[r]=(""+c).trim():n[r]=c+"px"}function _0(n,r,c){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&c[v]!==d&&J0(n,v,d)}else for(var w in r)r.hasOwnProperty(w)&&J0(n,w,r[w])}function Rc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),w5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(n){return w5.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ic=null;function Bc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ds=null,Vs=null;function $0(n){var r=bs(n);if(r&&(n=r.stateNode)){var c=n[je]||null;t:switch(n=r.stateNode,r.type){case"input":if(Dc(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ci(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==n&&d.form===n.form){var v=d[je]||null;if(!v)throw Error(s(90));Dc(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===n.form&&Q0(d)}break t;case"textarea":Z0(n,c.value,c.defaultValue);break t;case"select":r=c.value,r!=null&&Es(n,!!c.multiple,r,!1)}}}var Uc=!1;function td(n,r,c){if(Uc)return n(r,c);Uc=!0;try{var d=n(r);return d}finally{if(Uc=!1,(Ds!==null||Vs!==null)&&(al(),Ds&&(r=Ds,n=Vs,Vs=Ds=null,$0(r),n)))for(r=0;r<n.length;r++)$0(n[r])}}function Fa(n,r){var c=n.stateNode;if(c===null)return null;var d=c[je]||null;if(d===null)return null;c=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break t;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(s(231,r,typeof c));return c}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fc=!1;if(ki)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{Fc=!1}var hn=null,Nc=null,wo=null;function ed(){if(wo)return wo;var n,r=Nc,c=r.length,d,v="value"in hn?hn.value:hn.textContent,w=v.length;for(n=0;n<c&&r[n]===v[n];n++);var V=c-n;for(d=1;d<=V&&r[c-d]===v[w-d];d++);return wo=v.slice(n,1<d?1-d:void 0)}function bo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Co(){return!0}function id(){return!1}function Ye(n){function r(c,d,v,w,V){this._reactName=c,this._targetInst=v,this.type=d,this.nativeEvent=w,this.target=V,this.currentTarget=null;for(var L in n)n.hasOwnProperty(L)&&(c=n[L],this[L]=c?c(w):w[L]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Co:id,this.isPropagationStopped=id,this}return m(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),r}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},So=Ye(Kn),La=m({},Kn,{view:0,detail:0}),b5=Ye(La),Lc,Oc,Oa,Mo=m({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Oa&&(Oa&&n.type==="mousemove"?(Lc=n.screenX-Oa.screenX,Oc=n.screenY-Oa.screenY):Oc=Lc=0,Oa=n),Lc)},movementY:function(n){return"movementY"in n?n.movementY:Oc}}),nd=Ye(Mo),C5=m({},Mo,{dataTransfer:0}),S5=Ye(C5),M5=m({},La,{relatedTarget:0}),Pc=Ye(M5),E5=m({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),T5=Ye(E5),D5=m({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),V5=Ye(D5),R5=m({},Kn,{data:0}),sd=Ye(R5),I5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F5(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=U5[n])?!!r[n]:!1}function kc(){return F5}var N5=m({},La,{key:function(n){if(n.key){var r=I5[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=bo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?B5[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(n){return n.type==="keypress"?bo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),L5=Ye(N5),O5=m({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=Ye(O5),P5=m({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),k5=Ye(P5),z5=m({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),j5=Ye(z5),Y5=m({},Mo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),G5=Ye(Y5),H5=m({},Kn,{newState:0,oldState:0}),K5=Ye(H5),q5=[9,13,27,32],zc=ki&&"CompositionEvent"in window,Pa=null;ki&&"documentMode"in document&&(Pa=document.documentMode);var Q5=ki&&"TextEvent"in window&&!Pa,rd=ki&&(!zc||Pa&&8<Pa&&11>=Pa),od=" ",ld=!1;function cd(n,r){switch(n){case"keyup":return q5.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ud(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Rs=!1;function X5(n,r){switch(n){case"compositionend":return ud(r);case"keypress":return r.which!==32?null:(ld=!0,od);case"textInput":return n=r.data,n===od&&ld?null:n;default:return null}}function Z5(n,r){if(Rs)return n==="compositionend"||!zc&&cd(n,r)?(n=ed(),wo=Nc=hn=null,Rs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rd&&r.locale!=="ko"?null:r.data;default:return null}}var W5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!W5[n.type]:r==="textarea"}function fd(n,r,c,d){Ds?Vs?Vs.push(d):Vs=[d]:Ds=d,r=hl(r,"onChange"),0<r.length&&(c=new So("onChange","change",null,c,d),n.push({event:c,listeners:r}))}var ka=null,za=null;function J5(n){qm(n,0)}function Eo(n){var r=Ua(n);if(Q0(r))return n}function dd(n,r){if(n==="change")return r}var md=!1;if(ki){var jc;if(ki){var Yc="oninput"in document;if(!Yc){var gd=document.createElement("div");gd.setAttribute("oninput","return;"),Yc=typeof gd.oninput=="function"}jc=Yc}else jc=!1;md=jc&&(!document.documentMode||9<document.documentMode)}function pd(){ka&&(ka.detachEvent("onpropertychange",Ad),za=ka=null)}function Ad(n){if(n.propertyName==="value"&&Eo(za)){var r=[];fd(r,za,n,Bc(n)),td(J5,r)}}function _5(n,r,c){n==="focusin"?(pd(),ka=r,za=c,ka.attachEvent("onpropertychange",Ad)):n==="focusout"&&pd()}function $5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Eo(za)}function t4(n,r){if(n==="click")return Eo(r)}function e4(n,r){if(n==="input"||n==="change")return Eo(r)}function i4(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Je=typeof Object.is=="function"?Object.is:i4;function ja(n,r){if(Je(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var c=Object.keys(n),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var v=c[d];if(!Xt.call(r,v)||!Je(n[v],r[v]))return!1}return!0}function vd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xd(n,r){var c=vd(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=r&&d>=r)return{node:c,offset:r-n};n=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=vd(c)}}function yd(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?yd(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function wd(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=xo(n.document);r instanceof n.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)n=r.contentWindow;else break;r=xo(n.document)}return r}function Gc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var n4=ki&&"documentMode"in document&&11>=document.documentMode,Is=null,Hc=null,Ya=null,Kc=!1;function bd(n,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Kc||Is==null||Is!==xo(d)||(d=Is,"selectionStart"in d&&Gc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ya&&ja(Ya,d)||(Ya=d,d=hl(Hc,"onSelect"),0<d.length&&(r=new So("onSelect","select",null,r,c),n.push({event:r,listeners:d}),r.target=Is)))}function qn(n,r){var c={};return c[n.toLowerCase()]=r.toLowerCase(),c["Webkit"+n]="webkit"+r,c["Moz"+n]="moz"+r,c}var Bs={animationend:qn("Animation","AnimationEnd"),animationiteration:qn("Animation","AnimationIteration"),animationstart:qn("Animation","AnimationStart"),transitionrun:qn("Transition","TransitionRun"),transitionstart:qn("Transition","TransitionStart"),transitioncancel:qn("Transition","TransitionCancel"),transitionend:qn("Transition","TransitionEnd")},qc={},Cd={};ki&&(Cd=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Qn(n){if(qc[n])return qc[n];if(!Bs[n])return n;var r=Bs[n],c;for(c in r)if(r.hasOwnProperty(c)&&c in Cd)return qc[n]=r[c];return n}var Sd=Qn("animationend"),Md=Qn("animationiteration"),Ed=Qn("animationstart"),s4=Qn("transitionrun"),a4=Qn("transitionstart"),r4=Qn("transitioncancel"),Td=Qn("transitionend"),Dd=new Map,Qc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qc.push("scrollEnd");function yi(n,r){Dd.set(n,r),Hn(r,[n])}var Vd=new WeakMap;function ui(n,r){if(typeof n=="object"&&n!==null){var c=Vd.get(n);return c!==void 0?c:(r={value:n,source:r,stack:K0(r)},Vd.set(n,r),r)}return{value:n,source:r,stack:K0(r)}}var hi=[],Us=0,Xc=0;function To(){for(var n=Us,r=Xc=Us=0;r<n;){var c=hi[r];hi[r++]=null;var d=hi[r];hi[r++]=null;var v=hi[r];hi[r++]=null;var w=hi[r];if(hi[r++]=null,d!==null&&v!==null){var V=d.pending;V===null?v.next=v:(v.next=V.next,V.next=v),d.pending=v}w!==0&&Rd(c,v,w)}}function Do(n,r,c,d){hi[Us++]=n,hi[Us++]=r,hi[Us++]=c,hi[Us++]=d,Xc|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function Zc(n,r,c,d){return Do(n,r,c,d),Vo(n)}function Fs(n,r){return Do(n,null,null,r),Vo(n)}function Rd(n,r,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var v=!1,w=n.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(v=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,v&&r!==null&&(v=31-We(c),n=w.hiddenUpdates,d=n[v],d===null?n[v]=[r]:d.push(r),r.lane=c|536870912),w):null}function Vo(n){if(50<dr)throw dr=0,eh=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ns={};function o4(n,r,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _e(n,r,c,d){return new o4(n,r,c,d)}function Wc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zi(n,r){var c=n.alternate;return c===null?(c=_e(n.tag,r,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=r,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,r=n.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function Id(n,r){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,r=c.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Ro(n,r,c,d,v,w){var V=0;if(d=n,typeof n=="function")Wc(n)&&(V=1);else if(typeof n=="string")V=c3(n,c,mt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case U:return n=_e(31,c,r,v),n.elementType=U,n.lanes=w,n;case x:return Xn(c.children,v,w,r);case y:V=8,v|=24;break;case b:return n=_e(12,c,r,v|2),n.elementType=b,n.lanes=w,n;case T:return n=_e(13,c,r,v),n.elementType=T,n.lanes=w,n;case I:return n=_e(19,c,r,v),n.elementType=I,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:case S:V=10;break t;case E:V=9;break t;case M:V=11;break t;case R:V=14;break t;case D:V=16,d=null;break t}V=29,c=Error(s(130,n===null?"null":typeof n,"")),d=null}return r=_e(V,c,r,v),r.elementType=n,r.type=d,r.lanes=w,r}function Xn(n,r,c,d){return n=_e(7,n,d,r),n.lanes=c,n}function Jc(n,r,c){return n=_e(6,n,null,r),n.lanes=c,n}function _c(n,r,c){return r=_e(4,n.children!==null?n.children:[],n.key,r),r.lanes=c,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Ls=[],Os=0,Io=null,Bo=0,fi=[],di=0,Zn=null,ji=1,Yi="";function Wn(n,r){Ls[Os++]=Bo,Ls[Os++]=Io,Io=n,Bo=r}function Bd(n,r,c){fi[di++]=ji,fi[di++]=Yi,fi[di++]=Zn,Zn=n;var d=ji;n=Yi;var v=32-We(d)-1;d&=~(1<<v),c+=1;var w=32-We(r)+v;if(30<w){var V=v-v%5;w=(d&(1<<V)-1).toString(32),d>>=V,v-=V,ji=1<<32-We(r)+v|c<<v|d,Yi=w+n}else ji=1<<w|c<<v|d,Yi=n}function $c(n){n.return!==null&&(Wn(n,1),Bd(n,1,0))}function tu(n){for(;n===Io;)Io=Ls[--Os],Ls[Os]=null,Bo=Ls[--Os],Ls[Os]=null;for(;n===Zn;)Zn=fi[--di],fi[di]=null,Yi=fi[--di],fi[di]=null,ji=fi[--di],fi[di]=null}var Le=null,ae=null,Ot=!1,Jn=null,Ei=!1,eu=Error(s(519));function _n(n){var r=Error(s(418,""));throw Ka(ui(r,n)),eu}function Ud(n){var r=n.stateNode,c=n.type,d=n.memoizedProps;switch(r[Re]=n,r[je]=d,c){case"dialog":Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":case"embed":Rt("load",r);break;case"video":case"audio":for(c=0;c<gr.length;c++)Rt(gr[c],r);break;case"source":Rt("error",r);break;case"img":case"image":case"link":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"input":Rt("invalid",r),X0(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),vo(r);break;case"select":Rt("invalid",r);break;case"textarea":Rt("invalid",r),W0(r,d.value,d.defaultValue,d.children),vo(r)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||Wm(r.textContent,c)?(d.popover!=null&&(Rt("beforetoggle",r),Rt("toggle",r)),d.onScroll!=null&&Rt("scroll",r),d.onScrollEnd!=null&&Rt("scrollend",r),d.onClick!=null&&(r.onclick=fl),r=!0):r=!1,r||_n(n)}function Fd(n){for(Le=n.return;Le;)switch(Le.tag){case 5:case 13:Ei=!1;return;case 27:case 3:Ei=!0;return;default:Le=Le.return}}function Ga(n){if(n!==Le)return!1;if(!Ot)return Fd(n),Ot=!0,!1;var r=n.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||Ah(n.type,n.memoizedProps)),c=!c),c&&ae&&_n(n),Fd(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));t:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(c=n.data,c==="/$"){if(r===0){ae=bi(n.nextSibling);break t}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++;n=n.nextSibling}ae=null}}else r===27?(r=ae,Tn(n.type)?(n=wh,wh=null,ae=n):ae=r):ae=Le?bi(n.stateNode.nextSibling):null;return!0}function Ha(){ae=Le=null,Ot=!1}function Nd(){var n=Jn;return n!==null&&(Ke===null?Ke=n:Ke.push.apply(Ke,n),Jn=null),n}function Ka(n){Jn===null?Jn=[n]:Jn.push(n)}var iu=it(null),$n=null,Gi=null;function fn(n,r,c){lt(iu,r._currentValue),r._currentValue=c}function Hi(n){n._currentValue=iu.current,ct(iu)}function nu(n,r,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===c)break;n=n.return}}function su(n,r,c,d){var v=n.child;for(v!==null&&(v.return=n);v!==null;){var w=v.dependencies;if(w!==null){var V=v.child;w=w.firstContext;t:for(;w!==null;){var L=w;w=v;for(var G=0;G<r.length;G++)if(L.context===r[G]){w.lanes|=c,L=w.alternate,L!==null&&(L.lanes|=c),nu(w.return,c,n),d||(V=null);break t}w=L.next}}else if(v.tag===18){if(V=v.return,V===null)throw Error(s(341));V.lanes|=c,w=V.alternate,w!==null&&(w.lanes|=c),nu(V,c,n),V=null}else V=v.child;if(V!==null)V.return=v;else for(V=v;V!==null;){if(V===n){V=null;break}if(v=V.sibling,v!==null){v.return=V.return,V=v;break}V=V.return}v=V}}function qa(n,r,c,d){n=null;for(var v=r,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var V=v.alternate;if(V===null)throw Error(s(387));if(V=V.memoizedProps,V!==null){var L=v.type;Je(v.pendingProps.value,V.value)||(n!==null?n.push(L):n=[L])}}else if(v===Qt.current){if(V=v.alternate,V===null)throw Error(s(387));V.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(n!==null?n.push(wr):n=[wr])}v=v.return}n!==null&&su(r,n,c,d),r.flags|=262144}function Uo(n){for(n=n.firstContext;n!==null;){if(!Je(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ts(n){$n=n,Gi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ie(n){return Ld($n,n)}function Fo(n,r){return $n===null&&ts(n),Ld(n,r)}function Ld(n,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Gi===null){if(n===null)throw Error(s(308));Gi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Gi=Gi.next=r;return c}var l4=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){r.aborted=!0,n.forEach(function(c){return c()})}},c4=e.unstable_scheduleCallback,u4=e.unstable_NormalPriority,me={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function au(){return{controller:new l4,data:new Map,refCount:0}}function Qa(n){n.refCount--,n.refCount===0&&c4(u4,function(){n.controller.abort()})}var Xa=null,ru=0,Ps=0,ks=null;function h4(n,r){if(Xa===null){var c=Xa=[];ru=0,Ps=lh(),ks={status:"pending",value:void 0,then:function(d){c.push(d)}}}return ru++,r.then(Od,Od),r}function Od(){if(--ru===0&&Xa!==null){ks!==null&&(ks.status="fulfilled");var n=Xa;Xa=null,Ps=0,ks=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function f4(n,r){var c=[],d={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return n.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<c.length;v++)(0,c[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),d}var Pd=j.S;j.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&h4(n,r),Pd!==null&&Pd(n,r)};var es=it(null);function ou(){var n=es.current;return n!==null?n:Kt.pooledCache}function No(n,r){r===null?lt(es,es.current):lt(es,r.pool)}function kd(){var n=ou();return n===null?null:{parent:me._currentValue,pool:n}}var Za=Error(s(460)),zd=Error(s(474)),Lo=Error(s(542)),lu={then:function(){}};function jd(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Oo(){}function Yd(n,r,c){switch(c=n[c],c===void 0?n.push(r):c!==r&&(r.then(Oo,Oo),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Hd(n),n;default:if(typeof r.status=="string")r.then(Oo,Oo);else{if(n=Kt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Hd(n),n}throw Wa=r,Za}}var Wa=null;function Gd(){if(Wa===null)throw Error(s(459));var n=Wa;return Wa=null,n}function Hd(n){if(n===Za||n===Lo)throw Error(s(483))}var dn=!1;function cu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uu(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function mn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function gn(n,r,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Pt&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=Vo(n),Rd(n,null,c),r}return Do(n,d,r,c),Vo(n)}function Ja(n,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=n.pendingLanes,c|=d,r.lanes=c,O0(n,c)}}function hu(n,r){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var V={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=V:w=w.next=V,c=c.next}while(c!==null);w===null?v=w=r:w=w.next=r}else v=w=r;c={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=r:n.next=r,c.lastBaseUpdate=r}var fu=!1;function _a(){if(fu){var n=ks;if(n!==null)throw n}}function $a(n,r,c,d){fu=!1;var v=n.updateQueue;dn=!1;var w=v.firstBaseUpdate,V=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var G=L,J=G.next;G.next=null,V===null?w=J:V.next=J,V=G;var nt=n.alternate;nt!==null&&(nt=nt.updateQueue,L=nt.lastBaseUpdate,L!==V&&(L===null?nt.firstBaseUpdate=J:L.next=J,nt.lastBaseUpdate=G))}if(w!==null){var at=v.baseState;V=0,nt=J=G=null,L=w;do{var _=L.lane&-536870913,et=_!==L.lane;if(et?(Ut&_)===_:(d&_)===_){_!==0&&_===Ps&&(fu=!0),nt!==null&&(nt=nt.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var bt=n,vt=L;_=r;var Yt=c;switch(vt.tag){case 1:if(bt=vt.payload,typeof bt=="function"){at=bt.call(Yt,at,_);break t}at=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=vt.payload,_=typeof bt=="function"?bt.call(Yt,at,_):bt,_==null)break t;at=m({},at,_);break t;case 2:dn=!0}}_=L.callback,_!==null&&(n.flags|=64,et&&(n.flags|=8192),et=v.callbacks,et===null?v.callbacks=[_]:et.push(_))}else et={lane:_,tag:L.tag,payload:L.payload,callback:L.callback,next:null},nt===null?(J=nt=et,G=at):nt=nt.next=et,V|=_;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;et=L,L=et.next,et.next=null,v.lastBaseUpdate=et,v.shared.pending=null}}while(!0);nt===null&&(G=at),v.baseState=G,v.firstBaseUpdate=J,v.lastBaseUpdate=nt,w===null&&(v.shared.lanes=0),Cn|=V,n.lanes=V,n.memoizedState=at}}function Kd(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function qd(n,r){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)Kd(c[n],r)}var zs=it(null),Po=it(0);function Qd(n,r){n=Ji,lt(Po,n),lt(zs,r),Ji=n|r.baseLanes}function du(){lt(Po,Ji),lt(zs,zs.current)}function mu(){Ji=Po.current,ct(zs),ct(Po)}var pn=0,Tt=null,zt=null,fe=null,ko=!1,js=!1,is=!1,zo=0,tr=0,Ys=null,d4=0;function le(){throw Error(s(321))}function gu(n,r){if(r===null)return!1;for(var c=0;c<r.length&&c<n.length;c++)if(!Je(n[c],r[c]))return!1;return!0}function pu(n,r,c,d,v,w){return pn=w,Tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=n===null||n.memoizedState===null?R1:I1,is=!1,w=c(d,v),is=!1,js&&(w=Zd(r,c,d,v)),Xd(n),w}function Xd(n){j.H=qo;var r=zt!==null&&zt.next!==null;if(pn=0,fe=zt=Tt=null,ko=!1,tr=0,Ys=null,r)throw Error(s(300));n===null||ve||(n=n.dependencies,n!==null&&Uo(n)&&(ve=!0))}function Zd(n,r,c,d){Tt=n;var v=0;do{if(js&&(Ys=null),tr=0,js=!1,25<=v)throw Error(s(301));if(v+=1,fe=zt=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}j.H=y4,w=r(c,d)}while(js);return w}function m4(){var n=j.H,r=n.useState()[0];return r=typeof r.then=="function"?er(r):r,n=n.useState()[0],(zt!==null?zt.memoizedState:null)!==n&&(Tt.flags|=1024),r}function Au(){var n=zo!==0;return zo=0,n}function vu(n,r,c){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~c}function xu(n){if(ko){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ko=!1}pn=0,fe=zt=Tt=null,js=!1,tr=zo=0,Ys=null}function Ge(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?Tt.memoizedState=fe=n:fe=fe.next=n,fe}function de(){if(zt===null){var n=Tt.alternate;n=n!==null?n.memoizedState:null}else n=zt.next;var r=fe===null?Tt.memoizedState:fe.next;if(r!==null)fe=r,zt=n;else{if(n===null)throw Tt.alternate===null?Error(s(467)):Error(s(310));zt=n,n={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},fe===null?Tt.memoizedState=fe=n:fe=fe.next=n}return fe}function yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function er(n){var r=tr;return tr+=1,Ys===null&&(Ys=[]),n=Yd(Ys,n,r),r=Tt,(fe===null?r.memoizedState:fe.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?R1:I1),n}function jo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return er(n);if(n.$$typeof===S)return Ie(n)}throw Error(s(438,String(n)))}function wu(n){var r=null,c=Tt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=Tt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=yu(),Tt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(n),d=0;d<n;d++)c[d]=F;return r.index++,c}function Ki(n,r){return typeof r=="function"?r(n):r}function Yo(n){var r=de();return bu(r,zt,n)}function bu(n,r,c){var d=n.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var v=n.baseQueue,w=d.pending;if(w!==null){if(v!==null){var V=v.next;v.next=w.next,w.next=V}r.baseQueue=v=w,d.pending=null}if(w=n.baseState,v===null)n.memoizedState=w;else{r=v.next;var L=V=null,G=null,J=r,nt=!1;do{var at=J.lane&-536870913;if(at!==J.lane?(Ut&at)===at:(pn&at)===at){var _=J.revertLane;if(_===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),at===Ps&&(nt=!0);else if((pn&_)===_){J=J.next,_===Ps&&(nt=!0);continue}else at={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},G===null?(L=G=at,V=w):G=G.next=at,Tt.lanes|=_,Cn|=_;at=J.action,is&&c(w,at),w=J.hasEagerState?J.eagerState:c(w,at)}else _={lane:at,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},G===null?(L=G=_,V=w):G=G.next=_,Tt.lanes|=at,Cn|=at;J=J.next}while(J!==null&&J!==r);if(G===null?V=w:G.next=L,!Je(w,n.memoizedState)&&(ve=!0,nt&&(c=ks,c!==null)))throw c;n.memoizedState=w,n.baseState=V,n.baseQueue=G,d.lastRenderedState=w}return v===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Cu(n){var r=de(),c=r.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=n;var d=c.dispatch,v=c.pending,w=r.memoizedState;if(v!==null){c.pending=null;var V=v=v.next;do w=n(w,V.action),V=V.next;while(V!==v);Je(w,r.memoizedState)||(ve=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),c.lastRenderedState=w}return[w,d]}function Wd(n,r,c){var d=Tt,v=de(),w=Ot;if(w){if(c===void 0)throw Error(s(407));c=c()}else c=r();var V=!Je((zt||v).memoizedState,c);V&&(v.memoizedState=c,ve=!0),v=v.queue;var L=$d.bind(null,d,v,n);if(ir(2048,8,L,[n]),v.getSnapshot!==r||V||fe!==null&&fe.memoizedState.tag&1){if(d.flags|=2048,Gs(9,Go(),_d.bind(null,d,v,c,r),null),Kt===null)throw Error(s(349));w||(pn&124)!==0||Jd(d,r,c)}return c}function Jd(n,r,c){n.flags|=16384,n={getSnapshot:r,value:c},r=Tt.updateQueue,r===null?(r=yu(),Tt.updateQueue=r,r.stores=[n]):(c=r.stores,c===null?r.stores=[n]:c.push(n))}function _d(n,r,c,d){r.value=c,r.getSnapshot=d,t1(r)&&e1(n)}function $d(n,r,c){return c(function(){t1(r)&&e1(n)})}function t1(n){var r=n.getSnapshot;n=n.value;try{var c=r();return!Je(n,c)}catch{return!0}}function e1(n){var r=Fs(n,2);r!==null&&ni(r,n,2)}function Su(n){var r=Ge();if(typeof n=="function"){var c=n;if(n=c(),is){cn(!0);try{c()}finally{cn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:n},r}function i1(n,r,c,d){return n.baseState=c,bu(n,zt,typeof d=="function"?d:Ki)}function g4(n,r,c,d,v){if(Ko(n))throw Error(s(485));if(n=r.action,n!==null){var w={payload:v,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){w.listeners.push(V)}};j.T!==null?c(!0):w.isTransition=!1,d(w),c=r.pending,c===null?(w.next=r.pending=w,n1(r,w)):(w.next=c.next,r.pending=c.next=w)}}function n1(n,r){var c=r.action,d=r.payload,v=n.state;if(r.isTransition){var w=j.T,V={};j.T=V;try{var L=c(v,d),G=j.S;G!==null&&G(V,L),s1(n,r,L)}catch(J){Mu(n,r,J)}finally{j.T=w}}else try{w=c(v,d),s1(n,r,w)}catch(J){Mu(n,r,J)}}function s1(n,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){a1(n,r,d)},function(d){return Mu(n,r,d)}):a1(n,r,c)}function a1(n,r,c){r.status="fulfilled",r.value=c,r1(r),n.state=c,r=n.pending,r!==null&&(c=r.next,c===r?n.pending=null:(c=c.next,r.next=c,n1(n,c)))}function Mu(n,r,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,r1(r),r=r.next;while(r!==d)}n.action=null}function r1(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function o1(n,r){return r}function l1(n,r){if(Ot){var c=Kt.formState;if(c!==null){t:{var d=Tt;if(Ot){if(ae){e:{for(var v=ae,w=Ei;v.nodeType!==8;){if(!w){v=null;break e}if(v=bi(v.nextSibling),v===null){v=null;break e}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){ae=bi(v.nextSibling),d=v.data==="F!";break t}}_n(d)}d=!1}d&&(r=c[0])}}return c=Ge(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o1,lastRenderedState:r},c.queue=d,c=T1.bind(null,Tt,d),d.dispatch=c,d=Su(!1),w=Ru.bind(null,Tt,!1,d.queue),d=Ge(),v={state:r,dispatch:null,action:n,pending:null},d.queue=v,c=g4.bind(null,Tt,v,w,c),v.dispatch=c,d.memoizedState=n,[r,c,!1]}function c1(n){var r=de();return u1(r,zt,n)}function u1(n,r,c){if(r=bu(n,r,o1)[0],n=Yo(Ki)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=er(r)}catch(V){throw V===Za?Lo:V}else d=r;r=de();var v=r.queue,w=v.dispatch;return c!==r.memoizedState&&(Tt.flags|=2048,Gs(9,Go(),p4.bind(null,v,c),null)),[d,w,n]}function p4(n,r){n.action=r}function h1(n){var r=de(),c=zt;if(c!==null)return u1(r,c,n);de(),r=r.memoizedState,c=de();var d=c.queue.dispatch;return c.memoizedState=n,[r,d,!1]}function Gs(n,r,c,d){return n={tag:n,create:c,deps:d,inst:r,next:null},r=Tt.updateQueue,r===null&&(r=yu(),Tt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,r.lastEffect=n),n}function Go(){return{destroy:void 0,resource:void 0}}function f1(){return de().memoizedState}function Ho(n,r,c,d){var v=Ge();d=d===void 0?null:d,Tt.flags|=n,v.memoizedState=Gs(1|r,Go(),c,d)}function ir(n,r,c,d){var v=de();d=d===void 0?null:d;var w=v.memoizedState.inst;zt!==null&&d!==null&&gu(d,zt.memoizedState.deps)?v.memoizedState=Gs(r,w,c,d):(Tt.flags|=n,v.memoizedState=Gs(1|r,w,c,d))}function d1(n,r){Ho(8390656,8,n,r)}function m1(n,r){ir(2048,8,n,r)}function g1(n,r){return ir(4,2,n,r)}function p1(n,r){return ir(4,4,n,r)}function A1(n,r){if(typeof r=="function"){n=n();var c=r(n);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function v1(n,r,c){c=c!=null?c.concat([n]):null,ir(4,4,A1.bind(null,r,n),c)}function Eu(){}function x1(n,r){var c=de();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&gu(r,d[1])?d[0]:(c.memoizedState=[n,r],n)}function y1(n,r){var c=de();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&gu(r,d[1]))return d[0];if(d=n(),is){cn(!0);try{n()}finally{cn(!1)}}return c.memoizedState=[d,r],d}function Tu(n,r,c){return c===void 0||(pn&1073741824)!==0?n.memoizedState=r:(n.memoizedState=c,n=Cm(),Tt.lanes|=n,Cn|=n,c)}function w1(n,r,c,d){return Je(c,r)?c:zs.current!==null?(n=Tu(n,c,d),Je(n,r)||(ve=!0),n):(pn&42)===0?(ve=!0,n.memoizedState=c):(n=Cm(),Tt.lanes|=n,Cn|=n,r)}function b1(n,r,c,d,v){var w=Q.p;Q.p=w!==0&&8>w?w:8;var V=j.T,L={};j.T=L,Ru(n,!1,r,c);try{var G=v(),J=j.S;if(J!==null&&J(L,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var nt=f4(G,d);nr(n,r,nt,ii(n))}else nr(n,r,d,ii(n))}catch(at){nr(n,r,{then:function(){},status:"rejected",reason:at},ii())}finally{Q.p=w,j.T=V}}function A4(){}function Du(n,r,c,d){if(n.tag!==5)throw Error(s(476));var v=C1(n).queue;b1(n,v,r,tt,c===null?A4:function(){return S1(n),c(d)})}function C1(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:tt},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:c},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function S1(n){var r=C1(n).next.queue;nr(n,r,{},ii())}function Vu(){return Ie(wr)}function M1(){return de().memoizedState}function E1(){return de().memoizedState}function v4(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var c=ii();n=mn(c);var d=gn(r,n,c);d!==null&&(ni(d,r,c),Ja(d,r,c)),r={cache:au()},n.payload=r;return}r=r.return}}function x4(n,r,c){var d=ii();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Ko(n)?D1(r,c):(c=Zc(n,r,c,d),c!==null&&(ni(c,n,d),V1(c,r,d)))}function T1(n,r,c){var d=ii();nr(n,r,c,d)}function nr(n,r,c,d){var v={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ko(n))D1(r,v);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var V=r.lastRenderedState,L=w(V,c);if(v.hasEagerState=!0,v.eagerState=L,Je(L,V))return Do(n,r,v,0),Kt===null&&To(),!1}catch{}finally{}if(c=Zc(n,r,v,d),c!==null)return ni(c,n,d),V1(c,r,d),!0}return!1}function Ru(n,r,c,d){if(d={lane:2,revertLane:lh(),action:d,hasEagerState:!1,eagerState:null,next:null},Ko(n)){if(r)throw Error(s(479))}else r=Zc(n,c,d,2),r!==null&&ni(r,n,2)}function Ko(n){var r=n.alternate;return n===Tt||r!==null&&r===Tt}function D1(n,r){js=ko=!0;var c=n.pending;c===null?r.next=r:(r.next=c.next,c.next=r),n.pending=r}function V1(n,r,c){if((c&4194048)!==0){var d=r.lanes;d&=n.pendingLanes,c|=d,r.lanes=c,O0(n,c)}}var qo={readContext:Ie,use:jo,useCallback:le,useContext:le,useEffect:le,useImperativeHandle:le,useLayoutEffect:le,useInsertionEffect:le,useMemo:le,useReducer:le,useRef:le,useState:le,useDebugValue:le,useDeferredValue:le,useTransition:le,useSyncExternalStore:le,useId:le,useHostTransitionStatus:le,useFormState:le,useActionState:le,useOptimistic:le,useMemoCache:le,useCacheRefresh:le},R1={readContext:Ie,use:jo,useCallback:function(n,r){return Ge().memoizedState=[n,r===void 0?null:r],n},useContext:Ie,useEffect:d1,useImperativeHandle:function(n,r,c){c=c!=null?c.concat([n]):null,Ho(4194308,4,A1.bind(null,r,n),c)},useLayoutEffect:function(n,r){return Ho(4194308,4,n,r)},useInsertionEffect:function(n,r){Ho(4,2,n,r)},useMemo:function(n,r){var c=Ge();r=r===void 0?null:r;var d=n();if(is){cn(!0);try{n()}finally{cn(!1)}}return c.memoizedState=[d,r],d},useReducer:function(n,r,c){var d=Ge();if(c!==void 0){var v=c(r);if(is){cn(!0);try{c(r)}finally{cn(!1)}}}else v=r;return d.memoizedState=d.baseState=v,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:v},d.queue=n,n=n.dispatch=x4.bind(null,Tt,n),[d.memoizedState,n]},useRef:function(n){var r=Ge();return n={current:n},r.memoizedState=n},useState:function(n){n=Su(n);var r=n.queue,c=T1.bind(null,Tt,r);return r.dispatch=c,[n.memoizedState,c]},useDebugValue:Eu,useDeferredValue:function(n,r){var c=Ge();return Tu(c,n,r)},useTransition:function(){var n=Su(!1);return n=b1.bind(null,Tt,n.queue,!0,!1),Ge().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,c){var d=Tt,v=Ge();if(Ot){if(c===void 0)throw Error(s(407));c=c()}else{if(c=r(),Kt===null)throw Error(s(349));(Ut&124)!==0||Jd(d,r,c)}v.memoizedState=c;var w={value:c,getSnapshot:r};return v.queue=w,d1($d.bind(null,d,w,n),[n]),d.flags|=2048,Gs(9,Go(),_d.bind(null,d,w,c,r),null),c},useId:function(){var n=Ge(),r=Kt.identifierPrefix;if(Ot){var c=Yi,d=ji;c=(d&~(1<<32-We(d)-1)).toString(32)+c,r="«"+r+"R"+c,c=zo++,0<c&&(r+="H"+c.toString(32)),r+="»"}else c=d4++,r="«"+r+"r"+c.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:Vu,useFormState:l1,useActionState:l1,useOptimistic:function(n){var r=Ge();r.memoizedState=r.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Ru.bind(null,Tt,!0,c),c.dispatch=r,[n,r]},useMemoCache:wu,useCacheRefresh:function(){return Ge().memoizedState=v4.bind(null,Tt)}},I1={readContext:Ie,use:jo,useCallback:x1,useContext:Ie,useEffect:m1,useImperativeHandle:v1,useInsertionEffect:g1,useLayoutEffect:p1,useMemo:y1,useReducer:Yo,useRef:f1,useState:function(){return Yo(Ki)},useDebugValue:Eu,useDeferredValue:function(n,r){var c=de();return w1(c,zt.memoizedState,n,r)},useTransition:function(){var n=Yo(Ki)[0],r=de().memoizedState;return[typeof n=="boolean"?n:er(n),r]},useSyncExternalStore:Wd,useId:M1,useHostTransitionStatus:Vu,useFormState:c1,useActionState:c1,useOptimistic:function(n,r){var c=de();return i1(c,zt,n,r)},useMemoCache:wu,useCacheRefresh:E1},y4={readContext:Ie,use:jo,useCallback:x1,useContext:Ie,useEffect:m1,useImperativeHandle:v1,useInsertionEffect:g1,useLayoutEffect:p1,useMemo:y1,useReducer:Cu,useRef:f1,useState:function(){return Cu(Ki)},useDebugValue:Eu,useDeferredValue:function(n,r){var c=de();return zt===null?Tu(c,n,r):w1(c,zt.memoizedState,n,r)},useTransition:function(){var n=Cu(Ki)[0],r=de().memoizedState;return[typeof n=="boolean"?n:er(n),r]},useSyncExternalStore:Wd,useId:M1,useHostTransitionStatus:Vu,useFormState:h1,useActionState:h1,useOptimistic:function(n,r){var c=de();return zt!==null?i1(c,zt,n,r):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:wu,useCacheRefresh:E1},Hs=null,sr=0;function Qo(n){var r=sr;return sr+=1,Hs===null&&(Hs=[]),Yd(Hs,n,r)}function ar(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Xo(n,r){throw r.$$typeof===g?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function B1(n){var r=n._init;return r(n._payload)}function U1(n){function r(X,K){if(n){var W=X.deletions;W===null?(X.deletions=[K],X.flags|=16):W.push(K)}}function c(X,K){if(!n)return null;for(;K!==null;)r(X,K),K=K.sibling;return null}function d(X){for(var K=new Map;X!==null;)X.key!==null?K.set(X.key,X):K.set(X.index,X),X=X.sibling;return K}function v(X,K){return X=zi(X,K),X.index=0,X.sibling=null,X}function w(X,K,W){return X.index=W,n?(W=X.alternate,W!==null?(W=W.index,W<K?(X.flags|=67108866,K):W):(X.flags|=67108866,K)):(X.flags|=1048576,K)}function V(X){return n&&X.alternate===null&&(X.flags|=67108866),X}function L(X,K,W,st){return K===null||K.tag!==6?(K=Jc(W,X.mode,st),K.return=X,K):(K=v(K,W),K.return=X,K)}function G(X,K,W,st){var dt=W.type;return dt===x?nt(X,K,W.props.children,st,W.key):K!==null&&(K.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===D&&B1(dt)===K.type)?(K=v(K,W.props),ar(K,W),K.return=X,K):(K=Ro(W.type,W.key,W.props,null,X.mode,st),ar(K,W),K.return=X,K)}function J(X,K,W,st){return K===null||K.tag!==4||K.stateNode.containerInfo!==W.containerInfo||K.stateNode.implementation!==W.implementation?(K=_c(W,X.mode,st),K.return=X,K):(K=v(K,W.children||[]),K.return=X,K)}function nt(X,K,W,st,dt){return K===null||K.tag!==7?(K=Xn(W,X.mode,st,dt),K.return=X,K):(K=v(K,W),K.return=X,K)}function at(X,K,W){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Jc(""+K,X.mode,W),K.return=X,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case p:return W=Ro(K.type,K.key,K.props,null,X.mode,W),ar(W,K),W.return=X,W;case A:return K=_c(K,X.mode,W),K.return=X,K;case D:var st=K._init;return K=st(K._payload),at(X,K,W)}if(q(K)||N(K))return K=Xn(K,X.mode,W,null),K.return=X,K;if(typeof K.then=="function")return at(X,Qo(K),W);if(K.$$typeof===S)return at(X,Fo(X,K),W);Xo(X,K)}return null}function _(X,K,W,st){var dt=K!==null?K.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return dt!==null?null:L(X,K,""+W,st);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case p:return W.key===dt?G(X,K,W,st):null;case A:return W.key===dt?J(X,K,W,st):null;case D:return dt=W._init,W=dt(W._payload),_(X,K,W,st)}if(q(W)||N(W))return dt!==null?null:nt(X,K,W,st,null);if(typeof W.then=="function")return _(X,K,Qo(W),st);if(W.$$typeof===S)return _(X,K,Fo(X,W),st);Xo(X,W)}return null}function et(X,K,W,st,dt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return X=X.get(W)||null,L(K,X,""+st,dt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case p:return X=X.get(st.key===null?W:st.key)||null,G(K,X,st,dt);case A:return X=X.get(st.key===null?W:st.key)||null,J(K,X,st,dt);case D:var Dt=st._init;return st=Dt(st._payload),et(X,K,W,st,dt)}if(q(st)||N(st))return X=X.get(W)||null,nt(K,X,st,dt,null);if(typeof st.then=="function")return et(X,K,W,Qo(st),dt);if(st.$$typeof===S)return et(X,K,W,Fo(K,st),dt);Xo(K,st)}return null}function bt(X,K,W,st){for(var dt=null,Dt=null,pt=K,yt=K=0,ye=null;pt!==null&&yt<W.length;yt++){pt.index>yt?(ye=pt,pt=null):ye=pt.sibling;var Nt=_(X,pt,W[yt],st);if(Nt===null){pt===null&&(pt=ye);break}n&&pt&&Nt.alternate===null&&r(X,pt),K=w(Nt,K,yt),Dt===null?dt=Nt:Dt.sibling=Nt,Dt=Nt,pt=ye}if(yt===W.length)return c(X,pt),Ot&&Wn(X,yt),dt;if(pt===null){for(;yt<W.length;yt++)pt=at(X,W[yt],st),pt!==null&&(K=w(pt,K,yt),Dt===null?dt=pt:Dt.sibling=pt,Dt=pt);return Ot&&Wn(X,yt),dt}for(pt=d(pt);yt<W.length;yt++)ye=et(pt,X,yt,W[yt],st),ye!==null&&(n&&ye.alternate!==null&&pt.delete(ye.key===null?yt:ye.key),K=w(ye,K,yt),Dt===null?dt=ye:Dt.sibling=ye,Dt=ye);return n&&pt.forEach(function(Bn){return r(X,Bn)}),Ot&&Wn(X,yt),dt}function vt(X,K,W,st){if(W==null)throw Error(s(151));for(var dt=null,Dt=null,pt=K,yt=K=0,ye=null,Nt=W.next();pt!==null&&!Nt.done;yt++,Nt=W.next()){pt.index>yt?(ye=pt,pt=null):ye=pt.sibling;var Bn=_(X,pt,Nt.value,st);if(Bn===null){pt===null&&(pt=ye);break}n&&pt&&Bn.alternate===null&&r(X,pt),K=w(Bn,K,yt),Dt===null?dt=Bn:Dt.sibling=Bn,Dt=Bn,pt=ye}if(Nt.done)return c(X,pt),Ot&&Wn(X,yt),dt;if(pt===null){for(;!Nt.done;yt++,Nt=W.next())Nt=at(X,Nt.value,st),Nt!==null&&(K=w(Nt,K,yt),Dt===null?dt=Nt:Dt.sibling=Nt,Dt=Nt);return Ot&&Wn(X,yt),dt}for(pt=d(pt);!Nt.done;yt++,Nt=W.next())Nt=et(pt,X,yt,Nt.value,st),Nt!==null&&(n&&Nt.alternate!==null&&pt.delete(Nt.key===null?yt:Nt.key),K=w(Nt,K,yt),Dt===null?dt=Nt:Dt.sibling=Nt,Dt=Nt);return n&&pt.forEach(function(w3){return r(X,w3)}),Ot&&Wn(X,yt),dt}function Yt(X,K,W,st){if(typeof W=="object"&&W!==null&&W.type===x&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case p:t:{for(var dt=W.key;K!==null;){if(K.key===dt){if(dt=W.type,dt===x){if(K.tag===7){c(X,K.sibling),st=v(K,W.props.children),st.return=X,X=st;break t}}else if(K.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===D&&B1(dt)===K.type){c(X,K.sibling),st=v(K,W.props),ar(st,W),st.return=X,X=st;break t}c(X,K);break}else r(X,K);K=K.sibling}W.type===x?(st=Xn(W.props.children,X.mode,st,W.key),st.return=X,X=st):(st=Ro(W.type,W.key,W.props,null,X.mode,st),ar(st,W),st.return=X,X=st)}return V(X);case A:t:{for(dt=W.key;K!==null;){if(K.key===dt)if(K.tag===4&&K.stateNode.containerInfo===W.containerInfo&&K.stateNode.implementation===W.implementation){c(X,K.sibling),st=v(K,W.children||[]),st.return=X,X=st;break t}else{c(X,K);break}else r(X,K);K=K.sibling}st=_c(W,X.mode,st),st.return=X,X=st}return V(X);case D:return dt=W._init,W=dt(W._payload),Yt(X,K,W,st)}if(q(W))return bt(X,K,W,st);if(N(W)){if(dt=N(W),typeof dt!="function")throw Error(s(150));return W=dt.call(W),vt(X,K,W,st)}if(typeof W.then=="function")return Yt(X,K,Qo(W),st);if(W.$$typeof===S)return Yt(X,K,Fo(X,W),st);Xo(X,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,K!==null&&K.tag===6?(c(X,K.sibling),st=v(K,W),st.return=X,X=st):(c(X,K),st=Jc(W,X.mode,st),st.return=X,X=st),V(X)):c(X,K)}return function(X,K,W,st){try{sr=0;var dt=Yt(X,K,W,st);return Hs=null,dt}catch(pt){if(pt===Za||pt===Lo)throw pt;var Dt=_e(29,pt,null,X.mode);return Dt.lanes=st,Dt.return=X,Dt}finally{}}}var Ks=U1(!0),F1=U1(!1),mi=it(null),Ti=null;function An(n){var r=n.alternate;lt(ge,ge.current&1),lt(mi,n),Ti===null&&(r===null||zs.current!==null||r.memoizedState!==null)&&(Ti=n)}function N1(n){if(n.tag===22){if(lt(ge,ge.current),lt(mi,n),Ti===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Ti=n)}}else vn()}function vn(){lt(ge,ge.current),lt(mi,mi.current)}function qi(n){ct(mi),Ti===n&&(Ti=null),ct(ge)}var ge=it(0);function Zo(n){for(var r=n;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||yh(c)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Iu(n,r,c,d){r=n.memoizedState,c=c(d,r),c=c==null?r:m({},r,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Bu={enqueueSetState:function(n,r,c){n=n._reactInternals;var d=ii(),v=mn(d);v.payload=r,c!=null&&(v.callback=c),r=gn(n,v,d),r!==null&&(ni(r,n,d),Ja(r,n,d))},enqueueReplaceState:function(n,r,c){n=n._reactInternals;var d=ii(),v=mn(d);v.tag=1,v.payload=r,c!=null&&(v.callback=c),r=gn(n,v,d),r!==null&&(ni(r,n,d),Ja(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var c=ii(),d=mn(c);d.tag=2,r!=null&&(d.callback=r),r=gn(n,d,c),r!==null&&(ni(r,n,c),Ja(r,n,c))}};function L1(n,r,c,d,v,w,V){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,w,V):r.prototype&&r.prototype.isPureReactComponent?!ja(c,d)||!ja(v,w):!0}function O1(n,r,c,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==n&&Bu.enqueueReplaceState(r,r.state,null)}function ns(n,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(n=n.defaultProps){c===r&&(c=m({},c));for(var v in n)c[v]===void 0&&(c[v]=n[v])}return c}var Wo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function P1(n){Wo(n)}function k1(n){console.error(n)}function z1(n){Wo(n)}function Jo(n,r){try{var c=n.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function j1(n,r,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Uu(n,r,c){return c=mn(c),c.tag=3,c.payload={element:null},c.callback=function(){Jo(n,r)},c}function Y1(n){return n=mn(n),n.tag=3,n}function G1(n,r,c,d){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;n.payload=function(){return v(w)},n.callback=function(){j1(r,c,d)}}var V=c.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(n.callback=function(){j1(r,c,d),typeof v!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var L=d.stack;this.componentDidCatch(d.value,{componentStack:L!==null?L:""})})}function w4(n,r,c,d,v){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&qa(r,c,v,!0),c=mi.current,c!==null){switch(c.tag){case 13:return Ti===null?nh():c.alternate===null&&re===0&&(re=3),c.flags&=-257,c.flags|=65536,c.lanes=v,d===lu?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),ah(n,d,v)),!1;case 22:return c.flags|=65536,d===lu?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),ah(n,d,v)),!1}throw Error(s(435,c.tag))}return ah(n,d,v),nh(),!1}if(Ot)return r=mi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==eu&&(n=Error(s(422),{cause:d}),Ka(ui(n,c)))):(d!==eu&&(r=Error(s(423),{cause:d}),Ka(ui(r,c))),n=n.current.alternate,n.flags|=65536,v&=-v,n.lanes|=v,d=ui(d,c),v=Uu(n.stateNode,d,v),hu(n,v),re!==4&&(re=2)),!1;var w=Error(s(520),{cause:d});if(w=ui(w,c),fr===null?fr=[w]:fr.push(w),re!==4&&(re=2),r===null)return!0;d=ui(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,n=v&-v,c.lanes|=n,n=Uu(c.stateNode,d,n),hu(c,n),!1;case 1:if(r=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Sn===null||!Sn.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=Y1(v),G1(v,n,c,d),hu(c,v),!1}c=c.return}while(c!==null);return!1}var H1=Error(s(461)),ve=!1;function Me(n,r,c,d){r.child=n===null?F1(r,null,c,d):Ks(r,n.child,c,d)}function K1(n,r,c,d,v){c=c.render;var w=r.ref;if("ref"in d){var V={};for(var L in d)L!=="ref"&&(V[L]=d[L])}else V=d;return ts(r),d=pu(n,r,c,V,w,v),L=Au(),n!==null&&!ve?(vu(n,r,v),Qi(n,r,v)):(Ot&&L&&$c(r),r.flags|=1,Me(n,r,d,v),r.child)}function q1(n,r,c,d,v){if(n===null){var w=c.type;return typeof w=="function"&&!Wc(w)&&w.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=w,Q1(n,r,w,d,v)):(n=Ro(c.type,null,d,r,r.mode,v),n.ref=r.ref,n.return=r,r.child=n)}if(w=n.child,!ju(n,v)){var V=w.memoizedProps;if(c=c.compare,c=c!==null?c:ja,c(V,d)&&n.ref===r.ref)return Qi(n,r,v)}return r.flags|=1,n=zi(w,d),n.ref=r.ref,n.return=r,r.child=n}function Q1(n,r,c,d,v){if(n!==null){var w=n.memoizedProps;if(ja(w,d)&&n.ref===r.ref)if(ve=!1,r.pendingProps=d=w,ju(n,v))(n.flags&131072)!==0&&(ve=!0);else return r.lanes=n.lanes,Qi(n,r,v)}return Fu(n,r,c,d,v)}function X1(n,r,c){var d=r.pendingProps,v=d.children,w=n!==null?n.memoizedState:null;if(d.mode==="hidden"){if((r.flags&128)!==0){if(d=w!==null?w.baseLanes|c:c,n!==null){for(v=r.child=n.child,w=0;v!==null;)w=w|v.lanes|v.childLanes,v=v.sibling;r.childLanes=w&~d}else r.childLanes=0,r.child=null;return Z1(n,r,d,c)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&No(r,w!==null?w.cachePool:null),w!==null?Qd(r,w):du(),N1(r);else return r.lanes=r.childLanes=536870912,Z1(n,r,w!==null?w.baseLanes|c:c,c)}else w!==null?(No(r,w.cachePool),Qd(r,w),vn(),r.memoizedState=null):(n!==null&&No(r,null),du(),vn());return Me(n,r,v,c),r.child}function Z1(n,r,c,d){var v=ou();return v=v===null?null:{parent:me._currentValue,pool:v},r.memoizedState={baseLanes:c,cachePool:v},n!==null&&No(r,null),du(),N1(r),n!==null&&qa(n,r,d,!0),null}function _o(n,r){var c=r.ref;if(c===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(n===null||n.ref!==c)&&(r.flags|=4194816)}}function Fu(n,r,c,d,v){return ts(r),c=pu(n,r,c,d,void 0,v),d=Au(),n!==null&&!ve?(vu(n,r,v),Qi(n,r,v)):(Ot&&d&&$c(r),r.flags|=1,Me(n,r,c,v),r.child)}function W1(n,r,c,d,v,w){return ts(r),r.updateQueue=null,c=Zd(r,d,c,v),Xd(n),d=Au(),n!==null&&!ve?(vu(n,r,w),Qi(n,r,w)):(Ot&&d&&$c(r),r.flags|=1,Me(n,r,c,w),r.child)}function J1(n,r,c,d,v){if(ts(r),r.stateNode===null){var w=Ns,V=c.contextType;typeof V=="object"&&V!==null&&(w=Ie(V)),w=new c(d,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Bu,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=d,w.state=r.memoizedState,w.refs={},cu(r),V=c.contextType,w.context=typeof V=="object"&&V!==null?Ie(V):Ns,w.state=r.memoizedState,V=c.getDerivedStateFromProps,typeof V=="function"&&(Iu(r,c,V,d),w.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(V=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),V!==w.state&&Bu.enqueueReplaceState(w,w.state,null),$a(r,d,w,v),_a(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(n===null){w=r.stateNode;var L=r.memoizedProps,G=ns(c,L);w.props=G;var J=w.context,nt=c.contextType;V=Ns,typeof nt=="object"&&nt!==null&&(V=Ie(nt));var at=c.getDerivedStateFromProps;nt=typeof at=="function"||typeof w.getSnapshotBeforeUpdate=="function",L=r.pendingProps!==L,nt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(L||J!==V)&&O1(r,w,d,V),dn=!1;var _=r.memoizedState;w.state=_,$a(r,d,w,v),_a(),J=r.memoizedState,L||_!==J||dn?(typeof at=="function"&&(Iu(r,c,at,d),J=r.memoizedState),(G=dn||L1(r,c,G,d,_,J,V))?(nt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=J),w.props=d,w.state=J,w.context=V,d=G):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{w=r.stateNode,uu(n,r),V=r.memoizedProps,nt=ns(c,V),w.props=nt,at=r.pendingProps,_=w.context,J=c.contextType,G=Ns,typeof J=="object"&&J!==null&&(G=Ie(J)),L=c.getDerivedStateFromProps,(J=typeof L=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(V!==at||_!==G)&&O1(r,w,d,G),dn=!1,_=r.memoizedState,w.state=_,$a(r,d,w,v),_a();var et=r.memoizedState;V!==at||_!==et||dn||n!==null&&n.dependencies!==null&&Uo(n.dependencies)?(typeof L=="function"&&(Iu(r,c,L,d),et=r.memoizedState),(nt=dn||L1(r,c,nt,d,_,et,G)||n!==null&&n.dependencies!==null&&Uo(n.dependencies))?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,et,G),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,et,G)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||V===n.memoizedProps&&_===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||V===n.memoizedProps&&_===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=et),w.props=d,w.state=et,w.context=G,d=nt):(typeof w.componentDidUpdate!="function"||V===n.memoizedProps&&_===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||V===n.memoizedProps&&_===n.memoizedState||(r.flags|=1024),d=!1)}return w=d,_o(n,r),d=(r.flags&128)!==0,w||d?(w=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,n!==null&&d?(r.child=Ks(r,n.child,null,v),r.child=Ks(r,null,c,v)):Me(n,r,c,v),r.memoizedState=w.state,n=r.child):n=Qi(n,r,v),n}function _1(n,r,c,d){return Ha(),r.flags|=256,Me(n,r,c,d),r.child}var Nu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lu(n){return{baseLanes:n,cachePool:kd()}}function Ou(n,r,c){return n=n!==null?n.childLanes&~c:0,r&&(n|=gi),n}function $1(n,r,c){var d=r.pendingProps,v=!1,w=(r.flags&128)!==0,V;if((V=w)||(V=n!==null&&n.memoizedState===null?!1:(ge.current&2)!==0),V&&(v=!0,r.flags&=-129),V=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ot){if(v?An(r):vn(),Ot){var L=ae,G;if(G=L){t:{for(G=L,L=Ei;G.nodeType!==8;){if(!L){L=null;break t}if(G=bi(G.nextSibling),G===null){L=null;break t}}L=G}L!==null?(r.memoizedState={dehydrated:L,treeContext:Zn!==null?{id:ji,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},G=_e(18,null,null,0),G.stateNode=L,G.return=r,r.child=G,Le=r,ae=null,G=!0):G=!1}G||_n(r)}if(L=r.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return yh(L)?r.lanes=32:r.lanes=536870912,null;qi(r)}return L=d.children,d=d.fallback,v?(vn(),v=r.mode,L=$o({mode:"hidden",children:L},v),d=Xn(d,v,c,null),L.return=r,d.return=r,L.sibling=d,r.child=L,v=r.child,v.memoizedState=Lu(c),v.childLanes=Ou(n,V,c),r.memoizedState=Nu,d):(An(r),Pu(r,L))}if(G=n.memoizedState,G!==null&&(L=G.dehydrated,L!==null)){if(w)r.flags&256?(An(r),r.flags&=-257,r=ku(n,r,c)):r.memoizedState!==null?(vn(),r.child=n.child,r.flags|=128,r=null):(vn(),v=d.fallback,L=r.mode,d=$o({mode:"visible",children:d.children},L),v=Xn(v,L,c,null),v.flags|=2,d.return=r,v.return=r,d.sibling=v,r.child=d,Ks(r,n.child,null,c),d=r.child,d.memoizedState=Lu(c),d.childLanes=Ou(n,V,c),r.memoizedState=Nu,r=v);else if(An(r),yh(L)){if(V=L.nextSibling&&L.nextSibling.dataset,V)var J=V.dgst;V=J,d=Error(s(419)),d.stack="",d.digest=V,Ka({value:d,source:null,stack:null}),r=ku(n,r,c)}else if(ve||qa(n,r,c,!1),V=(c&n.childLanes)!==0,ve||V){if(V=Kt,V!==null&&(d=c&-c,d=(d&42)!==0?1:wc(d),d=(d&(V.suspendedLanes|c))!==0?0:d,d!==0&&d!==G.retryLane))throw G.retryLane=d,Fs(n,d),ni(V,n,d),H1;L.data==="$?"||nh(),r=ku(n,r,c)}else L.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=G.treeContext,ae=bi(L.nextSibling),Le=r,Ot=!0,Jn=null,Ei=!1,n!==null&&(fi[di++]=ji,fi[di++]=Yi,fi[di++]=Zn,ji=n.id,Yi=n.overflow,Zn=r),r=Pu(r,d.children),r.flags|=4096);return r}return v?(vn(),v=d.fallback,L=r.mode,G=n.child,J=G.sibling,d=zi(G,{mode:"hidden",children:d.children}),d.subtreeFlags=G.subtreeFlags&65011712,J!==null?v=zi(J,v):(v=Xn(v,L,c,null),v.flags|=2),v.return=r,d.return=r,d.sibling=v,r.child=d,d=v,v=r.child,L=n.child.memoizedState,L===null?L=Lu(c):(G=L.cachePool,G!==null?(J=me._currentValue,G=G.parent!==J?{parent:J,pool:J}:G):G=kd(),L={baseLanes:L.baseLanes|c,cachePool:G}),v.memoizedState=L,v.childLanes=Ou(n,V,c),r.memoizedState=Nu,d):(An(r),c=n.child,n=c.sibling,c=zi(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,n!==null&&(V=r.deletions,V===null?(r.deletions=[n],r.flags|=16):V.push(n)),r.child=c,r.memoizedState=null,c)}function Pu(n,r){return r=$o({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function $o(n,r){return n=_e(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function ku(n,r,c){return Ks(r,n.child,null,c),n=Pu(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function tm(n,r,c){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),nu(n.return,r,c)}function zu(n,r,c,d,v){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:v}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=v)}function em(n,r,c){var d=r.pendingProps,v=d.revealOrder,w=d.tail;if(Me(n,r,d.children,c),d=ge.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&tm(n,c,r);else if(n.tag===19)tm(n,c,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break t;for(;n.sibling===null;){if(n.return===null||n.return===r)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}switch(lt(ge,d),v){case"forwards":for(c=r.child,v=null;c!==null;)n=c.alternate,n!==null&&Zo(n)===null&&(v=c),c=c.sibling;c=v,c===null?(v=r.child,r.child=null):(v=c.sibling,c.sibling=null),zu(r,!1,v,c,w);break;case"backwards":for(c=null,v=r.child,r.child=null;v!==null;){if(n=v.alternate,n!==null&&Zo(n)===null){r.child=v;break}n=v.sibling,v.sibling=c,c=v,v=n}zu(r,!0,c,null,w);break;case"together":zu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Qi(n,r,c){if(n!==null&&(r.dependencies=n.dependencies),Cn|=r.lanes,(c&r.childLanes)===0)if(n!==null){if(qa(n,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,c=zi(n,n.pendingProps),r.child=c,c.return=r;n.sibling!==null;)n=n.sibling,c=c.sibling=zi(n,n.pendingProps),c.return=r;c.sibling=null}return r.child}function ju(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Uo(n)))}function b4(n,r,c){switch(r.tag){case 3:Bt(r,r.stateNode.containerInfo),fn(r,me,n.memoizedState.cache),Ha();break;case 27:case 5:pe(r);break;case 4:Bt(r,r.stateNode.containerInfo);break;case 10:fn(r,r.type,r.memoizedProps.value);break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(An(r),r.flags|=128,null):(c&r.child.childLanes)!==0?$1(n,r,c):(An(r),n=Qi(n,r,c),n!==null?n.sibling:null);An(r);break;case 19:var v=(n.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(qa(n,r,c,!1),d=(c&r.childLanes)!==0),v){if(d)return em(n,r,c);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),lt(ge,ge.current),d)break;return null;case 22:case 23:return r.lanes=0,X1(n,r,c);case 24:fn(r,me,n.memoizedState.cache)}return Qi(n,r,c)}function im(n,r,c){if(n!==null)if(n.memoizedProps!==r.pendingProps)ve=!0;else{if(!ju(n,c)&&(r.flags&128)===0)return ve=!1,b4(n,r,c);ve=(n.flags&131072)!==0}else ve=!1,Ot&&(r.flags&1048576)!==0&&Bd(r,Bo,r.index);switch(r.lanes=0,r.tag){case 16:t:{n=r.pendingProps;var d=r.elementType,v=d._init;if(d=v(d._payload),r.type=d,typeof d=="function")Wc(d)?(n=ns(d,n),r.tag=1,r=J1(null,r,d,n,c)):(r.tag=0,r=Fu(null,r,d,n,c));else{if(d!=null){if(v=d.$$typeof,v===M){r.tag=11,r=K1(null,r,d,n,c);break t}else if(v===R){r.tag=14,r=q1(null,r,d,n,c);break t}}throw r=z(d)||d,Error(s(306,r,""))}}return r;case 0:return Fu(n,r,r.type,r.pendingProps,c);case 1:return d=r.type,v=ns(d,r.pendingProps),J1(n,r,d,v,c);case 3:t:{if(Bt(r,r.stateNode.containerInfo),n===null)throw Error(s(387));d=r.pendingProps;var w=r.memoizedState;v=w.element,uu(n,r),$a(r,d,null,c);var V=r.memoizedState;if(d=V.cache,fn(r,me,d),d!==w.cache&&su(r,[me],c,!0),_a(),d=V.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:V.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=_1(n,r,d,c);break t}else if(d!==v){v=ui(Error(s(424)),r),Ka(v),r=_1(n,r,d,c);break t}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ae=bi(n.firstChild),Le=r,Ot=!0,Jn=null,Ei=!0,c=F1(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ha(),d===v){r=Qi(n,r,c);break t}Me(n,r,d,c)}r=r.child}return r;case 26:return _o(n,r),n===null?(c=r2(r.type,null,r.pendingProps,null))?r.memoizedState=c:Ot||(c=r.type,n=r.pendingProps,d=dl(At.current).createElement(c),d[Re]=r,d[je]=n,Te(d,c,n),Ae(d),r.stateNode=d):r.memoizedState=r2(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return pe(r),n===null&&Ot&&(d=r.stateNode=n2(r.type,r.pendingProps,At.current),Le=r,Ei=!0,v=ae,Tn(r.type)?(wh=v,ae=bi(d.firstChild)):ae=v),Me(n,r,r.pendingProps.children,c),_o(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Ot&&((v=d=ae)&&(d=W4(d,r.type,r.pendingProps,Ei),d!==null?(r.stateNode=d,Le=r,ae=bi(d.firstChild),Ei=!1,v=!0):v=!1),v||_n(r)),pe(r),v=r.type,w=r.pendingProps,V=n!==null?n.memoizedProps:null,d=w.children,Ah(v,w)?d=null:V!==null&&Ah(v,V)&&(r.flags|=32),r.memoizedState!==null&&(v=pu(n,r,m4,null,null,c),wr._currentValue=v),_o(n,r),Me(n,r,d,c),r.child;case 6:return n===null&&Ot&&((n=c=ae)&&(c=J4(c,r.pendingProps,Ei),c!==null?(r.stateNode=c,Le=r,ae=null,n=!0):n=!1),n||_n(r)),null;case 13:return $1(n,r,c);case 4:return Bt(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=Ks(r,null,d,c):Me(n,r,d,c),r.child;case 11:return K1(n,r,r.type,r.pendingProps,c);case 7:return Me(n,r,r.pendingProps,c),r.child;case 8:return Me(n,r,r.pendingProps.children,c),r.child;case 12:return Me(n,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,fn(r,r.type,d.value),Me(n,r,d.children,c),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,ts(r),v=Ie(v),d=d(v),r.flags|=1,Me(n,r,d,c),r.child;case 14:return q1(n,r,r.type,r.pendingProps,c);case 15:return Q1(n,r,r.type,r.pendingProps,c);case 19:return em(n,r,c);case 31:return d=r.pendingProps,c=r.mode,d={mode:d.mode,children:d.children},n===null?(c=$o(d,c),c.ref=r.ref,r.child=c,c.return=r,r=c):(c=zi(n.child,d),c.ref=r.ref,r.child=c,c.return=r,r=c),r;case 22:return X1(n,r,c);case 24:return ts(r),d=Ie(me),n===null?(v=ou(),v===null&&(v=Kt,w=au(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),r.memoizedState={parent:d,cache:v},cu(r),fn(r,me,v)):((n.lanes&c)!==0&&(uu(n,r),$a(r,null,null,c),_a()),v=n.memoizedState,w=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),fn(r,me,d)):(d=w.cache,fn(r,me,d),d!==v.cache&&su(r,[me],c,!0))),Me(n,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Xi(n){n.flags|=4}function nm(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!h2(r)){if(r=mi.current,r!==null&&((Ut&4194048)===Ut?Ti!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||r!==Ti))throw Wa=lu,zd;n.flags|=8192}}function tl(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?N0():536870912,n.lanes|=r,Zs|=r)}function rr(n,r){if(!Ot)switch(n.tailMode){case"hidden":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function ee(n){var r=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(r)for(var v=n.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=n,v=v.sibling;else for(v=n.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=n,v=v.sibling;return n.subtreeFlags|=d,n.childLanes=c,r}function C4(n,r,c){var d=r.pendingProps;switch(tu(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ee(r),null;case 1:return ee(r),null;case 3:return c=r.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Hi(me),Se(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ga(r)?Xi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nd())),ee(r),null;case 26:return c=r.memoizedState,n===null?(Xi(r),c!==null?(ee(r),nm(r,c)):(ee(r),r.flags&=-16777217)):c?c!==n.memoizedState?(Xi(r),ee(r),nm(r,c)):(ee(r),r.flags&=-16777217):(n.memoizedProps!==d&&Xi(r),ee(r),r.flags&=-16777217),null;case 27:se(r),c=At.current;var v=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==d&&Xi(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return ee(r),null}n=mt.current,Ga(r)?Ud(r):(n=n2(v,d,c),r.stateNode=n,Xi(r))}return ee(r),null;case 5:if(se(r),c=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&Xi(r);else{if(!d){if(r.stateNode===null)throw Error(s(166));return ee(r),null}if(n=mt.current,Ga(r))Ud(r);else{switch(v=dl(At.current),n){case 1:n=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:n=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":n=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":n=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof d.is=="string"?v.createElement("select",{is:d.is}):v.createElement("select"),d.multiple?n.multiple=!0:d.size&&(n.size=d.size);break;default:n=typeof d.is=="string"?v.createElement(c,{is:d.is}):v.createElement(c)}}n[Re]=r,n[je]=d;t:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)n.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break t;for(;v.sibling===null;){if(v.return===null||v.return===r)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=n;t:switch(Te(n,c,d),c){case"button":case"input":case"select":case"textarea":n=!!d.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Xi(r)}}return ee(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==d&&Xi(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(s(166));if(n=At.current,Ga(r)){if(n=r.stateNode,c=r.memoizedProps,d=null,v=Le,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}n[Re]=r,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Wm(n.nodeValue,c)),n||_n(r)}else n=dl(n).createTextNode(d),n[Re]=r,r.stateNode=n}return ee(r),null;case 13:if(d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(v=Ga(r),d!==null&&d.dehydrated!==null){if(n===null){if(!v)throw Error(s(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Re]=r}else Ha(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ee(r),v=!1}else v=Nd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(qi(r),r):(qi(r),null)}if(qi(r),(r.flags&128)!==0)return r.lanes=c,r;if(c=d!==null,n=n!==null&&n.memoizedState!==null,c){d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool);var w=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==v&&(d.flags|=2048)}return c!==n&&c&&(r.child.flags|=8192),tl(r,r.updateQueue),ee(r),null;case 4:return Se(),n===null&&fh(r.stateNode.containerInfo),ee(r),null;case 10:return Hi(r.type),ee(r),null;case 19:if(ct(ge),v=r.memoizedState,v===null)return ee(r),null;if(d=(r.flags&128)!==0,w=v.rendering,w===null)if(d)rr(v,!1);else{if(re!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=Zo(n),w!==null){for(r.flags|=128,rr(v,!1),n=w.updateQueue,r.updateQueue=n,tl(r,n),r.subtreeFlags=0,n=c,c=r.child;c!==null;)Id(c,n),c=c.sibling;return lt(ge,ge.current&1|2),r.child}n=n.sibling}v.tail!==null&&oi()>nl&&(r.flags|=128,d=!0,rr(v,!1),r.lanes=4194304)}else{if(!d)if(n=Zo(w),n!==null){if(r.flags|=128,d=!0,n=n.updateQueue,r.updateQueue=n,tl(r,n),rr(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!Ot)return ee(r),null}else 2*oi()-v.renderingStartTime>nl&&c!==536870912&&(r.flags|=128,d=!0,rr(v,!1),r.lanes=4194304);v.isBackwards?(w.sibling=r.child,r.child=w):(n=v.last,n!==null?n.sibling=w:r.child=w,v.last=w)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=oi(),r.sibling=null,n=ge.current,lt(ge,d?n&1|2:n&1),r):(ee(r),null);case 22:case 23:return qi(r),mu(),d=r.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(ee(r),r.subtreeFlags&6&&(r.flags|=8192)):ee(r),c=r.updateQueue,c!==null&&tl(r,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),n!==null&&ct(es),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Hi(me),ee(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function S4(n,r){switch(tu(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Hi(me),Se(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return se(r),null;case 13:if(qi(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ha()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ct(ge),null;case 4:return Se(),null;case 10:return Hi(r.type),null;case 22:case 23:return qi(r),mu(),n!==null&&ct(es),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Hi(me),null;case 25:return null;default:return null}}function sm(n,r){switch(tu(r),r.tag){case 3:Hi(me),Se();break;case 26:case 27:case 5:se(r);break;case 4:Se();break;case 13:qi(r);break;case 19:ct(ge);break;case 10:Hi(r.type);break;case 22:case 23:qi(r),mu(),n!==null&&ct(es);break;case 24:Hi(me)}}function or(n,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var v=d.next;c=v;do{if((c.tag&n)===n){d=void 0;var w=c.create,V=c.inst;d=w(),V.destroy=d}c=c.next}while(c!==v)}}catch(L){Gt(r,r.return,L)}}function xn(n,r,c){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&n)===n){var V=d.inst,L=V.destroy;if(L!==void 0){V.destroy=void 0,v=r;var G=c,J=L;try{J()}catch(nt){Gt(v,G,nt)}}}d=d.next}while(d!==w)}}catch(nt){Gt(r,r.return,nt)}}function am(n){var r=n.updateQueue;if(r!==null){var c=n.stateNode;try{qd(r,c)}catch(d){Gt(n,n.return,d)}}}function rm(n,r,c){c.props=ns(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){Gt(n,r,d)}}function lr(n,r){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(v){Gt(n,r,v)}}function Di(n,r){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(v){Gt(n,r,v)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){Gt(n,r,v)}else c.current=null}function om(n){var r=n.type,c=n.memoizedProps,d=n.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(v){Gt(n,n.return,v)}}function Yu(n,r,c){try{var d=n.stateNode;K4(d,n.type,c,r),d[je]=r}catch(v){Gt(n,n.return,v)}}function lm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Tn(n.type)||n.tag===4}function Gu(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||lm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Tn(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hu(n,r,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(n),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=fl));else if(d!==4&&(d===27&&Tn(n.type)&&(c=n.stateNode,r=null),n=n.child,n!==null))for(Hu(n,r,c),n=n.sibling;n!==null;)Hu(n,r,c),n=n.sibling}function el(n,r,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?c.insertBefore(n,r):c.appendChild(n);else if(d!==4&&(d===27&&Tn(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(el(n,r,c),n=n.sibling;n!==null;)el(n,r,c),n=n.sibling}function cm(n){var r=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Te(r,d,c),r[Re]=n,r[je]=c}catch(w){Gt(n,n.return,w)}}var Zi=!1,ce=!1,Ku=!1,um=typeof WeakSet=="function"?WeakSet:Set,xe=null;function M4(n,r){if(n=n.containerInfo,gh=xl,n=wd(n),Gc(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else t:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var v=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break t}var V=0,L=-1,G=-1,J=0,nt=0,at=n,_=null;e:for(;;){for(var et;at!==c||v!==0&&at.nodeType!==3||(L=V+v),at!==w||d!==0&&at.nodeType!==3||(G=V+d),at.nodeType===3&&(V+=at.nodeValue.length),(et=at.firstChild)!==null;)_=at,at=et;for(;;){if(at===n)break e;if(_===c&&++J===v&&(L=V),_===w&&++nt===d&&(G=V),(et=at.nextSibling)!==null)break;at=_,_=at.parentNode}at=et}c=L===-1||G===-1?null:{start:L,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(ph={focusedElem:n,selectionRange:c},xl=!1,xe=r;xe!==null;)if(r=xe,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,xe=n;else for(;xe!==null;){switch(r=xe,w=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,c=r,v=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var bt=ns(c.type,v,c.elementType===c.type);n=d.getSnapshotBeforeUpdate(bt,w),d.__reactInternalSnapshotBeforeUpdate=n}catch(vt){Gt(c,c.return,vt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,c=n.nodeType,c===9)xh(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":xh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,xe=n;break}xe=r.return}}function hm(n,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:yn(n,c),d&4&&or(5,c);break;case 1:if(yn(n,c),d&4)if(n=c.stateNode,r===null)try{n.componentDidMount()}catch(V){Gt(c,c.return,V)}else{var v=ns(c.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(v,r,n.__reactInternalSnapshotBeforeUpdate)}catch(V){Gt(c,c.return,V)}}d&64&&am(c),d&512&&lr(c,c.return);break;case 3:if(yn(n,c),d&64&&(n=c.updateQueue,n!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{qd(n,r)}catch(V){Gt(c,c.return,V)}}break;case 27:r===null&&d&4&&cm(c);case 26:case 5:yn(n,c),r===null&&d&4&&om(c),d&512&&lr(c,c.return);break;case 12:yn(n,c);break;case 13:yn(n,c),d&4&&mm(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=F4.bind(null,c),_4(n,c))));break;case 22:if(d=c.memoizedState!==null||Zi,!d){r=r!==null&&r.memoizedState!==null||ce,v=Zi;var w=ce;Zi=d,(ce=r)&&!w?wn(n,c,(c.subtreeFlags&8772)!==0):yn(n,c),Zi=v,ce=w}break;case 30:break;default:yn(n,c)}}function fm(n){var r=n.alternate;r!==null&&(n.alternate=null,fm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Sc(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var _t=null,He=!1;function Wi(n,r,c){for(c=c.child;c!==null;)dm(n,r,c),c=c.sibling}function dm(n,r,c){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Va,c)}catch{}switch(c.tag){case 26:ce||Di(c,r),Wi(n,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ce||Di(c,r);var d=_t,v=He;Tn(c.type)&&(_t=c.stateNode,He=!1),Wi(n,r,c),Ar(c.stateNode),_t=d,He=v;break;case 5:ce||Di(c,r);case 6:if(d=_t,v=He,_t=null,Wi(n,r,c),_t=d,He=v,_t!==null)if(He)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(c.stateNode)}catch(w){Gt(c,r,w)}else try{_t.removeChild(c.stateNode)}catch(w){Gt(c,r,w)}break;case 18:_t!==null&&(He?(n=_t,e2(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Mr(n)):e2(_t,c.stateNode));break;case 4:d=_t,v=He,_t=c.stateNode.containerInfo,He=!0,Wi(n,r,c),_t=d,He=v;break;case 0:case 11:case 14:case 15:ce||xn(2,c,r),ce||xn(4,c,r),Wi(n,r,c);break;case 1:ce||(Di(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&rm(c,r,d)),Wi(n,r,c);break;case 21:Wi(n,r,c);break;case 22:ce=(d=ce)||c.memoizedState!==null,Wi(n,r,c),ce=d;break;default:Wi(n,r,c)}}function mm(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Mr(n)}catch(c){Gt(r,r.return,c)}}function E4(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new um),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new um),r;default:throw Error(s(435,n.tag))}}function qu(n,r){var c=E4(n);r.forEach(function(d){var v=N4.bind(null,n,d);c.has(d)||(c.add(d),d.then(v,v))})}function $e(n,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var v=c[d],w=n,V=r,L=V;t:for(;L!==null;){switch(L.tag){case 27:if(Tn(L.type)){_t=L.stateNode,He=!1;break t}break;case 5:_t=L.stateNode,He=!1;break t;case 3:case 4:_t=L.stateNode.containerInfo,He=!0;break t}L=L.return}if(_t===null)throw Error(s(160));dm(w,V,v),_t=null,He=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)gm(r,n),r=r.sibling}var wi=null;function gm(n,r){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:$e(r,n),ti(n),d&4&&(xn(3,n,n.return),or(3,n),xn(5,n,n.return));break;case 1:$e(r,n),ti(n),d&512&&(ce||c===null||Di(c,c.return)),d&64&&Zi&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var v=wi;if($e(r,n),ti(n),d&512&&(ce||c===null||Di(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){t:{d=n.type,c=n.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Ba]||w[Re]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(d),v.head.insertBefore(w,v.querySelector("head > title"))),Te(w,d,c),w[Re]=n,Ae(w),d=w;break t;case"link":var V=c2("link","href",v).get(d+(c.href||""));if(V){for(var L=0;L<V.length;L++)if(w=V[L],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){V.splice(L,1);break e}}w=v.createElement(d),Te(w,d,c),v.head.appendChild(w);break;case"meta":if(V=c2("meta","content",v).get(d+(c.content||""))){for(L=0;L<V.length;L++)if(w=V[L],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){V.splice(L,1);break e}}w=v.createElement(d),Te(w,d,c),v.head.appendChild(w);break;default:throw Error(s(468,d))}w[Re]=n,Ae(w),d=w}n.stateNode=d}else u2(v,n.type,n.stateNode);else n.stateNode=l2(v,d,n.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?u2(v,n.type,n.stateNode):l2(v,d,n.memoizedProps)):d===null&&n.stateNode!==null&&Yu(n,n.memoizedProps,c.memoizedProps)}break;case 27:$e(r,n),ti(n),d&512&&(ce||c===null||Di(c,c.return)),c!==null&&d&4&&Yu(n,n.memoizedProps,c.memoizedProps);break;case 5:if($e(r,n),ti(n),d&512&&(ce||c===null||Di(c,c.return)),n.flags&32){v=n.stateNode;try{Ts(v,"")}catch(et){Gt(n,n.return,et)}}d&4&&n.stateNode!=null&&(v=n.memoizedProps,Yu(n,v,c!==null?c.memoizedProps:v)),d&1024&&(Ku=!0);break;case 6:if($e(r,n),ti(n),d&4){if(n.stateNode===null)throw Error(s(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(et){Gt(n,n.return,et)}}break;case 3:if(pl=null,v=wi,wi=ml(r.containerInfo),$e(r,n),wi=v,ti(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Mr(r.containerInfo)}catch(et){Gt(n,n.return,et)}Ku&&(Ku=!1,pm(n));break;case 4:d=wi,wi=ml(n.stateNode.containerInfo),$e(r,n),ti(n),wi=d;break;case 12:$e(r,n),ti(n);break;case 13:$e(r,n),ti(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(_u=oi()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,qu(n,d)));break;case 22:v=n.memoizedState!==null;var G=c!==null&&c.memoizedState!==null,J=Zi,nt=ce;if(Zi=J||v,ce=nt||G,$e(r,n),ce=nt,Zi=J,ti(n),d&8192)t:for(r=n.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(c===null||G||Zi||ce||ss(n)),c=null,r=n;;){if(r.tag===5||r.tag===26){if(c===null){G=c=r;try{if(w=G.stateNode,v)V=w.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{L=G.stateNode;var at=G.memoizedProps.style,_=at!=null&&at.hasOwnProperty("display")?at.display:null;L.style.display=_==null||typeof _=="boolean"?"":(""+_).trim()}}catch(et){Gt(G,G.return,et)}}}else if(r.tag===6){if(c===null){G=r;try{G.stateNode.nodeValue=v?"":G.memoizedProps}catch(et){Gt(G,G.return,et)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break t;for(;r.sibling===null;){if(r.return===null||r.return===n)break t;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,qu(n,c))));break;case 19:$e(r,n),ti(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,qu(n,d)));break;case 30:break;case 21:break;default:$e(r,n),ti(n)}}function ti(n){var r=n.flags;if(r&2){try{for(var c,d=n.return;d!==null;){if(lm(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,w=Gu(n);el(n,w,v);break;case 5:var V=c.stateNode;c.flags&32&&(Ts(V,""),c.flags&=-33);var L=Gu(n);el(n,L,V);break;case 3:case 4:var G=c.stateNode.containerInfo,J=Gu(n);Hu(n,J,G);break;default:throw Error(s(161))}}catch(nt){Gt(n,n.return,nt)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function pm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;pm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function yn(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)hm(n,r.alternate,r),r=r.sibling}function ss(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:xn(4,r,r.return),ss(r);break;case 1:Di(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&rm(r,r.return,c),ss(r);break;case 27:Ar(r.stateNode);case 26:case 5:Di(r,r.return),ss(r);break;case 22:r.memoizedState===null&&ss(r);break;case 30:ss(r);break;default:ss(r)}n=n.sibling}}function wn(n,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=n,w=r,V=w.flags;switch(w.tag){case 0:case 11:case 15:wn(v,w,c),or(4,w);break;case 1:if(wn(v,w,c),d=w,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(J){Gt(d,d.return,J)}if(d=w,v=d.updateQueue,v!==null){var L=d.stateNode;try{var G=v.shared.hiddenCallbacks;if(G!==null)for(v.shared.hiddenCallbacks=null,v=0;v<G.length;v++)Kd(G[v],L)}catch(J){Gt(d,d.return,J)}}c&&V&64&&am(w),lr(w,w.return);break;case 27:cm(w);case 26:case 5:wn(v,w,c),c&&d===null&&V&4&&om(w),lr(w,w.return);break;case 12:wn(v,w,c);break;case 13:wn(v,w,c),c&&V&4&&mm(v,w);break;case 22:w.memoizedState===null&&wn(v,w,c),lr(w,w.return);break;case 30:break;default:wn(v,w,c)}r=r.sibling}}function Qu(n,r){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&Qa(c))}function Xu(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Qa(n))}function Vi(n,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Am(n,r,c,d),r=r.sibling}function Am(n,r,c,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Vi(n,r,c,d),v&2048&&or(9,r);break;case 1:Vi(n,r,c,d);break;case 3:Vi(n,r,c,d),v&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Qa(n)));break;case 12:if(v&2048){Vi(n,r,c,d),n=r.stateNode;try{var w=r.memoizedProps,V=w.id,L=w.onPostCommit;typeof L=="function"&&L(V,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(G){Gt(r,r.return,G)}}else Vi(n,r,c,d);break;case 13:Vi(n,r,c,d);break;case 23:break;case 22:w=r.stateNode,V=r.alternate,r.memoizedState!==null?w._visibility&2?Vi(n,r,c,d):cr(n,r):w._visibility&2?Vi(n,r,c,d):(w._visibility|=2,qs(n,r,c,d,(r.subtreeFlags&10256)!==0)),v&2048&&Qu(V,r);break;case 24:Vi(n,r,c,d),v&2048&&Xu(r.alternate,r);break;default:Vi(n,r,c,d)}}function qs(n,r,c,d,v){for(v=v&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var w=n,V=r,L=c,G=d,J=V.flags;switch(V.tag){case 0:case 11:case 15:qs(w,V,L,G,v),or(8,V);break;case 23:break;case 22:var nt=V.stateNode;V.memoizedState!==null?nt._visibility&2?qs(w,V,L,G,v):cr(w,V):(nt._visibility|=2,qs(w,V,L,G,v)),v&&J&2048&&Qu(V.alternate,V);break;case 24:qs(w,V,L,G,v),v&&J&2048&&Xu(V.alternate,V);break;default:qs(w,V,L,G,v)}r=r.sibling}}function cr(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=n,d=r,v=d.flags;switch(d.tag){case 22:cr(c,d),v&2048&&Qu(d.alternate,d);break;case 24:cr(c,d),v&2048&&Xu(d.alternate,d);break;default:cr(c,d)}r=r.sibling}}var ur=8192;function Qs(n){if(n.subtreeFlags&ur)for(n=n.child;n!==null;)vm(n),n=n.sibling}function vm(n){switch(n.tag){case 26:Qs(n),n.flags&ur&&n.memoizedState!==null&&h3(wi,n.memoizedState,n.memoizedProps);break;case 5:Qs(n);break;case 3:case 4:var r=wi;wi=ml(n.stateNode.containerInfo),Qs(n),wi=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=ur,ur=16777216,Qs(n),ur=r):Qs(n));break;default:Qs(n)}}function xm(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function hr(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];xe=d,wm(d,n)}xm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ym(n),n=n.sibling}function ym(n){switch(n.tag){case 0:case 11:case 15:hr(n),n.flags&2048&&xn(9,n,n.return);break;case 3:hr(n);break;case 12:hr(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,il(n)):hr(n);break;default:hr(n)}}function il(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];xe=d,wm(d,n)}xm(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:xn(8,r,r.return),il(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,il(r));break;default:il(r)}n=n.sibling}}function wm(n,r){for(;xe!==null;){var c=xe;switch(c.tag){case 0:case 11:case 15:xn(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Qa(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,xe=d;else t:for(c=n;xe!==null;){d=xe;var v=d.sibling,w=d.return;if(fm(d),d===c){xe=null;break t}if(v!==null){v.return=w,xe=v;break t}xe=w}}}var T4={getCacheForType:function(n){var r=Ie(me),c=r.data.get(n);return c===void 0&&(c=n(),r.data.set(n,c)),c}},D4=typeof WeakMap=="function"?WeakMap:Map,Pt=0,Kt=null,Vt=null,Ut=0,kt=0,ei=null,bn=!1,Xs=!1,Zu=!1,Ji=0,re=0,Cn=0,as=0,Wu=0,gi=0,Zs=0,fr=null,Ke=null,Ju=!1,_u=0,nl=1/0,sl=null,Sn=null,Ee=0,Mn=null,Ws=null,Js=0,$u=0,th=null,bm=null,dr=0,eh=null;function ii(){if((Pt&2)!==0&&Ut!==0)return Ut&-Ut;if(j.T!==null){var n=Ps;return n!==0?n:lh()}return P0()}function Cm(){gi===0&&(gi=(Ut&536870912)===0||Ot?F0():536870912);var n=mi.current;return n!==null&&(n.flags|=32),gi}function ni(n,r,c){(n===Kt&&(kt===2||kt===9)||n.cancelPendingCommit!==null)&&(_s(n,0),En(n,Ut,gi,!1)),Ia(n,c),((Pt&2)===0||n!==Kt)&&(n===Kt&&((Pt&2)===0&&(as|=c),re===4&&En(n,Ut,gi,!1)),Ri(n))}function Sm(n,r,c){if((Pt&6)!==0)throw Error(s(327));var d=!c&&(r&124)===0&&(r&n.expiredLanes)===0||Ra(n,r),v=d?I4(n,r):sh(n,r,!0),w=d;do{if(v===0){Xs&&!d&&En(n,r,0,!1);break}else{if(c=n.current.alternate,w&&!V4(c)){v=sh(n,r,!1),w=!1;continue}if(v===2){if(w=r,n.errorRecoveryDisabledLanes&w)var V=0;else V=n.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){r=V;t:{var L=n;v=fr;var G=L.current.memoizedState.isDehydrated;if(G&&(_s(L,V).flags|=256),V=sh(L,V,!1),V!==2){if(Zu&&!G){L.errorRecoveryDisabledLanes|=w,as|=w,v=4;break t}w=Ke,Ke=v,w!==null&&(Ke===null?Ke=w:Ke.push.apply(Ke,w))}v=V}if(w=!1,v!==2)continue}}if(v===1){_s(n,0),En(n,r,0,!0);break}t:{switch(d=n,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:En(d,r,gi,!bn);break t;case 2:Ke=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(v=_u+300-oi(),10<v)){if(En(d,r,gi,!bn),go(d,0,!0)!==0)break t;d.timeoutHandle=$m(Mm.bind(null,d,c,Ke,sl,Ju,r,gi,as,Zs,bn,w,2,-0,0),v);break t}Mm(d,c,Ke,sl,Ju,r,gi,as,Zs,bn,w,0,-0,0)}}break}while(!0);Ri(n)}function Mm(n,r,c,d,v,w,V,L,G,J,nt,at,_,et){if(n.timeoutHandle=-1,at=r.subtreeFlags,(at&8192||(at&16785408)===16785408)&&(yr={stylesheets:null,count:0,unsuspend:u3},vm(r),at=f3(),at!==null)){n.cancelPendingCommit=at(Bm.bind(null,n,r,w,c,d,v,V,L,G,nt,1,_,et)),En(n,w,V,!J);return}Bm(n,r,w,c,d,v,V,L,G)}function V4(n){for(var r=n;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var v=c[d],w=v.getSnapshot;v=v.value;try{if(!Je(w(),v))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function En(n,r,c,d){r&=~Wu,r&=~as,n.suspendedLanes|=r,n.pingedLanes&=~r,d&&(n.warmLanes|=r),d=n.expirationTimes;for(var v=r;0<v;){var w=31-We(v),V=1<<w;d[w]=-1,v&=~V}c!==0&&L0(n,c,r)}function al(){return(Pt&6)===0?(mr(0),!1):!0}function ih(){if(Vt!==null){if(kt===0)var n=Vt.return;else n=Vt,Gi=$n=null,xu(n),Hs=null,sr=0,n=Vt;for(;n!==null;)sm(n.alternate,n),n=n.return;Vt=null}}function _s(n,r){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,Q4(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),ih(),Kt=n,Vt=c=zi(n.current,null),Ut=r,kt=0,ei=null,bn=!1,Xs=Ra(n,r),Zu=!1,Zs=gi=Wu=as=Cn=re=0,Ke=fr=null,Ju=!1,(r&8)!==0&&(r|=r&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=r;0<d;){var v=31-We(d),w=1<<v;r|=n[v],d&=~w}return Ji=r,To(),c}function Em(n,r){Tt=null,j.H=qo,r===Za||r===Lo?(r=Gd(),kt=3):r===zd?(r=Gd(),kt=4):kt=r===H1?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ei=r,Vt===null&&(re=1,Jo(n,ui(r,n.current)))}function Tm(){var n=j.H;return j.H=qo,n===null?qo:n}function Dm(){var n=j.A;return j.A=T4,n}function nh(){re=4,bn||(Ut&4194048)!==Ut&&mi.current!==null||(Xs=!0),(Cn&134217727)===0&&(as&134217727)===0||Kt===null||En(Kt,Ut,gi,!1)}function sh(n,r,c){var d=Pt;Pt|=2;var v=Tm(),w=Dm();(Kt!==n||Ut!==r)&&(sl=null,_s(n,r)),r=!1;var V=re;t:do try{if(kt!==0&&Vt!==null){var L=Vt,G=ei;switch(kt){case 8:ih(),V=6;break t;case 3:case 2:case 9:case 6:mi.current===null&&(r=!0);var J=kt;if(kt=0,ei=null,$s(n,L,G,J),c&&Xs){V=0;break t}break;default:J=kt,kt=0,ei=null,$s(n,L,G,J)}}R4(),V=re;break}catch(nt){Em(n,nt)}while(!0);return r&&n.shellSuspendCounter++,Gi=$n=null,Pt=d,j.H=v,j.A=w,Vt===null&&(Kt=null,Ut=0,To()),V}function R4(){for(;Vt!==null;)Vm(Vt)}function I4(n,r){var c=Pt;Pt|=2;var d=Tm(),v=Dm();Kt!==n||Ut!==r?(sl=null,nl=oi()+500,_s(n,r)):Xs=Ra(n,r);t:do try{if(kt!==0&&Vt!==null){r=Vt;var w=ei;e:switch(kt){case 1:kt=0,ei=null,$s(n,r,w,1);break;case 2:case 9:if(jd(w)){kt=0,ei=null,Rm(r);break}r=function(){kt!==2&&kt!==9||Kt!==n||(kt=7),Ri(n)},w.then(r,r);break t;case 3:kt=7;break t;case 4:kt=5;break t;case 7:jd(w)?(kt=0,ei=null,Rm(r)):(kt=0,ei=null,$s(n,r,w,7));break;case 5:var V=null;switch(Vt.tag){case 26:V=Vt.memoizedState;case 5:case 27:var L=Vt;if(!V||h2(V)){kt=0,ei=null;var G=L.sibling;if(G!==null)Vt=G;else{var J=L.return;J!==null?(Vt=J,rl(J)):Vt=null}break e}}kt=0,ei=null,$s(n,r,w,5);break;case 6:kt=0,ei=null,$s(n,r,w,6);break;case 8:ih(),re=6;break t;default:throw Error(s(462))}}B4();break}catch(nt){Em(n,nt)}while(!0);return Gi=$n=null,j.H=d,j.A=v,Pt=c,Vt!==null?0:(Kt=null,Ut=0,To(),re)}function B4(){for(;Vt!==null&&!R0();)Vm(Vt)}function Vm(n){var r=im(n.alternate,n,Ji);n.memoizedProps=n.pendingProps,r===null?rl(n):Vt=r}function Rm(n){var r=n,c=r.alternate;switch(r.tag){case 15:case 0:r=W1(c,r,r.pendingProps,r.type,void 0,Ut);break;case 11:r=W1(c,r,r.pendingProps,r.type.render,r.ref,Ut);break;case 5:xu(r);default:sm(c,r),r=Vt=Id(r,Ji),r=im(c,r,Ji)}n.memoizedProps=n.pendingProps,r===null?rl(n):Vt=r}function $s(n,r,c,d){Gi=$n=null,xu(r),Hs=null,sr=0;var v=r.return;try{if(w4(n,v,r,c,Ut)){re=1,Jo(n,ui(c,n.current)),Vt=null;return}}catch(w){if(v!==null)throw Vt=v,w;re=1,Jo(n,ui(c,n.current)),Vt=null;return}r.flags&32768?(Ot||d===1?n=!0:Xs||(Ut&536870912)!==0?n=!1:(bn=n=!0,(d===2||d===9||d===3||d===6)&&(d=mi.current,d!==null&&d.tag===13&&(d.flags|=16384))),Im(r,n)):rl(r)}function rl(n){var r=n;do{if((r.flags&32768)!==0){Im(r,bn);return}n=r.return;var c=C4(r.alternate,r,Ji);if(c!==null){Vt=c;return}if(r=r.sibling,r!==null){Vt=r;return}Vt=r=n}while(r!==null);re===0&&(re=5)}function Im(n,r){do{var c=S4(n.alternate,n);if(c!==null){c.flags&=32767,Vt=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(n=n.sibling,n!==null)){Vt=n;return}Vt=n=c}while(n!==null);re=6,Vt=null}function Bm(n,r,c,d,v,w,V,L,G){n.cancelPendingCommit=null;do ol();while(Ee!==0);if((Pt&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(w=r.lanes|r.childLanes,w|=Xc,u5(n,c,w,V,L,G),n===Kt&&(Vt=Kt=null,Ut=0),Ws=r,Mn=n,Js=c,$u=w,th=v,bm=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,L4(ho,function(){return Om(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=j.T,j.T=null,v=Q.p,Q.p=2,V=Pt,Pt|=4;try{M4(n,r,c)}finally{Pt=V,Q.p=v,j.T=d}}Ee=1,Um(),Fm(),Nm()}}function Um(){if(Ee===1){Ee=0;var n=Mn,r=Ws,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=j.T,j.T=null;var d=Q.p;Q.p=2;var v=Pt;Pt|=4;try{gm(r,n);var w=ph,V=wd(n.containerInfo),L=w.focusedElem,G=w.selectionRange;if(V!==L&&L&&L.ownerDocument&&yd(L.ownerDocument.documentElement,L)){if(G!==null&&Gc(L)){var J=G.start,nt=G.end;if(nt===void 0&&(nt=J),"selectionStart"in L)L.selectionStart=J,L.selectionEnd=Math.min(nt,L.value.length);else{var at=L.ownerDocument||document,_=at&&at.defaultView||window;if(_.getSelection){var et=_.getSelection(),bt=L.textContent.length,vt=Math.min(G.start,bt),Yt=G.end===void 0?vt:Math.min(G.end,bt);!et.extend&&vt>Yt&&(V=Yt,Yt=vt,vt=V);var X=xd(L,vt),K=xd(L,Yt);if(X&&K&&(et.rangeCount!==1||et.anchorNode!==X.node||et.anchorOffset!==X.offset||et.focusNode!==K.node||et.focusOffset!==K.offset)){var W=at.createRange();W.setStart(X.node,X.offset),et.removeAllRanges(),vt>Yt?(et.addRange(W),et.extend(K.node,K.offset)):(W.setEnd(K.node,K.offset),et.addRange(W))}}}}for(at=[],et=L;et=et.parentNode;)et.nodeType===1&&at.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<at.length;L++){var st=at[L];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}xl=!!gh,ph=gh=null}finally{Pt=v,Q.p=d,j.T=c}}n.current=r,Ee=2}}function Fm(){if(Ee===2){Ee=0;var n=Mn,r=Ws,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=j.T,j.T=null;var d=Q.p;Q.p=2;var v=Pt;Pt|=4;try{hm(n,r.alternate,r)}finally{Pt=v,Q.p=d,j.T=c}}Ee=3}}function Nm(){if(Ee===4||Ee===3){Ee=0,xc();var n=Mn,r=Ws,c=Js,d=bm;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ee=5:(Ee=0,Ws=Mn=null,Lm(n,n.pendingLanes));var v=n.pendingLanes;if(v===0&&(Sn=null),bc(c),r=r.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Va,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=j.T,v=Q.p,Q.p=2,j.T=null;try{for(var w=n.onRecoverableError,V=0;V<d.length;V++){var L=d[V];w(L.value,{componentStack:L.stack})}}finally{j.T=r,Q.p=v}}(Js&3)!==0&&ol(),Ri(n),v=n.pendingLanes,(c&4194090)!==0&&(v&42)!==0?n===eh?dr++:(dr=0,eh=n):dr=0,mr(0)}}function Lm(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Qa(r)))}function ol(n){return Um(),Fm(),Nm(),Om()}function Om(){if(Ee!==5)return!1;var n=Mn,r=$u;$u=0;var c=bc(Js),d=j.T,v=Q.p;try{Q.p=32>c?32:c,j.T=null,c=th,th=null;var w=Mn,V=Js;if(Ee=0,Ws=Mn=null,Js=0,(Pt&6)!==0)throw Error(s(331));var L=Pt;if(Pt|=4,ym(w.current),Am(w,w.current,V,c),Pt=L,mr(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Va,w)}catch{}return!0}finally{Q.p=v,j.T=d,Lm(n,r)}}function Pm(n,r,c){r=ui(c,r),r=Uu(n.stateNode,r,2),n=gn(n,r,2),n!==null&&(Ia(n,2),Ri(n))}function Gt(n,r,c){if(n.tag===3)Pm(n,n,c);else for(;r!==null;){if(r.tag===3){Pm(r,n,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Sn===null||!Sn.has(d))){n=ui(c,n),c=Y1(2),d=gn(r,c,2),d!==null&&(G1(c,d,r,n),Ia(d,2),Ri(d));break}}r=r.return}}function ah(n,r,c){var d=n.pingCache;if(d===null){d=n.pingCache=new D4;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(c)||(Zu=!0,v.add(c),n=U4.bind(null,n,r,c),r.then(n,n))}function U4(n,r,c){var d=n.pingCache;d!==null&&d.delete(r),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,Kt===n&&(Ut&c)===c&&(re===4||re===3&&(Ut&62914560)===Ut&&300>oi()-_u?(Pt&2)===0&&_s(n,0):Wu|=c,Zs===Ut&&(Zs=0)),Ri(n)}function km(n,r){r===0&&(r=N0()),n=Fs(n,r),n!==null&&(Ia(n,r),Ri(n))}function F4(n){var r=n.memoizedState,c=0;r!==null&&(c=r.retryLane),km(n,c)}function N4(n,r){var c=0;switch(n.tag){case 13:var d=n.stateNode,v=n.memoizedState;v!==null&&(c=v.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(r),km(n,c)}function L4(n,r){return Oi(n,r)}var ll=null,ta=null,rh=!1,cl=!1,oh=!1,rs=0;function Ri(n){n!==ta&&n.next===null&&(ta===null?ll=ta=n:ta=ta.next=n),cl=!0,rh||(rh=!0,P4())}function mr(n,r){if(!oh&&cl){oh=!0;do for(var c=!1,d=ll;d!==null;){if(n!==0){var v=d.pendingLanes;if(v===0)var w=0;else{var V=d.suspendedLanes,L=d.pingedLanes;w=(1<<31-We(42|n)+1)-1,w&=v&~(V&~L),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,Gm(d,w))}else w=Ut,w=go(d,d===Kt?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||Ra(d,w)||(c=!0,Gm(d,w));d=d.next}while(c);oh=!1}}function O4(){zm()}function zm(){cl=rh=!1;var n=0;rs!==0&&(q4()&&(n=rs),rs=0);for(var r=oi(),c=null,d=ll;d!==null;){var v=d.next,w=jm(d,r);w===0?(d.next=null,c===null?ll=v:c.next=v,v===null&&(ta=c)):(c=d,(n!==0||(w&3)!==0)&&(cl=!0)),d=v}mr(n)}function jm(n,r){for(var c=n.suspendedLanes,d=n.pingedLanes,v=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var V=31-We(w),L=1<<V,G=v[V];G===-1?((L&c)===0||(L&d)!==0)&&(v[V]=c5(L,r)):G<=r&&(n.expiredLanes|=L),w&=~L}if(r=Kt,c=Ut,c=go(n,n===r?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===r&&(kt===2||kt===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&xs(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Ra(n,c)){if(r=c&-c,r===n.callbackPriority)return r;switch(d!==null&&xs(d),bc(c)){case 2:case 8:c=B0;break;case 32:c=ho;break;case 268435456:c=U0;break;default:c=ho}return d=Ym.bind(null,n),c=Oi(c,d),n.callbackPriority=r,n.callbackNode=c,r}return d!==null&&d!==null&&xs(d),n.callbackPriority=2,n.callbackNode=null,2}function Ym(n,r){if(Ee!==0&&Ee!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(ol()&&n.callbackNode!==c)return null;var d=Ut;return d=go(n,n===Kt?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(Sm(n,d,r),jm(n,oi()),n.callbackNode!=null&&n.callbackNode===c?Ym.bind(null,n):null)}function Gm(n,r){if(ol())return null;Sm(n,r,!0)}function P4(){X4(function(){(Pt&6)!==0?Oi(uo,O4):zm()})}function lh(){return rs===0&&(rs=F0()),rs}function Hm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yo(""+n)}function Km(n,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,n.id&&c.setAttribute("form",n.id),r.parentNode.insertBefore(c,r),n=new FormData(n),c.parentNode.removeChild(c),n}function k4(n,r,c,d,v){if(r==="submit"&&c&&c.stateNode===v){var w=Hm((v[je]||null).action),V=d.submitter;V&&(r=(r=V[je]||null)?Hm(r.formAction):V.getAttribute("formAction"),r!==null&&(w=r,V=null));var L=new So("action","action",null,d,v);n.push({event:L,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(rs!==0){var G=V?Km(v,V):new FormData(v);Du(c,{pending:!0,data:G,method:v.method,action:w},null,G)}}else typeof w=="function"&&(L.preventDefault(),G=V?Km(v,V):new FormData(v),Du(c,{pending:!0,data:G,method:v.method,action:w},w,G))},currentTarget:v}]})}}for(var ch=0;ch<Qc.length;ch++){var uh=Qc[ch],z4=uh.toLowerCase(),j4=uh[0].toUpperCase()+uh.slice(1);yi(z4,"on"+j4)}yi(Sd,"onAnimationEnd"),yi(Md,"onAnimationIteration"),yi(Ed,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(s4,"onTransitionRun"),yi(a4,"onTransitionStart"),yi(r4,"onTransitionCancel"),yi(Td,"onTransitionEnd"),Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gr));function qm(n,r){r=(r&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],v=d.event;d=d.listeners;t:{var w=void 0;if(r)for(var V=d.length-1;0<=V;V--){var L=d[V],G=L.instance,J=L.currentTarget;if(L=L.listener,G!==w&&v.isPropagationStopped())break t;w=L,v.currentTarget=J;try{w(v)}catch(nt){Wo(nt)}v.currentTarget=null,w=G}else for(V=0;V<d.length;V++){if(L=d[V],G=L.instance,J=L.currentTarget,L=L.listener,G!==w&&v.isPropagationStopped())break t;w=L,v.currentTarget=J;try{w(v)}catch(nt){Wo(nt)}v.currentTarget=null,w=G}}}}function Rt(n,r){var c=r[Cc];c===void 0&&(c=r[Cc]=new Set);var d=n+"__bubble";c.has(d)||(Qm(r,n,2,!1),c.add(d))}function hh(n,r,c){var d=0;r&&(d|=4),Qm(c,n,d,r)}var ul="_reactListening"+Math.random().toString(36).slice(2);function fh(n){if(!n[ul]){n[ul]=!0,z0.forEach(function(c){c!=="selectionchange"&&(Y4.has(c)||hh(c,!1,n),hh(c,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[ul]||(r[ul]=!0,hh("selectionchange",!1,r))}}function Qm(n,r,c,d){switch(A2(r)){case 2:var v=g3;break;case 8:v=p3;break;default:v=Eh}c=v.bind(null,r,c,n),v=void 0,!Fc||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?n.addEventListener(r,c,{capture:!0,passive:v}):n.addEventListener(r,c,!0):v!==void 0?n.addEventListener(r,c,{passive:v}):n.addEventListener(r,c,!1)}function dh(n,r,c,d,v){var w=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var V=d.tag;if(V===3||V===4){var L=d.stateNode.containerInfo;if(L===v)break;if(V===4)for(V=d.return;V!==null;){var G=V.tag;if((G===3||G===4)&&V.stateNode.containerInfo===v)return;V=V.return}for(;L!==null;){if(V=ws(L),V===null)return;if(G=V.tag,G===5||G===6||G===26||G===27){d=w=V;continue t}L=L.parentNode}}d=d.return}td(function(){var J=w,nt=Bc(c),at=[];t:{var _=Dd.get(n);if(_!==void 0){var et=So,bt=n;switch(n){case"keypress":if(bo(c)===0)break t;case"keydown":case"keyup":et=L5;break;case"focusin":bt="focus",et=Pc;break;case"focusout":bt="blur",et=Pc;break;case"beforeblur":case"afterblur":et=Pc;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=S5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=k5;break;case Sd:case Md:case Ed:et=T5;break;case Td:et=j5;break;case"scroll":case"scrollend":et=b5;break;case"wheel":et=G5;break;case"copy":case"cut":case"paste":et=V5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=ad;break;case"toggle":case"beforetoggle":et=K5}var vt=(r&4)!==0,Yt=!vt&&(n==="scroll"||n==="scrollend"),X=vt?_!==null?_+"Capture":null:_;vt=[];for(var K=J,W;K!==null;){var st=K;if(W=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||W===null||X===null||(st=Fa(K,X),st!=null&&vt.push(pr(K,st,W))),Yt)break;K=K.return}0<vt.length&&(_=new et(_,bt,null,c,nt),at.push({event:_,listeners:vt}))}}if((r&7)===0){t:{if(_=n==="mouseover"||n==="pointerover",et=n==="mouseout"||n==="pointerout",_&&c!==Ic&&(bt=c.relatedTarget||c.fromElement)&&(ws(bt)||bt[ys]))break t;if((et||_)&&(_=nt.window===nt?nt:(_=nt.ownerDocument)?_.defaultView||_.parentWindow:window,et?(bt=c.relatedTarget||c.toElement,et=J,bt=bt?ws(bt):null,bt!==null&&(Yt=o(bt),vt=bt.tag,bt!==Yt||vt!==5&&vt!==27&&vt!==6)&&(bt=null)):(et=null,bt=J),et!==bt)){if(vt=nd,st="onMouseLeave",X="onMouseEnter",K="mouse",(n==="pointerout"||n==="pointerover")&&(vt=ad,st="onPointerLeave",X="onPointerEnter",K="pointer"),Yt=et==null?_:Ua(et),W=bt==null?_:Ua(bt),_=new vt(st,K+"leave",et,c,nt),_.target=Yt,_.relatedTarget=W,st=null,ws(nt)===J&&(vt=new vt(X,K+"enter",bt,c,nt),vt.target=W,vt.relatedTarget=Yt,st=vt),Yt=st,et&&bt)e:{for(vt=et,X=bt,K=0,W=vt;W;W=ea(W))K++;for(W=0,st=X;st;st=ea(st))W++;for(;0<K-W;)vt=ea(vt),K--;for(;0<W-K;)X=ea(X),W--;for(;K--;){if(vt===X||X!==null&&vt===X.alternate)break e;vt=ea(vt),X=ea(X)}vt=null}else vt=null;et!==null&&Xm(at,_,et,vt,!1),bt!==null&&Yt!==null&&Xm(at,Yt,bt,vt,!0)}}t:{if(_=J?Ua(J):window,et=_.nodeName&&_.nodeName.toLowerCase(),et==="select"||et==="input"&&_.type==="file")var dt=dd;else if(hd(_))if(md)dt=e4;else{dt=$5;var Dt=_5}else et=_.nodeName,!et||et.toLowerCase()!=="input"||_.type!=="checkbox"&&_.type!=="radio"?J&&Rc(J.elementType)&&(dt=dd):dt=t4;if(dt&&(dt=dt(n,J))){fd(at,dt,c,nt);break t}Dt&&Dt(n,_,J),n==="focusout"&&J&&_.type==="number"&&J.memoizedProps.value!=null&&Vc(_,"number",_.value)}switch(Dt=J?Ua(J):window,n){case"focusin":(hd(Dt)||Dt.contentEditable==="true")&&(Is=Dt,Hc=J,Ya=null);break;case"focusout":Ya=Hc=Is=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,bd(at,c,nt);break;case"selectionchange":if(n4)break;case"keydown":case"keyup":bd(at,c,nt)}var pt;if(zc)t:{switch(n){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else Rs?cd(n,c)&&(yt="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(yt="onCompositionStart");yt&&(rd&&c.locale!=="ko"&&(Rs||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Rs&&(pt=ed()):(hn=nt,Nc="value"in hn?hn.value:hn.textContent,Rs=!0)),Dt=hl(J,yt),0<Dt.length&&(yt=new sd(yt,n,null,c,nt),at.push({event:yt,listeners:Dt}),pt?yt.data=pt:(pt=ud(c),pt!==null&&(yt.data=pt)))),(pt=Q5?X5(n,c):Z5(n,c))&&(yt=hl(J,"onBeforeInput"),0<yt.length&&(Dt=new sd("onBeforeInput","beforeinput",null,c,nt),at.push({event:Dt,listeners:yt}),Dt.data=pt)),k4(at,n,J,c,nt)}qm(at,r)})}function pr(n,r,c){return{instance:n,listener:r,currentTarget:c}}function hl(n,r){for(var c=r+"Capture",d=[];n!==null;){var v=n,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Fa(n,c),v!=null&&d.unshift(pr(n,v,w)),v=Fa(n,r),v!=null&&d.push(pr(n,v,w))),n.tag===3)return d;n=n.return}return[]}function ea(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Xm(n,r,c,d,v){for(var w=r._reactName,V=[];c!==null&&c!==d;){var L=c,G=L.alternate,J=L.stateNode;if(L=L.tag,G!==null&&G===d)break;L!==5&&L!==26&&L!==27||J===null||(G=J,v?(J=Fa(c,w),J!=null&&V.unshift(pr(c,J,G))):v||(J=Fa(c,w),J!=null&&V.push(pr(c,J,G)))),c=c.return}V.length!==0&&n.push({event:r,listeners:V})}var G4=/\r\n?/g,H4=/\u0000|\uFFFD/g;function Zm(n){return(typeof n=="string"?n:""+n).replace(G4,`
`).replace(H4,"")}function Wm(n,r){return r=Zm(r),Zm(n)===r}function fl(){}function jt(n,r,c,d,v,w){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Ts(n,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Ts(n,""+d);break;case"className":Ao(n,"class",d);break;case"tabIndex":Ao(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ao(n,c,d);break;case"style":_0(n,d,w);break;case"data":if(r!=="object"){Ao(n,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=yo(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(r!=="input"&&jt(n,r,"name",v.name,v,null),jt(n,r,"formEncType",v.formEncType,v,null),jt(n,r,"formMethod",v.formMethod,v,null),jt(n,r,"formTarget",v.formTarget,v,null)):(jt(n,r,"encType",v.encType,v,null),jt(n,r,"method",v.method,v,null),jt(n,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=yo(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=fl);break;case"onScroll":d!=null&&Rt("scroll",n);break;case"onScrollEnd":d!=null&&Rt("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=yo(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":Rt("beforetoggle",n),Rt("toggle",n),po(n,"popover",d);break;case"xlinkActuate":Pi(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Pi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Pi(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Pi(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Pi(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Pi(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Pi(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Pi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Pi(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":po(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=y5.get(c)||c,po(n,c,d))}}function mh(n,r,c,d,v,w){switch(c){case"style":_0(n,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(s(60));n.innerHTML=c}}break;case"children":typeof d=="string"?Ts(n,d):(typeof d=="number"||typeof d=="bigint")&&Ts(n,""+d);break;case"onScroll":d!=null&&Rt("scroll",n);break;case"onScrollEnd":d!=null&&Rt("scrollend",n);break;case"onClick":d!=null&&(n.onclick=fl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!j0.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),r=c.slice(2,v?c.length-7:void 0),w=n[je]||null,w=w!=null?w[c]:null,typeof w=="function"&&n.removeEventListener(r,w,v),typeof d=="function")){typeof w!="function"&&w!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(r,d,v);break t}c in n?n[c]=d:d===!0?n.setAttribute(c,""):po(n,c,d)}}}function Te(n,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",n),Rt("load",n);var d=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var V=c[w];if(V!=null)switch(w){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:jt(n,r,w,V,c,null)}}v&&jt(n,r,"srcSet",c.srcSet,c,null),d&&jt(n,r,"src",c.src,c,null);return;case"input":Rt("invalid",n);var L=w=V=v=null,G=null,J=null;for(d in c)if(c.hasOwnProperty(d)){var nt=c[d];if(nt!=null)switch(d){case"name":v=nt;break;case"type":V=nt;break;case"checked":G=nt;break;case"defaultChecked":J=nt;break;case"value":w=nt;break;case"defaultValue":L=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(s(137,r));break;default:jt(n,r,d,nt,c,null)}}X0(n,w,L,G,J,V,v,!1),vo(n);return;case"select":Rt("invalid",n),d=V=w=null;for(v in c)if(c.hasOwnProperty(v)&&(L=c[v],L!=null))switch(v){case"value":w=L;break;case"defaultValue":V=L;break;case"multiple":d=L;default:jt(n,r,v,L,c,null)}r=w,c=V,n.multiple=!!d,r!=null?Es(n,!!d,r,!1):c!=null&&Es(n,!!d,c,!0);return;case"textarea":Rt("invalid",n),w=v=d=null;for(V in c)if(c.hasOwnProperty(V)&&(L=c[V],L!=null))switch(V){case"value":d=L;break;case"defaultValue":v=L;break;case"children":w=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:jt(n,r,V,L,c,null)}W0(n,d,v,w),vo(n);return;case"option":for(G in c)if(c.hasOwnProperty(G)&&(d=c[G],d!=null))switch(G){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:jt(n,r,G,d,c,null)}return;case"dialog":Rt("beforetoggle",n),Rt("toggle",n),Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":Rt("load",n);break;case"video":case"audio":for(d=0;d<gr.length;d++)Rt(gr[d],n);break;case"image":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"embed":case"source":case"link":Rt("error",n),Rt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(d=c[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:jt(n,r,J,d,c,null)}return;default:if(Rc(r)){for(nt in c)c.hasOwnProperty(nt)&&(d=c[nt],d!==void 0&&mh(n,r,nt,d,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(d=c[L],d!=null&&jt(n,r,L,d,c,null))}function K4(n,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,V=null,L=null,G=null,J=null,nt=null;for(et in c){var at=c[et];if(c.hasOwnProperty(et)&&at!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":G=at;default:d.hasOwnProperty(et)||jt(n,r,et,null,d,at)}}for(var _ in d){var et=d[_];if(at=c[_],d.hasOwnProperty(_)&&(et!=null||at!=null))switch(_){case"type":w=et;break;case"name":v=et;break;case"checked":J=et;break;case"defaultChecked":nt=et;break;case"value":V=et;break;case"defaultValue":L=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,r));break;default:et!==at&&jt(n,r,_,et,d,at)}}Dc(n,V,L,G,J,nt,w,v);return;case"select":et=V=L=_=null;for(w in c)if(G=c[w],c.hasOwnProperty(w)&&G!=null)switch(w){case"value":break;case"multiple":et=G;default:d.hasOwnProperty(w)||jt(n,r,w,null,d,G)}for(v in d)if(w=d[v],G=c[v],d.hasOwnProperty(v)&&(w!=null||G!=null))switch(v){case"value":_=w;break;case"defaultValue":L=w;break;case"multiple":V=w;default:w!==G&&jt(n,r,v,w,d,G)}r=L,c=V,d=et,_!=null?Es(n,!!c,_,!1):!!d!=!!c&&(r!=null?Es(n,!!c,r,!0):Es(n,!!c,c?[]:"",!1));return;case"textarea":et=_=null;for(L in c)if(v=c[L],c.hasOwnProperty(L)&&v!=null&&!d.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:jt(n,r,L,null,d,v)}for(V in d)if(v=d[V],w=c[V],d.hasOwnProperty(V)&&(v!=null||w!=null))switch(V){case"value":_=v;break;case"defaultValue":et=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&jt(n,r,V,v,d,w)}Z0(n,_,et);return;case"option":for(var bt in c)if(_=c[bt],c.hasOwnProperty(bt)&&_!=null&&!d.hasOwnProperty(bt))switch(bt){case"selected":n.selected=!1;break;default:jt(n,r,bt,null,d,_)}for(G in d)if(_=d[G],et=c[G],d.hasOwnProperty(G)&&_!==et&&(_!=null||et!=null))switch(G){case"selected":n.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:jt(n,r,G,_,d,et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in c)_=c[vt],c.hasOwnProperty(vt)&&_!=null&&!d.hasOwnProperty(vt)&&jt(n,r,vt,null,d,_);for(J in d)if(_=d[J],et=c[J],d.hasOwnProperty(J)&&_!==et&&(_!=null||et!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(137,r));break;default:jt(n,r,J,_,d,et)}return;default:if(Rc(r)){for(var Yt in c)_=c[Yt],c.hasOwnProperty(Yt)&&_!==void 0&&!d.hasOwnProperty(Yt)&&mh(n,r,Yt,void 0,d,_);for(nt in d)_=d[nt],et=c[nt],!d.hasOwnProperty(nt)||_===et||_===void 0&&et===void 0||mh(n,r,nt,_,d,et);return}}for(var X in c)_=c[X],c.hasOwnProperty(X)&&_!=null&&!d.hasOwnProperty(X)&&jt(n,r,X,null,d,_);for(at in d)_=d[at],et=c[at],!d.hasOwnProperty(at)||_===et||_==null&&et==null||jt(n,r,at,_,d,et)}var gh=null,ph=null;function dl(n){return n.nodeType===9?n:n.ownerDocument}function Jm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _m(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Ah(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var vh=null;function q4(){var n=window.event;return n&&n.type==="popstate"?n===vh?!1:(vh=n,!0):(vh=null,!1)}var $m=typeof setTimeout=="function"?setTimeout:void 0,Q4=typeof clearTimeout=="function"?clearTimeout:void 0,t2=typeof Promise=="function"?Promise:void 0,X4=typeof queueMicrotask=="function"?queueMicrotask:typeof t2<"u"?function(n){return t2.resolve(null).then(n).catch(Z4)}:$m;function Z4(n){setTimeout(function(){throw n})}function Tn(n){return n==="head"}function e2(n,r){var c=r,d=0,v=0;do{var w=c.nextSibling;if(n.removeChild(c),w&&w.nodeType===8)if(c=w.data,c==="/$"){if(0<d&&8>d){c=d;var V=n.ownerDocument;if(c&1&&Ar(V.documentElement),c&2&&Ar(V.body),c&4)for(c=V.head,Ar(c),V=c.firstChild;V;){var L=V.nextSibling,G=V.nodeName;V[Ba]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&V.rel.toLowerCase()==="stylesheet"||c.removeChild(V),V=L}}if(v===0){n.removeChild(w),Mr(r);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:d=c.charCodeAt(0)-48;else d=0;c=w}while(c);Mr(r)}function xh(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":xh(c),Sc(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function W4(n,r,c,d){for(;n.nodeType===1;){var v=c;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Ba])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==v.rel||n.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||n.getAttribute("title")!==(v.title==null?null:v.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(v.src==null?null:v.src)||n.getAttribute("type")!==(v.type==null?null:v.type)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=bi(n.nextSibling),n===null)break}return null}function J4(n,r,c){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=bi(n.nextSibling),n===null))return null;return n}function yh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function _4(n,r){var c=n.ownerDocument;if(n.data!=="$?"||c.readyState==="complete")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function bi(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var wh=null;function i2(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return n;r--}else c==="/$"&&r++}n=n.previousSibling}return null}function n2(n,r,c){switch(r=dl(c),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Ar(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Sc(n)}var pi=new Map,s2=new Set;function ml(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _i=Q.d;Q.d={f:$4,r:t3,D:e3,C:i3,L:n3,m:s3,X:r3,S:a3,M:o3};function $4(){var n=_i.f(),r=al();return n||r}function t3(n){var r=bs(n);r!==null&&r.tag===5&&r.type==="form"?S1(r):_i.r(n)}var ia=typeof document>"u"?null:document;function a2(n,r,c){var d=ia;if(d&&typeof r=="string"&&r){var v=ci(r);v='link[rel="'+n+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),s2.has(v)||(s2.add(v),n={rel:n,crossOrigin:c,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),Te(r,"link",n),Ae(r),d.head.appendChild(r)))}}function e3(n){_i.D(n),a2("dns-prefetch",n,null)}function i3(n,r){_i.C(n,r),a2("preconnect",n,r)}function n3(n,r,c){_i.L(n,r,c);var d=ia;if(d&&n&&r){var v='link[rel="preload"][as="'+ci(r)+'"]';r==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+ci(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+ci(c.imageSizes)+'"]')):v+='[href="'+ci(n)+'"]';var w=v;switch(r){case"style":w=na(n);break;case"script":w=sa(n)}pi.has(w)||(n=m({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:n,as:r},c),pi.set(w,n),d.querySelector(v)!==null||r==="style"&&d.querySelector(vr(w))||r==="script"&&d.querySelector(xr(w))||(r=d.createElement("link"),Te(r,"link",n),Ae(r),d.head.appendChild(r)))}}function s3(n,r){_i.m(n,r);var c=ia;if(c&&n){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+ci(d)+'"][href="'+ci(n)+'"]',w=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=sa(n)}if(!pi.has(w)&&(n=m({rel:"modulepreload",href:n},r),pi.set(w,n),c.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(xr(w)))return}d=c.createElement("link"),Te(d,"link",n),Ae(d),c.head.appendChild(d)}}}function a3(n,r,c){_i.S(n,r,c);var d=ia;if(d&&n){var v=Cs(d).hoistableStyles,w=na(n);r=r||"default";var V=v.get(w);if(!V){var L={loading:0,preload:null};if(V=d.querySelector(vr(w)))L.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":r},c),(c=pi.get(w))&&bh(n,c);var G=V=d.createElement("link");Ae(G),Te(G,"link",n),G._p=new Promise(function(J,nt){G.onload=J,G.onerror=nt}),G.addEventListener("load",function(){L.loading|=1}),G.addEventListener("error",function(){L.loading|=2}),L.loading|=4,gl(V,r,d)}V={type:"stylesheet",instance:V,count:1,state:L},v.set(w,V)}}}function r3(n,r){_i.X(n,r);var c=ia;if(c&&n){var d=Cs(c).hoistableScripts,v=sa(n),w=d.get(v);w||(w=c.querySelector(xr(v)),w||(n=m({src:n,async:!0},r),(r=pi.get(v))&&Ch(n,r),w=c.createElement("script"),Ae(w),Te(w,"link",n),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function o3(n,r){_i.M(n,r);var c=ia;if(c&&n){var d=Cs(c).hoistableScripts,v=sa(n),w=d.get(v);w||(w=c.querySelector(xr(v)),w||(n=m({src:n,async:!0,type:"module"},r),(r=pi.get(v))&&Ch(n,r),w=c.createElement("script"),Ae(w),Te(w,"link",n),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function r2(n,r,c,d){var v=(v=At.current)?ml(v):null;if(!v)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=na(c.href),c=Cs(v).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=na(c.href);var w=Cs(v).hoistableStyles,V=w.get(n);if(V||(v=v.ownerDocument||v,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,V),(w=v.querySelector(vr(n)))&&!w._p&&(V.instance=w,V.state.loading=5),pi.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},pi.set(n,c),w||l3(v,n,c,V.state))),r&&d===null)throw Error(s(528,""));return V}if(r&&d!==null)throw Error(s(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=sa(c),c=Cs(v).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function na(n){return'href="'+ci(n)+'"'}function vr(n){return'link[rel="stylesheet"]['+n+"]"}function o2(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function l3(n,r,c,d){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=n.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Te(r,"link",c),Ae(r),n.head.appendChild(r))}function sa(n){return'[src="'+ci(n)+'"]'}function xr(n){return"script[async]"+n}function l2(n,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=n.querySelector('style[data-href~="'+ci(c.href)+'"]');if(d)return r.instance=d,Ae(d),d;var v=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Ae(d),Te(d,"style",v),gl(d,c.precedence,n),r.instance=d;case"stylesheet":v=na(c.href);var w=n.querySelector(vr(v));if(w)return r.state.loading|=4,r.instance=w,Ae(w),w;d=o2(c),(v=pi.get(v))&&bh(d,v),w=(n.ownerDocument||n).createElement("link"),Ae(w);var V=w;return V._p=new Promise(function(L,G){V.onload=L,V.onerror=G}),Te(w,"link",d),r.state.loading|=4,gl(w,c.precedence,n),r.instance=w;case"script":return w=sa(c.src),(v=n.querySelector(xr(w)))?(r.instance=v,Ae(v),v):(d=c,(v=pi.get(w))&&(d=m({},c),Ch(d,v)),n=n.ownerDocument||n,v=n.createElement("script"),Ae(v),Te(v,"link",d),n.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,gl(d,c.precedence,n));return r.instance}function gl(n,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,w=v,V=0;V<d.length;V++){var L=d[V];if(L.dataset.precedence===r)w=L;else if(w!==v)break}w?w.parentNode.insertBefore(n,w.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(n,r.firstChild))}function bh(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Ch(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var pl=null;function c2(n,r,c){if(pl===null){var d=new Map,v=pl=new Map;v.set(c,d)}else v=pl,d=v.get(c),d||(d=new Map,v.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),v=0;v<c.length;v++){var w=c[v];if(!(w[Ba]||w[Re]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var V=w.getAttribute(r)||"";V=n+V;var L=d.get(V);L?L.push(w):d.set(V,[w])}}return d}function u2(n,r,c){n=n.ownerDocument||n,n.head.insertBefore(c,r==="title"?n.querySelector("head > title"):null)}function c3(n,r,c){if(c===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function h2(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var yr=null;function u3(){}function h3(n,r,c){if(yr===null)throw Error(s(475));var d=yr;if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var v=na(c.href),w=n.querySelector(vr(v));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(d.count++,d=Al.bind(d),n.then(d,d)),r.state.loading|=4,r.instance=w,Ae(w);return}w=n.ownerDocument||n,c=o2(c),(v=pi.get(v))&&bh(c,v),w=w.createElement("link"),Ae(w);var V=w;V._p=new Promise(function(L,G){V.onload=L,V.onerror=G}),Te(w,"link",c),r.instance=w}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(d.count++,r=Al.bind(d),n.addEventListener("load",r),n.addEventListener("error",r))}}function f3(){if(yr===null)throw Error(s(475));var n=yr;return n.stylesheets&&n.count===0&&Sh(n,n.stylesheets),0<n.count?function(r){var c=setTimeout(function(){if(n.stylesheets&&Sh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(c)}}:null}function Al(){if(this.count--,this.count===0){if(this.stylesheets)Sh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var vl=null;function Sh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,vl=new Map,r.forEach(d3,n),vl=null,Al.call(n))}function d3(n,r){if(!(r.state.loading&4)){var c=vl.get(n);if(c)var d=c.get(null);else{c=new Map,vl.set(n,c);for(var v=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var V=v[w];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(c.set(V.dataset.precedence,V),d=V)}d&&c.set(null,d)}v=r.instance,V=v.getAttribute("data-precedence"),w=c.get(V)||d,w===d&&c.set(null,v),c.set(V,v),this.count++,d=Al.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),w?w.parentNode.insertBefore(v,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(v,n.firstChild)),r.state.loading|=4}}var wr={$$typeof:S,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function m3(n,r,c,d,v,w,V,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yc(0),this.hiddenUpdates=yc(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function f2(n,r,c,d,v,w,V,L,G,J,nt,at){return n=new m3(n,r,c,V,L,G,J,at),r=1,w===!0&&(r|=24),w=_e(3,null,null,r),n.current=w,w.stateNode=n,r=au(),r.refCount++,n.pooledCache=r,r.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:r},cu(w),n}function d2(n){return n?(n=Ns,n):Ns}function m2(n,r,c,d,v,w){v=d2(v),d.context===null?d.context=v:d.pendingContext=v,d=mn(r),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=gn(n,d,r),c!==null&&(ni(c,n,r),Ja(c,n,r))}function g2(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<r?c:r}}function Mh(n,r){g2(n,r),(n=n.alternate)&&g2(n,r)}function p2(n){if(n.tag===13){var r=Fs(n,67108864);r!==null&&ni(r,n,67108864),Mh(n,67108864)}}var xl=!0;function g3(n,r,c,d){var v=j.T;j.T=null;var w=Q.p;try{Q.p=2,Eh(n,r,c,d)}finally{Q.p=w,j.T=v}}function p3(n,r,c,d){var v=j.T;j.T=null;var w=Q.p;try{Q.p=8,Eh(n,r,c,d)}finally{Q.p=w,j.T=v}}function Eh(n,r,c,d){if(xl){var v=Th(d);if(v===null)dh(n,r,d,yl,c),v2(n,d);else if(v3(v,n,r,c,d))d.stopPropagation();else if(v2(n,d),r&4&&-1<A3.indexOf(n)){for(;v!==null;){var w=bs(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var V=Gn(w.pendingLanes);if(V!==0){var L=w;for(L.pendingLanes|=2,L.entangledLanes|=2;V;){var G=1<<31-We(V);L.entanglements[1]|=G,V&=~G}Ri(w),(Pt&6)===0&&(nl=oi()+500,mr(0))}}break;case 13:L=Fs(w,2),L!==null&&ni(L,w,2),al(),Mh(w,2)}if(w=Th(d),w===null&&dh(n,r,d,yl,c),w===v)break;v=w}v!==null&&d.stopPropagation()}else dh(n,r,d,null,c)}}function Th(n){return n=Bc(n),Dh(n)}var yl=null;function Dh(n){if(yl=null,n=ws(n),n!==null){var r=o(n);if(r===null)n=null;else{var c=r.tag;if(c===13){if(n=l(r),n!==null)return n;n=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return yl=n,null}function A2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(I0()){case uo:return 2;case B0:return 8;case ho:case n5:return 32;case U0:return 268435456;default:return 32}default:return 32}}var Vh=!1,Dn=null,Vn=null,Rn=null,br=new Map,Cr=new Map,In=[],A3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v2(n,r){switch(n){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":br.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cr.delete(r.pointerId)}}function Sr(n,r,c,d,v,w){return n===null||n.nativeEvent!==w?(n={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[v]},r!==null&&(r=bs(r),r!==null&&p2(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),n)}function v3(n,r,c,d,v){switch(r){case"focusin":return Dn=Sr(Dn,n,r,c,d,v),!0;case"dragenter":return Vn=Sr(Vn,n,r,c,d,v),!0;case"mouseover":return Rn=Sr(Rn,n,r,c,d,v),!0;case"pointerover":var w=v.pointerId;return br.set(w,Sr(br.get(w)||null,n,r,c,d,v)),!0;case"gotpointercapture":return w=v.pointerId,Cr.set(w,Sr(Cr.get(w)||null,n,r,c,d,v)),!0}return!1}function x2(n){var r=ws(n.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){n.blockedOn=r,h5(n.priority,function(){if(c.tag===13){var d=ii();d=wc(d);var v=Fs(c,d);v!==null&&ni(v,c,d),Mh(c,d)}});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function wl(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var c=Th(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);Ic=d,c.target.dispatchEvent(d),Ic=null}else return r=bs(c),r!==null&&p2(r),n.blockedOn=c,!1;r.shift()}return!0}function y2(n,r,c){wl(n)&&c.delete(r)}function x3(){Vh=!1,Dn!==null&&wl(Dn)&&(Dn=null),Vn!==null&&wl(Vn)&&(Vn=null),Rn!==null&&wl(Rn)&&(Rn=null),br.forEach(y2),Cr.forEach(y2)}function bl(n,r){n.blockedOn===r&&(n.blockedOn=null,Vh||(Vh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,x3)))}var Cl=null;function w2(n){Cl!==n&&(Cl=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Cl===n&&(Cl=null);for(var r=0;r<n.length;r+=3){var c=n[r],d=n[r+1],v=n[r+2];if(typeof d!="function"){if(Dh(d||c)===null)continue;break}var w=bs(c);w!==null&&(n.splice(r,3),r-=3,Du(w,{pending:!0,data:v,method:c.method,action:d},d,v))}}))}function Mr(n){function r(G){return bl(G,n)}Dn!==null&&bl(Dn,n),Vn!==null&&bl(Vn,n),Rn!==null&&bl(Rn,n),br.forEach(r),Cr.forEach(r);for(var c=0;c<In.length;c++){var d=In[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<In.length&&(c=In[0],c.blockedOn===null);)x2(c),c.blockedOn===null&&In.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var v=c[d],w=c[d+1],V=v[je]||null;if(typeof w=="function")V||w2(c);else if(V){var L=null;if(w&&w.hasAttribute("formAction")){if(v=w,V=w[je]||null)L=V.formAction;else if(Dh(v)!==null)continue}else L=V.action;typeof L=="function"?c[d+1]=L:(c.splice(d,3),d-=3),w2(c)}}}function Rh(n){this._internalRoot=n}Sl.prototype.render=Rh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var c=r.current,d=ii();m2(c,d,n,r,null,null)},Sl.prototype.unmount=Rh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;m2(n.current,2,null,n,null,null),al(),r[ys]=null}};function Sl(n){this._internalRoot=n}Sl.prototype.unstable_scheduleHydration=function(n){if(n){var r=P0();n={blockedOn:null,target:n,priority:r};for(var c=0;c<In.length&&r!==0&&r<In[c].priority;c++);In.splice(c,0,n),c===0&&x2(n)}};var b2=t.version;if(b2!=="19.1.0")throw Error(s(527,b2,"19.1.0"));Q.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=u(r),n=n!==null?f(n):null,n=n===null?null:n.stateNode,n};var y3={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{Va=Ml.inject(y3),Ze=Ml}catch{}}return Tr.createRoot=function(n,r){if(!a(n))throw Error(s(299));var c=!1,d="",v=P1,w=k1,V=z1,L=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(V=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(L=r.unstable_transitionCallbacks)),r=f2(n,1,!1,null,null,c,d,v,w,V,L,null),n[ys]=r.current,fh(n),new Rh(r)},Tr.hydrateRoot=function(n,r,c){if(!a(n))throw Error(s(299));var d=!1,v="",w=P1,V=k1,L=z1,G=null,J=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(V=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(G=c.unstable_transitionCallbacks),c.formState!==void 0&&(J=c.formState)),r=f2(n,1,!0,r,c??null,d,v,w,V,L,G,J),r.context=d2(null),c=r.current,d=ii(),d=wc(d),v=mn(d),v.callback=null,gn(c,v,d),c=d,r.current.lanes=c,Ia(r,c),Ri(r),n[ys]=r.current,fh(n),new Sl(r)},Tr.version="19.1.0",Tr}var B2;function U3(){if(B2)return Uh.exports;B2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Uh.exports=B3(),Uh.exports}var F3=U3();const N3=Pf(F3);var Dr={},U2;function L3(){if(U2)return Dr;U2=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.parse=l,Dr.serialize=f;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function l(p,A){const x=new o,y=p.length;if(y<2)return x;const b=(A==null?void 0:A.decode)||m;let C=0;do{const E=p.indexOf("=",C);if(E===-1)break;const S=p.indexOf(";",C),M=S===-1?y:S;if(E>M){C=p.lastIndexOf(";",E-1)+1;continue}const T=h(p,C,E),I=u(p,E,T),R=p.slice(T,I);if(x[R]===void 0){let D=h(p,E+1,M),U=u(p,M,D);const F=b(p.slice(D,U));x[R]=F}C=M+1}while(C<y);return x}function h(p,A,x){do{const y=p.charCodeAt(A);if(y!==32&&y!==9)return A}while(++A<x);return x}function u(p,A,x){for(;A>x;){const y=p.charCodeAt(--A);if(y!==32&&y!==9)return A+1}return x}function f(p,A,x){const y=(x==null?void 0:x.encode)||encodeURIComponent;if(!e.test(p))throw new TypeError(`argument name is invalid: ${p}`);const b=y(A);if(!t.test(b))throw new TypeError(`argument val is invalid: ${A}`);let C=p+"="+b;if(!x)return C;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);C+="; Max-Age="+x.maxAge}if(x.domain){if(!i.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);C+="; Domain="+x.domain}if(x.path){if(!s.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);C+="; Path="+x.path}if(x.expires){if(!g(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);C+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(C+="; HttpOnly"),x.secure&&(C+="; Secure"),x.partitioned&&(C+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":C+="; Priority=Low";break;case"medium":C+="; Priority=Medium";break;case"high":C+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":C+="; SameSite=Strict";break;case"lax":C+="; SameSite=Lax";break;case"none":C+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return C}function m(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function g(p){return a.call(p)==="[object Date]"}return Dr}L3();/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var F2="popstate";function O3(e={}){function t(s,a){let{pathname:o,search:l,hash:h}=s.location;return df("",{pathname:o,search:l,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function i(s,a){return typeof a=="string"?a:qr(a)}return k3(t,i,null,e)}function ne(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ni(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function P3(){return Math.random().toString(36).substring(2,10)}function N2(e,t){return{usr:e.state,key:e.key,idx:t}}function df(e,t,i=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ma(t):t,state:i,key:t&&t.key||s||P3()}}function qr({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ma(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function k3(e,t,i,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,h="POP",u=null,f=m();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function m(){return(l.state||{idx:null}).idx}function g(){h="POP";let b=m(),C=b==null?null:b-f;f=b,u&&u({action:h,location:y.location,delta:C})}function p(b,C){h="PUSH";let E=df(y.location,b,C);f=m()+1;let S=N2(E,f),M=y.createHref(E);try{l.pushState(S,"",M)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;a.location.assign(M)}o&&u&&u({action:h,location:y.location,delta:1})}function A(b,C){h="REPLACE";let E=df(y.location,b,C);f=m();let S=N2(E,f),M=y.createHref(E);l.replaceState(S,"",M),o&&u&&u({action:h,location:y.location,delta:0})}function x(b){let C=a.location.origin!=="null"?a.location.origin:a.location.href,E=typeof b=="string"?b:qr(b);return E=E.replace(/ $/,"%20"),ne(C,`No window.location.(origin|href) available to create URL for href: ${E}`),new URL(E,C)}let y={get action(){return h},get location(){return e(a,l)},listen(b){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(F2,g),u=b,()=>{a.removeEventListener(F2,g),u=null}},createHref(b){return t(a,b)},createURL:x,encodeLocation(b){let C=x(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:A,go(b){return l.go(b)}};return y}function Op(e,t,i="/"){return z3(e,t,i,!1)}function z3(e,t,i,s){let a=typeof t=="string"?Ma(t):t,o=rn(a.pathname||"/",i);if(o==null)return null;let l=Pp(e);j3(l);let h=null;for(let u=0;h==null&&u<l.length;++u){let f=_3(o);h=W3(l[u],f,s)}return h}function Pp(e,t=[],i=[],s=""){let a=(o,l,h)=>{let u={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(ne(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length));let f=en([s,u.relativePath]),m=i.concat(u);o.children&&o.children.length>0&&(ne(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Pp(o.children,t,m,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:X3(f,o.index),routesMeta:m})};return e.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,l);else for(let u of kp(o.path))a(o,l,u)}),t}function kp(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,a=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=kp(s.join("/")),h=[];return h.push(...l.map(u=>u===""?o:[o,u].join("/"))),a&&h.push(...l),h.map(u=>e.startsWith("/")&&u===""?"/":u)}function j3(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:Z3(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var Y3=/^:[\w-]+$/,G3=3,H3=2,K3=1,q3=10,Q3=-2,L2=e=>e==="*";function X3(e,t){let i=e.split("/"),s=i.length;return i.some(L2)&&(s+=Q3),t&&(s+=H3),i.filter(a=>!L2(a)).reduce((a,o)=>a+(Y3.test(o)?G3:o===""?K3:q3),s)}function Z3(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function W3(e,t,i=!1){let{routesMeta:s}=e,a={},o="/",l=[];for(let h=0;h<s.length;++h){let u=s[h],f=h===s.length-1,m=o==="/"?t:t.slice(o.length)||"/",g=ec({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},m),p=u.route;if(!g&&f&&i&&!s[s.length-1].route.index&&(g=ec({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:en([o,g.pathname]),pathnameBase:ix(en([o,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(o=en([o,g.pathnameBase]))}return l}function ec(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=J3(e.path,e.caseSensitive,e.end),a=t.match(i);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((f,{paramName:m,isOptional:g},p)=>{if(m==="*"){let x=h[p]||"";l=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const A=h[p];return g&&!A?f[m]=void 0:f[m]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:e}}function J3(e,t=!1,i=!0){Ni(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,u)=>(s.push({paramName:h,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function _3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ni(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function rn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function $3(e,t="/"){let{pathname:i,search:s="",hash:a=""}=typeof e=="string"?Ma(e):e;return{pathname:i?i.startsWith("/")?i:tx(i,t):t,search:nx(s),hash:sx(a)}}function tx(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?i.length>1&&i.pop():a!=="."&&i.push(a)}),i.length>1?i.join("/"):"/"}function Oh(e,t,i,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ex(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function zp(e){let t=ex(e);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function jp(e,t,i,s=!1){let a;typeof e=="string"?a=Ma(e):(a={...e},ne(!a.pathname||!a.pathname.includes("?"),Oh("?","pathname","search",a)),ne(!a.pathname||!a.pathname.includes("#"),Oh("#","pathname","hash",a)),ne(!a.search||!a.search.includes("#"),Oh("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,h;if(l==null)h=i;else{let g=t.length-1;if(!s&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),g-=1;a.pathname=p.join("/")}h=g>=0?t[g]:"/"}let u=$3(a,h),f=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&i.endsWith("/");return!u.pathname.endsWith("/")&&(f||m)&&(u.pathname+="/"),u}var en=e=>e.join("/").replace(/\/\/+/g,"/"),ix=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ax(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Yp=["POST","PUT","PATCH","DELETE"];new Set(Yp);var rx=["GET",...Yp];new Set(rx);var Ea=Z.createContext(null);Ea.displayName="DataRouter";var uc=Z.createContext(null);uc.displayName="DataRouterState";var Gp=Z.createContext({isTransitioning:!1});Gp.displayName="ViewTransition";var ox=Z.createContext(new Map);ox.displayName="Fetchers";var lx=Z.createContext(null);lx.displayName="Await";var Li=Z.createContext(null);Li.displayName="Navigation";var eo=Z.createContext(null);eo.displayName="Location";var ln=Z.createContext({outlet:null,matches:[],isDataRoute:!1});ln.displayName="Route";var zf=Z.createContext(null);zf.displayName="RouteError";function cx(e,{relative:t}={}){ne(io(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=Z.useContext(Li),{hash:a,pathname:o,search:l}=no(e,{relative:t}),h=o;return i!=="/"&&(h=o==="/"?i:en([i,o])),s.createHref({pathname:h,search:l,hash:a})}function io(){return Z.useContext(eo)!=null}function jn(){return ne(io(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(eo).location}var Hp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kp(e){Z.useContext(Li).static||Z.useLayoutEffect(e)}function ux(){let{isDataRoute:e}=Z.useContext(ln);return e?Cx():hx()}function hx(){ne(io(),"useNavigate() may be used only in the context of a <Router> component.");let e=Z.useContext(Ea),{basename:t,navigator:i}=Z.useContext(Li),{matches:s}=Z.useContext(ln),{pathname:a}=jn(),o=JSON.stringify(zp(s)),l=Z.useRef(!1);return Kp(()=>{l.current=!0}),Z.useCallback((u,f={})=>{if(Ni(l.current,Hp),!l.current)return;if(typeof u=="number"){i.go(u);return}let m=jp(u,JSON.parse(o),a,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:en([t,m.pathname])),(f.replace?i.replace:i.push)(m,f.state,f)},[t,i,o,a,e])}Z.createContext(null);function no(e,{relative:t}={}){let{matches:i}=Z.useContext(ln),{pathname:s}=jn(),a=JSON.stringify(zp(i));return Z.useMemo(()=>jp(e,JSON.parse(a),s,t==="path"),[e,a,s,t])}function fx(e,t){return qp(e,t)}function qp(e,t,i,s){var E;ne(io(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=Z.useContext(Li),{matches:l}=Z.useContext(ln),h=l[l.length-1],u=h?h.params:{},f=h?h.pathname:"/",m=h?h.pathnameBase:"/",g=h&&h.route;{let S=g&&g.path||"";Qp(f,!g||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=jn(),A;if(t){let S=typeof t=="string"?Ma(t):t;ne(m==="/"||((E=S.pathname)==null?void 0:E.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),A=S}else A=p;let x=A.pathname||"/",y=x;if(m!=="/"){let S=m.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=!o&&i&&i.matches&&i.matches.length>0?i.matches:Op(e,{pathname:y});Ni(g||b!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Ni(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Ax(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:en([m,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:en([m,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,i,s);return t&&C?Z.createElement(eo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},C):C}function dx(){let e=bx(),t=ax(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=Z.createElement(Z.Fragment,null,Z.createElement("p",null,"💿 Hey developer 👋"),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:o},"ErrorBoundary")," or"," ",Z.createElement("code",{style:o},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),i?Z.createElement("pre",{style:a},i):null,l)}var mx=Z.createElement(dx,null),gx=class extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Z.createElement(ln.Provider,{value:this.props.routeContext},Z.createElement(zf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function px({routeContext:e,match:t,children:i}){let s=Z.useContext(Ea);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(ln.Provider,{value:e},i)}function Ax(e,t=[],i=null,s=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let a=e,o=i==null?void 0:i.errors;if(o!=null){let u=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);ne(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,h=-1;if(i)for(let u=0;u<a.length;u++){let f=a[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=u),f.route.id){let{loaderData:m,errors:g}=i,p=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||p){l=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((u,f,m)=>{let g,p=!1,A=null,x=null;i&&(g=o&&f.route.id?o[f.route.id]:void 0,A=f.route.errorElement||mx,l&&(h<0&&m===0?(Qp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,x=null):h===m&&(p=!0,x=f.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,m+1)),b=()=>{let C;return g?C=A:p?C=x:f.route.Component?C=Z.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=u,Z.createElement(px,{match:f,routeContext:{outlet:u,matches:y,isDataRoute:i!=null},children:C})};return i&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?Z.createElement(gx,{location:i.location,revalidation:i.revalidation,component:A,error:g,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}function jf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vx(e){let t=Z.useContext(Ea);return ne(t,jf(e)),t}function xx(e){let t=Z.useContext(uc);return ne(t,jf(e)),t}function yx(e){let t=Z.useContext(ln);return ne(t,jf(e)),t}function Yf(e){let t=yx(e),i=t.matches[t.matches.length-1];return ne(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function wx(){return Yf("useRouteId")}function bx(){var s;let e=Z.useContext(zf),t=xx("useRouteError"),i=Yf("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[i]}function Cx(){let{router:e}=vx("useNavigate"),t=Yf("useNavigate"),i=Z.useRef(!1);return Kp(()=>{i.current=!0}),Z.useCallback(async(a,o={})=>{Ni(i.current,Hp),i.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...o}))},[e,t])}var O2={};function Qp(e,t,i){!t&&!O2[e]&&(O2[e]=!0,Ni(!1,i))}Z.memo(Sx);function Sx({routes:e,future:t,state:i}){return qp(e,void 0,i,t)}function ca(e){ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Mx({basename:e="/",children:t=null,location:i,navigationType:s="POP",navigator:a,static:o=!1}){ne(!io(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),h=Z.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof i=="string"&&(i=Ma(i));let{pathname:u="/",search:f="",hash:m="",state:g=null,key:p="default"}=i,A=Z.useMemo(()=>{let x=rn(u,l);return x==null?null:{location:{pathname:x,search:f,hash:m,state:g,key:p},navigationType:s}},[l,u,f,m,g,p,s]);return Ni(A!=null,`<Router basename="${l}"> is not able to match the URL "${u}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:Z.createElement(Li.Provider,{value:h},Z.createElement(eo.Provider,{children:t,value:A}))}function Ex({children:e,location:t}){return fx(mf(e),t)}function mf(e,t=[]){let i=[];return Z.Children.forEach(e,(s,a)=>{if(!Z.isValidElement(s))return;let o=[...t,a];if(s.type===Z.Fragment){i.push.apply(i,mf(s.props.children,o));return}ne(s.type===ca,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ne(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=mf(s.props.children,o)),i.push(l)}),i}var Yl="get",Gl="application/x-www-form-urlencoded";function hc(e){return e!=null&&typeof e.tagName=="string"}function Tx(e){return hc(e)&&e.tagName.toLowerCase()==="button"}function Dx(e){return hc(e)&&e.tagName.toLowerCase()==="form"}function Vx(e){return hc(e)&&e.tagName.toLowerCase()==="input"}function Rx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ix(e,t){return e.button===0&&(!t||t==="_self")&&!Rx(e)}var El=null;function Bx(){if(El===null)try{new FormData(document.createElement("form"),0),El=!1}catch{El=!0}return El}var Ux=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ph(e){return e!=null&&!Ux.has(e)?(Ni(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gl}"`),null):e}function Fx(e,t){let i,s,a,o,l;if(Dx(e)){let h=e.getAttribute("action");s=h?rn(h,t):null,i=e.getAttribute("method")||Yl,a=Ph(e.getAttribute("enctype"))||Gl,o=new FormData(e)}else if(Tx(e)||Vx(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||h.getAttribute("action");if(s=u?rn(u,t):null,i=e.getAttribute("formmethod")||h.getAttribute("method")||Yl,a=Ph(e.getAttribute("formenctype"))||Ph(h.getAttribute("enctype"))||Gl,o=new FormData(h,e),!Bx()){let{name:f,type:m,value:g}=e;if(m==="image"){let p=f?`${f}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else f&&o.append(f,g)}}else{if(hc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Yl,s=null,a=Gl,l=e}return o&&a==="text/plain"&&(l=o,o=void 0),{action:s,method:i.toLowerCase(),encType:a,formData:o,body:l}}function Gf(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Nx(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Lx(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Ox(e,t,i){let s=await Promise.all(e.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await Nx(o,i);return l.links?l.links():[]}return[]}));return jx(s.flat(1).filter(Lx).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function P2(e,t,i,s,a,o){let l=(u,f)=>i[f]?u.route.id!==i[f].route.id:!0,h=(u,f)=>{var m;return i[f].pathname!==u.pathname||((m=i[f].route.path)==null?void 0:m.endsWith("*"))&&i[f].params["*"]!==u.params["*"]};return o==="assets"?t.filter((u,f)=>l(u,f)||h(u,f)):o==="data"?t.filter((u,f)=>{var g;let m=s.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(l(u,f)||h(u,f))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((g=i[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Px(e,t,{includeHydrateFallback:i}={}){return kx(e.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),i&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function kx(e){return[...new Set(e)]}function zx(e){let t={},i=Object.keys(e).sort();for(let s of i)t[s]=e[s];return t}function jx(e,t){let i=new Set;return new Set(t),e.reduce((s,a)=>{let o=JSON.stringify(zx(a));return i.has(o)||(i.add(o),s.push({key:o,link:a})),s},[])}function Yx(e,t){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname="_root.data":t&&rn(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function Xp(){let e=Z.useContext(Ea);return Gf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Gx(){let e=Z.useContext(uc);return Gf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Hf=Z.createContext(void 0);Hf.displayName="FrameworkContext";function Zp(){let e=Z.useContext(Hf);return Gf(e,"You must render this element inside a <HydratedRouter> element"),e}function Hx(e,t){let i=Z.useContext(Hf),[s,a]=Z.useState(!1),[o,l]=Z.useState(!1),{onFocus:h,onBlur:u,onMouseEnter:f,onMouseLeave:m,onTouchStart:g}=t,p=Z.useRef(null);Z.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let y=C=>{C.forEach(E=>{l(E.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[e]),Z.useEffect(()=>{if(s){let y=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(y)}}},[s]);let A=()=>{a(!0)},x=()=>{a(!1),l(!1)};return i?e!=="intent"?[o,p,{}]:[o,p,{onFocus:Vr(h,A),onBlur:Vr(u,x),onMouseEnter:Vr(f,A),onMouseLeave:Vr(m,x),onTouchStart:Vr(g,A)}]:[!1,p,{}]}function Vr(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function Kx({page:e,...t}){let{router:i}=Xp(),s=Z.useMemo(()=>Op(i.routes,e,i.basename),[i.routes,e,i.basename]);return s?Z.createElement(Qx,{page:e,matches:s,...t}):null}function qx(e){let{manifest:t,routeModules:i}=Zp(),[s,a]=Z.useState([]);return Z.useEffect(()=>{let o=!1;return Ox(e,t,i).then(l=>{o||a(l)}),()=>{o=!0}},[e,t,i]),s}function Qx({page:e,matches:t,...i}){let s=jn(),{manifest:a,routeModules:o}=Zp(),{basename:l}=Xp(),{loaderData:h,matches:u}=Gx(),f=Z.useMemo(()=>P2(e,t,u,a,s,"data"),[e,t,u,a,s]),m=Z.useMemo(()=>P2(e,t,u,a,s,"assets"),[e,t,u,a,s]),g=Z.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let x=new Set,y=!1;if(t.forEach(C=>{var S;let E=a.routes[C.route.id];!E||!E.hasLoader||(!f.some(M=>M.route.id===C.route.id)&&C.route.id in h&&((S=o[C.route.id])!=null&&S.shouldRevalidate)||E.hasClientLoader?y=!0:x.add(C.route.id))}),x.size===0)return[];let b=Yx(e,l);return y&&x.size>0&&b.searchParams.set("_routes",t.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[b.pathname+b.search]},[l,h,s,a,f,t,e,o]),p=Z.useMemo(()=>Px(m,a),[m,a]),A=qx(m);return Z.createElement(Z.Fragment,null,g.map(x=>Z.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...i})),p.map(x=>Z.createElement("link",{key:x,rel:"modulepreload",href:x,...i})),A.map(({key:x,link:y})=>Z.createElement("link",{key:x,...y})))}function Xx(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var Wp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wp&&(window.__reactRouterVersion="7.4.1")}catch{}function Zx({basename:e,children:t,window:i}){let s=Z.useRef();s.current==null&&(s.current=O3({window:i,v5Compat:!0}));let a=s.current,[o,l]=Z.useState({action:a.action,location:a.location}),h=Z.useCallback(u=>{Z.startTransition(()=>l(u))},[l]);return Z.useLayoutEffect(()=>a.listen(h),[a,h]),Z.createElement(Mx,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a})}var Jp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wa=Z.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:a,reloadDocument:o,replace:l,state:h,target:u,to:f,preventScrollReset:m,viewTransition:g,...p},A){let{basename:x}=Z.useContext(Li),y=typeof f=="string"&&Jp.test(f),b,C=!1;if(typeof f=="string"&&y&&(b=f,Wp))try{let U=new URL(window.location.href),F=f.startsWith("//")?new URL(U.protocol+f):new URL(f),P=rn(F.pathname,x);F.origin===U.origin&&P!=null?f=P+F.search+F.hash:C=!0}catch{Ni(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=cx(f,{relative:a}),[S,M,T]=Hx(s,p),I=_x(f,{replace:l,state:h,target:u,preventScrollReset:m,relative:a,viewTransition:g});function R(U){t&&t(U),U.defaultPrevented||I(U)}let D=Z.createElement("a",{...p,...T,href:b||E,onClick:C||o?t:R,ref:Xx(A,M),target:u,"data-discover":!y&&i==="render"?"true":void 0});return S&&!y?Z.createElement(Z.Fragment,null,D,Z.createElement(Kx,{page:E})):D});wa.displayName="Link";var ua=Z.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:h,children:u,...f},m){let g=no(l,{relative:f.relative}),p=jn(),A=Z.useContext(uc),{navigator:x,basename:y}=Z.useContext(Li),b=A!=null&&ny(g)&&h===!0,C=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,E=p.pathname,S=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(E=E.toLowerCase(),S=S?S.toLowerCase():null,C=C.toLowerCase()),S&&y&&(S=rn(S,y)||S);const M=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let T=E===C||!a&&E.startsWith(C)&&E.charAt(M)==="/",I=S!=null&&(S===C||!a&&S.startsWith(C)&&S.charAt(C.length)==="/"),R={isActive:T,isPending:I,isTransitioning:b},D=T?t:void 0,U;typeof s=="function"?U=s(R):U=[s,T?"active":null,I?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(R):o;return Z.createElement(wa,{...f,"aria-current":D,className:U,ref:m,style:F,to:l,viewTransition:h},typeof u=="function"?u(R):u)});ua.displayName="NavLink";var Wx=Z.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:a,state:o,method:l=Yl,action:h,onSubmit:u,relative:f,preventScrollReset:m,viewTransition:g,...p},A)=>{let x=ey(),y=iy(h,{relative:f}),b=l.toLowerCase()==="get"?"get":"post",C=typeof h=="string"&&Jp.test(h),E=S=>{if(u&&u(S),S.defaultPrevented)return;S.preventDefault();let M=S.nativeEvent.submitter,T=(M==null?void 0:M.getAttribute("formmethod"))||l;x(M||S.currentTarget,{fetcherKey:t,method:T,navigate:i,replace:a,state:o,relative:f,preventScrollReset:m,viewTransition:g})};return Z.createElement("form",{ref:A,method:b,action:y,onSubmit:s?u:E,...p,"data-discover":!C&&e==="render"?"true":void 0})});Wx.displayName="Form";function Jx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _p(e){let t=Z.useContext(Ea);return ne(t,Jx(e)),t}function _x(e,{target:t,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:l}={}){let h=ux(),u=jn(),f=no(e,{relative:o});return Z.useCallback(m=>{if(Ix(m,t)){m.preventDefault();let g=i!==void 0?i:qr(u)===qr(f);h(e,{replace:g,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,h,f,i,s,t,e,a,o,l])}var $x=0,ty=()=>`__${String(++$x)}__`;function ey(){let{router:e}=_p("useSubmit"),{basename:t}=Z.useContext(Li),i=wx();return Z.useCallback(async(s,a={})=>{let{action:o,method:l,encType:h,formData:u,body:f}=Fx(s,t);if(a.navigate===!1){let m=a.fetcherKey||ty();await e.fetch(m,i,a.action||o,{preventScrollReset:a.preventScrollReset,formData:u,body:f,formMethod:a.method||l,formEncType:a.encType||h,flushSync:a.flushSync})}else await e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:u,body:f,formMethod:a.method||l,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:i,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,i])}function iy(e,{relative:t}={}){let{basename:i}=Z.useContext(Li),s=Z.useContext(ln);ne(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...no(e||".",{relative:t})},l=jn();if(e==null){o.search=l.search;let h=new URLSearchParams(o.search),u=h.getAll("index");if(u.some(m=>m==="")){h.delete("index"),u.filter(g=>g).forEach(g=>h.append("index",g));let m=h.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:en([i,o.pathname])),qr(o)}function ny(e,t={}){let i=Z.useContext(Gp);ne(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=_p("useViewTransitionState"),a=no(e,{relative:t.relative});if(!i.isTransitioning)return!1;let o=rn(i.currentLocation.pathname,s)||i.currentLocation.pathname,l=rn(i.nextLocation.pathname,s)||i.nextLocation.pathname;return ec(a.pathname,l)!=null||ec(a.pathname,o)!=null}new TextEncoder;function sy(){const[e,t]=Z.useState(!1),i=()=>t(a=>!a),s="/vesselverse/";return B.jsx("nav",{className:"navbar",children:B.jsxs("div",{className:"nav-container",children:[B.jsx("div",{className:"nav-brand",children:B.jsx("img",{src:`${s}logo_esteso_trasp.png`,alt:"VesselVerse"})}),B.jsx("button",{className:"nav-toggle",onClick:i,children:e?"▼":B.jsxs(B.Fragment,{children:[B.jsx("span",{className:"bar"}),B.jsx("span",{className:"bar"}),B.jsx("span",{className:"bar"})]})}),B.jsxs("div",{className:`nav-links ${e?"open":""}`,children:[B.jsx(ua,{className:({isActive:a})=>a?"nav-btn active":"nav-btn",to:"/",onClick:()=>t(!1),children:"Home"}),B.jsx(ua,{className:({isActive:a})=>a?"nav-btn active":"nav-btn",to:"/dataset",onClick:()=>t(!1),children:"Dataset"}),B.jsx(ua,{className:({isActive:a})=>a?"nav-btn active":"nav-btn",to:"/framework",onClick:()=>t(!1),children:"Framework"}),B.jsx(ua,{className:({isActive:a})=>a?"nav-btn active":"nav-btn",to:"/learn-more",onClick:()=>t(!1),children:"Learn More"}),B.jsxs(ua,{className:({isActive:a})=>a?"nav-btn-fill active":"nav-btn-fill",to:"/paper",onClick:()=>t(!1),children:["The Paper",B.jsx("img",{src:`${s}github_icon.png`,alt:""})]})]})]})})}const ay=[{date:"May 2025",text:"VesselVerse accepted at MICCAI 2025",isNew:!1},{date:"June 2025 (planned)",text:"Release of code and dataset via GitHub",isNew:!0}];function ry(){const[e,t]=Z.useState(!1),i="/vesselverse/";Z.useEffect(()=>{window.scrollTo(0,0)},[]);const s=()=>{if(t(!0),window.scrollY===0){const a=document.querySelector(".fade-box");a&&a.scrollIntoView({behavior:"smooth"})}};return B.jsxs("div",{className:"home",children:[B.jsxs("section",{className:"hero",children:[B.jsxs("video",{className:`hero-video ${e?"video-faded":""}`,autoPlay:!0,muted:!0,playsInline:!0,onEnded:s,children:[B.jsx("source",{src:`${i}intro_sito.mp4`,type:"video/mp4"}),"Your browser does not support the video."]}),B.jsx("div",{className:"hero-content",children:B.jsx("div",{className:"fade-box",children:B.jsx("img",{src:`${i}logo_home.png`,alt:"VesselVerse"})})})]}),B.jsxs("section",{className:"info-section news-section",children:[B.jsx("h2",{className:"section-title",style:{textAlign:"center"},children:"News & Updates"}),B.jsx("div",{className:"news-grid",children:ay.map((a,o)=>B.jsxs("div",{className:"news-card",children:[B.jsxs("div",{className:"news-header",children:[B.jsx("span",{className:"news-date",children:a.date}),a.isNew&&B.jsx("span",{className:"news-badge",children:"NEW"})]}),B.jsx("p",{className:"news-text",children:a.text})]},o))})]}),B.jsxs("section",{className:"info-section first-section",style:{paddingTop:"5rem"},children:[B.jsx("h2",{className:"section-title",children:"What is VesselVerse?"}),B.jsxs("div",{className:"content-row first-row",children:[B.jsx("div",{className:"col-left",children:B.jsxs("p",{children:[B.jsx("strong",{children:"VesselVerse"})," is a ",B.jsx("strong",{children:"large-scale dataset"})," and ",B.jsx("strong",{children:"collaborative framework"})," designed for annotating brain vessels in medical images. It comprises ",B.jsx("strong",{children:"1,130 annotated images"})," drawn from three public datasets using different neurovascular imaging modalities, and supports ",B.jsx("strong",{children:"multiple expert annotations"})," per image. The framework integrates tools for ",B.jsx("strong",{children:"consensus generation"}),", ",B.jsx("strong",{children:"quality control"}),", and ",B.jsx("strong",{children:"version tracking"}),"."]})}),B.jsxs("div",{className:"col-right",children:[B.jsx(wa,{to:"/dataset",className:"btn",children:"Explore the Dataset"}),B.jsx(wa,{to:"/framework",className:"btn",children:"Explore the framework"})]})]})]}),B.jsxs("section",{className:"info-section second-section",style:{paddingTop:"5rem",paddingBottom:"5rem"},children:[B.jsx("h2",{className:"section-title second-title",children:"Why is it important?"}),B.jsxs("div",{className:"content-row sec-row",children:[B.jsx("div",{className:"col-left",children:B.jsx(wa,{to:"/learn-more",className:"btn",children:"Learn more"})}),B.jsxs("div",{className:"col-right",children:[B.jsxs("p",{className:"mobile-text",children:["VesselVerse addresses a major challenge in medical imaging: ",B.jsx("strong",{children:"the lack of high-quality, large-scale annotated datasets"})," for the complex anatomical structures of cerebral vasculature. It increases the ",B.jsx("strong",{children:"reliability and reproducibility"})," of training data for machine learning models thanks to the support of multi-expert input and version-controlled refinement."]}),B.jsxs("p",{className:"mobile-text",children:["Moreover, the collaborative framework offers a sustainable way to ",B.jsx("strong",{children:"maintain and improve dataset quality over time"}),", promoting open science and enabling better clinical tools through more accurate and generalizable models."]})]})]})]})]})}const $p=Z.createContext({});function oy(e){const t=Z.useRef(null);return t.current===null&&(t.current=e()),t.current}const Kf=typeof window<"u",ly=Kf?Z.useLayoutEffect:Z.useEffect,qf=Z.createContext(null),tA=Z.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function cy(e=!0){const t=Z.useContext(qf);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:s,register:a}=t,o=Z.useId();Z.useEffect(()=>{if(e)return a(o)},[e]);const l=Z.useCallback(()=>e&&s&&s(o),[o,s,e]);return!i&&s?[!1,l]:[!0]}function Qf(e,t){e.indexOf(t)===-1&&e.push(t)}function Xf(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}const ri=e=>e;let eA=ri;const uy={useManualTiming:!1};function Zf(e){let t;return()=>(t===void 0&&(t=e()),t)}const ba=(e,t,i)=>{const s=t-e;return s===0?1:(i-e)/s};class Wf{constructor(){this.subscriptions=[]}add(t){return Qf(this.subscriptions,t),()=>Xf(this.subscriptions,t)}notify(t,i,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,i,s);else for(let o=0;o<a;o++){const l=this.subscriptions[o];l&&l(t,i,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nn=e=>e*1e3,sn=e=>e/1e3;function iA(e,t){return t?e*(1e3/t):0}const hy=Zf(()=>window.ScrollTimeline!==void 0);class fy{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,i){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=i}attachTimeline(t,i){const s=this.animations.map(a=>{if(hy()&&a.attachTimeline)return a.attachTimeline(t);if(typeof i=="function")return i(a)});return()=>{s.forEach((a,o)=>{a&&a(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let i=0;i<this.animations.length;i++)t=Math.max(t,this.animations[i].duration);return t}runAll(t){this.animations.forEach(i=>i[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class dy extends fy{then(t,i){return Promise.all(this.animations).then(t).catch(i)}}function Jf(e,t){return e?e[t]||e.default||e:void 0}const gf=2e4;function nA(e){let t=0;const i=50;let s=e.next(t);for(;!s.done&&t<gf;)t+=i,s=e.next(t);return t>=gf?1/0:t}function _f(e){return typeof e=="function"}function k2(e,t){e.timeline=t,e.onfinish=null}const $f=e=>Array.isArray(e)&&typeof e[0]=="number",my={linearEasing:void 0};function gy(e,t){const i=Zf(e);return()=>{var s;return(s=my[t])!==null&&s!==void 0?s:i()}}const ic=gy(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sA=(e,t,i=10)=>{let s="";const a=Math.max(Math.round(t/i),2);for(let o=0;o<a;o++)s+=e(ba(0,a-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function aA(e){return!!(typeof e=="function"&&ic()||!e||typeof e=="string"&&(e in pf||ic())||$f(e)||Array.isArray(e)&&e.every(aA))}const Lr=([e,t,i,s])=>`cubic-bezier(${e}, ${t}, ${i}, ${s})`,pf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lr([0,.65,.55,1]),circOut:Lr([.55,0,1,.45]),backIn:Lr([.31,.01,.66,-.59]),backOut:Lr([.33,1.53,.69,.99])};function rA(e,t){if(e)return typeof e=="function"&&ic()?sA(e,t):$f(e)?Lr(e):Array.isArray(e)?e.map(i=>rA(i,t)||pf.easeOut):pf[e]}const Tl=["read","resolveKeyframes","update","preRender","render","postRender"],z2={value:null};function py(e,t){let i=new Set,s=new Set,a=!1,o=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1},u=0;function f(g){l.has(g)&&(m.schedule(g),e()),u++,g(h)}const m={schedule:(g,p=!1,A=!1)=>{const y=A&&a?i:s;return p&&l.add(g),y.has(g)||y.add(g),g},cancel:g=>{s.delete(g),l.delete(g)},process:g=>{if(h=g,a){o=!0;return}a=!0,[i,s]=[s,i],i.forEach(f),t&&z2.value&&z2.value.frameloop[t].push(u),u=0,i.clear(),a=!1,o&&(o=!1,m.process(g))}};return m}const Ay=40;function oA(e,t){let i=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>i=!0,l=Tl.reduce((C,E)=>(C[E]=py(o,t?E:void 0),C),{}),{read:h,resolveKeyframes:u,update:f,preRender:m,render:g,postRender:p}=l,A=()=>{const C=performance.now();i=!1,a.delta=s?1e3/60:Math.max(Math.min(C-a.timestamp,Ay),1),a.timestamp=C,a.isProcessing=!0,h.process(a),u.process(a),f.process(a),m.process(a),g.process(a),p.process(a),a.isProcessing=!1,i&&t&&(s=!1,e(A))},x=()=>{i=!0,s=!0,a.isProcessing||e(A)};return{schedule:Tl.reduce((C,E)=>{const S=l[E];return C[E]=(M,T=!1,I=!1)=>(i||x(),S.schedule(M,T,I)),C},{}),cancel:C=>{for(let E=0;E<Tl.length;E++)l[Tl[E]].cancel(C)},state:a,steps:l}}const{schedule:qt,cancel:kn,state:De,steps:kh}=oA(typeof requestAnimationFrame<"u"?requestAnimationFrame:ri,!0),{schedule:t0}=oA(queueMicrotask,!1);let Hl;function vy(){Hl=void 0}const Ui={now:()=>(Hl===void 0&&Ui.set(De.isProcessing||uy.useManualTiming?De.timestamp:performance.now()),Hl),set:e=>{Hl=e,queueMicrotask(vy)}},Mi={x:!1,y:!1};function lA(){return Mi.x||Mi.y}function xy(e){return e==="x"||e==="y"?Mi[e]?null:(Mi[e]=!0,()=>{Mi[e]=!1}):Mi.x||Mi.y?null:(Mi.x=Mi.y=!0,()=>{Mi.x=Mi.y=!1})}function yy(e,t,i){var s;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let a=document;const o=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}function cA(e,t){const i=yy(e),s=new AbortController,a={passive:!0,...t,signal:s.signal};return[i,a,()=>s.abort()]}function j2(e){return!(e.pointerType==="touch"||lA())}function wy(e,t,i={}){const[s,a,o]=cA(e,i),l=h=>{if(!j2(h))return;const{target:u}=h,f=t(u,h);if(typeof f!="function"||!u)return;const m=g=>{j2(g)&&(f(g),u.removeEventListener("pointerleave",m))};u.addEventListener("pointerleave",m,a)};return s.forEach(h=>{h.addEventListener("pointerenter",l,a)}),o}const uA=(e,t)=>t?e===t?!0:uA(e,t.parentElement):!1,e0=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,by=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Cy(e){return by.has(e.tagName)||e.tabIndex!==-1}const Or=new WeakSet;function Y2(e){return t=>{t.key==="Enter"&&e(t)}}function zh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Sy=(e,t)=>{const i=e.currentTarget;if(!i)return;const s=Y2(()=>{if(Or.has(i))return;zh(i,"down");const a=Y2(()=>{zh(i,"up")}),o=()=>zh(i,"cancel");i.addEventListener("keyup",a,t),i.addEventListener("blur",o,t)});i.addEventListener("keydown",s,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",s),t)};function G2(e){return e0(e)&&!lA()}function My(e,t,i={}){const[s,a,o]=cA(e,i),l=h=>{const u=h.currentTarget;if(!G2(h)||Or.has(u))return;Or.add(u);const f=t(u,h),m=(A,x)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",p),!(!G2(A)||!Or.has(u))&&(Or.delete(u),typeof f=="function"&&f(A,{success:x}))},g=A=>{m(A,u===window||u===document||i.useGlobalTarget||uA(u,A.target))},p=A=>{m(A,!1)};window.addEventListener("pointerup",g,a),window.addEventListener("pointercancel",p,a)};return s.forEach(h=>{(i.useGlobalTarget?window:h).addEventListener("pointerdown",l,a),h instanceof HTMLElement&&(h.addEventListener("focus",f=>Sy(f,a)),!Cy(h)&&h.tabIndex===null&&(h.tabIndex=0))}),o}const H2=30,Ey=e=>!isNaN(parseFloat(e));class Ty{constructor(t,i={}){this.version="12.6.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const o=Ui.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=Ui.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Ey(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new Wf);const s=this.events[t].add(i);return t==="change"?()=>{s(),qt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t,i=!0){!i||!this.passiveEffect?this.updateAndNotify(t,i):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,i,s){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ui.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>H2)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,H2);return iA(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qr(e,t){return new Ty(e,t)}const hA=Z.createContext({strict:!1}),K2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ca={};for(const e in K2)Ca[e]={isEnabled:t=>K2[e].some(i=>!!t[i])};function Dy(e){for(const t in e)Ca[t]={...Ca[t],...e[t]}}const Vy=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Vy.has(e)}let fA=e=>!nc(e);function Ry(e){e&&(fA=t=>t.startsWith("on")?!nc(t):e(t))}try{Ry(require("@emotion/is-prop-valid").default)}catch{}function Iy(e,t,i){const s={};for(const a in e)a==="values"&&typeof e.values=="object"||(fA(a)||i===!0&&nc(a)||!t&&!nc(a)||e.draggable&&a.startsWith("onDrag"))&&(s[a]=e[a]);return s}function By(e){if(typeof Proxy>"u")return e;const t=new Map,i=(...s)=>e(...s);return new Proxy(i,{get:(s,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const fc=Z.createContext({});function dc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Xr(e){return typeof e=="string"||Array.isArray(e)}const i0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],n0=["initial",...i0];function mc(e){return dc(e.animate)||n0.some(t=>Xr(e[t]))}function dA(e){return!!(mc(e)||e.variants)}function Uy(e,t){if(mc(e)){const{initial:i,animate:s}=e;return{initial:i===!1||Xr(i)?i:void 0,animate:Xr(s)?s:void 0}}return e.inherit!==!1?t:{}}function Fy(e){const{initial:t,animate:i}=Uy(e,Z.useContext(fc));return Z.useMemo(()=>({initial:t,animate:i}),[q2(t),q2(i)])}function q2(e){return Array.isArray(e)?e.join(" "):e}const Ny=Symbol.for("motionComponentSymbol");function ga(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Ly(e,t,i){return Z.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),i&&(typeof i=="function"?i(s):ga(i)&&(i.current=s))},[t])}const s0=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Oy="framerAppearId",mA="data-"+s0(Oy),gA=Z.createContext({});function Py(e,t,i,s,a){var o,l;const{visualElement:h}=Z.useContext(fc),u=Z.useContext(hA),f=Z.useContext(qf),m=Z.useContext(tA).reducedMotion,g=Z.useRef(null);s=s||u.renderer,!g.current&&s&&(g.current=s(e,{visualState:t,parent:h,props:i,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const p=g.current,A=Z.useContext(gA);p&&!p.projection&&a&&(p.type==="html"||p.type==="svg")&&ky(g.current,i,a,A);const x=Z.useRef(!1);Z.useInsertionEffect(()=>{p&&x.current&&p.update(i,f)});const y=i[mA],b=Z.useRef(!!y&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,y))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,y)));return ly(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),t0.render(p.render),b.current&&p.animationState&&p.animationState.animateChanges())}),Z.useEffect(()=>{p&&(!b.current&&p.animationState&&p.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)===null||C===void 0||C.call(window,y)}),b.current=!1))}),p}function ky(e,t,i,s){const{layoutId:a,layout:o,drag:l,dragConstraints:h,layoutScroll:u,layoutRoot:f}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:pA(e.parent)),e.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!l||h&&ga(h),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:u,layoutRoot:f})}function pA(e){if(e)return e.options.allowProjection!==!1?e.projection:pA(e.parent)}function zy({preloadedFeatures:e,createVisualElement:t,useRender:i,useVisualState:s,Component:a}){var o,l;e&&Dy(e);function h(f,m){let g;const p={...Z.useContext(tA),...f,layoutId:jy(f)},{isStatic:A}=p,x=Fy(f),y=s(f,A);if(!A&&Kf){Yy();const b=Gy(p);g=b.MeasureLayout,x.visualElement=Py(a,y,p,t,b.ProjectionNode)}return B.jsxs(fc.Provider,{value:x,children:[g&&x.visualElement?B.jsx(g,{visualElement:x.visualElement,...p}):null,i(a,f,Ly(y,x.visualElement,m),y,A,x.visualElement)]})}h.displayName=`motion.${typeof a=="string"?a:`create(${(l=(o=a.displayName)!==null&&o!==void 0?o:a.name)!==null&&l!==void 0?l:""})`}`;const u=Z.forwardRef(h);return u[Ny]=a,u}function jy({layoutId:e}){const t=Z.useContext($p).id;return t&&e!==void 0?t+"-"+e:e}function Yy(e,t){Z.useContext(hA).strict}function Gy(e){const{drag:t,layout:i}=Ca;if(!t&&!i)return{};const s={...t,...i};return{MeasureLayout:t!=null&&t.isEnabled(e)||i!=null&&i.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const AA=e=>t=>typeof t=="string"&&t.startsWith(e),a0=AA("--"),Hy=AA("var(--"),r0=e=>Hy(e)?Ky.test(e.split("/*")[0].trim()):!1,Ky=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zr={};function qy(e){for(const t in e)Zr[t]=e[t],a0(t)&&(Zr[t].isCSSVariable=!0)}const Ta=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vs=new Set(Ta);function vA(e,{layout:t,layoutId:i}){return vs.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!Zr[e]||e==="opacity")}const Ne=e=>!!(e&&e.getVelocity),xA=(e,t)=>t&&typeof e=="number"?t.transform(e):e,on=(e,t,i)=>i>t?t:i<e?e:i,Da={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Wr={...Da,transform:e=>on(0,1,e)},Dl={...Da,default:1},so=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Nn=so("deg"),Fi=so("%"),wt=so("px"),Qy=so("vh"),Xy=so("vw"),Q2={...Fi,parse:e=>Fi.parse(e)/100,transform:e=>Fi.transform(e*100)},Zy={borderWidth:wt,borderTopWidth:wt,borderRightWidth:wt,borderBottomWidth:wt,borderLeftWidth:wt,borderRadius:wt,radius:wt,borderTopLeftRadius:wt,borderTopRightRadius:wt,borderBottomRightRadius:wt,borderBottomLeftRadius:wt,width:wt,maxWidth:wt,height:wt,maxHeight:wt,top:wt,right:wt,bottom:wt,left:wt,padding:wt,paddingTop:wt,paddingRight:wt,paddingBottom:wt,paddingLeft:wt,margin:wt,marginTop:wt,marginRight:wt,marginBottom:wt,marginLeft:wt,backgroundPositionX:wt,backgroundPositionY:wt},Wy={rotate:Nn,rotateX:Nn,rotateY:Nn,rotateZ:Nn,scale:Dl,scaleX:Dl,scaleY:Dl,scaleZ:Dl,skew:Nn,skewX:Nn,skewY:Nn,distance:wt,translateX:wt,translateY:wt,translateZ:wt,x:wt,y:wt,z:wt,perspective:wt,transformPerspective:wt,opacity:Wr,originX:Q2,originY:Q2,originZ:wt},X2={...Da,transform:Math.round},o0={...Zy,...Wy,zIndex:X2,size:wt,fillOpacity:Wr,strokeOpacity:Wr,numOctaves:X2},Jy={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_y=Ta.length;function $y(e,t,i){let s="",a=!0;for(let o=0;o<_y;o++){const l=Ta[o],h=e[l];if(h===void 0)continue;let u=!0;if(typeof h=="number"?u=h===(l.startsWith("scale")?1:0):u=parseFloat(h)===0,!u||i){const f=xA(h,o0[l]);if(!u){a=!1;const m=Jy[l]||l;s+=`${m}(${f}) `}i&&(t[l]=f)}}return s=s.trim(),i?s=i(t,a?"":s):a&&(s="none"),s}function l0(e,t,i){const{style:s,vars:a,transformOrigin:o}=e;let l=!1,h=!1;for(const u in t){const f=t[u];if(vs.has(u)){l=!0;continue}else if(a0(u)){a[u]=f;continue}else{const m=xA(f,o0[u]);u.startsWith("origin")?(h=!0,o[u]=m):s[u]=m}}if(t.transform||(l||i?s.transform=$y(t,e.transform,i):s.transform&&(s.transform="none")),h){const{originX:u="50%",originY:f="50%",originZ:m=0}=o;s.transformOrigin=`${u} ${f} ${m}`}}const c0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yA(e,t,i){for(const s in t)!Ne(t[s])&&!vA(s,i)&&(e[s]=t[s])}function tw({transformTemplate:e},t){return Z.useMemo(()=>{const i=c0();return l0(i,t,e),Object.assign({},i.vars,i.style)},[t])}function ew(e,t){const i=e.style||{},s={};return yA(s,i,e),Object.assign(s,tw(e,t)),s}function iw(e,t){const i={},s=ew(e,t);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=s,i}const nw=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function u0(e){return typeof e!="string"||e.includes("-")?!1:!!(nw.indexOf(e)>-1||/[A-Z]/u.test(e))}const sw={offset:"stroke-dashoffset",array:"stroke-dasharray"},aw={offset:"strokeDashoffset",array:"strokeDasharray"};function rw(e,t,i=1,s=0,a=!0){e.pathLength=1;const o=a?sw:aw;e[o.offset]=wt.transform(-s);const l=wt.transform(t),h=wt.transform(i);e[o.array]=`${l} ${h}`}function Z2(e,t,i){return typeof e=="string"?e:wt.transform(t+i*e)}function ow(e,t,i){const s=Z2(t,e.x,e.width),a=Z2(i,e.y,e.height);return`${s} ${a}`}function h0(e,{attrX:t,attrY:i,attrScale:s,originX:a,originY:o,pathLength:l,pathSpacing:h=1,pathOffset:u=0,...f},m,g){if(l0(e,f,g),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:A,dimensions:x}=e;p.transform&&(x&&(A.transform=p.transform),delete p.transform),x&&(a!==void 0||o!==void 0||A.transform)&&(A.transformOrigin=ow(x,a!==void 0?a:.5,o!==void 0?o:.5)),t!==void 0&&(p.x=t),i!==void 0&&(p.y=i),s!==void 0&&(p.scale=s),l!==void 0&&rw(p,l,h,u,!1)}const wA=()=>({...c0(),attrs:{}}),f0=e=>typeof e=="string"&&e.toLowerCase()==="svg";function lw(e,t,i,s){const a=Z.useMemo(()=>{const o=wA();return h0(o,t,f0(s),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};yA(o,e.style,e),a.style={...o,...a.style}}return a}function cw(e=!1){return(i,s,a,{latestValues:o},l)=>{const u=(u0(i)?lw:iw)(s,o,l,i),f=Iy(s,typeof i=="string",e),m=i!==Z.Fragment?{...f,...u,ref:a}:{},{children:g}=s,p=Z.useMemo(()=>Ne(g)?g.get():g,[g]);return Z.createElement(i,{...m,children:p})}}function W2(e){const t=[{},{}];return e==null||e.values.forEach((i,s)=>{t[0][s]=i.get(),t[1][s]=i.getVelocity()}),t}function d0(e,t,i,s){if(typeof t=="function"){const[a,o]=W2(s);t=t(i!==void 0?i:e.custom,a,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,o]=W2(s);t=t(i!==void 0?i:e.custom,a,o)}return t}const Af=e=>Array.isArray(e),uw=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),hw=e=>Af(e)?e[e.length-1]||0:e;function Kl(e){const t=Ne(e)?e.get():e;return uw(t)?t.toValue():t}function fw({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:i},s,a,o){const l={latestValues:dw(s,a,o,e),renderState:t()};return i&&(l.onMount=h=>i({props:s,current:h,...l}),l.onUpdate=h=>i(h)),l}const bA=e=>(t,i)=>{const s=Z.useContext(fc),a=Z.useContext(qf),o=()=>fw(e,t,s,a);return i?o():oy(o)};function dw(e,t,i,s){const a={},o=s(e,{});for(const p in o)a[p]=Kl(o[p]);let{initial:l,animate:h}=e;const u=mc(e),f=dA(e);t&&f&&!u&&e.inherit!==!1&&(l===void 0&&(l=t.initial),h===void 0&&(h=t.animate));let m=i?i.initial===!1:!1;m=m||l===!1;const g=m?h:l;if(g&&typeof g!="boolean"&&!dc(g)){const p=Array.isArray(g)?g:[g];for(let A=0;A<p.length;A++){const x=d0(e,p[A]);if(x){const{transitionEnd:y,transition:b,...C}=x;for(const E in C){let S=C[E];if(Array.isArray(S)){const M=m?S.length-1:0;S=S[M]}S!==null&&(a[E]=S)}for(const E in y)a[E]=y[E]}}}return a}function m0(e,t,i){var s;const{style:a}=e,o={};for(const l in a)(Ne(a[l])||t.style&&Ne(t.style[l])||vA(l,e)||((s=i==null?void 0:i.getValue(l))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[l]=a[l]);return o}const mw={useVisualState:bA({scrapeMotionValuesFromProps:m0,createRenderState:c0})};function CA(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function SA(e,{style:t,vars:i},s,a){Object.assign(e.style,t,a&&a.getProjectionStyles(s));for(const o in i)e.style.setProperty(o,i[o])}const MA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EA(e,t,i,s){SA(e,t,void 0,s);for(const a in t.attrs)e.setAttribute(MA.has(a)?a:s0(a),t.attrs[a])}function TA(e,t,i){const s=m0(e,t,i);for(const a in e)if(Ne(e[a])||Ne(t[a])){const o=Ta.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[o]=e[a]}return s}const J2=["x","y","width","height","cx","cy","r"],gw={useVisualState:bA({scrapeMotionValuesFromProps:TA,createRenderState:wA,onUpdate:({props:e,prevProps:t,current:i,renderState:s,latestValues:a})=>{if(!i)return;let o=!!e.drag;if(!o){for(const h in a)if(vs.has(h)){o=!0;break}}if(!o)return;let l=!t;if(t)for(let h=0;h<J2.length;h++){const u=J2[h];e[u]!==t[u]&&(l=!0)}l&&qt.read(()=>{CA(i,s),qt.render(()=>{h0(s,a,f0(i.tagName),e.transformTemplate),EA(i,s)})})}})};function pw(e,t){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const l={...u0(s)?gw:mw,preloadedFeatures:e,useRender:cw(a),createVisualElement:t,Component:s};return zy(l)}}function Jr(e,t,i){const s=e.getProps();return d0(s,t,i!==void 0?i:s.custom,e)}const DA=new Set(["width","height","top","left","right","bottom",...Ta]);function Aw(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,Qr(i))}function vw(e,t){const i=Jr(e,t);let{transitionEnd:s={},transition:a={},...o}=i||{};o={...o,...s};for(const l in o){const h=hw(o[l]);Aw(e,l,h)}}function xw(e){return!!(Ne(e)&&e.add)}function vf(e,t){const i=e.getValue("willChange");if(xw(i))return i.add(t)}function VA(e){return e.props[mA]}const RA=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,yw=1e-7,ww=12;function bw(e,t,i,s,a){let o,l,h=0;do l=t+(i-t)/2,o=RA(l,s,a)-e,o>0?i=l:t=l;while(Math.abs(o)>yw&&++h<ww);return l}function ao(e,t,i,s){if(e===t&&i===s)return ri;const a=o=>bw(o,0,1,e,i);return o=>o===0||o===1?o:RA(a(o),t,s)}const IA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,BA=e=>t=>1-e(1-t),UA=ao(.33,1.53,.69,.99),g0=BA(UA),FA=IA(g0),NA=e=>(e*=2)<1?.5*g0(e):.5*(2-Math.pow(2,-10*(e-1))),p0=e=>1-Math.sin(Math.acos(e)),LA=BA(p0),OA=IA(p0),PA=e=>/^0[^.\s]+$/u.test(e);function Cw(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||PA(e):!0}const kr=e=>Math.round(e*1e5)/1e5,A0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Sw(e){return e==null}const Mw=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,v0=(e,t)=>i=>!!(typeof i=="string"&&Mw.test(i)&&i.startsWith(e)||t&&!Sw(i)&&Object.prototype.hasOwnProperty.call(i,t)),kA=(e,t,i)=>s=>{if(typeof s!="string")return s;const[a,o,l,h]=s.match(A0);return{[e]:parseFloat(a),[t]:parseFloat(o),[i]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},Ew=e=>on(0,255,e),jh={...Da,transform:e=>Math.round(Ew(e))},fs={test:v0("rgb","red"),parse:kA("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:s=1})=>"rgba("+jh.transform(e)+", "+jh.transform(t)+", "+jh.transform(i)+", "+kr(Wr.transform(s))+")"};function Tw(e){let t="",i="",s="",a="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),s=e.substring(3,4),a=e.substring(4,5),t+=t,i+=i,s+=s,a+=a),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const xf={test:v0("#"),parse:Tw,transform:fs.transform},pa={test:v0("hsl","hue"),parse:kA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:s=1})=>"hsla("+Math.round(e)+", "+Fi.transform(kr(t))+", "+Fi.transform(kr(i))+", "+kr(Wr.transform(s))+")"},Fe={test:e=>fs.test(e)||xf.test(e)||pa.test(e),parse:e=>fs.test(e)?fs.parse(e):pa.test(e)?pa.parse(e):xf.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?fs.transform(e):pa.transform(e)},Dw=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Vw(e){var t,i;return isNaN(e)&&typeof e=="string"&&(((t=e.match(A0))===null||t===void 0?void 0:t.length)||0)+(((i=e.match(Dw))===null||i===void 0?void 0:i.length)||0)>0}const zA="number",jA="color",Rw="var",Iw="var(",_2="${}",Bw=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _r(e){const t=e.toString(),i=[],s={color:[],number:[],var:[]},a=[];let o=0;const h=t.replace(Bw,u=>(Fe.test(u)?(s.color.push(o),a.push(jA),i.push(Fe.parse(u))):u.startsWith(Iw)?(s.var.push(o),a.push(Rw),i.push(u)):(s.number.push(o),a.push(zA),i.push(parseFloat(u))),++o,_2)).split(_2);return{values:i,split:h,indexes:s,types:a}}function YA(e){return _r(e).values}function GA(e){const{split:t,types:i}=_r(e),s=t.length;return a=>{let o="";for(let l=0;l<s;l++)if(o+=t[l],a[l]!==void 0){const h=i[l];h===zA?o+=kr(a[l]):h===jA?o+=Fe.transform(a[l]):o+=a[l]}return o}}const Uw=e=>typeof e=="number"?0:e;function Fw(e){const t=YA(e);return GA(e)(t.map(Uw))}const zn={test:Vw,parse:YA,createTransformer:GA,getAnimatableNone:Fw},Nw=new Set(["brightness","contrast","saturate","opacity"]);function Lw(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=i.match(A0)||[];if(!s)return e;const a=i.replace(s,"");let o=Nw.has(t)?1:0;return s!==i&&(o*=100),t+"("+o+a+")"}const Ow=/\b([a-z-]*)\(.*?\)/gu,yf={...zn,getAnimatableNone:e=>{const t=e.match(Ow);return t?t.map(Lw).join(" "):e}},Pw={...o0,color:Fe,backgroundColor:Fe,outlineColor:Fe,fill:Fe,stroke:Fe,borderColor:Fe,borderTopColor:Fe,borderRightColor:Fe,borderBottomColor:Fe,borderLeftColor:Fe,filter:yf,WebkitFilter:yf},HA=e=>Pw[e];function KA(e,t){let i=HA(e);return i!==yf&&(i=zn),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const kw=new Set(["auto","none","0"]);function zw(e,t,i){let s=0,a;for(;s<e.length&&!a;){const o=e[s];typeof o=="string"&&!kw.has(o)&&_r(o).values.length&&(a=e[s]),s++}if(a&&i)for(const o of t)e[o]=KA(i,a)}const ds=e=>e*180/Math.PI,wf=e=>{const t=ds(Math.atan2(e[1],e[0]));return bf(t)},jw={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:wf,rotateZ:wf,skewX:e=>ds(Math.atan(e[1])),skewY:e=>ds(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},bf=e=>(e=e%360,e<0&&(e+=360),e),$2=wf,tg=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),eg=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Yw={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tg,scaleY:eg,scale:e=>(tg(e)+eg(e))/2,rotateX:e=>bf(ds(Math.atan2(e[6],e[5]))),rotateY:e=>bf(ds(Math.atan2(-e[2],e[0]))),rotateZ:$2,rotate:$2,skewX:e=>ds(Math.atan(e[4])),skewY:e=>ds(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ig(e){return e.includes("scale")?1:0}function Cf(e,t){if(!e||e==="none")return ig(t);const i=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,a;if(i)s=Yw,a=i;else{const h=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=jw,a=h}if(!a)return ig(t);const o=s[t],l=a[1].split(",").map(Hw);return typeof o=="function"?o(l):l[o]}const Gw=(e,t)=>{const{transform:i="none"}=getComputedStyle(e);return Cf(i,t)};function Hw(e){return parseFloat(e.trim())}const ng=e=>e===Da||e===wt,Kw=new Set(["x","y","z"]),qw=Ta.filter(e=>!Kw.has(e));function Qw(e){const t=[];return qw.forEach(i=>{const s=e.getValue(i);s!==void 0&&(t.push([i,s.get()]),s.set(i.startsWith("scale")?1:0))}),t}const Sa={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Cf(t,"x"),y:(e,{transform:t})=>Cf(t,"y")};Sa.translateX=Sa.x;Sa.translateY=Sa.y;const gs=new Set;let Sf=!1,Mf=!1;function qA(){if(Mf){const e=Array.from(gs).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),i=new Map;t.forEach(s=>{const a=Qw(s);a.length&&(i.set(s,a),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const a=i.get(s);a&&a.forEach(([o,l])=>{var h;(h=s.getValue(o))===null||h===void 0||h.set(l)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Mf=!1,Sf=!1,gs.forEach(e=>e.complete()),gs.clear()}function QA(){gs.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Mf=!0)})}function Xw(){QA(),qA()}class x0{constructor(t,i,s,a,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=s,this.motionValue=a,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(gs.add(this),Sf||(Sf=!0,qt.read(QA),qt.resolveKeyframes(qA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:s,motionValue:a}=this;for(let o=0;o<t.length;o++)if(t[o]===null)if(o===0){const l=a==null?void 0:a.get(),h=t[t.length-1];if(l!==void 0)t[0]=l;else if(s&&i){const u=s.readValue(i,h);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=h),a&&l===void 0&&a.set(t[0])}else t[o]=t[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),gs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,gs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const XA=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Zw=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ww(e){const t=Zw.exec(e);if(!t)return[,];const[,i,s,a]=t;return[`--${i??s}`,a]}function ZA(e,t,i=1){const[s,a]=Ww(e);if(!s)return;const o=window.getComputedStyle(t).getPropertyValue(s);if(o){const l=o.trim();return XA(l)?parseFloat(l):l}return r0(a)?ZA(a,t,i+1):a}const WA=e=>t=>t.test(e),Jw={test:e=>e==="auto",parse:e=>e},JA=[Da,wt,Fi,Nn,Xy,Qy,Jw],sg=e=>JA.find(WA(e));class _A extends x0{constructor(t,i,s,a,o){super(t,i,s,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:s}=this;if(!i||!i.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let f=t[u];if(typeof f=="string"&&(f=f.trim(),r0(f))){const m=ZA(f,i.current);m!==void 0&&(t[u]=m),u===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!DA.has(s)||t.length!==2)return;const[a,o]=t,l=sg(a),h=sg(o);if(l!==h)if(ng(l)&&ng(h))for(let u=0;u<t.length;u++){const f=t[u];typeof f=="string"&&(t[u]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,s=[];for(let a=0;a<t.length;a++)Cw(t[a])&&s.push(a);s.length&&zw(t,s,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sa[s](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const a=i[i.length-1];a!==void 0&&t.getValue(s,a).jump(a,!1)}measureEndState(){var t;const{element:i,name:s,unresolvedKeyframes:a}=this;if(!i||!i.current)return;const o=i.getValue(s);o&&o.jump(this.measuredOrigin,!1);const l=a.length-1,h=a[l];a[l]=Sa[s](i.measureViewportBox(),window.getComputedStyle(i.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([u,f])=>{i.getValue(u).set(f)}),this.resolveNoneKeyframes()}}const ag=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(zn.test(e)||e==="0")&&!e.startsWith("url("));function _w(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function $w(e,t,i,s){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],l=ag(a,t),h=ag(o,t);return!l||!h?!1:_w(e)||(i==="spring"||_f(i))&&s}const t6=e=>e!==null;function gc(e,{repeat:t,repeatType:i="loop"},s){const a=e.filter(t6),o=t&&i!=="loop"&&t%2===1?0:a.length-1;return!o||s===void 0?a[o]:s}const e6=40;class $A{constructor({autoplay:t=!0,delay:i=0,type:s="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ui.now(),this.options={autoplay:t,delay:i,type:s,repeat:a,repeatDelay:o,repeatType:l,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>e6?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Xw(),this._resolved}onKeyframesResolved(t,i){this.resolvedAt=Ui.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:o,delay:l,onComplete:h,onUpdate:u,isGenerator:f}=this.options;if(!f&&!$w(t,s,a,o))if(l)this.options.duration=0;else{u&&u(gc(t,this.options,i)),h&&h(),this.resolveFinishedPromise();return}const m=this.initPlayback(t,i);m!==!1&&(this._resolved={keyframes:t,finalKeyframe:i,...m},this.onPostResolved())}onPostResolved(){}then(t,i){return this.currentFinishedPromise.then(t,i)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const ie=(e,t,i)=>e+(t-e)*i;function Yh(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function i6({hue:e,saturation:t,lightness:i,alpha:s}){e/=360,t/=100,i/=100;let a=0,o=0,l=0;if(!t)a=o=l=i;else{const h=i<.5?i*(1+t):i+t-i*t,u=2*i-h;a=Yh(u,h,e+1/3),o=Yh(u,h,e),l=Yh(u,h,e-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:s}}function sc(e,t){return i=>i>0?t:e}const Gh=(e,t,i)=>{const s=e*e,a=i*(t*t-s)+s;return a<0?0:Math.sqrt(a)},n6=[xf,fs,pa],s6=e=>n6.find(t=>t.test(e));function rg(e){const t=s6(e);if(!t)return!1;let i=t.parse(e);return t===pa&&(i=i6(i)),i}const og=(e,t)=>{const i=rg(e),s=rg(t);if(!i||!s)return sc(e,t);const a={...i};return o=>(a.red=Gh(i.red,s.red,o),a.green=Gh(i.green,s.green,o),a.blue=Gh(i.blue,s.blue,o),a.alpha=ie(i.alpha,s.alpha,o),fs.transform(a))},a6=(e,t)=>i=>t(e(i)),ro=(...e)=>e.reduce(a6),Ef=new Set(["none","hidden"]);function r6(e,t){return Ef.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}function o6(e,t){return i=>ie(e,t,i)}function y0(e){return typeof e=="number"?o6:typeof e=="string"?r0(e)?sc:Fe.test(e)?og:u6:Array.isArray(e)?tv:typeof e=="object"?Fe.test(e)?og:l6:sc}function tv(e,t){const i=[...e],s=i.length,a=e.map((o,l)=>y0(o)(o,t[l]));return o=>{for(let l=0;l<s;l++)i[l]=a[l](o);return i}}function l6(e,t){const i={...e,...t},s={};for(const a in i)e[a]!==void 0&&t[a]!==void 0&&(s[a]=y0(e[a])(e[a],t[a]));return a=>{for(const o in s)i[o]=s[o](a);return i}}function c6(e,t){var i;const s=[],a={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const l=t.types[o],h=e.indexes[l][a[l]],u=(i=e.values[h])!==null&&i!==void 0?i:0;s[o]=u,a[l]++}return s}const u6=(e,t)=>{const i=zn.createTransformer(t),s=_r(e),a=_r(t);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?Ef.has(e)&&!a.values.length||Ef.has(t)&&!s.values.length?r6(e,t):ro(tv(c6(s,a),a.values),i):sc(e,t)};function ev(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?ie(e,t,i):y0(e)(e,t)}const h6=5;function iv(e,t,i){const s=Math.max(t-h6,0);return iA(i-e(s),t-s)}const oe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lg=.001;function f6({duration:e=oe.duration,bounce:t=oe.bounce,velocity:i=oe.velocity,mass:s=oe.mass}){let a,o,l=1-t;l=on(oe.minDamping,oe.maxDamping,l),e=on(oe.minDuration,oe.maxDuration,sn(e)),l<1?(a=f=>{const m=f*l,g=m*e,p=m-i,A=Tf(f,l),x=Math.exp(-g);return lg-p/A*x},o=f=>{const g=f*l*e,p=g*i+i,A=Math.pow(l,2)*Math.pow(f,2)*e,x=Math.exp(-g),y=Tf(Math.pow(f,2),l);return(-a(f)+lg>0?-1:1)*((p-A)*x)/y}):(a=f=>{const m=Math.exp(-f*e),g=(f-i)*e+1;return-.001+m*g},o=f=>{const m=Math.exp(-f*e),g=(i-f)*(e*e);return m*g});const h=5/e,u=m6(a,o,h);if(e=nn(e),isNaN(u))return{stiffness:oe.stiffness,damping:oe.damping,duration:e};{const f=Math.pow(u,2)*s;return{stiffness:f,damping:l*2*Math.sqrt(s*f),duration:e}}}const d6=12;function m6(e,t,i){let s=i;for(let a=1;a<d6;a++)s=s-e(s)/t(s);return s}function Tf(e,t){return e*Math.sqrt(1-t*t)}const g6=["duration","bounce"],p6=["stiffness","damping","mass"];function cg(e,t){return t.some(i=>e[i]!==void 0)}function A6(e){let t={velocity:oe.velocity,stiffness:oe.stiffness,damping:oe.damping,mass:oe.mass,isResolvedFromDuration:!1,...e};if(!cg(e,p6)&&cg(e,g6))if(e.visualDuration){const i=e.visualDuration,s=2*Math.PI/(i*1.2),a=s*s,o=2*on(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:oe.mass,stiffness:a,damping:o}}else{const i=f6(e);t={...t,...i,mass:oe.mass},t.isResolvedFromDuration=!0}return t}function nv(e=oe.visualDuration,t=oe.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:a}=i;const o=i.keyframes[0],l=i.keyframes[i.keyframes.length-1],h={done:!1,value:o},{stiffness:u,damping:f,mass:m,duration:g,velocity:p,isResolvedFromDuration:A}=A6({...i,velocity:-sn(i.velocity||0)}),x=p||0,y=f/(2*Math.sqrt(u*m)),b=l-o,C=sn(Math.sqrt(u/m)),E=Math.abs(b)<5;s||(s=E?oe.restSpeed.granular:oe.restSpeed.default),a||(a=E?oe.restDelta.granular:oe.restDelta.default);let S;if(y<1){const T=Tf(C,y);S=I=>{const R=Math.exp(-y*C*I);return l-R*((x+y*C*b)/T*Math.sin(T*I)+b*Math.cos(T*I))}}else if(y===1)S=T=>l-Math.exp(-C*T)*(b+(x+C*b)*T);else{const T=C*Math.sqrt(y*y-1);S=I=>{const R=Math.exp(-y*C*I),D=Math.min(T*I,300);return l-R*((x+y*C*b)*Math.sinh(D)+T*b*Math.cosh(D))/T}}const M={calculatedDuration:A&&g||null,next:T=>{const I=S(T);if(A)h.done=T>=g;else{let R=0;y<1&&(R=T===0?nn(x):iv(S,T,I));const D=Math.abs(R)<=s,U=Math.abs(l-I)<=a;h.done=D&&U}return h.value=h.done?l:I,h},toString:()=>{const T=Math.min(nA(M),gf),I=sA(R=>M.next(T*R).value,T,30);return T+"ms "+I}};return M}function ug({keyframes:e,velocity:t=0,power:i=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:l,min:h,max:u,restDelta:f=.5,restSpeed:m}){const g=e[0],p={done:!1,value:g},A=D=>h!==void 0&&D<h||u!==void 0&&D>u,x=D=>h===void 0?u:u===void 0||Math.abs(h-D)<Math.abs(u-D)?h:u;let y=i*t;const b=g+y,C=l===void 0?b:l(b);C!==b&&(y=C-g);const E=D=>-y*Math.exp(-D/s),S=D=>C+E(D),M=D=>{const U=E(D),F=S(D);p.done=Math.abs(U)<=f,p.value=p.done?C:F};let T,I;const R=D=>{A(p.value)&&(T=D,I=nv({keyframes:[p.value,x(p.value)],velocity:iv(S,D,p.value),damping:a,stiffness:o,restDelta:f,restSpeed:m}))};return R(0),{calculatedDuration:null,next:D=>{let U=!1;return!I&&T===void 0&&(U=!0,M(D),R(D)),T!==void 0&&D>=T?I.next(D-T):(!U&&M(D),p)}}}const v6=ao(.42,0,1,1),x6=ao(0,0,.58,1),sv=ao(.42,0,.58,1),y6=e=>Array.isArray(e)&&typeof e[0]!="number",w6={linear:ri,easeIn:v6,easeInOut:sv,easeOut:x6,circIn:p0,circInOut:OA,circOut:LA,backIn:g0,backInOut:FA,backOut:UA,anticipate:NA},hg=e=>{if($f(e)){eA(e.length===4);const[t,i,s,a]=e;return ao(t,i,s,a)}else if(typeof e=="string")return w6[e];return e};function b6(e,t,i){const s=[],a=i||ev,o=e.length-1;for(let l=0;l<o;l++){let h=a(e[l],e[l+1]);if(t){const u=Array.isArray(t)?t[l]||ri:t;h=ro(u,h)}s.push(h)}return s}function C6(e,t,{clamp:i=!0,ease:s,mixer:a}={}){const o=e.length;if(eA(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const l=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const h=b6(t,s,a),u=h.length,f=m=>{if(l&&m<e[0])return t[0];let g=0;if(u>1)for(;g<e.length-2&&!(m<e[g+1]);g++);const p=ba(e[g],e[g+1],m);return h[g](p)};return i?m=>f(on(e[0],e[o-1],m)):f}function S6(e,t){const i=e[e.length-1];for(let s=1;s<=t;s++){const a=ba(0,t,s);e.push(ie(i,1,a))}}function M6(e){const t=[0];return S6(t,e.length-1),t}function E6(e,t){return e.map(i=>i*t)}function T6(e,t){return e.map(()=>t||sv).splice(0,e.length-1)}function ac({duration:e=300,keyframes:t,times:i,ease:s="easeInOut"}){const a=y6(s)?s.map(hg):hg(s),o={done:!1,value:t[0]},l=E6(i&&i.length===t.length?i:M6(t),e),h=C6(l,t,{ease:Array.isArray(a)?a:T6(t,a)});return{calculatedDuration:e,next:u=>(o.value=h(u),o.done=u>=e,o)}}const D6=e=>{const t=({timestamp:i})=>e(i);return{start:()=>qt.update(t,!0),stop:()=>kn(t),now:()=>De.isProcessing?De.timestamp:Ui.now()}},V6={decay:ug,inertia:ug,tween:ac,keyframes:ac,spring:nv},R6=e=>e/100;class w0 extends $A{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:i,motionValue:s,element:a,keyframes:o}=this.options,l=(a==null?void 0:a.KeyframeResolver)||x0,h=(u,f)=>this.onKeyframesResolved(u,f);this.resolver=new l(o,h,i,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o,velocity:l=0}=this.options,h=_f(i)?i:V6[i]||ac;let u,f;h!==ac&&typeof t[0]!="number"&&(u=ro(R6,ev(t[0],t[1])),t=[0,100]);const m=h({...this.options,keyframes:t});o==="mirror"&&(f=h({...this.options,keyframes:[...t].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=nA(m));const{calculatedDuration:g}=m,p=g+a,A=p*(s+1)-a;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:u,calculatedDuration:g,resolvedDuration:p,totalDuration:A}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,i=!1){const{resolved:s}=this;if(!s){const{keyframes:D}=this.options;return{done:!0,value:D[D.length-1]}}const{finalKeyframe:a,generator:o,mirroredGenerator:l,mapPercentToKeyframes:h,keyframes:u,calculatedDuration:f,totalDuration:m,resolvedDuration:g}=s;if(this.startTime===null)return o.next(0);const{delay:p,repeat:A,repeatType:x,repeatDelay:y,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-m/this.speed,this.startTime)),i?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const C=this.currentTime-p*(this.speed>=0?1:-1),E=this.speed>=0?C<0:C>m;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let S=this.currentTime,M=o;if(A){const D=Math.min(this.currentTime,m)/g;let U=Math.floor(D),F=D%1;!F&&D>=1&&(F=1),F===1&&U--,U=Math.min(U,A+1),!!(U%2)&&(x==="reverse"?(F=1-F,y&&(F-=y/g)):x==="mirror"&&(M=l)),S=on(0,1,F)*g}const T=E?{done:!1,value:u[0]}:M.next(S);h&&(T.value=h(T.value));let{done:I}=T;!E&&f!==null&&(I=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return R&&a!==void 0&&(T.value=gc(u,this.options,a)),b&&b(T.value),R&&this.finish(),T}get duration(){const{resolved:t}=this;return t?sn(t.calculatedDuration):0}get time(){return sn(this.currentTime)}set time(t){t=nn(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=sn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=D6,onPlay:i,startTime:s}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),i&&i();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const I6=new Set(["opacity","clipPath","filter","transform"]);function B6(e,t,i,{delay:s=0,duration:a=300,repeat:o=0,repeatType:l="loop",ease:h="easeInOut",times:u}={}){const f={[t]:i};u&&(f.offset=u);const m=rA(h,a);return Array.isArray(m)&&(f.easing=m),e.animate(f,{delay:s,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const U6=Zf(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rc=10,F6=2e4;function N6(e){return _f(e.type)||e.type==="spring"||!aA(e.ease)}function L6(e,t){const i=new w0({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const a=[];let o=0;for(;!s.done&&o<F6;)s=i.sample(o),a.push(s.value),o+=rc;return{times:void 0,keyframes:a,duration:o-rc,ease:"linear"}}const av={anticipate:NA,backInOut:FA,circInOut:OA};function O6(e){return e in av}class fg extends $A{constructor(t){super(t);const{name:i,motionValue:s,element:a,keyframes:o}=this.options;this.resolver=new _A(o,(l,h)=>this.onKeyframesResolved(l,h),i,s,a),this.resolver.scheduleResolve()}initPlayback(t,i){let{duration:s=300,times:a,ease:o,type:l,motionValue:h,name:u,startTime:f}=this.options;if(!h.owner||!h.owner.current)return!1;if(typeof o=="string"&&ic()&&O6(o)&&(o=av[o]),N6(this.options)){const{onComplete:g,onUpdate:p,motionValue:A,element:x,...y}=this.options,b=L6(t,y);t=b.keyframes,t.length===1&&(t[1]=t[0]),s=b.duration,a=b.times,o=b.ease,l="keyframes"}const m=B6(h.owner.current,u,t,{...this.options,duration:s,times:a,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(k2(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:g}=this.options;h.set(gc(t,this.options,i)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:s,times:a,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:i}=t;return sn(i)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:i}=t;return sn(i.currentTime||0)}set time(t){const{resolved:i}=this;if(!i)return;const{animation:s}=i;s.currentTime=nn(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:i}=t;return i.playbackRate}set speed(t){const{resolved:i}=this;if(!i)return;const{animation:s}=i;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:i}=t;return i.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:i}=t;return i.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:i}=this;if(!i)return ri;const{animation:s}=i;k2(s,t)}return ri}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:i,keyframes:s,duration:a,type:o,ease:l,times:h}=t;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:g,element:p,...A}=this.options,x=new w0({...A,keyframes:s,duration:a,type:o,ease:l,times:h,isGenerator:!0}),y=nn(this.time);f.setWithVelocity(x.sample(y-rc).value,x.sample(y).value,rc)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:i,name:s,repeatDelay:a,repeatType:o,damping:l,type:h}=t;if(!i||!i.owner||!(i.owner.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:f}=i.owner.getProps();return U6()&&s&&I6.has(s)&&(s!=="transform"||!f)&&!u&&!a&&o!=="mirror"&&l!==0&&h!=="inertia"}}const P6={type:"spring",stiffness:500,damping:25,restSpeed:10},k6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),z6={type:"keyframes",duration:.8},j6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Y6=(e,{keyframes:t})=>t.length>2?z6:vs.has(e)?e.startsWith("scale")?k6(t[1]):P6:j6;function G6({when:e,delay:t,delayChildren:i,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:h,from:u,elapsed:f,...m}){return!!Object.keys(m).length}const b0=(e,t,i,s={},a,o)=>l=>{const h=Jf(s,e)||{},u=h.delay||s.delay||0;let{elapsed:f=0}=s;f=f-nn(u);let m={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-f,onUpdate:p=>{t.set(p),h.onUpdate&&h.onUpdate(p)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:e,motionValue:t,element:o?void 0:a};G6(h)||(m={...m,...Y6(e,m)}),m.duration&&(m.duration=nn(m.duration)),m.repeatDelay&&(m.repeatDelay=nn(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(g=!0)),m.allowFlatten=!h.type&&!h.ease,g&&!o&&t.get()!==void 0){const p=gc(m.keyframes,h);if(p!==void 0)return qt.update(()=>{m.onUpdate(p),m.onComplete()}),new dy([])}return!o&&fg.supports(m)?new fg(m):new w0(m)};function H6({protectedKeys:e,needsAnimating:t},i){const s=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,s}function rv(e,t,{delay:i=0,transitionOverride:s,type:a}={}){var o;let{transition:l=e.getDefaultTransition(),transitionEnd:h,...u}=t;s&&(l=s);const f=[],m=a&&e.animationState&&e.animationState.getState()[a];for(const g in u){const p=e.getValue(g,(o=e.latestValues[g])!==null&&o!==void 0?o:null),A=u[g];if(A===void 0||m&&H6(m,g))continue;const x={delay:i,...Jf(l||{},g)};let y=!1;if(window.MotionHandoffAnimation){const C=VA(e);if(C){const E=window.MotionHandoffAnimation(C,g,qt);E!==null&&(x.startTime=E,y=!0)}}vf(e,g),p.start(b0(g,p,A,e.shouldReduceMotion&&DA.has(g)?{type:!1}:x,e,y));const b=p.animation;b&&f.push(b)}return h&&Promise.all(f).then(()=>{qt.update(()=>{h&&vw(e,h)})}),f}function Df(e,t,i={}){var s;const a=Jr(e,t,i.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=a||{};i.transitionOverride&&(o=i.transitionOverride);const l=a?()=>Promise.all(rv(e,a,i)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:p}=o;return K6(e,t,m+f,g,p,i)}:()=>Promise.resolve(),{when:u}=o;if(u){const[f,m]=u==="beforeChildren"?[l,h]:[h,l];return f().then(()=>m())}else return Promise.all([l(),h(i.delay)])}function K6(e,t,i=0,s=0,a=1,o){const l=[],h=(e.variantChildren.size-1)*s,u=a===1?(f=0)=>f*s:(f=0)=>h-f*s;return Array.from(e.variantChildren).sort(q6).forEach((f,m)=>{f.notify("AnimationStart",t),l.push(Df(f,t,{...o,delay:i+u(m)}).then(()=>f.notify("AnimationComplete",t)))}),Promise.all(l)}function q6(e,t){return e.sortNodePosition(t)}function Q6(e,t,i={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const a=t.map(o=>Df(e,o,i));s=Promise.all(a)}else if(typeof t=="string")s=Df(e,t,i);else{const a=typeof t=="function"?Jr(e,t,i.custom):t;s=Promise.all(rv(e,a,i))}return s.then(()=>{e.notify("AnimationComplete",t)})}function ov(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let s=0;s<i;s++)if(t[s]!==e[s])return!1;return!0}const X6=n0.length;function lv(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?lv(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const t={};for(let i=0;i<X6;i++){const s=n0[i],a=e.props[s];(Xr(a)||a===!1)&&(t[s]=a)}return t}const Z6=[...i0].reverse(),W6=i0.length;function J6(e){return t=>Promise.all(t.map(({animation:i,options:s})=>Q6(e,i,s)))}function _6(e){let t=J6(e),i=dg(),s=!0;const a=u=>(f,m)=>{var g;const p=Jr(e,m,u==="exit"?(g=e.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(p){const{transition:A,transitionEnd:x,...y}=p;f={...f,...y,...x}}return f};function o(u){t=u(e)}function l(u){const{props:f}=e,m=lv(e.parent)||{},g=[],p=new Set;let A={},x=1/0;for(let b=0;b<W6;b++){const C=Z6[b],E=i[C],S=f[C]!==void 0?f[C]:m[C],M=Xr(S),T=C===u?E.isActive:null;T===!1&&(x=b);let I=S===m[C]&&S!==f[C]&&M;if(I&&s&&e.manuallyAnimateOnMount&&(I=!1),E.protectedKeys={...A},!E.isActive&&T===null||!S&&!E.prevProp||dc(S)||typeof S=="boolean")continue;const R=$6(E.prevProp,S);let D=R||C===u&&E.isActive&&!I&&M||b>x&&M,U=!1;const F=Array.isArray(S)?S:[S];let P=F.reduce(a(C),{});T===!1&&(P={});const{prevResolvedValues:N={}}=E,k={...N,...P},z=Q=>{D=!0,p.has(Q)&&(U=!0,p.delete(Q)),E.needsAnimating[Q]=!0;const tt=e.getValue(Q);tt&&(tt.liveStyle=!1)};for(const Q in k){const tt=P[Q],ot=N[Q];if(A.hasOwnProperty(Q))continue;let Y=!1;Af(tt)&&Af(ot)?Y=!ov(tt,ot):Y=tt!==ot,Y?tt!=null?z(Q):p.add(Q):tt!==void 0&&p.has(Q)?z(Q):E.protectedKeys[Q]=!0}E.prevProp=S,E.prevResolvedValues=P,E.isActive&&(A={...A,...P}),s&&e.blockInitialAnimation&&(D=!1),D&&(!(I&&R)||U)&&g.push(...F.map(Q=>({animation:Q,options:{type:C}})))}if(p.size){const b={};if(typeof f.initial!="boolean"){const C=Jr(e,Array.isArray(f.initial)?f.initial[0]:f.initial);C&&C.transition&&(b.transition=C.transition)}p.forEach(C=>{const E=e.getBaseTarget(C),S=e.getValue(C);S&&(S.liveStyle=!0),b[C]=E??null}),g.push({animation:b})}let y=!!g.length;return s&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?t(g):Promise.resolve()}function h(u,f){var m;if(i[u].isActive===f)return Promise.resolve();(m=e.variantChildren)===null||m===void 0||m.forEach(p=>{var A;return(A=p.animationState)===null||A===void 0?void 0:A.setActive(u,f)}),i[u].isActive=f;const g=l(u);for(const p in i)i[p].protectedKeys={};return g}return{animateChanges:l,setActive:h,setAnimateFunction:o,getState:()=>i,reset:()=>{i=dg(),s=!0}}}function $6(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ov(t,e):!1}function os(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dg(){return{animate:os(!0),whileInView:os(),whileHover:os(),whileTap:os(),whileDrag:os(),whileFocus:os(),exit:os()}}class Yn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class tb extends Yn{constructor(t){super(t),t.animationState||(t.animationState=_6(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();dc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let eb=0;class ib extends Yn{constructor(){super(...arguments),this.id=eb++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const a=this.node.animationState.setActive("exit",!t);i&&!t&&a.then(()=>{i(this.id)})}mount(){const{register:t,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const nb={animation:{Feature:tb},exit:{Feature:ib}};function $r(e,t,i,s={passive:!0}){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i)}function oo(e){return{point:{x:e.pageX,y:e.pageY}}}const sb=e=>t=>e0(t)&&e(t,oo(t));function zr(e,t,i,s){return $r(e,t,sb(i),s)}function cv({top:e,left:t,right:i,bottom:s}){return{x:{min:t,max:i},y:{min:e,max:s}}}function ab({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function rb(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:s.y,right:s.x}}const uv=1e-4,ob=1-uv,lb=1+uv,hv=.01,cb=0-hv,ub=0+hv;function ze(e){return e.max-e.min}function hb(e,t,i){return Math.abs(e-t)<=i}function mg(e,t,i,s=.5){e.origin=s,e.originPoint=ie(t.min,t.max,e.origin),e.scale=ze(i)/ze(t),e.translate=ie(i.min,i.max,e.origin)-e.originPoint,(e.scale>=ob&&e.scale<=lb||isNaN(e.scale))&&(e.scale=1),(e.translate>=cb&&e.translate<=ub||isNaN(e.translate))&&(e.translate=0)}function jr(e,t,i,s){mg(e.x,t.x,i.x,s?s.originX:void 0),mg(e.y,t.y,i.y,s?s.originY:void 0)}function gg(e,t,i){e.min=i.min+t.min,e.max=e.min+ze(t)}function fb(e,t,i){gg(e.x,t.x,i.x),gg(e.y,t.y,i.y)}function pg(e,t,i){e.min=t.min-i.min,e.max=e.min+ze(t)}function Yr(e,t,i){pg(e.x,t.x,i.x),pg(e.y,t.y,i.y)}const Ag=()=>({translate:0,scale:1,origin:0,originPoint:0}),Aa=()=>({x:Ag(),y:Ag()}),vg=()=>({min:0,max:0}),ue=()=>({x:vg(),y:vg()});function vi(e){return[e("x"),e("y")]}function Hh(e){return e===void 0||e===1}function Vf({scale:e,scaleX:t,scaleY:i}){return!Hh(e)||!Hh(t)||!Hh(i)}function us(e){return Vf(e)||fv(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function fv(e){return xg(e.x)||xg(e.y)}function xg(e){return e&&e!=="0%"}function oc(e,t,i){const s=e-i,a=t*s;return i+a}function yg(e,t,i,s,a){return a!==void 0&&(e=oc(e,a,s)),oc(e,i,s)+t}function Rf(e,t=0,i=1,s,a){e.min=yg(e.min,t,i,s,a),e.max=yg(e.max,t,i,s,a)}function dv(e,{x:t,y:i}){Rf(e.x,t.translate,t.scale,t.originPoint),Rf(e.y,i.translate,i.scale,i.originPoint)}const wg=.999999999999,bg=1.0000000000001;function db(e,t,i,s=!1){const a=i.length;if(!a)return;t.x=t.y=1;let o,l;for(let h=0;h<a;h++){o=i[h],l=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&xa(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,dv(e,l)),s&&us(o.latestValues)&&xa(e,o.latestValues))}t.x<bg&&t.x>wg&&(t.x=1),t.y<bg&&t.y>wg&&(t.y=1)}function va(e,t){e.min=e.min+t,e.max=e.max+t}function Cg(e,t,i,s,a=.5){const o=ie(e.min,e.max,a);Rf(e,t,i,o,s)}function xa(e,t){Cg(e.x,t.x,t.scaleX,t.scale,t.originX),Cg(e.y,t.y,t.scaleY,t.scale,t.originY)}function mv(e,t){return cv(rb(e.getBoundingClientRect(),t))}function mb(e,t,i){const s=mv(e,i),{scroll:a}=t;return a&&(va(s.x,a.offset.x),va(s.y,a.offset.y)),s}const gv=({current:e})=>e?e.ownerDocument.defaultView:null,Sg=(e,t)=>Math.abs(e-t);function gb(e,t){const i=Sg(e.x,t.x),s=Sg(e.y,t.y);return Math.sqrt(i**2+s**2)}class pv{constructor(t,i,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=qh(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,A=gb(g.offset,{x:0,y:0})>=3;if(!p&&!A)return;const{point:x}=g,{timestamp:y}=De;this.history.push({...x,timestamp:y});const{onStart:b,onMove:C}=this.handlers;p||(b&&b(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,p)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Kh(p,this.transformPagePoint),qt.update(this.updatePoint,!0)},this.handlePointerUp=(g,p)=>{this.end();const{onEnd:A,onSessionEnd:x,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=qh(g.type==="pointercancel"?this.lastMoveEventInfo:Kh(p,this.transformPagePoint),this.history);this.startEvent&&A&&A(g,b),x&&x(g,b)},!e0(t))return;this.dragSnapToOrigin=o,this.handlers=i,this.transformPagePoint=s,this.contextWindow=a||window;const l=oo(t),h=Kh(l,this.transformPagePoint),{point:u}=h,{timestamp:f}=De;this.history=[{...u,timestamp:f}];const{onSessionStart:m}=i;m&&m(t,qh(h,this.history)),this.removeListeners=ro(zr(this.contextWindow,"pointermove",this.handlePointerMove),zr(this.contextWindow,"pointerup",this.handlePointerUp),zr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),kn(this.updatePoint)}}function Kh(e,t){return t?{point:t(e.point)}:e}function Mg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function qh({point:e},t){return{point:e,delta:Mg(e,Av(t)),offset:Mg(e,pb(t)),velocity:Ab(t,.1)}}function pb(e){return e[0]}function Av(e){return e[e.length-1]}function Ab(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,s=null;const a=Av(e);for(;i>=0&&(s=e[i],!(a.timestamp-s.timestamp>nn(t)));)i--;if(!s)return{x:0,y:0};const o=sn(a.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const l={x:(a.x-s.x)/o,y:(a.y-s.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function vb(e,{min:t,max:i},s){return t!==void 0&&e<t?e=s?ie(t,e,s.min):Math.max(e,t):i!==void 0&&e>i&&(e=s?ie(i,e,s.max):Math.min(e,i)),e}function Eg(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function xb(e,{top:t,left:i,bottom:s,right:a}){return{x:Eg(e.x,i,a),y:Eg(e.y,t,s)}}function Tg(e,t){let i=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,s]=[s,i]),{min:i,max:s}}function yb(e,t){return{x:Tg(e.x,t.x),y:Tg(e.y,t.y)}}function wb(e,t){let i=.5;const s=ze(e),a=ze(t);return a>s?i=ba(t.min,t.max-s,e.min):s>a&&(i=ba(e.min,e.max-a,t.min)),on(0,1,i)}function bb(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const If=.35;function Cb(e=If){return e===!1?e=0:e===!0&&(e=If),{x:Dg(e,"left","right"),y:Dg(e,"top","bottom")}}function Dg(e,t,i){return{min:Vg(e,t),max:Vg(e,i)}}function Vg(e,t){return typeof e=="number"?e:e[t]||0}const Sb=new WeakMap;class Mb{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ue(),this.visualElement=t}start(t,{snapToCursor:i=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(oo(m).point)},o=(m,g)=>{const{drag:p,dragPropagation:A,onDragStart:x}=this.getProps();if(p&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xy(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vi(b=>{let C=this.getAxisMotionValue(b).get()||0;if(Fi.test(C)){const{projection:E}=this.visualElement;if(E&&E.layout){const S=E.layout.layoutBox[b];S&&(C=ze(S)*(parseFloat(C)/100))}}this.originPoint[b]=C}),x&&qt.postRender(()=>x(m,g)),vf(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(m,g)=>{const{dragPropagation:p,dragDirectionLock:A,onDirectionLock:x,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:b}=g;if(A&&this.currentDirection===null){this.currentDirection=Eb(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,b),this.updateAxis("y",g.point,b),this.visualElement.render(),y&&y(m,g)},h=(m,g)=>this.stop(m,g),u=()=>vi(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new pv(t,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:h,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:gv(this.visualElement)})}stop(t,i){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&qt.postRender(()=>o(t,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,s){const{drag:a}=this.getProps();if(!s||!Vl(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(l=vb(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){var t;const{dragConstraints:i,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;i&&ga(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&a?this.constraints=xb(a.layoutBox,i):this.constraints=!1,this.elastic=Cb(s),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&vi(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=bb(a.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!ga(t))return!1;const s=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=mb(s,a.root,this.visualElement.getTransformPagePoint());let l=yb(a.layout.layoutBox,o);if(i){const h=i(ab(l));this.hasMutatedConstraints=!!h,h&&(l=cv(h))}return l}startAnimation(t){const{drag:i,dragMomentum:s,dragElastic:a,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),u=this.constraints||{},f=vi(m=>{if(!Vl(m,i,this.currentDirection))return;let g=u&&u[m]||{};l&&(g={min:0,max:0});const p=a?200:1e6,A=a?40:1e7,x={type:"inertia",velocity:s?t[m]:0,bounceStiffness:p,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,x)});return Promise.all(f).then(h)}startAxisValueAnimation(t,i){const s=this.getAxisMotionValue(t);return vf(this.visualElement,t),s.start(b0(t,s,0,i,this.visualElement,!1))}stopAnimation(){vi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){vi(t=>{var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),a=s[i];return a||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){vi(i=>{const{drag:s}=this.getProps();if(!Vl(i,s,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(i);if(a&&a.layout){const{min:l,max:h}=a.layout.layoutBox[i];o.set(t[i]-ie(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:s}=this.visualElement;if(!ga(i)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};vi(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const u=h.get();a[l]=wb({min:u,max:u},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),vi(l=>{if(!Vl(l,t,null))return;const h=this.getAxisMotionValue(l),{min:u,max:f}=this.constraints[l];h.set(ie(u,f,a[l]))})}addListeners(){if(!this.visualElement.current)return;Sb.set(this.visualElement,this);const t=this.visualElement.current,i=zr(t,"pointerdown",u=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();ga(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),qt.read(s);const l=$r(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(vi(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=u[m].translate,g.set(g.get()+u[m].translate))}),this.visualElement.render())});return()=>{l(),i(),o(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:l=If,dragMomentum:h=!0}=t;return{...t,drag:i,dragDirectionLock:s,dragPropagation:a,dragConstraints:o,dragElastic:l,dragMomentum:h}}}function Vl(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function Eb(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class Tb extends Yn{constructor(t){super(t),this.removeGroupControls=ri,this.removeListeners=ri,this.controls=new Mb(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ri}unmount(){this.removeGroupControls(),this.removeListeners()}}const Rg=e=>(t,i)=>{e&&qt.postRender(()=>e(t,i))};class Db extends Yn{constructor(){super(...arguments),this.removePointerDownListener=ri}onPointerDown(t){this.session=new pv(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gv(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:Rg(t),onStart:Rg(i),onMove:s,onEnd:(o,l)=>{delete this.session,a&&qt.postRender(()=>a(o,l))}}}mount(){this.removePointerDownListener=zr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ql={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ig(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Rr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(wt.test(e))e=parseFloat(e);else return e;const i=Ig(e,t.target.x),s=Ig(e,t.target.y);return`${i}% ${s}%`}},Vb={correct:(e,{treeScale:t,projectionDelta:i})=>{const s=e,a=zn.parse(e);if(a.length>5)return s;const o=zn.createTransformer(e),l=typeof a[0]!="number"?1:0,h=i.x.scale*t.x,u=i.y.scale*t.y;a[0+l]/=h,a[1+l]/=u;const f=ie(h,u,.5);return typeof a[2+l]=="number"&&(a[2+l]/=f),typeof a[3+l]=="number"&&(a[3+l]/=f),o(a)}};class Rb extends Z.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:s,layoutId:a}=this.props,{projection:o}=t;qy(Ib),o&&(i.group&&i.group.add(o),s&&s.register&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ql.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:s,drag:a,isPresent:o}=this.props,l=s.projection;return l&&(l.isPresent=o,a||t.layoutDependency!==i||i===void 0||t.isPresent!==o?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||qt.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),t0.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:s}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function vv(e){const[t,i]=cy(),s=Z.useContext($p);return B.jsx(Rb,{...e,layoutGroup:s,switchLayoutGroup:Z.useContext(gA),isPresent:t,safeToRemove:i})}const Ib={borderRadius:{...Rr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rr,borderTopRightRadius:Rr,borderBottomLeftRadius:Rr,borderBottomRightRadius:Rr,boxShadow:Vb};function Bb(e,t,i){const s=Ne(e)?e:Qr(e);return s.start(b0("",s,t,i)),s.animation}function Ub(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Fb=(e,t)=>e.depth-t.depth;class Nb{constructor(){this.children=[],this.isDirty=!1}add(t){Qf(this.children,t),this.isDirty=!0}remove(t){Xf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Fb),this.isDirty=!1,this.children.forEach(t)}}function Lb(e,t){const i=Ui.now(),s=({timestamp:a})=>{const o=a-i;o>=t&&(kn(s),e(o-t))};return qt.read(s,!0),()=>kn(s)}const xv=["TopLeft","TopRight","BottomLeft","BottomRight"],Ob=xv.length,Bg=e=>typeof e=="string"?parseFloat(e):e,Ug=e=>typeof e=="number"||wt.test(e);function Pb(e,t,i,s,a,o){a?(e.opacity=ie(0,i.opacity!==void 0?i.opacity:1,kb(s)),e.opacityExit=ie(t.opacity!==void 0?t.opacity:1,0,zb(s))):o&&(e.opacity=ie(t.opacity!==void 0?t.opacity:1,i.opacity!==void 0?i.opacity:1,s));for(let l=0;l<Ob;l++){const h=`border${xv[l]}Radius`;let u=Fg(t,h),f=Fg(i,h);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||Ug(u)===Ug(f)?(e[h]=Math.max(ie(Bg(u),Bg(f),s),0),(Fi.test(f)||Fi.test(u))&&(e[h]+="%")):e[h]=f}(t.rotate||i.rotate)&&(e.rotate=ie(t.rotate||0,i.rotate||0,s))}function Fg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kb=yv(0,.5,LA),zb=yv(.5,.95,ri);function yv(e,t,i){return s=>s<e?0:s>t?1:i(ba(e,t,s))}function Ng(e,t){e.min=t.min,e.max=t.max}function Ai(e,t){Ng(e.x,t.x),Ng(e.y,t.y)}function Lg(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Og(e,t,i,s,a){return e-=t,e=oc(e,1/i,s),a!==void 0&&(e=oc(e,1/a,s)),e}function jb(e,t=0,i=1,s=.5,a,o=e,l=e){if(Fi.test(t)&&(t=parseFloat(t),t=ie(l.min,l.max,t/100)-l.min),typeof t!="number")return;let h=ie(o.min,o.max,s);e===o&&(h-=t),e.min=Og(e.min,t,i,h,a),e.max=Og(e.max,t,i,h,a)}function Pg(e,t,[i,s,a],o,l){jb(e,t[i],t[s],t[a],t.scale,o,l)}const Yb=["x","scaleX","originX"],Gb=["y","scaleY","originY"];function kg(e,t,i,s){Pg(e.x,t,Yb,i?i.x:void 0,s?s.x:void 0),Pg(e.y,t,Gb,i?i.y:void 0,s?s.y:void 0)}function zg(e){return e.translate===0&&e.scale===1}function wv(e){return zg(e.x)&&zg(e.y)}function jg(e,t){return e.min===t.min&&e.max===t.max}function Hb(e,t){return jg(e.x,t.x)&&jg(e.y,t.y)}function Yg(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function bv(e,t){return Yg(e.x,t.x)&&Yg(e.y,t.y)}function Gg(e){return ze(e.x)/ze(e.y)}function Hg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Kb{constructor(){this.members=[]}add(t){Qf(this.members,t),t.scheduleRender()}remove(t){if(Xf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(a=>t===a);if(i===0)return!1;let s;for(let a=i;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(t,i){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,i&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:s}=t;i.onExitComplete&&i.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qb(e,t,i){let s="";const a=e.x.translate/t.x,o=e.y.translate/t.y,l=(i==null?void 0:i.z)||0;if((a||o||l)&&(s=`translate3d(${a}px, ${o}px, ${l}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:p,skewX:A,skewY:x}=i;f&&(s=`perspective(${f}px) ${s}`),m&&(s+=`rotate(${m}deg) `),g&&(s+=`rotateX(${g}deg) `),p&&(s+=`rotateY(${p}deg) `),A&&(s+=`skewX(${A}deg) `),x&&(s+=`skewY(${x}deg) `)}const h=e.x.scale*t.x,u=e.y.scale*t.y;return(h!==1||u!==1)&&(s+=`scale(${h}, ${u})`),s||"none"}const Qh=["","X","Y","Z"],Qb={visibility:"hidden"},Kg=1e3;let Xb=0;function Xh(e,t,i,s){const{latestValues:a}=t;a[e]&&(i[e]=a[e],t.setStaticValue(e,0),s&&(s[e]=0))}function Cv(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=VA(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:a,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",qt,!(a||o))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&Cv(s)}function Sv({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(l={},h=t==null?void 0:t()){this.id=Xb++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Jb),this.nodes.forEach(i8),this.nodes.forEach(n8),this.nodes.forEach(_b)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Nb)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Wf),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const u=this.eventHandlers.get(l);u&&u.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Ub(l),this.instance=l;const{layoutId:u,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(f||u)&&(this.isLayoutDirty=!0),e){let g;const p=()=>this.root.updateBlockedByResize=!1;e(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=Lb(p,250),ql.hasAnimatedSinceResize&&(ql.hasAnimatedSinceResize=!1,this.nodes.forEach(Qg))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&m&&(u||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:p,hasRelativeLayoutChanged:A,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||m.getDefaultTransition()||l8,{onLayoutAnimationStart:b,onLayoutAnimationComplete:C}=m.getProps(),E=!this.targetLayout||!bv(this.targetLayout,x),S=!p&&A;if(this.options.layoutRoot||this.resumeFrom||S||p&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,S);const M={...Jf(y,"layout"),onPlay:b,onComplete:C};(m.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else p||Qg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,kn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(s8),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Cv(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:h,layout:u}=this.options;if(h===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qg);return}this.isUpdating||this.nodes.forEach(t8),this.isUpdating=!1,this.nodes.forEach(e8),this.nodes.forEach(Zb),this.nodes.forEach(Wb),this.clearAllSnapshots();const h=Ui.now();De.delta=on(0,1e3/60,h-De.timestamp),De.timestamp=h,De.isProcessing=!0,kh.update.process(De),kh.preRender.process(De),kh.render.process(De),De.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,t0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($b),this.sharedNodes.forEach(a8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ze(this.snapshot.measuredBox.x)&&!ze(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!wv(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&(h||us(this.latestValues)||m)&&(a(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let u=this.removeElementScroll(h);return l&&(u=this.removeTransform(u)),c8(u),{animationId:this.root.animationId,measuredBox:h,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:h}=this.options;if(!h)return ue();const u=h.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(u8))){const{scroll:m}=this.root;m&&(va(u.x,m.offset.x),va(u.y,m.offset.y))}return u}removeElementScroll(l){var h;const u=ue();if(Ai(u,l),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return u;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:g,options:p}=m;m!==this.root&&g&&p.layoutScroll&&(g.wasRoot&&Ai(u,l),va(u.x,g.offset.x),va(u.y,g.offset.y))}return u}applyTransform(l,h=!1){const u=ue();Ai(u,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!h&&m.options.layoutScroll&&m.scroll&&m!==m.root&&xa(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),us(m.latestValues)&&xa(u,m.latestValues)}return us(this.latestValues)&&xa(u,this.latestValues),u}removeTransform(l){const h=ue();Ai(h,l);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!us(f.latestValues))continue;Vf(f.latestValues)&&f.updateSnapshot();const m=ue(),g=f.measurePageBox();Ai(m,g),kg(h,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return us(this.latestValues)&&kg(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==De.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var h;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:p}=this.options;if(!(!this.layout||!(g||p))){if(this.resolvedRelativeTargetAt=De.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),Yr(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),Ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ue(),this.targetWithTransforms=ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ai(this.target,this.layout.layoutBox),dv(this.target,this.targetDelta)):Ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),Yr(this.relativeTargetOrigin,this.target,A.target),Ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Vf(this.parent.latestValues)||fv(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const h=this.getLead(),u=!!this.resumingFrom||this!==h;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===De.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Ai(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,A=this.treeScale.y;db(this.layoutCorrected,this.treeScale,this.path,u),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=ue());const{target:x}=h;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Lg(this.prevProjectionDelta.x,this.projectionDelta.x),Lg(this.prevProjectionDelta.y,this.projectionDelta.y)),jr(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==A||!Hg(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Aa(),this.projectionDelta=Aa(),this.projectionDeltaWithTransform=Aa()}setAnimationOrigin(l,h=!1){const u=this.snapshot,f=u?u.latestValues:{},m={...this.latestValues},g=Aa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const p=ue(),A=u?u.source:void 0,x=this.layout?this.layout.source:void 0,y=A!==x,b=this.getStack(),C=!b||b.members.length<=1,E=!!(y&&!C&&this.options.crossfade===!0&&!this.path.some(o8));this.animationProgress=0;let S;this.mixTargetDelta=M=>{const T=M/1e3;Xg(g.x,l.x,T),Xg(g.y,l.y,T),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yr(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),r8(this.relativeTarget,this.relativeTargetOrigin,p,T),S&&Hb(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ue()),Ai(S,this.relativeTarget)),y&&(this.animationValues=m,Pb(m,f,this.latestValues,T,E,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(kn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qt.update(()=>{ql.hasAnimatedSinceResize=!0,this.currentAnimation=Bb(0,Kg,{...l,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Kg),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:u,layout:f,latestValues:m}=l;if(!(!h||!u||!f)){if(this!==l&&this.layout&&f&&Mv(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||ue();const g=ze(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+g;const p=ze(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+p}Ai(h,u),xa(h,m),jr(this.projectionDeltaWithTransform,this.layoutCorrected,h,m)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Kb),this.sharedNodes.get(l).add(h);const f=h.options.initialPromotionConfig;h.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:h}=this.options;return h?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:h}=this.options;return h?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(h=!0),!h)return;const f={};u.z&&Xh("z",l,f,this.animationValues);for(let m=0;m<Qh.length;m++)Xh(`rotate${Qh[m]}`,l,f,this.animationValues),Xh(`skew${Qh[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}getProjectionStyles(l){var h,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Qb;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Kl(l==null?void 0:l.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Kl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!us(this.latestValues)&&(y.transform=m?m({},""):"none",this.hasProjected=!1),y}const p=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=qb(this.projectionDeltaWithTransform,this.treeScale,p),m&&(f.transform=m(p,f.transform));const{x:A,y:x}=this.projectionDelta;f.transformOrigin=`${A.origin*100}% ${x.origin*100}% 0`,g.animationValues?f.opacity=g===this?(u=(h=p.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:f.opacity=g===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in Zr){if(p[y]===void 0)continue;const{correct:b,applyTo:C,isCSSVariable:E}=Zr[y],S=f.transform==="none"?p[y]:b(p[y],g);if(C){const M=C.length;for(let T=0;T<M;T++)f[C[T]]=S}else E?this.options.visualElement.renderState.vars[y]=S:f[y]=S}return this.options.layoutId&&(f.pointerEvents=g===this?Kl(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var h;return(h=l.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(qg),this.root.sharedNodes.clear()}}}function Zb(e){e.updateLayout()}function Wb(e){var t;const i=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=e.layout,{animationType:o}=e.options,l=i.source!==e.layout.source;o==="size"?vi(g=>{const p=l?i.measuredBox[g]:i.layoutBox[g],A=ze(p);p.min=s[g].min,p.max=p.min+A}):Mv(o,i.layoutBox,s)&&vi(g=>{const p=l?i.measuredBox[g]:i.layoutBox[g],A=ze(s[g]);p.max=p.min+A,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[g].max=e.relativeTarget[g].min+A)});const h=Aa();jr(h,s,i.layoutBox);const u=Aa();l?jr(u,e.applyTransform(a,!0),i.measuredBox):jr(u,s,i.layoutBox);const f=!wv(h);let m=!1;if(!e.resumeFrom){const g=e.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:p,layout:A}=g;if(p&&A){const x=ue();Yr(x,i.layoutBox,p.layoutBox);const y=ue();Yr(y,s,A.layoutBox),bv(x,y)||(m=!0),g.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=x,e.relativeParent=g)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:i,delta:u,layoutDelta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Jb(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function _b(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function $b(e){e.clearSnapshot()}function qg(e){e.clearMeasurements()}function t8(e){e.isLayoutDirty=!1}function e8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Qg(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function i8(e){e.resolveTargetDelta()}function n8(e){e.calcProjection()}function s8(e){e.resetSkewAndRotation()}function a8(e){e.removeLeadSnapshot()}function Xg(e,t,i){e.translate=ie(t.translate,0,i),e.scale=ie(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function Zg(e,t,i,s){e.min=ie(t.min,i.min,s),e.max=ie(t.max,i.max,s)}function r8(e,t,i,s){Zg(e.x,t.x,i.x,s),Zg(e.y,t.y,i.y,s)}function o8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const l8={duration:.45,ease:[.4,0,.1,1]},Wg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Jg=Wg("applewebkit/")&&!Wg("chrome/")?Math.round:ri;function _g(e){e.min=Jg(e.min),e.max=Jg(e.max)}function c8(e){_g(e.x),_g(e.y)}function Mv(e,t,i){return e==="position"||e==="preserve-aspect"&&!hb(Gg(t),Gg(i),.2)}function u8(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const h8=Sv({attachResizeListener:(e,t)=>$r(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zh={current:void 0},Ev=Sv({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Zh.current){const e=new h8({});e.mount(window),e.setOptions({layoutScroll:!0}),Zh.current=e}return Zh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),f8={pan:{Feature:Db},drag:{Feature:Tb,ProjectionNode:Ev,MeasureLayout:vv}};function $g(e,t,i){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",i==="Start");const a="onHover"+i,o=s[a];o&&qt.postRender(()=>o(t,oo(t)))}class d8 extends Yn{mount(){const{current:t}=this.node;t&&(this.unmount=wy(t,(i,s)=>($g(this.node,s,"Start"),a=>$g(this.node,a,"End"))))}unmount(){}}class m8 extends Yn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ro($r(this.node.current,"focus",()=>this.onFocus()),$r(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function tp(e,t,i){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",i==="Start");const a="onTap"+(i==="End"?"":i),o=s[a];o&&qt.postRender(()=>o(t,oo(t)))}class g8 extends Yn{mount(){const{current:t}=this.node;t&&(this.unmount=My(t,(i,s)=>(tp(this.node,s,"Start"),(a,{success:o})=>tp(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Bf=new WeakMap,Wh=new WeakMap,p8=e=>{const t=Bf.get(e.target);t&&t(e)},A8=e=>{e.forEach(p8)};function v8({root:e,...t}){const i=e||document;Wh.has(i)||Wh.set(i,{});const s=Wh.get(i),a=JSON.stringify(t);return s[a]||(s[a]=new IntersectionObserver(A8,{root:e,...t})),s[a]}function x8(e,t,i){const s=v8(t);return Bf.set(e,i),s.observe(e),()=>{Bf.delete(e),s.unobserve(e)}}const y8={some:0,all:1};class w8 extends Yn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:s,amount:a="some",once:o}=t,l={root:i?i.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:y8[a]},h=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),p=f?m:g;p&&p(u)};return x8(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(b8(t,i))&&this.startObserver()}unmount(){}}function b8({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const C8={inView:{Feature:w8},tap:{Feature:g8},focus:{Feature:m8},hover:{Feature:d8}},S8={layout:{ProjectionNode:Ev,MeasureLayout:vv}},Uf={current:null},Tv={current:!1};function M8(){if(Tv.current=!0,!!Kf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Uf.current=e.matches;e.addListener(t),t()}else Uf.current=!1}const E8=[...JA,Fe,zn],T8=e=>E8.find(WA(e)),D8=new WeakMap;function V8(e,t,i){for(const s in t){const a=t[s],o=i[s];if(Ne(a))e.addValue(s,a);else if(Ne(o))e.addValue(s,Qr(a,{owner:e}));else if(o!==a)if(e.hasValue(s)){const l=e.getValue(s);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=e.getStaticValue(s);e.addValue(s,Qr(l!==void 0?l:a,{owner:e}))}}for(const s in i)t[s]===void 0&&e.removeValue(s);return t}const ep=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class R8{scrapeMotionValuesFromProps(t,i,s){return{}}constructor({parent:t,props:i,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:o,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=x0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=Ui.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,qt.render(this.render,!1,!0))};const{latestValues:u,renderState:f,onUpdate:m}=l;this.onUpdate=m,this.latestValues=u,this.baseTarget={...u},this.initialValues=i.initial?{...u}:{},this.renderState=f,this.parent=t,this.props=i,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=mc(i),this.isVariantNode=dA(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...p}=this.scrapeMotionValuesFromProps(i,{},this);for(const A in p){const x=p[A];u[A]!==void 0&&Ne(x)&&x.set(u[A],!1)}}mount(t){this.current=t,D8.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),Tv.current||M8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Uf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),kn(this.notifyUpdate),kn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=vs.has(t);s&&this.onBindTransform&&this.onBindTransform();const a=i.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&qt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=i.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{a(),o(),l&&l(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ca){const i=Ca[t];if(!i)continue;const{isEnabled:s,Feature:a}=i;if(!this.features[t]&&a&&s(this.props)&&(this.features[t]=new a(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let s=0;s<ep.length;s++){const a=ep[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,l=t[o];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=V8(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const s=this.values.get(t);i!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&i!==void 0&&(s=Qr(i===null?void 0:i,{owner:this}),this.addValue(t,s)),s}readValue(t,i){var s;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(XA(a)||PA(a))?a=parseFloat(a):!T8(a)&&zn.test(i)&&(a=KA(t,i)),this.setBaseTarget(t,Ne(a)?a.get():a)),Ne(a)?a.get():a}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var i;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const l=d0(this.props,s,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);l&&(a=l[t])}if(s&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Ne(o)?o:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new Wf),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}}class Dv extends R8{constructor(){super(...arguments),this.KeyframeResolver=_A}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:s}){delete i[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ne(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function I8(e){return window.getComputedStyle(e)}class B8 extends Dv{constructor(){super(...arguments),this.type="html",this.renderInstance=SA}readValueFromInstance(t,i){if(vs.has(i))return Gw(t,i);{const s=I8(t),a=(a0(i)?s.getPropertyValue(i):s[i])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:i}){return mv(t,i)}build(t,i,s){l0(t,i,s.transformTemplate)}scrapeMotionValuesFromProps(t,i,s){return m0(t,i,s)}}class U8 extends Dv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ue,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&CA(this.current,this.renderState)}}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(vs.has(i)){const s=HA(i);return s&&s.default||0}return i=MA.has(i)?i:s0(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,s){return TA(t,i,s)}onBindTransform(){this.current&&!this.renderState.dimensions&&qt.postRender(this.updateDimensions)}build(t,i,s){h0(t,i,this.isSVGTag,s.transformTemplate)}renderInstance(t,i,s,a){EA(t,i,s,a)}mount(t){this.isSVGTag=f0(t.tagName),super.mount(t)}}const F8=(e,t)=>u0(e)?new U8(t):new B8(t,{allowProjection:e!==Z.Fragment}),N8=pw({...nb,...C8,...f8,...S8},F8),Ff=By(N8);var L8=1e-6,Ce=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function O8(){var e=new Ce(9);return Ce!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ls(e,t,i,s,a,o,l,h,u){var f=new Ce(9);return f[0]=e,f[1]=t,f[2]=i,f[3]=s,f[4]=a,f[5]=o,f[6]=l,f[7]=h,f[8]=u,f}function ip(e,t,i){var s=t[0],a=t[1],o=t[2],l=t[3],h=t[4],u=t[5],f=t[6],m=t[7],g=t[8],p=i[0],A=i[1],x=i[2],y=i[3],b=i[4],C=i[5],E=i[6],S=i[7],M=i[8];return e[0]=p*s+A*l+x*f,e[1]=p*a+A*h+x*m,e[2]=p*o+A*u+x*g,e[3]=y*s+b*l+C*f,e[4]=y*a+b*h+C*m,e[5]=y*o+b*u+C*g,e[6]=E*s+S*l+M*f,e[7]=E*a+S*h+M*m,e[8]=E*o+S*u+M*g,e}function It(){var e=new Ce(16);return Ce!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function he(e){var t=new Ce(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function P8(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function si(e,t,i,s,a,o,l,h,u,f,m,g,p,A,x,y){var b=new Ce(16);return b[0]=e,b[1]=t,b[2]=i,b[3]=s,b[4]=a,b[5]=o,b[6]=l,b[7]=h,b[8]=u,b[9]=f,b[10]=m,b[11]=g,b[12]=p,b[13]=A,b[14]=x,b[15]=y,b}function Vv(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ai(e,t){if(e===t){var i=t[1],s=t[2],a=t[3],o=t[6],l=t[7],h=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=o,e[11]=t[14],e[12]=a,e[13]=l,e[14]=h}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Xe(e,t){var i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],h=t[5],u=t[6],f=t[7],m=t[8],g=t[9],p=t[10],A=t[11],x=t[12],y=t[13],b=t[14],C=t[15],E=i*h-s*l,S=i*u-a*l,M=i*f-o*l,T=s*u-a*h,I=s*f-o*h,R=a*f-o*u,D=m*y-g*x,U=m*b-p*x,F=m*C-A*x,P=g*b-p*y,N=g*C-A*y,k=p*C-A*b,z=E*k-S*N+M*P+T*F-I*U+R*D;return z?(z=1/z,e[0]=(h*k-u*N+f*P)*z,e[1]=(a*N-s*k-o*P)*z,e[2]=(y*R-b*I+C*T)*z,e[3]=(p*I-g*R-A*T)*z,e[4]=(u*F-l*k-f*U)*z,e[5]=(i*k-a*F+o*U)*z,e[6]=(b*M-x*R-C*S)*z,e[7]=(m*R-p*M+A*S)*z,e[8]=(l*N-h*F+f*D)*z,e[9]=(s*F-i*N-o*D)*z,e[10]=(x*I-y*M+C*E)*z,e[11]=(g*M-m*I-A*E)*z,e[12]=(h*U-l*P-u*D)*z,e[13]=(i*P-s*U+a*D)*z,e[14]=(y*S-x*T-b*E)*z,e[15]=(m*T-g*S+p*E)*z,e):null}function On(e,t,i){var s=t[0],a=t[1],o=t[2],l=t[3],h=t[4],u=t[5],f=t[6],m=t[7],g=t[8],p=t[9],A=t[10],x=t[11],y=t[12],b=t[13],C=t[14],E=t[15],S=i[0],M=i[1],T=i[2],I=i[3];return e[0]=S*s+M*h+T*g+I*y,e[1]=S*a+M*u+T*p+I*b,e[2]=S*o+M*f+T*A+I*C,e[3]=S*l+M*m+T*x+I*E,S=i[4],M=i[5],T=i[6],I=i[7],e[4]=S*s+M*h+T*g+I*y,e[5]=S*a+M*u+T*p+I*b,e[6]=S*o+M*f+T*A+I*C,e[7]=S*l+M*m+T*x+I*E,S=i[8],M=i[9],T=i[10],I=i[11],e[8]=S*s+M*h+T*g+I*y,e[9]=S*a+M*u+T*p+I*b,e[10]=S*o+M*f+T*A+I*C,e[11]=S*l+M*m+T*x+I*E,S=i[12],M=i[13],T=i[14],I=i[15],e[12]=S*s+M*h+T*g+I*y,e[13]=S*a+M*u+T*p+I*b,e[14]=S*o+M*f+T*A+I*C,e[15]=S*l+M*m+T*x+I*E,e}function ha(e,t,i){var s=i[0],a=i[1],o=i[2],l,h,u,f,m,g,p,A,x,y,b,C;return t===e?(e[12]=t[0]*s+t[4]*a+t[8]*o+t[12],e[13]=t[1]*s+t[5]*a+t[9]*o+t[13],e[14]=t[2]*s+t[6]*a+t[10]*o+t[14],e[15]=t[3]*s+t[7]*a+t[11]*o+t[15]):(l=t[0],h=t[1],u=t[2],f=t[3],m=t[4],g=t[5],p=t[6],A=t[7],x=t[8],y=t[9],b=t[10],C=t[11],e[0]=l,e[1]=h,e[2]=u,e[3]=f,e[4]=m,e[5]=g,e[6]=p,e[7]=A,e[8]=x,e[9]=y,e[10]=b,e[11]=C,e[12]=l*s+m*a+x*o+t[12],e[13]=h*s+g*a+y*o+t[13],e[14]=u*s+p*a+b*o+t[14],e[15]=f*s+A*a+C*o+t[15]),e}function np(e,t,i){var s=i[0],a=i[1],o=i[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Rl(e,t,i){var s=Math.sin(i),a=Math.cos(i),o=t[4],l=t[5],h=t[6],u=t[7],f=t[8],m=t[9],g=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+f*s,e[5]=l*a+m*s,e[6]=h*a+g*s,e[7]=u*a+p*s,e[8]=f*a-o*s,e[9]=m*a-l*s,e[10]=g*a-h*s,e[11]=p*a-u*s,e}function Il(e,t,i){var s=Math.sin(i),a=Math.cos(i),o=t[0],l=t[1],h=t[2],u=t[3],f=t[4],m=t[5],g=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+f*s,e[1]=l*a+m*s,e[2]=h*a+g*s,e[3]=u*a+p*s,e[4]=f*a-o*s,e[5]=m*a-l*s,e[6]=g*a-h*s,e[7]=p*a-u*s,e}function k8(e,t,i){var s=i[0],a=i[1],o=i[2],l=Math.hypot(s,a,o),h,u,f;return l<L8?null:(l=1/l,s*=l,a*=l,o*=l,h=Math.sin(t),u=Math.cos(t),f=1-u,e[0]=s*s*f+u,e[1]=a*s*f+o*h,e[2]=o*s*f-a*h,e[3]=0,e[4]=s*a*f-o*h,e[5]=a*a*f+u,e[6]=o*a*f+s*h,e[7]=0,e[8]=s*o*f+a*h,e[9]=a*o*f-s*h,e[10]=o*o*f+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function z8(e,t,i,s,a,o,l){var h=1/(t-i),u=1/(s-a),f=1/(o-l);return e[0]=-2*h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+i)*h,e[13]=(a+s)*u,e[14]=(l+o)*f,e[15]=1,e}var Bl=z8;function j8(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}var Rv=On;function Zt(){var e=new Ce(3);return Ce!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Gr(e){var t=new Ce(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Pn(e){var t=e[0],i=e[1],s=e[2];return Math.hypot(t,i,s)}function ut(e,t,i){var s=new Ce(3);return s[0]=e,s[1]=t,s[2]=i,s}function sp(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ps(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function te(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function C0(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function S0(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function Y8(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function G8(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function xi(e,t){var i=t[0],s=t[1],a=t[2],o=i*i+s*s+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function H8(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ql(e,t,i){var s=t[0],a=t[1],o=t[2],l=i[0],h=i[1],u=i[2];return e[0]=a*u-o*h,e[1]=o*l-s*u,e[2]=s*h-a*l,e}function K8(e,t,i,s){var a=t[0],o=t[1],l=t[2];return e[0]=a+s*(i[0]-a),e[1]=o+s*(i[1]-o),e[2]=l+s*(i[2]-l),e}function Jh(e,t){var i=e[0],s=e[1],a=e[2],o=t[0],l=t[1],h=t[2],u=Math.sqrt(i*i+s*s+a*a),f=Math.sqrt(o*o+l*l+h*h),m=u*f,g=m&&H8(e,t)/m;return Math.acos(Math.min(Math.max(g,-1),1))}var ap=te,to=Pn;(function(){var e=Zt();return function(t,i,s,a,o,l){var h,u;for(i||(i=3),s||(s=0),a?u=Math.min(a*i+s,t.length):u=t.length,h=s;h<u;h+=i)e[0]=t[h],e[1]=t[h+1],e[2]=t[h+2],o(e,e,l),t[h]=e[0],t[h+1]=e[1],t[h+2]=e[2];return t}})();function an(){var e=new Ce(4);return Ce!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function tn(e){var t=new Ce(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Wt(e,t,i,s){var a=new Ce(4);return a[0]=e,a[1]=t,a[2]=i,a[3]=s,a}function rp(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function q8(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function Q8(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Ve(e,t,i){var s=t[0],a=t[1],o=t[2],l=t[3];return e[0]=i[0]*s+i[4]*a+i[8]*o+i[12]*l,e[1]=i[1]*s+i[5]*a+i[9]*o+i[13]*l,e[2]=i[2]*s+i[6]*a+i[10]*o+i[14]*l,e[3]=i[3]*s+i[7]*a+i[11]*o+i[15]*l,e}var X8=q8;(function(){var e=an();return function(t,i,s,a,o,l){var h,u;for(i||(i=4),s||(s=0),a?u=Math.min(a*i+s,t.length):u=t.length,h=s;h<u;h+=i)e[0]=t[h],e[1]=t[h+1],e[2]=t[h+2],e[3]=t[h+3],o(e,e,l),t[h]=e[0],t[h+1]=e[1],t[h+2]=e[2],t[h+3]=e[3];return t}})();function Z8(){var e=new Ce(2);return Ce!=Float32Array&&(e[0]=0,e[1]=0),e}function op(e,t){var i=new Ce(2);return i[0]=e,i[1]=t,i}function W8(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function lp(e){var t=e[0],i=e[1];return Math.hypot(t,i)}function J8(e,t){var i=t[0],s=t[1],a=i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}(function(){var e=Z8();return function(t,i,s,a,o,l){var h,u;for(i||(i=2),s||(s=0),a?u=Math.min(a*i+s,t.length):u=t.length,h=s;h<u;h+=i)e[0]=t[h],e[1]=t[h+1],o(e,e,l),t[h]=e[0],t[h+1]=e[1];return t}})();var ms=256,Xl=[],Ul;for(;ms--;)Xl[ms]=(ms+256).toString(16).substring(1);function Nf(){var e=0,t,i="";if(!Ul||ms+16>256){for(Ul=Array(e=256);e--;)Ul[e]=256*Math.random()|0;e=ms=0}for(;e<16;e++)t=Ul[ms+e],e==6?i+=Xl[t&15|64]:e==8?i+=Xl[t&63|128]:i+=Xl[t],e&1&&e>1&&e<11&&(i+="-");return ms++,i}var _h,cp;function _8(){return cp||(cp=1,_h=function(t,i){var s=t.length;if(t===i)return!0;if(s!==i.length)return!1;for(var a=0;a<s;a++)if(t[a]!==i[a])return!1;return!0}),_h}var $8=_8();const tC=Pf($8),Iv=-1,pc=0,Hr=1,lc=2,M0=3,E0=4,T0=5,D0=6,Bv=7,Uv=8,up=typeof self=="object"?self:globalThis,eC=(e,t)=>{const i=(a,o)=>(e.set(o,a),a),s=a=>{if(e.has(a))return e.get(a);const[o,l]=t[a];switch(o){case pc:case Iv:return i(l,a);case Hr:{const h=i([],a);for(const u of l)h.push(s(u));return h}case lc:{const h=i({},a);for(const[u,f]of l)h[s(u)]=s(f);return h}case M0:return i(new Date(l),a);case E0:{const{source:h,flags:u}=l;return i(new RegExp(h,u),a)}case T0:{const h=i(new Map,a);for(const[u,f]of l)h.set(s(u),s(f));return h}case D0:{const h=i(new Set,a);for(const u of l)h.add(s(u));return h}case Bv:{const{name:h,message:u}=l;return i(new up[h](u),a)}case Uv:return i(BigInt(l),a);case"BigInt":return i(Object(BigInt(l)),a);case"ArrayBuffer":return i(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:h}=new Uint8Array(l);return i(new DataView(h),l)}}return i(new up[o](l),a)};return s},iC=e=>eC(new Map,e)(0),aa="",{toString:nC}={},{keys:sC}=Object,Ir=e=>{const t=typeof e;if(t!=="object"||!e)return[pc,t];const i=nC.call(e).slice(8,-1);switch(i){case"Array":return[Hr,aa];case"Object":return[lc,aa];case"Date":return[M0,aa];case"RegExp":return[E0,aa];case"Map":return[T0,aa];case"Set":return[D0,aa];case"DataView":return[Hr,i]}return i.includes("Array")?[Hr,i]:i.includes("Error")?[Bv,i]:[lc,i]},Fl=([e,t])=>e===pc&&(t==="function"||t==="symbol"),aC=(e,t,i,s)=>{const a=(l,h)=>{const u=s.push(l)-1;return i.set(h,u),u},o=l=>{if(i.has(l))return i.get(l);let[h,u]=Ir(l);switch(h){case pc:{let m=l;switch(u){case"bigint":h=Uv,m=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);m=null;break;case"undefined":return a([Iv],l)}return a([h,m],l)}case Hr:{if(u){let p=l;return u==="DataView"?p=new Uint8Array(l.buffer):u==="ArrayBuffer"&&(p=new Uint8Array(l)),a([u,[...p]],l)}const m=[],g=a([h,m],l);for(const p of l)m.push(o(p));return g}case lc:{if(u)switch(u){case"BigInt":return a([u,l.toString()],l);case"Boolean":case"Number":case"String":return a([u,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const m=[],g=a([h,m],l);for(const p of sC(l))(e||!Fl(Ir(l[p])))&&m.push([o(p),o(l[p])]);return g}case M0:return a([h,l.toISOString()],l);case E0:{const{source:m,flags:g}=l;return a([h,{source:m,flags:g}],l)}case T0:{const m=[],g=a([h,m],l);for(const[p,A]of l)(e||!(Fl(Ir(p))||Fl(Ir(A))))&&m.push([o(p),o(A)]);return g}case D0:{const m=[],g=a([h,m],l);for(const p of l)(e||!Fl(Ir(p)))&&m.push(o(p));return g}}const{message:f}=l;return a([h,{name:u,message:f}],l)};return o},rC=(e,{json:t,lossy:i}={})=>{const s=[];return aC(!(t||i),!!t,new Map,s)(e),s};var be=Uint8Array,ya=Uint16Array,oC=Int32Array,Fv=new be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nv=new be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lC=new be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lv=function(e,t){for(var i=new ya(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];for(var a=new oC(i[30]),s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},Ov=Lv(Fv,2),Pv=Ov.b,cC=Ov.r;Pv[28]=258,cC[258]=28;var uC=Lv(Nv,0),hC=uC.b,Lf=new ya(32768);for(var Jt=0;Jt<32768;++Jt){var Un=(Jt&43690)>>1|(Jt&21845)<<1;Un=(Un&52428)>>2|(Un&13107)<<2,Un=(Un&61680)>>4|(Un&3855)<<4,Lf[Jt]=((Un&65280)>>8|(Un&255)<<8)>>1}var Kr=function(e,t,i){for(var s=e.length,a=0,o=new ya(t);a<s;++a)e[a]&&++o[e[a]-1];var l=new ya(t);for(a=1;a<t;++a)l[a]=l[a-1]+o[a-1]<<1;var h;if(i){h=new ya(1<<t);var u=15-t;for(a=0;a<s;++a)if(e[a])for(var f=a<<4|e[a],m=t-e[a],g=l[e[a]-1]++<<m,p=g|(1<<m)-1;g<=p;++g)h[Lf[g]>>u]=f}else for(h=new ya(s),a=0;a<s;++a)e[a]&&(h[a]=Lf[l[e[a]-1]++]>>15-e[a]);return h},lo=new be(288);for(var Jt=0;Jt<144;++Jt)lo[Jt]=8;for(var Jt=144;Jt<256;++Jt)lo[Jt]=9;for(var Jt=256;Jt<280;++Jt)lo[Jt]=7;for(var Jt=280;Jt<288;++Jt)lo[Jt]=8;var kv=new be(32);for(var Jt=0;Jt<32;++Jt)kv[Jt]=5;var fC=Kr(lo,9,1),dC=Kr(kv,5,1),$h=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Ci=function(e,t,i){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&i},tf=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},zv=function(e){return(e+7)/8|0},Zl=function(e,t,i){return(t==null||t<0)&&(t=0),(i==null||i>e.length)&&(i=e.length),new be(e.subarray(t,i))},mC=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ke=function(e,t,i){var s=new Error(t||mC[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,ke),!i)throw s;return s},Ac=function(e,t,i,s){var a=e.length,o=0;if(!a||t.f&&!t.l)return i||new be(0);var l=!i,h=l||t.i!=2,u=t.i;l&&(i=new be(a*3));var f=function(se){var Xt=i.length;if(se>Xt){var Oi=new be(Math.max(Xt*2,se));Oi.set(i),i=Oi}},m=t.f||0,g=t.p||0,p=t.b||0,A=t.l,x=t.d,y=t.m,b=t.n,C=a*8;do{if(!A){m=Ci(e,g,1);var E=Ci(e,g+1,3);if(g+=3,E)if(E==1)A=fC,x=dC,y=9,b=5;else if(E==2){var I=Ci(e,g,31)+257,R=Ci(e,g+10,15)+4,D=I+Ci(e,g+5,31)+1;g+=14;for(var U=new be(D),F=new be(19),P=0;P<R;++P)F[lC[P]]=Ci(e,g+P*3,7);g+=R*3;for(var N=$h(F),k=(1<<N)-1,z=Kr(F,N,1),P=0;P<D;){var q=z[Ci(e,g,k)];g+=q&15;var S=q>>4;if(S<16)U[P++]=S;else{var j=0,Q=0;for(S==16?(Q=3+Ci(e,g,3),g+=2,j=U[P-1]):S==17?(Q=3+Ci(e,g,7),g+=3):S==18&&(Q=11+Ci(e,g,127),g+=7);Q--;)U[P++]=j}}var tt=U.subarray(0,I),ot=U.subarray(I);y=$h(tt),b=$h(ot),A=Kr(tt,y,1),x=Kr(ot,b,1)}else ke(1);else{var S=zv(g)+4,M=e[S-4]|e[S-3]<<8,T=S+M;if(T>a){u&&ke(0);break}h&&f(p+M),i.set(e.subarray(S,T),p),t.b=p+=M,t.p=g=T*8,t.f=m;continue}if(g>C){u&&ke(0);break}}h&&f(p+131072);for(var Y=(1<<y)-1,it=(1<<b)-1,ct=g;;ct=g){var j=A[tf(e,g)&Y],lt=j>>4;if(g+=j&15,g>C){u&&ke(0);break}if(j||ke(2),lt<256)i[p++]=lt;else if(lt==256){ct=g,A=null;break}else{var mt=lt-254;if(lt>264){var P=lt-257,Ct=Fv[P];mt=Ci(e,g,(1<<Ct)-1)+Pv[P],g+=Ct}var At=x[tf(e,g)&it],Qt=At>>4;At||ke(3),g+=At&15;var ot=hC[Qt];if(Qt>3){var Ct=Nv[Qt];ot+=tf(e,g)&(1<<Ct)-1,g+=Ct}if(g>C){u&&ke(0);break}h&&f(p+131072);var Bt=p+mt;if(p<ot){var Se=o-ot,pe=Math.min(ot,Bt);for(Se+p<0&&ke(3);p<pe;++p)i[p]=s[Se+p]}for(;p<Bt;++p)i[p]=i[p-ot]}}t.l=A,t.p=ct,t.b=p,t.f=m,A&&(m=1,t.m=y,t.d=x,t.n=b)}while(!m);return p!=i.length&&l?Zl(i,0,p):i.subarray(0,p)},gC=new be(0),jv=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&ke(6,"invalid gzip data");var t=e[3],i=10;t&4&&(i+=(e[10]|e[11]<<8)+2);for(var s=(t>>3&1)+(t>>4&1);s>0;s-=!e[i++]);return i+(t&2)},pC=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},AC=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ke(6,"invalid zlib data"),(e[1]>>5&1)==1&&ke(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2},ef=function(){function e(t,i){typeof t=="function"&&(i=t,t={}),this.ondata=i;var s=t&&t.dictionary&&t.dictionary.subarray(-32768);this.s={i:0,b:s?s.length:0},this.o=new be(32768),this.p=new be(0),s&&this.o.set(s)}return e.prototype.e=function(t){if(this.ondata||ke(5),this.d&&ke(4),!this.p.length)this.p=t;else if(t.length){var i=new be(this.p.length+t.length);i.set(this.p),i.set(t,this.p.length),this.p=i}},e.prototype.c=function(t){this.s.i=+(this.d=t||!1);var i=this.s.b,s=Ac(this.p,this.s,this.o);this.ondata(Zl(s,i,this.s.b),this.d),this.o=Zl(s,this.s.b-32768),this.s.b=this.o.length,this.p=Zl(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(t,i){this.e(t),this.c(i)},e}();function vC(e,t){return Ac(e,{i:2},t,t)}var xC=function(){function e(t,i){this.v=1,this.r=0,ef.call(this,t,i)}return e.prototype.push=function(t,i){if(ef.prototype.e.call(this,t),this.r+=t.length,this.v){var s=this.p.subarray(this.v-1),a=s.length>3?jv(s):4;if(a>s.length){if(!i)return}else this.v>1&&this.onmember&&this.onmember(this.r-s.length);this.p=s.subarray(a),this.v=0}ef.prototype.c.call(this,i),this.s.f&&!this.s.l&&!i&&(this.v=zv(this.s.p)+9,this.s={i:0},this.o=new be(0),this.push(new be(0),i))},e}();function yC(e,t){var i=jv(e);return i+8>e.length&&ke(6,"invalid gzip data"),Ac(e.subarray(i,-8),{i:2},new be(pC(e)),t)}function wC(e,t){return Ac(e.subarray(AC(e),-4),{i:2},t,t)}function bC(e,t){return e[0]==31&&e[1]==139&&e[2]==8?yC(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?vC(e,t):wC(e,t)}var CC=typeof TextDecoder<"u"&&new TextDecoder,SC=0;try{CC.decode(gC,{stream:!0}),SC=1}catch{}class Yv{constructor(t,i,s,a){$(this,"esize");$(this,"ecode");$(this,"edata");$(this,"littleEndian");if(t%16!=0)throw new Error("This does not appear to be a NIFTI extension");this.esize=t,this.ecode=i,this.edata=s,this.littleEndian=a}toArrayBuffer(){let t=new Uint8Array(this.esize),i=new Uint8Array(this.edata);t.set(i,8);let s=new DataView(t.buffer);return s.setInt32(0,this.esize,this.littleEndian),s.setInt32(4,this.ecode,this.littleEndian),t.buffer}}const Pe=class Pe{static getStringAt(t,i,s){var a="",o,l;for(o=i;o<s;o+=1)l=t.getUint8(o),l!==0&&(a+=String.fromCharCode(l));return a}static getIntAt(t,i,s){return t.getInt32(i,s)}static getFloatAt(t,i,s){return t.getFloat32(i,s)}static getDoubleAt(t,i,s){return t.getFloat64(i,s)}static getInt64At(t,i,s){const a=t.getUint32(i,s),o=t.getInt32(i+4,s);let l;return s?l=o*2**32+a:l=a*2**32+o,o<0&&(l+=-1*2**32*2**32),l}static getUint64At(t,i,s){const a=t.getUint32(i+(s?0:4),s),o=t.getUint32(i+(s?4:0),s);return s?o*2**32+a:a*2**32+o}static getExtensionsAt(t,i,s,a){let o=[],l=i;for(;l<a;){let h=s,u=Pe.getIntAt(t,l,s);if(!u)break;if(u+l>a&&(h=!h,u=Pe.getIntAt(t,l,h),u+l>a))throw new Error("This does not appear to be a valid NIFTI extension");if(u%16!=0)throw new Error("This does not appear to be a NIFTI extension");let f=Pe.getIntAt(t,l+4,h),m=t.buffer.slice(l+8,l+u),g=new Yv(u,f,m,h);o.push(g),l+=u}return o}static toArrayBuffer(t){var i,s,a;for(i=new ArrayBuffer(t.length),s=new Uint8Array(i),a=0;a<t.length;a+=1)s[a]=t[a];return i}static isString(t){return typeof t=="string"||t instanceof String}static formatNumber(t,i=void 0){let s;return Pe.isString(t)?s=Number(t):s=t,i?s=s.toPrecision(5):s=s.toPrecision(7),parseFloat(s)}static makeCRCTable(){let t,i=[];for(var s=0;s<256;s++){t=s;for(var a=0;a<8;a++)t=t&1?3988292384^t>>>1:t>>>1;i[s]=t}return i}static crc32(t){Pe.crcTable||(Pe.crcTable=Pe.makeCRCTable());const i=Pe.crcTable;let s=-1;for(var a=0;a<t.byteLength;a++)s=s>>>8^i[(s^t.getUint8(a))&255];return(s^-1)>>>0}};$(Pe,"crcTable",null),$(Pe,"GUNZIP_MAGIC_COOKIE1",31),$(Pe,"GUNZIP_MAGIC_COOKIE2",139),$(Pe,"getByteAt",function(t,i){return t.getUint8(i)}),$(Pe,"getShortAt",function(t,i,s){return t.getInt16(i,s)});let rt=Pe;const ht=class ht{constructor(){$(this,"littleEndian",!1);$(this,"dim_info",0);$(this,"dims",[]);$(this,"intent_p1",0);$(this,"intent_p2",0);$(this,"intent_p3",0);$(this,"intent_code",0);$(this,"datatypeCode",0);$(this,"numBitsPerVoxel",0);$(this,"slice_start",0);$(this,"slice_end",0);$(this,"slice_code",0);$(this,"pixDims",[]);$(this,"vox_offset",0);$(this,"scl_slope",1);$(this,"scl_inter",0);$(this,"xyzt_units",0);$(this,"cal_max",0);$(this,"cal_min",0);$(this,"slice_duration",0);$(this,"toffset",0);$(this,"description","");$(this,"aux_file","");$(this,"intent_name","");$(this,"qform_code",0);$(this,"sform_code",0);$(this,"quatern_a",0);$(this,"quatern_b",0);$(this,"quatern_c",0);$(this,"quatern_d",0);$(this,"qoffset_x",0);$(this,"qoffset_y",0);$(this,"qoffset_z",0);$(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);$(this,"qfac",1);$(this,"quatern_R");$(this,"magic","0");$(this,"isHDR",!1);$(this,"extensionFlag",[0,0,0,0]);$(this,"extensionSize",0);$(this,"extensionCode",0);$(this,"extensions",[]);$(this,"getDatatypeCodeString",function(t){return t===ht.TYPE_UINT8?"1-Byte Unsigned Integer":t===ht.TYPE_INT16?"2-Byte Signed Integer":t===ht.TYPE_INT32?"4-Byte Signed Integer":t===ht.TYPE_FLOAT32?"4-Byte Float":t===ht.TYPE_FLOAT64?"8-Byte Float":t===ht.TYPE_RGB24?"RGB":t===ht.TYPE_INT8?"1-Byte Signed Integer":t===ht.TYPE_UINT16?"2-Byte Unsigned Integer":t===ht.TYPE_UINT32?"4-Byte Unsigned Integer":t===ht.TYPE_INT64?"8-Byte Signed Integer":t===ht.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"});$(this,"getTransformCodeString",function(t){return t===ht.XFORM_SCANNER_ANAT?"Scanner":t===ht.XFORM_ALIGNED_ANAT?"Aligned":t===ht.XFORM_TALAIRACH?"Talairach":t===ht.XFORM_MNI_152?"MNI":"Unknown"});$(this,"getUnitsCodeString",function(t){return t===ht.UNITS_METER?"Meters":t===ht.UNITS_MM?"Millimeters":t===ht.UNITS_MICRON?"Microns":t===ht.UNITS_SEC?"Seconds":t===ht.UNITS_MSEC?"Milliseconds":t===ht.UNITS_USEC?"Microseconds":t===ht.UNITS_HZ?"Hz":t===ht.UNITS_PPM?"PPM":t===ht.UNITS_RADS?"Rads":"Unknown"});$(this,"nifti_mat33_mul",function(t,i){var s=[[0,0,0],[0,0,0],[0,0,0]],a,o;for(a=0;a<3;a+=1)for(o=0;o<3;o+=1)s[a][o]=t[a][0]*i[0][o]+t[a][1]*i[1][o]+t[a][2]*i[2][o];return s});$(this,"nifti_mat33_determ",function(t){var i,s,a,o,l,h,u,f,m;return i=t[0][0],s=t[0][1],a=t[0][2],o=t[1][0],l=t[1][1],h=t[1][2],u=t[2][0],f=t[2][1],m=t[2][2],i*l*m-i*f*h-o*s*m+o*f*a+u*s*h-u*l*a})}readHeader(t){var i=new DataView(t),s=rt.getIntAt(i,0,this.littleEndian),a,o,l,h;if(s!==ht.MAGIC_COOKIE&&(this.littleEndian=!0,s=rt.getIntAt(i,0,this.littleEndian)),s!==ht.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=rt.getByteAt(i,39),a=0;a<8;a+=1)h=40+a*2,this.dims[a]=rt.getShortAt(i,h,this.littleEndian);for(this.intent_p1=rt.getFloatAt(i,56,this.littleEndian),this.intent_p2=rt.getFloatAt(i,60,this.littleEndian),this.intent_p3=rt.getFloatAt(i,64,this.littleEndian),this.intent_code=rt.getShortAt(i,68,this.littleEndian),this.datatypeCode=rt.getShortAt(i,70,this.littleEndian),this.numBitsPerVoxel=rt.getShortAt(i,72,this.littleEndian),this.slice_start=rt.getShortAt(i,74,this.littleEndian),a=0;a<8;a+=1)h=76+a*4,this.pixDims[a]=rt.getFloatAt(i,h,this.littleEndian);if(this.vox_offset=rt.getFloatAt(i,108,this.littleEndian),this.scl_slope=rt.getFloatAt(i,112,this.littleEndian),this.scl_inter=rt.getFloatAt(i,116,this.littleEndian),this.slice_end=rt.getShortAt(i,120,this.littleEndian),this.slice_code=rt.getByteAt(i,122),this.xyzt_units=rt.getByteAt(i,123),this.cal_max=rt.getFloatAt(i,124,this.littleEndian),this.cal_min=rt.getFloatAt(i,128,this.littleEndian),this.slice_duration=rt.getFloatAt(i,132,this.littleEndian),this.toffset=rt.getFloatAt(i,136,this.littleEndian),this.description=rt.getStringAt(i,148,228),this.aux_file=rt.getStringAt(i,228,252),this.qform_code=rt.getShortAt(i,252,this.littleEndian),this.sform_code=rt.getShortAt(i,254,this.littleEndian),this.quatern_b=rt.getFloatAt(i,256,this.littleEndian),this.quatern_c=rt.getFloatAt(i,260,this.littleEndian),this.quatern_d=rt.getFloatAt(i,264,this.littleEndian),this.quatern_a=Math.sqrt(1-(Math.pow(this.quatern_b,2)+Math.pow(this.quatern_c,2)+Math.pow(this.quatern_d,2))),this.qoffset_x=rt.getFloatAt(i,268,this.littleEndian),this.qoffset_y=rt.getFloatAt(i,272,this.littleEndian),this.qoffset_z=rt.getFloatAt(i,276,this.littleEndian),this.qform_code<1&&this.sform_code<1&&(this.affine[0][0]=this.pixDims[1],this.affine[1][1]=this.pixDims[2],this.affine[2][2]=this.pixDims[3]),this.qform_code>0&&this.sform_code<this.qform_code){const u=this.quatern_a,f=this.quatern_b,m=this.quatern_c,g=this.quatern_d;for(this.qfac=this.pixDims[0]===0?1:this.pixDims[0],this.quatern_R=[[u*u+f*f-m*m-g*g,2*f*m-2*u*g,2*f*g+2*u*m],[2*f*m+2*u*g,u*u+m*m-f*f-g*g,2*m*g-2*u*f],[2*f*g-2*u*m,2*m*g+2*u*f,u*u+g*g-m*m-f*f]],o=0;o<3;o+=1)for(l=0;l<3;l+=1)this.affine[o][l]=this.quatern_R[o][l]*this.pixDims[l+1],l===2&&(this.affine[o][l]*=this.qfac);this.affine[0][3]=this.qoffset_x,this.affine[1][3]=this.qoffset_y,this.affine[2][3]=this.qoffset_z}else if(this.sform_code>0)for(o=0;o<3;o+=1)for(l=0;l<4;l+=1)h=280+(o*4+l)*4,this.affine[o][l]=rt.getFloatAt(i,h,this.littleEndian);if(this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=rt.getStringAt(i,328,344),this.magic=rt.getStringAt(i,344,348),this.isHDR=this.magic===String.fromCharCode.apply(null,ht.MAGIC_NUMBER2),i.byteLength>ht.MAGIC_COOKIE){this.extensionFlag[0]=rt.getByteAt(i,348),this.extensionFlag[1]=rt.getByteAt(i,349),this.extensionFlag[2]=rt.getByteAt(i,350),this.extensionFlag[3]=rt.getByteAt(i,351);let u=!0;!this.isHDR&&this.vox_offset<=352&&(u=!1),i.byteLength<=368&&(u=!1),u&&this.extensionFlag[0]&&(this.extensions=rt.getExtensionsAt(i,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode)}}toFormattedString(){var t=rt.formatNumber,i="";return i+="Dim Info = "+this.dim_info+`
`,i+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,i+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,i+="Intent Code = "+this.intent_code+`
`,i+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,i+="Bits Per Voxel = "+this.numBitsPerVoxel+`
`,i+="Slice Start = "+this.slice_start+`
`,i+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+`
`,i+="Image Offset = "+this.vox_offset+`
`,i+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+`
`,i+="Slice End = "+this.slice_end+`
`,i+="Slice Code = "+this.slice_code+`
`,i+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(ht.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(ht.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,i+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+`
`,i+="Slice Duration = "+this.slice_duration+`
`,i+="Time Axis Shift = "+this.toffset+`
`,i+='Description: "'+this.description+`"
`,i+='Auxiliary File: "'+this.aux_file+`"
`,i+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,i+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,i+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+`
`,i+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,i+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+`
`,i+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+`
`,i+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+`
`,i+='Intent Name: "'+this.intent_name+`"
`,this.extensionFlag[0]&&(i+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+`
`),i}getQformMat(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])}convertNiftiQFormToNiftiSForm(t,i,s,a,o,l,h,u,f,m){var g=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],p,A=t,x=i,y=s,b,C,E;return g[3][0]=g[3][1]=g[3][2]=0,g[3][3]=1,p=1-(A*A+x*x+y*y),p<1e-7?(p=1/Math.sqrt(A*A+x*x+y*y),A*=p,x*=p,y*=p,p=0):p=Math.sqrt(p),b=h>0?h:1,C=u>0?u:1,E=f>0?f:1,m<0&&(E=-E),g[0][0]=(p*p+A*A-x*x-y*y)*b,g[0][1]=2*(A*x-p*y)*C,g[0][2]=2*(A*y+p*x)*E,g[1][0]=2*(A*x+p*y)*b,g[1][1]=(p*p+x*x-A*A-y*y)*C,g[1][2]=2*(x*y-p*A)*E,g[2][0]=2*(A*y-p*x)*b,g[2][1]=2*(x*y+p*A)*C,g[2][2]=(p*p+y*y-x*x-A*A)*E,g[0][3]=a,g[1][3]=o,g[2][3]=l,g}convertNiftiSFormToNEMA(t){var i,s,a,o,l,h,u,f,m,g,p,A,x,y,b,C,E,S,M,T,I,R,D,U,F,P,N,k,z,q,j,Q,tt,ot;if(b=0,N=[[0,0,0],[0,0,0],[0,0,0]],k=[[0,0,0],[0,0,0],[0,0,0]],i=t[0][0],s=t[0][1],a=t[0][2],o=t[1][0],l=t[1][1],h=t[1][2],u=t[2][0],f=t[2][1],m=t[2][2],g=Math.sqrt(i*i+o*o+u*u),g===0||(i/=g,o/=g,u/=g,g=Math.sqrt(s*s+l*l+f*f),g===0))return null;if(s/=g,l/=g,f/=g,g=i*s+o*l+u*f,Math.abs(g)>1e-4){if(s-=g*i,l-=g*o,f-=g*u,g=Math.sqrt(s*s+l*l+f*f),g===0)return null;s/=g,l/=g,f/=g}if(g=Math.sqrt(a*a+h*h+m*m),g===0?(a=o*f-u*l,h=u*s-f*i,m=i*l-o*s):(a/=g,h/=g,m/=g),g=i*a+o*h+u*m,Math.abs(g)>1e-4){if(a-=g*i,h-=g*o,m-=g*u,g=Math.sqrt(a*a+h*h+m*m),g===0)return null;a/=g,h/=g,m/=g}if(g=s*a+l*h+f*m,Math.abs(g)>1e-4){if(a-=g*s,h-=g*l,m-=g*f,g=Math.sqrt(a*a+h*h+m*m),g===0)return null;a/=g,h/=g,m/=g}if(N[0][0]=i,N[0][1]=s,N[0][2]=a,N[1][0]=o,N[1][1]=l,N[1][2]=h,N[2][0]=u,N[2][1]=f,N[2][2]=m,p=this.nifti_mat33_determ(N),p===0)return null;for(P=-666,M=R=D=U=1,T=2,I=3,x=1;x<=3;x+=1)for(y=1;y<=3;y+=1)if(x!==y){for(b=1;b<=3;b+=1)if(!(x===b||y===b))for(k[0][0]=k[0][1]=k[0][2]=k[1][0]=k[1][1]=k[1][2]=k[2][0]=k[2][1]=k[2][2]=0,C=-1;C<=1;C+=2)for(E=-1;E<=1;E+=2)for(S=-1;S<=1;S+=2)k[0][x-1]=C,k[1][y-1]=E,k[2][b-1]=S,A=this.nifti_mat33_determ(k),A*p>0&&(F=this.nifti_mat33_mul(k,N),g=F[0][0]+F[1][1]+F[2][2],g>P&&(P=g,M=x,T=y,I=b,R=C,D=E,U=S))}switch(z=q=j=Q=tt=ot="",M*R){case 1:z="X",Q="+";break;case-1:z="X",Q="-";break;case 2:z="Y",Q="+";break;case-2:z="Y",Q="-";break;case 3:z="Z",Q="+";break;case-3:z="Z",Q="-";break}switch(T*D){case 1:q="X",tt="+";break;case-1:q="X",tt="-";break;case 2:q="Y",tt="+";break;case-2:q="Y",tt="-";break;case 3:q="Z",tt="+";break;case-3:q="Z",tt="-";break}switch(I*U){case 1:j="X",ot="+";break;case-1:j="X",ot="-";break;case 2:j="Y",ot="+";break;case-2:j="Y",ot="-";break;case 3:j="Z",ot="+";break;case-3:j="Z",ot="-";break}return z+q+j+Q+tt+ot}getExtensionLocation(){return ht.MAGIC_COOKIE+4}getExtensionSize(t){return rt.getIntAt(t,this.getExtensionLocation(),this.littleEndian)}getExtensionCode(t){return rt.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)}addExtension(t,i=-1){i==-1?this.extensions.push(t):this.extensions.splice(i,0,t),this.vox_offset+=t.esize}removeExtension(t){let i=this.extensions[t];i&&(this.vox_offset-=i.esize),this.extensions.splice(t,1)}toArrayBuffer(t=!1){let a=352;if(t)for(let u of this.extensions)a+=u.esize;let o=new Uint8Array(a),l=new DataView(o.buffer);l.setInt32(0,348,this.littleEndian),l.setUint8(39,this.dim_info);for(let u=0;u<8;u++)l.setUint16(40+2*u,this.dims[u],this.littleEndian);l.setFloat32(56,this.intent_p1,this.littleEndian),l.setFloat32(60,this.intent_p2,this.littleEndian),l.setFloat32(64,this.intent_p3,this.littleEndian),l.setInt16(68,this.intent_code,this.littleEndian),l.setInt16(70,this.datatypeCode,this.littleEndian),l.setInt16(72,this.numBitsPerVoxel,this.littleEndian),l.setInt16(74,this.slice_start,this.littleEndian);for(let u=0;u<8;u++)l.setFloat32(76+4*u,this.pixDims[u],this.littleEndian);l.setFloat32(108,this.vox_offset,this.littleEndian),l.setFloat32(112,this.scl_slope,this.littleEndian),l.setFloat32(116,this.scl_inter,this.littleEndian),l.setInt16(120,this.slice_end,this.littleEndian),l.setUint8(122,this.slice_code),l.setUint8(123,this.xyzt_units),l.setFloat32(124,this.cal_max,this.littleEndian),l.setFloat32(128,this.cal_min,this.littleEndian),l.setFloat32(132,this.slice_duration,this.littleEndian),l.setFloat32(136,this.toffset,this.littleEndian),o.set(new TextEncoder().encode(this.description),148),o.set(new TextEncoder().encode(this.aux_file),228),l.setInt16(252,this.qform_code,this.littleEndian),l.setInt16(254,this.sform_code,this.littleEndian),l.setFloat32(256,this.quatern_b,this.littleEndian),l.setFloat32(260,this.quatern_c,this.littleEndian),l.setFloat32(264,this.quatern_d,this.littleEndian),l.setFloat32(268,this.qoffset_x,this.littleEndian),l.setFloat32(272,this.qoffset_y,this.littleEndian),l.setFloat32(276,this.qoffset_z,this.littleEndian);const h=this.affine.flat();for(let u=0;u<12;u++)l.setFloat32(280+4*u,h[u],this.littleEndian);if(o.set(new TextEncoder().encode(this.intent_name),328),o.set(new TextEncoder().encode(this.magic),344),t){o.set(Uint8Array.from([1,0,0,0]),348);let u=this.getExtensionLocation();for(const f of this.extensions)l.setInt32(u,f.esize,f.littleEndian),l.setInt32(u+4,f.ecode,f.littleEndian),o.set(new Uint8Array(f.edata),u+8),u+=f.esize}else o.set(new Uint8Array(4).fill(0),348);return o.buffer}};$(ht,"TYPE_NONE",0),$(ht,"TYPE_BINARY",1),$(ht,"TYPE_UINT8",2),$(ht,"TYPE_INT16",4),$(ht,"TYPE_INT32",8),$(ht,"TYPE_FLOAT32",16),$(ht,"TYPE_COMPLEX64",32),$(ht,"TYPE_FLOAT64",64),$(ht,"TYPE_RGB24",128),$(ht,"TYPE_INT8",256),$(ht,"TYPE_UINT16",512),$(ht,"TYPE_UINT32",768),$(ht,"TYPE_INT64",1024),$(ht,"TYPE_UINT64",1280),$(ht,"TYPE_FLOAT128",1536),$(ht,"TYPE_COMPLEX128",1792),$(ht,"TYPE_COMPLEX256",2048),$(ht,"XFORM_UNKNOWN",0),$(ht,"XFORM_SCANNER_ANAT",1),$(ht,"XFORM_ALIGNED_ANAT",2),$(ht,"XFORM_TALAIRACH",3),$(ht,"XFORM_MNI_152",4),$(ht,"SPATIAL_UNITS_MASK",7),$(ht,"TEMPORAL_UNITS_MASK",56),$(ht,"UNITS_UNKNOWN",0),$(ht,"UNITS_METER",1),$(ht,"UNITS_MM",2),$(ht,"UNITS_MICRON",3),$(ht,"UNITS_SEC",8),$(ht,"UNITS_MSEC",16),$(ht,"UNITS_USEC",24),$(ht,"UNITS_HZ",32),$(ht,"UNITS_PPM",40),$(ht,"UNITS_RADS",48),$(ht,"MAGIC_COOKIE",348),$(ht,"STANDARD_HEADER_SIZE",348),$(ht,"MAGIC_NUMBER_LOCATION",344),$(ht,"MAGIC_NUMBER",[110,43,49]),$(ht,"MAGIC_NUMBER2",[110,105,49]),$(ht,"EXTENSION_HEADER_SIZE",8);let Mt=ht;const Bi=class Bi{constructor(){$(this,"littleEndian",!1);$(this,"dim_info",0);$(this,"dims",[]);$(this,"intent_p1",0);$(this,"intent_p2",0);$(this,"intent_p3",0);$(this,"intent_code",0);$(this,"datatypeCode",0);$(this,"numBitsPerVoxel",0);$(this,"slice_start",0);$(this,"slice_end",0);$(this,"slice_code",0);$(this,"pixDims",[]);$(this,"vox_offset",0);$(this,"scl_slope",1);$(this,"scl_inter",0);$(this,"xyzt_units",0);$(this,"cal_max",0);$(this,"cal_min",0);$(this,"slice_duration",0);$(this,"toffset",0);$(this,"description","");$(this,"aux_file","");$(this,"intent_name","");$(this,"qform_code",0);$(this,"sform_code",0);$(this,"quatern_b",0);$(this,"quatern_c",0);$(this,"quatern_d",0);$(this,"qoffset_x",0);$(this,"qoffset_y",0);$(this,"qoffset_z",0);$(this,"affine",[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]);$(this,"magic","0");$(this,"extensionFlag",[0,0,0,0]);$(this,"extensions",[]);$(this,"extensionSize",0);$(this,"extensionCode",0);$(this,"getExtensionLocation",function(){return Bi.MAGIC_COOKIE+4});$(this,"getExtensionSize",Mt.prototype.getExtensionSize);$(this,"getExtensionCode",Mt.prototype.getExtensionCode);$(this,"addExtension",Mt.prototype.addExtension);$(this,"removeExtension",Mt.prototype.removeExtension);$(this,"getDatatypeCodeString",Mt.prototype.getDatatypeCodeString);$(this,"getTransformCodeString",Mt.prototype.getTransformCodeString);$(this,"getUnitsCodeString",Mt.prototype.getUnitsCodeString);$(this,"getQformMat",Mt.prototype.getQformMat);$(this,"convertNiftiQFormToNiftiSForm",Mt.prototype.convertNiftiQFormToNiftiSForm);$(this,"convertNiftiSFormToNEMA",Mt.prototype.convertNiftiSFormToNEMA);$(this,"nifti_mat33_mul",Mt.prototype.nifti_mat33_mul);$(this,"nifti_mat33_determ",Mt.prototype.nifti_mat33_determ)}readHeader(t){var i=new DataView(t),s=rt.getIntAt(i,0,this.littleEndian),a,o,l,h;if(s!==Bi.MAGIC_COOKIE&&(this.littleEndian=!0,s=rt.getIntAt(i,0,this.littleEndian)),s!==Bi.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.magic=rt.getStringAt(i,4,12),this.datatypeCode=rt.getShortAt(i,12,this.littleEndian),this.numBitsPerVoxel=rt.getShortAt(i,14,this.littleEndian),a=0;a<8;a+=1)h=16+a*8,this.dims[a]=rt.getInt64At(i,h,this.littleEndian);for(this.intent_p1=rt.getDoubleAt(i,80,this.littleEndian),this.intent_p2=rt.getDoubleAt(i,88,this.littleEndian),this.intent_p3=rt.getDoubleAt(i,96,this.littleEndian),a=0;a<8;a+=1)h=104+a*8,this.pixDims[a]=rt.getDoubleAt(i,h,this.littleEndian);for(this.vox_offset=rt.getInt64At(i,168,this.littleEndian),this.scl_slope=rt.getDoubleAt(i,176,this.littleEndian),this.scl_inter=rt.getDoubleAt(i,184,this.littleEndian),this.cal_max=rt.getDoubleAt(i,192,this.littleEndian),this.cal_min=rt.getDoubleAt(i,200,this.littleEndian),this.slice_duration=rt.getDoubleAt(i,208,this.littleEndian),this.toffset=rt.getDoubleAt(i,216,this.littleEndian),this.slice_start=rt.getInt64At(i,224,this.littleEndian),this.slice_end=rt.getInt64At(i,232,this.littleEndian),this.description=rt.getStringAt(i,240,320),this.aux_file=rt.getStringAt(i,320,344),this.qform_code=rt.getIntAt(i,344,this.littleEndian),this.sform_code=rt.getIntAt(i,348,this.littleEndian),this.quatern_b=rt.getDoubleAt(i,352,this.littleEndian),this.quatern_c=rt.getDoubleAt(i,360,this.littleEndian),this.quatern_d=rt.getDoubleAt(i,368,this.littleEndian),this.qoffset_x=rt.getDoubleAt(i,376,this.littleEndian),this.qoffset_y=rt.getDoubleAt(i,384,this.littleEndian),this.qoffset_z=rt.getDoubleAt(i,392,this.littleEndian),o=0;o<3;o+=1)for(l=0;l<4;l+=1)h=400+(o*4+l)*8,this.affine[o][l]=rt.getDoubleAt(i,h,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=rt.getIntAt(i,496,this.littleEndian),this.xyzt_units=rt.getIntAt(i,500,this.littleEndian),this.intent_code=rt.getIntAt(i,504,this.littleEndian),this.intent_name=rt.getStringAt(i,508,524),this.dim_info=rt.getByteAt(i,524),i.byteLength>Bi.MAGIC_COOKIE&&(this.extensionFlag[0]=rt.getByteAt(i,540),this.extensionFlag[1]=rt.getByteAt(i,541),this.extensionFlag[2]=rt.getByteAt(i,542),this.extensionFlag[3]=rt.getByteAt(i,543),this.extensionFlag[0]&&(this.extensions=rt.getExtensionsAt(i,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode))}toFormattedString(){var t=rt.formatNumber,i="";return i+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,i+="Bits Per Voxel =  = "+this.numBitsPerVoxel+`
`,i+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,i+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,i+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+`
`,i+="Image Offset = "+this.vox_offset+`
`,i+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+`
`,i+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+`
`,i+="Slice Duration = "+this.slice_duration+`
`,i+="Time Axis Shift = "+this.toffset+`
`,i+="Slice Start = "+this.slice_start+`
`,i+="Slice End = "+this.slice_end+`
`,i+='Description: "'+this.description+`"
`,i+='Auxiliary File: "'+this.aux_file+`"
`,i+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,i+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,i+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+`
`,i+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,i+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+`
`,i+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+`
`,i+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+`
`,i+="Slice Code = "+this.slice_code+`
`,i+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(Mt.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(Mt.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,i+="Intent Code = "+this.intent_code+`
`,i+='Intent Name: "'+this.intent_name+`"
`,i+="Dim Info = "+this.dim_info+`
`,i}toArrayBuffer(t=!1){let a=544;if(t)for(let u of this.extensions)a+=u.esize;let o=new Uint8Array(a),l=new DataView(o.buffer);l.setInt32(0,540,this.littleEndian),o.set(new TextEncoder().encode(this.magic),4),l.setInt16(12,this.datatypeCode,this.littleEndian),l.setInt16(14,this.numBitsPerVoxel,this.littleEndian);for(let u=0;u<8;u++)l.setBigInt64(16+8*u,BigInt(this.dims[u]),this.littleEndian);l.setFloat64(80,this.intent_p1,this.littleEndian),l.setFloat64(88,this.intent_p2,this.littleEndian),l.setFloat64(96,this.intent_p3,this.littleEndian);for(let u=0;u<8;u++)l.setFloat64(104+8*u,this.pixDims[u],this.littleEndian);l.setBigInt64(168,BigInt(this.vox_offset),this.littleEndian),l.setFloat64(176,this.scl_slope,this.littleEndian),l.setFloat64(184,this.scl_inter,this.littleEndian),l.setFloat64(192,this.cal_max,this.littleEndian),l.setFloat64(200,this.cal_min,this.littleEndian),l.setFloat64(208,this.slice_duration,this.littleEndian),l.setFloat64(216,this.toffset,this.littleEndian),l.setBigInt64(224,BigInt(this.slice_start),this.littleEndian),l.setBigInt64(232,BigInt(this.slice_end),this.littleEndian),o.set(new TextEncoder().encode(this.description),240),o.set(new TextEncoder().encode(this.aux_file),320),l.setInt32(344,this.qform_code,this.littleEndian),l.setInt32(348,this.sform_code,this.littleEndian),l.setFloat64(352,this.quatern_b,this.littleEndian),l.setFloat64(360,this.quatern_c,this.littleEndian),l.setFloat64(368,this.quatern_d,this.littleEndian),l.setFloat64(376,this.qoffset_x,this.littleEndian),l.setFloat64(384,this.qoffset_y,this.littleEndian),l.setFloat64(392,this.qoffset_z,this.littleEndian);const h=this.affine.flat();for(let u=0;u<12;u++)l.setFloat64(400+8*u,h[u],this.littleEndian);if(l.setInt32(496,this.slice_code,this.littleEndian),l.setInt32(500,this.xyzt_units,this.littleEndian),l.setInt32(504,this.intent_code,this.littleEndian),o.set(new TextEncoder().encode(this.intent_name),508),l.setUint8(524,this.dim_info),t){o.set(Uint8Array.from([1,0,0,0]),540);let u=this.getExtensionLocation();for(const f of this.extensions)l.setInt32(u,f.esize,f.littleEndian),l.setInt32(u+4,f.ecode,f.littleEndian),o.set(new Uint8Array(f.edata),u+8),u+=f.esize}else o.set(new Uint8Array(4).fill(0),540);return o.buffer}};$(Bi,"MAGIC_COOKIE",540),$(Bi,"MAGIC_NUMBER_LOCATION",4),$(Bi,"MAGIC_NUMBER",[110,43,50,0,13,10,26,10]),$(Bi,"MAGIC_NUMBER2",[110,105,50,0,13,10,26,10]);let Qe=Bi;function MC(e,t=!1){var i,s,a,o;return e.byteLength<Mt.STANDARD_HEADER_SIZE?!1:(i=new DataView(e),i&&(s=i.getUint8(Mt.MAGIC_NUMBER_LOCATION)),a=i.getUint8(Mt.MAGIC_NUMBER_LOCATION+1),o=i.getUint8(Mt.MAGIC_NUMBER_LOCATION+2),t&&s===Mt.MAGIC_NUMBER2[0]&&a===Mt.MAGIC_NUMBER2[1]&&o===Mt.MAGIC_NUMBER2[2]?!0:s===Mt.MAGIC_NUMBER[0]&&a===Mt.MAGIC_NUMBER[1]&&o===Mt.MAGIC_NUMBER[2])}function EC(e,t=!1){var i,s,a,o;return e.byteLength<Mt.STANDARD_HEADER_SIZE?!1:(i=new DataView(e),s=i.getUint8(Qe.MAGIC_NUMBER_LOCATION),a=i.getUint8(Qe.MAGIC_NUMBER_LOCATION+1),o=i.getUint8(Qe.MAGIC_NUMBER_LOCATION+2),t&&s===Qe.MAGIC_NUMBER2[0]&&a===Qe.MAGIC_NUMBER2[1]&&o===Qe.MAGIC_NUMBER2[2]?!0:s===Qe.MAGIC_NUMBER[0]&&a===Qe.MAGIC_NUMBER[1]&&o===Qe.MAGIC_NUMBER[2])}function cc(e){var t,i,s;return!!(e&&(t=new DataView(e),i=t.getUint8(0),s=t.getUint8(1),i===rt.GUNZIP_MAGIC_COOKIE1||s===rt.GUNZIP_MAGIC_COOKIE2))}function TC(e){return bC(new Uint8Array(e)).buffer}async function hp(e){const t=new Uint8Array(e),i=t[0]===31&&t[1]===139&&t[2]===8?"gzip":t[0]===120&&(t[1]===1||t[1]===94||t[1]===156||t[1]===218)?"deflate":"deflate-raw",s=new DecompressionStream(i),a=s.writable.getWriter();a.write(t).catch(console.error);const o=a.close().catch(console.error),h=await new Response(s.readable).arrayBuffer();return await o,h}async function fp(e,t=1/0){const i=A=>A[0]===31&&A[1]===139&&A[2]===8?"gzip":A[0]===120&&[1,94,156,218].includes(A[1])?"deflate":"deflate-raw",s=new Uint8Array(e),a=i(s),o=new DecompressionStream(a),l=new TransformStream({transform(A,x){x.enqueue(A)},flush(A){A.terminate()}}),{readable:h,writable:u}=o,f=u.getWriter(),m=h.pipeThrough(l).getReader();f.write(s).catch(A=>{A instanceof Error&&A.name==="AbortError"||console.error("Error during write:",A)});const g=[];let p=0;try{for(;p<t;){const{done:A,value:x}=await m.read();if(A)break;const y=t-p,b=x.subarray(0,Math.min(x.length,y));if(g.push(b),p+=b.length,p>=t){await Promise.all([m.cancel().catch(()=>{}),f.abort().catch(()=>{})]);break}}}catch(A){A instanceof Error&&A.name==="AbortError"||console.error("Error during decompression:",A)}finally{await Promise.allSettled([m.cancel().catch(()=>{}),f.close().catch(()=>{})])}return g.length===1?g[0].buffer:g.reduce((A,x)=>{const y=new Uint8Array(A.byteLength+x.byteLength);return y.set(new Uint8Array(A),0),y.set(x,A.byteLength),y.buffer},new ArrayBuffer(0))}function DC(e,t=!1){let i=null;if(cc(e)&&(e=TC(e)),MC(e,t)?i=new Mt:EC(e,t)&&(i=new Qe),i)i.readHeader(e);else throw new Error("That file does not appear to be NIFTI!");return i}async function Br(e,t=!1){if(!cc(e))return DC(e,t);let i=null,s=await fp(e,540),a=!0,o=!0;var l=new DataView(s);const h=l.getInt32(0,!0),u=l.getInt32(0,!1);if(h!==348)if(u===348)a=!1;else if(h===540)o=!1;else if(u===540)o=!1,a=!1;else throw new Error("That file does not appear to be NIFTI!");let f=Math.round(l.getFloat32(108,a));return Qe&&(f=rt.getUint64At(l,168,a)),f>s.byteLength&&(s=await fp(e,f)),o?i=new Mt:i=new Qe,i.readHeader(s),i}function dp(e,t){var i=e.vox_offset,s=1,a=1;e.dims[4]&&(s=e.dims[4]),e.dims[5]&&(a=e.dims[5]);var o=e.dims[1]*e.dims[2]*e.dims[3]*s*a*(e.numBitsPerVoxel/8);return t.slice(i,i+o)}var Gv=Object.defineProperty,Hv=e=>{throw TypeError(e)},VC=(e,t,i)=>t in e?Gv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,RC=(e,t)=>{for(var i in t)Gv(e,i,{get:t[i],enumerable:!0})},O=(e,t,i)=>VC(e,typeof t!="symbol"?t+"":t,i),Kv=(e,t,i)=>t.has(e)||Hv("Cannot "+i),gt=(e,t,i)=>(Kv(e,t,"read from private field"),i?i.call(e):t.get(e)),Ur=(e,t,i)=>t.has(e)?Hv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),ra=(e,t,i,s)=>(Kv(e,t,"write to private field"),t.set(e,i),i),mp="0.52.0",qv=class Si{constructor({name:t="niivue",level:i="info"}={}){O(this,"level"),O(this,"name"),this.name=`${t}`,this.level=i}debug(...t){Si.levels[this.level]>Si.levels.debug||console.debug(`${this.name}-debug`,...t)}info(...t){Si.levels[this.level]>Si.levels.info||console.info(`${this.name}-info`,...t)}warn(...t){Si.levels[this.level]>Si.levels.warn||console.warn(`${this.name}-warn`,...t)}error(...t){Si.levels[this.level]>Si.levels.error||console.error(`${this.name}-error`,...t)}fatal(...t){Si.levels[this.level]>Si.levels.fatal||console.error(`${this.name}-fatal`,...t)}setLogLevel(t){this.level=t}setName(t){this.name=t}};O(qv,"levels",{debug:0,info:1,warn:2,error:3,fatal:4,silent:1/0});var IC=qv,H=new IC({name:"niivue",level:"info"}),BC=function(e,t,i){const s=e.createShader(e.VERTEX_SHADER);e.shaderSource(s,t),e.compileShader(s);const a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,i),e.compileShader(a);const o=e.createProgram();if(e.attachShader(o,s),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(o)),e.getShaderParameter(s,e.COMPILE_STATUS)||console.log("Vertex shader compilation error:",e.getShaderInfoLog(s)),e.getShaderParameter(a,e.COMPILE_STATUS)||console.log("Fragment shader compilation error:",e.getShaderInfoLog(a)),H.error(e.getProgramInfoLog(o)),new Error("Shader failed to link, see console for log");return o},Ft=class{constructor(e,t,i){O(this,"program"),O(this,"uniforms",{}),O(this,"isMatcap"),this.program=BC(e,t,i);const s=/uniform[^;]+[ ](\w+);/g,a=/uniform[^;]+[ ](\w+);/,o=t.match(s),l=i.match(s);o&&o.forEach(h=>{const u=h.match(a);this.uniforms[u[1]]=-1}),l&&l.forEach(h=>{const u=h.match(a);this.uniforms[u[1]]=-1});for(const h in this.uniforms)this.uniforms[h]=e.getUniformLocation(this.program,h)}use(e){e.useProgram(this.program)}},Fr=`#version 300 es
#line 4
layout(location=0) in vec3 pos;
layout(location=1) in vec3 texCoords;
uniform mat4 mvpMtx;
out vec3 vColor;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vColor = texCoords;
}`,Qv=`
	vec4 drawColor(float scalar, float drawOpacity) {
		float nlayer = float(textureSize(colormap, 0).y);
		float layer = (nlayer - 0.5) / nlayer;
		vec4 dcolor = texture(colormap, vec2((scalar * 255.0)/256.0 + 0.5/256.0, layer)).rgba;
		dcolor.a *= drawOpacity;
		return dcolor;
}`,co=`vec3 GetBackPosition(vec3 startPositionTex) {
	vec3 startPosition = startPositionTex * volScale;
	vec3 invR = 1.0 / rayDir;
	vec3 tbot = invR * (vec3(0.0)-startPosition);
	vec3 ttop = invR * (volScale-startPosition);
	vec3 tmax = max(ttop, tbot);
	vec2 t = min(tmax.xx, tmax.yz);
	vec3 endPosition = startPosition + (rayDir * min(t.x, t.y));
	//convert world position back to texture position:
	endPosition = endPosition / volScale;
	return endPosition;
}

vec4 applyClip (vec3 dir, inout vec4 samplePos, inout float len, inout bool isClip) {
	float cdot = dot(dir,clipPlane.xyz);
	isClip = false;
	if  ((clipPlane.a > 1.0) || (cdot == 0.0)) return samplePos;
	bool frontface = (cdot > 0.0);
	float dis = (-clipPlane.a - dot(clipPlane.xyz, samplePos.xyz-0.5)) / cdot;
	float thick = clipThick;
	if (thick <= 0.0) thick = 2.0;
	float  disBackFace = (-(clipPlane.a-thick) - dot(clipPlane.xyz, samplePos.xyz-0.5)) / cdot;
	if (((frontface) && (dis >= len)) || ((!frontface) && (dis <= 0.0))) {
		samplePos.a = len + 1.0;
		return samplePos;
	}
	if (frontface) {
		dis = max(0.0, dis);
		samplePos = vec4(samplePos.xyz+dir * dis, dis);
		if (dis > 0.0) isClip = true;
		len = min(disBackFace, len);
	}
	if (!frontface) {
		len = min(dis, len);
		disBackFace = max(0.0, disBackFace);
		if (len == dis) isClip = true;
		samplePos = vec4(samplePos.xyz+dir * disBackFace, disBackFace);
	}
	return samplePos;
}

void clipVolume(inout vec3 startPos, inout vec3 backPos, int dim, float frac, bool isLo) {
	vec3 dir = backPos - startPos;
	float len = length(dir);
	dir = normalize(dir);
	// Discard if both startPos and backPos are outside the clipping plane
	if (isLo && startPos[dim] < frac && backPos[dim] < frac) {
		discard;
	}
	if (!isLo && startPos[dim] > frac && backPos[dim] > frac) {
		discard;
	}
	vec4 plane = vec4(0.0, 0.0, 0.0, 0.5 - frac);
	plane[dim] = 1.0;
	float cdot = dot(dir, plane.xyz);
	float dis = (-plane.w - dot(plane.xyz, startPos - vec3(0.5))) / cdot;
	// Adjust startPos or backPos based on the intersection with the plane
	bool isFrontFace = (cdot > 0.0);
	if (!isLo)
		isFrontFace = !isFrontFace;
	if (dis > 0.0) {
		if (isFrontFace) {
				if (dis <= len) {
					startPos = startPos + dir * dis;
				}
		} else {
			if (dis < len) {
				backPos = startPos + dir * dis;
			}
		}
	}
}

void clipVolumeStart (inout vec3 startPos, inout vec3 backPos) {
	// vec3 clipLo = vec3(0.1, 0.2, 0.4);
	// vec3 clipHi = vec3(0.8, 0.7, 0.7);
	for (int i = 0; i < 3; i++) {
		if (clipLo[i] > 0.0)
			clipVolume(startPos, backPos, i, clipLo[i], true);
	}
	for (int i = 0; i < 3; i++) {
		if (clipHi[i] < 1.0)
			clipVolume(startPos, backPos, i, clipHi[i], false);
	}
}

float frac2ndc(vec3 frac) {
//https://stackoverflow.com/questions/7777913/how-to-render-depth-linearly-in-modern-opengl-with-gl-fragcoord-z-in-fragment-sh
	vec4 pos = vec4(frac.xyz, 1.0); //fraction
	vec4 dim = vec4(vec3(textureSize(volume, 0)), 1.0);
	pos = pos * dim;
	vec4 shim = vec4(-0.5, -0.5, -0.5, 0.0);
	pos += shim;
	vec4 mm = transpose(matRAS) * pos;
	float z_ndc = (mvpMtx * vec4(mm.xyz, 1.0)).z;
	return (z_ndc + 1.0) / 2.0;
}`+Qv,V0=`void main() {
	if (fColor.x > 2.0) {
		fColor = vec4(1.0, 0.0, 0.0, 0.5);
		return;
	}
	fColor = vec4(0.0,0.0,0.0,0.0);
	vec4 clipPlaneColorX = clipPlaneColor;
	//if (clipPlaneColor.a < 0.0)
	//	clipPlaneColorX.a = - 1.0;
	bool isColorPlaneInVolume = false;
	if (clipPlaneColorX.a < 0.0) {
		isColorPlaneInVolume = true;
		clipPlaneColorX.a = 0.0;
	}
	//fColor = vec4(vColor.rgb, 1.0); return;
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	vec3 backPosition = GetBackPosition(start);
	// fColor = vec4(backPosition, 1.0); return;
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	dir = normalize(dir);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	//if ((clipPos.a != samplePos.a) && (len < 3.0)) {
	//start: OPTIONAL fast pass: rapid traversal until first hit
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	float drawOpacityA = renderDrawAmbientOcclusionXY.y;
	if ((samplePos.a >= len) && (((overlays < 1.0) && (drawOpacityA <= 0.0) ) || (backgroundMasksOverlays > 0)))  {
		if (isClip)
			fColor += clipPlaneColorX;
		return;
	}
	fColor = vec4(1.0, 1.0, 1.0, 1.0);
	//gl_FragDepth = frac2ndc(samplePos.xyz); //crude due to fast pass resolution
	samplePos -= deltaDirFast;
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	//end: fast pass
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * lenNoClip);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	samplePos += deltaDir * ran; //jitter ray
`,vc=`
	if (firstHit.a < len)
		gl_FragDepth = frac2ndc(firstHit.xyz);
	colAcc.a = (colAcc.a / earlyTermination) * backOpacity;
	fColor = colAcc;
	//if (isClip) //CR
	if ((isColorPlaneInVolume) && (clipPos.a != samplePos.a) && (abs(firstHit.a - clipPos.a) < deltaDir.a))
		fColor.rgb = mix(fColor.rgb, clipPlaneColorX.rgb, abs(clipPlaneColor.a));
		//fColor.rgb = mix(fColor.rgb, clipPlaneColorX.rgb, clipPlaneColorX.a * 0.65);
	float renderDrawAmbientOcclusionX = renderDrawAmbientOcclusionXY.x;
	float drawOpacity = renderDrawAmbientOcclusionXY.y;
	if ((overlays < 1.0) && (drawOpacity <= 0.0))
		return;
	//overlay pass
	len = lenNoClip;
	samplePos = vec4(start.xyz, 0.0); //ray position
	//start: OPTIONAL fast pass: rapid traversal until first hit
	stepSizeFast = sliceSize * 1.0;
	deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (drawOpacity > 0.0)
			val = max(val, texture(drawing, samplePos.xyz).r);
		if (val > 0.001)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	if (samplePos.a >= len) {
		if (isClip && (fColor.a == 0.0))
				fColor += clipPlaneColorX;
			return;
	}
	samplePos -= deltaDirFast;
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	//end: fast pass
	float overFarthest = len;
	colAcc = vec4(0.0, 0.0, 0.0, 0.0);

	samplePos += deltaDir * ran; //jitter ray
	vec4 overFirstHit = vec4(0.0,0.0,0.0,2.0 * len);
	if (backgroundMasksOverlays > 0)
		samplePos = firstHit;
	bool firstDraw = true;
	while (samplePos.a <= len) {
		vec4 colorSample = texture(overlay, samplePos.xyz);
		if ((colorSample.a < 0.01) && (drawOpacity > 0.0)) {
			float val = texture(drawing, samplePos.xyz).r;
			vec4 draw = drawColor(val, drawOpacity);
			if ((draw.a > 0.0) && (firstDraw)) {
				firstDraw = false;
				float sum = 0.0;
				const float mn = 1.0 / 256.0;
				const float sampleRadius = 1.1;
				float dx = sliceSize * sampleRadius;
				vec3 center = samplePos.xyz;
				//six neighbors that share a face
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,0.0), dir)).r, mn);
				//float proportion = (sum / mn) / 6.0;
				
				//12 neighbors that share an edge
				dx = sliceSize * sampleRadius * sqrt(2.0) * 0.5;
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,-dx,0.0), dir)).r, mn);

				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,-dx,0.0), dir)).r, mn);
				
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,+dx,0.0), dir)).r, mn);
				float proportion = (sum / mn) / 18.0; //proportion of six neighbors is non-zero
				
				//a high proportion of hits means crevice
				//since the AO term adds shadows that darken most voxels, it will result in dark surfaces
				//the term brighten adds a little illumination to balance this
				// without brighten, only the most extreme ridges will not be darker
				const float brighten = 1.2;
				vec3 ao = draw.rgb * (1.0 - proportion) * brighten;
				draw.rgb = mix (draw.rgb, ao , renderDrawAmbientOcclusionX);
			}
			colorSample = draw;
		}
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (overFirstHit.a > len)
				overFirstHit = samplePos;
			colorSample.a *= renderOverlayBlend;
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			overFarthest = samplePos.a;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
	//if (samplePos.a >= len) {
	if (colAcc.a <= 0.0) {
		if (isClip && (fColor.a == 0.0))
			fColor += clipPlaneColorX;
		return;
	}
	if (overFirstHit.a < firstHit.a)
		gl_FragDepth = frac2ndc(overFirstHit.xyz);
	float overMix = colAcc.a;
	float overlayDepth = 0.3;
	if (fColor.a <= 0.0)
		overMix = 1.0;
	else if (((overFarthest) > backNearest)) {
		float dx = (overFarthest - backNearest)/1.73;
		dx = fColor.a * pow(dx, overlayDepth);
		overMix *= 1.0 - dx;
	}
	fColor.rgb = mix(fColor.rgb, colAcc.rgb, overMix);
	fColor.a = max(fColor.a, colAcc.a);
}`,UC=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+co+`
	void main() {
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		fColor = vec4(0.0,0.0,0.0,0.0);
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * len);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float dis = len;
	//check if axial plane is closest
	vec4 aClip = vec4(0.0, 0.0, 1.0, (1.0- clipPlane.z) - 0.5);
	float adis = (-aClip.a - dot(aClip.xyz, samplePos.xyz-0.5)) / dot(dir,aClip.xyz);
	if (adis > 0.0)
		dis = min(adis, dis);
	//check of coronal plane is closest
	vec4 cClip = vec4(0.0, 1.0, 0.0, (1.0- clipPlane.y) - 0.5);
	float cdis = (-cClip.a - dot(cClip.xyz, samplePos.xyz-0.5)) / dot(dir,cClip.xyz);
	if (cdis > 0.0)
		dis = min(cdis, dis);
	//check if coronal slice is closest
	vec4 sClip = vec4(1.0, 0.0, 0.0, (1.0- clipPlane.x) - 0.5);
	float sdis = (-sClip.a - dot(sClip.xyz, samplePos.xyz-0.5)) / dot(dir,sClip.xyz);
	if (sdis > 0.0)
		dis = min(sdis, dis);
	if ((dis > 0.0) && (dis < len)) {
		samplePos = vec4(samplePos.xyz+dir * dis, dis);
		colAcc = texture(volume, samplePos.xyz);
		colAcc.a = earlyTermination;
		firstHit = samplePos;
		backNearest = min(backNearest, samplePos.a);
	}
	//the following are only used by overlays
	vec4 clipPlaneColorX = clipPlaneColor;
	bool isColorPlaneInVolume = false;
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	samplePos += deltaDir * ran; //jitter ray
`+vc,FC=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+co+V0+`while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (firstHit.a > lenNoClip)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
`+vc,Xv=`#version 300 es
#line 215
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 normMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing, gradient;
uniform highp sampler2D colormap;
uniform highp sampler2D matCap;
uniform vec2 renderDrawAmbientOcclusionXY;
uniform float gradientAmount;
uniform float gradientOpacity[256];
in vec3 vColor;
out vec4 fColor;
`,NC=Xv+co+V0+`
	float startPos = samplePos.a;
	float clipClose = clipPos.a + 3.0 * deltaDir.a; //do not apply gradients near clip plane
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			grad.rgb = normalize(grad.rgb*2.0 - 1.0);
			//if (grad.a < prevGrad.a)
			//	grad.rgb = prevGrad.rgb;
			//prevGrad = grad;
			vec3 n = mat3(normMtx) * grad.rgb;
			n.y = - n.y;
			vec4 mc = vec4(texture(matCap, n.xy * 0.5 + 0.5).rgb, 1.0) * brighten;
			mc = mix(vec4(1.0), mc, gradientAmount);
			if (samplePos.a > clipClose)
				colorSample.rgb *= mc.rgb;
			if (firstHit.a > lenNoClip)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			int gradIdx = int(grad.a * 255.0);
			colorSample.a *= gradientOpacity[gradIdx];
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
		samplePos += deltaDir; //advance ray position
	}
`+vc,LC=Xv+co+V0+`
	float startPos = samplePos.a;
	float clipClose = clipPos.a + 3.0 * deltaDir.a; //do not apply gradients near clip plane
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			colorSample.rgb = abs(normalize(grad.rgb*2.0 - 1.0));
			if (firstHit.a > lenNoClip)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
		samplePos += deltaDir; //advance ray position
	}
`+vc,gp=`#version 300 es
#line 392
layout(location=0) in vec3 pos;
uniform int axCorSag;
uniform mat4 mvpMtx;
uniform mat4 frac2mm;
uniform float slice;
out vec3 texPos;
void main(void) {
	texPos = vec3(pos.x, pos.y, slice);
	if (axCorSag > 1)
		texPos = vec3(slice, pos.x, pos.y);
	else if (axCorSag > 0)
		texPos = vec3(pos.x, slice, pos.y);
	vec4 mm = frac2mm * vec4(texPos, 1.0);
	gl_Position = mvpMtx * mm;
}`,Zv=`#version 300 es
#line 411
precision highp int;
precision highp float;
uniform highp sampler3D volume, overlay;
uniform int backgroundMasksOverlays;
uniform float overlayOutlineWidth;
uniform float overlayAlphaShader;
uniform int axCorSag;
uniform float overlays;
uniform float opacity;
uniform float drawOpacity;
uniform bool isAlphaClipDark;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
in vec3 texPos;
out vec4 color;`+Qv+`void main() {
	//color = vec4(1.0, 0.0, 1.0, 1.0);return;
	vec4 background = texture(volume, texPos);
	color = vec4(background.rgb, opacity);
	if ((isAlphaClipDark) && (background.a == 0.0)) color.a = 0.0; //FSLeyes clipping range
	vec4 ocolor = vec4(0.0);
	float overlayAlpha = overlayAlphaShader;
	if (overlays > 0.0) {
		ocolor = texture(overlay, texPos);
		//dFdx for "boxing" issue 435 has aliasing on some implementations (coarse vs fine)
		//however, this only identifies 50% of the edges due to aliasing effects
		// http://www.aclockworkberry.com/shader-derivative-functions/
		// https://bgolus.medium.com/distinctive-derivative-differences-cce38d36797b
		//if ((ocolor.a >= 1.0) && ((dFdx(ocolor.a) != 0.0) || (dFdy(ocolor.a) != 0.0)  ))
		//	ocolor.rbg = vec3(0.0, 0.0, 0.0);
		bool isOutlineBelowNotAboveThreshold = true;
		if (isOutlineBelowNotAboveThreshold) {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a < 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				//6 voxel neighbors that share a face
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 0.0;
				if (axCorSag != 2) {
					a = max(a, texture(overlay, vxR).a);
					a = max(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = max(a, texture(overlay, vxA).a);
					a = max(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = max(a, texture(overlay, vxS).a);
					a = max(a, texture(overlay, vxI).a);
				}
				bool isCheckCorners = true;
				if (isCheckCorners) {
					//12 voxel neighbors that share an edge
					vec3 vxRA = vec3(texPos.x+vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxLA = vec3(texPos.x-vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxRP = vec3(texPos.x+vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxLP = vec3(texPos.x-vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxRS = vec3(texPos.x+vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxLS = vec3(texPos.x-vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxRI = vec3(texPos.x+vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxLI = vec3(texPos.x-vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxAS = vec3(texPos.x, texPos.y+vx.y, texPos.z+vx.z);
					vec3 vxPS = vec3(texPos.x, texPos.y-vx.y, texPos.z+vx.z);
					vec3 vxAI = vec3(texPos.x, texPos.y+vx.y, texPos.z-vx.z);
					vec3 vxPI = vec3(texPos.x, texPos.y-vx.y, texPos.z-vx.z);

					if (axCorSag == 0) { //axial corners
						a = max(a, texture(overlay, vxRA).a);
						a = max(a, texture(overlay, vxLA).a);
						a = max(a, texture(overlay, vxRP).a);
						a = max(a, texture(overlay, vxLP).a);
					}
					if (axCorSag == 1) { //coronal corners
						a = max(a, texture(overlay, vxRS).a);
						a = max(a, texture(overlay, vxLS).a);
						a = max(a, texture(overlay, vxRI).a);
						a = max(a, texture(overlay, vxLI).a);
					}
					if (axCorSag == 2) { //sagittal corners
						a = max(a, texture(overlay, vxAS).a);
						a = max(a, texture(overlay, vxPS).a);
						a = max(a, texture(overlay, vxAI).a);
						a = max(a, texture(overlay, vxPI).a);
					}
				}
				if (a >= 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}

		} else {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a >= 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 1.0;
				if (axCorSag != 2) {
					a = min(a, texture(overlay, vxR).a);
					a = min(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = min(a, texture(overlay, vxA).a);
					a = min(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = min(a, texture(overlay, vxS).a);
					a = min(a, texture(overlay, vxI).a);
				}
				if (a < 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}
		} //outline above threshold
	}

`,Wv=`	ocolor.a *= overlayAlpha;
	vec4 dcolor = drawColor(texture(drawing, texPos).r, drawOpacity);
	if (dcolor.a > 0.0) {
		color.rgb = mix(color.rgb, dcolor.rgb, dcolor.a);
		color.a = max(drawOpacity, color.a);
	}
	if ((backgroundMasksOverlays > 0) && (background.a == 0.0))
		return;
	float a = color.a + ocolor.a * (1.0 - color.a); // premultiplied alpha
	if (a == 0.0) return;
	color.rgb = mix(color.rgb, ocolor.rgb, ocolor.a / a);
	color.a = a;
}`,OC=Zv+Wv,PC=Zv+`	if (ocolor.a > 0.0) {
		//https://gamedev.stackexchange.com/questions/102889/is-it-possible-to-convert-vec4-to-int-in-glsl-using-opengl-es
		uint alpha = uint(ocolor.a * 255.0);
		vec3 xyzFlip = vec3(float((uint(1) & alpha) > uint(0)), float((uint(2) & alpha) > uint(0)), float((uint(4) & alpha) > uint(0)));
		//convert from 0 and 1 to -1 and 1
		xyzFlip = (xyzFlip * 2.0) - 1.0;
		//https://math.stackexchange.com/questions/1905533/find-perpendicular-distance-from-point-to-line-in-3d
		//v1 principle direction of tensor for this voxel
		vec3 v1 = ocolor.rgb;
		//flips encode polarity to convert from 0..1 to -1..1 (27 bits vs 24 bit precision)
		v1 = normalize( v1 * xyzFlip);
		vec3 vxl = fract(texPos * vec3(textureSize(volume, 0))) - 0.5;
		//vxl coordinates now -0.5..+0.5 so 0,0,0 is origin
		vxl.x = -vxl.x;
		float t = dot(vxl,v1);
		vec3 P = t * v1;
		float dx = length(P-vxl);
		ocolor.a = 1.0 - smoothstep(0.2,0.25, dx);
		//if modulation was applied, use that to scale alpha not color:
		ocolor.a *= length(ocolor.rgb);
		ocolor.rgb = normalize(ocolor.rgb);
		//compute distance one half voxel closer to viewer:
		float pan = 0.5;
		if (axCorSag == 0)
			vxl.z -= pan;
		if (axCorSag == 1)
			vxl.y -= pan;
		if (axCorSag == 2)
			vxl.x += pan;
		t = dot(vxl,v1);
		P = t * v1;
		float dx2 = length(P-vxl);
		ocolor.rgb += (dx2-dx-(0.5 * pan)) * 1.0;
	}
`+Wv,nf=`#version 300 es
#line 480
precision highp int;
precision highp float;
uniform vec4 lineColor;
out vec4 color;
void main() {
	color = lineColor;
}`,kC=`#version 300 es
#line 723
precision highp int;
precision highp float;

uniform vec4 lineColor;
uniform vec4 leftTopWidthHeight;
uniform float thickness; // line thickness in pixels
uniform vec2 canvasWidthHeight;

out vec4 color;

void main() {
    // fragment position in screen coordinates
    vec2 fragCoord = gl_FragCoord.xy;

    // canvas height
    float canvasHeight = canvasWidthHeight.y;

    // 'top' and 'bottom' to match gl_FragCoord.y coordinate system
    float top = canvasHeight - leftTopWidthHeight.y;
    float bottom = top - leftTopWidthHeight.w;

    // left and right edges
    float left = leftTopWidthHeight.x;
    float right = left + leftTopWidthHeight.z;

    bool withinLeft = fragCoord.x >= left && fragCoord.x <= left + thickness;
    bool withinRight = fragCoord.x <= right && fragCoord.x >= right - thickness;
    bool withinTop = fragCoord.y <= top && fragCoord.y >= top - thickness;
    bool withinBottom = fragCoord.y >= bottom && fragCoord.y <= bottom + thickness;

    bool isOutline = withinLeft || withinRight || withinTop || withinBottom;

    if (isOutline) {
        color = lineColor;
    } else {
        discard; 
    }
}`,zC=`#version 300 es
#line 490
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vColor;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vColor = pos.xy;
}`,jC=`#version 300 es
#line 506
precision highp int;
precision highp float;
uniform highp sampler2D colormap;
uniform float layer;
in vec2 vColor;
out vec4 color;
void main() {
	float nlayer = float(textureSize(colormap, 0).y);
	float fmap = (0.5 + layer) / nlayer;
	color = vec4(texture(colormap, vec2(vColor.x, fmap)).rgb, 1.0);
}`,pp=`#version 300 es
#line 520
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
}`,YC=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec4 startXYendXY;
void main(void) {
	vec2 posXY = mix(startXYendXY.xy, startXYendXY.zw, pos.x);
	vec2 dir = normalize(startXYendXY.xy - startXYendXY.zw);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0
	gl_Position = vec4((posXY * 2.0) - 1.0, 0.0, 1.0);
}`,GC=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec2 startXY;
uniform vec3 endXYZ; // transformed XYZ point
void main(void) {	
	vec2 posXY = mix(startXY.xy, endXYZ.xy, pos.x);
	vec2 startDiff = endXYZ.xy - startXY.xy;
	float startDistance = length(startDiff);
	vec2 diff = endXYZ.xy - posXY;
	float currentDistance = length(diff);
	vec2 dir = normalize(startXY.xy - endXYZ.xy);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0	
	float z = endXYZ.z * ( 1.0 - abs(currentDistance/startDistance)); 
	gl_Position = vec4((posXY * 2.0) - 1.0, z, 1.0);
}`,HC=`#version 300 es
#line 549
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(pos.x, 1.0 - pos.y);
}`,KC=`#version 300 es
#line 565
precision highp int;
precision highp float;
uniform highp sampler2D bmpTexture;
in vec2 vUV;
out vec4 color;
void main() {
	color = texture(bmpTexture, vUV);
}`,qC=`#version 300 es
#line 576
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(uvLeftTopWidthHeight.x + (pos.x * uvLeftTopWidthHeight.z), uvLeftTopWidthHeight.y  + ((1.0 - pos.y) * uvLeftTopWidthHeight.w) );
}`,QC=`#version 300 es
#line 593
precision highp int;
precision highp float;
uniform highp sampler2D fontTexture;
uniform vec4 fontColor;
uniform float screenPxRange;
in vec2 vUV;
out vec4 color;
float median(float r, float g, float b) {
	return max(min(r, g), min(max(r, g), b));
}
void main() {
	vec3 msd = texture(fontTexture, vUV).rgb;
	float sd = median(msd.r, msd.g, msd.b);
	float screenPxDistance = screenPxRange*(sd - 0.5);
	float opacity = clamp(screenPxDistance + 0.5, 0.0, 1.0);
	color = vec4(fontColor.rgb , fontColor.a * opacity);
}`,XC=`#version 300 es
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = pos.xy;
}`,ZC=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 circleColor;
uniform float fillPercent;
in vec2 vUV;
out vec4 color;
void main() {
	/* Check if the pixel is inside the circle
		 and color it with a gradient. Otherwise, color it 
		 transparent   */
	float distance = length(vUV-vec2(0.5,0.5));
	if ( distance < 0.5 && distance >= (1.0 - fillPercent) / 2.0){
			color = vec4(circleColor.r,circleColor.g,circleColor.b,circleColor.a) ;			
	}else{
			color = vec4(0.0,0.0,0.0,0.0);
	}
}
`,oa=`#version 300 es
#line 613
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4( (vPos.xy-vec2(0.5,0.5)) * 2.0, 0.0, 1.0);
}`,sf=`#version 300 es
uniform highp usampler3D intensityVol;
`,Ap=`#version 300 es
uniform highp isampler3D intensityVol;
`,WC=`#version 300 es
uniform highp sampler3D intensityVol;
`,vp=`#line 636
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform vec4 xyzaFrac;
uniform mat4 mtx;
void main(void) {
	vec4 vx = vec4(TexCoord.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint idx = uint(texture(intensityVol, vx.xyz).r);
	FragColor = vec4(0.0, 0.0, 0.0, 0.0);
	if (idx == uint(0))
		return;
	//idx = ((idx - uint(1)) % uint(100))+uint(1);
	float textureWidth = float(textureSize(colormap, 0).x);
	float fx = (float(idx)+0.5) / textureWidth;
	float nlayer = float(textureSize(colormap, 0).y);
	float y = ((2.0 * layer) + 1.5)/nlayer;
	FragColor = texture(colormap, vec2(fx, y)).rgba;
	float alpha = FragColor.a;
	FragColor.a *= opacity;
	if (xyzaFrac.a > 0.0) { //outline
		vx = vec4(TexCoord.x+xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
		uint R = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x-xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
		uint L = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y+xyzaFrac.y, coordZ, 1.0) * mtx;
		uint A = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y-xyzaFrac.y, coordZ, 1.0) * mtx;
		uint P = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y, coordZ+xyzaFrac.z, 1.0) * mtx;
		uint S = uint(texture(intensityVol, vx.xyz).r);
		vx = vec4(TexCoord.x, TexCoord.y, coordZ-xyzaFrac.z, 1.0) * mtx;
		uint I = uint(texture(intensityVol, vx.xyz).r);
		if ((idx != R) || (idx != L) || (idx != A) || (idx != P) || (idx != S) || (idx != I))
			FragColor.a = alpha * xyzaFrac.a;
	}
}`,af=`#line 691
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform float cal_maxNeg;
uniform float cal_minNeg;
uniform bool isAlphaThreshold;
uniform bool isColorbarFromZero;
uniform bool isAdditiveBlend;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform int modulation;
uniform highp sampler3D modulationVol;
uniform float opacity;
uniform mat4 mtx;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	if ((vx.x < 0.0) || (vx.x > 1.0) || (vx.y < 0.0) || (vx.y > 1.0) || (vx.z < 0.0) || (vx.z > 1.0)) {
		//set transparent if out of range
		//https://webglfundamentals.org/webgl/webgl-3d-textures-repeat-clamp.html
		FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		return;
	}
	float f = (scl_slope * float(texture(intensityVol, vx.xyz).r)) + scl_inter;
	float mn = cal_min;
	float mx = cal_max;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mn = 0.0;
	float r = max(0.00001, abs(mx - mn));
	mn = min(mn, mx);
	float txl = mix(0.0, 1.0, (f - mn) / r);
	if (f > mn) { //issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
	}
	//https://stackoverflow.com/questions/5879403/opengl-texture-coordinates-in-pixel-space
	float nlayer = float(textureSize(colormap, 0).y);
	//each volume has two color maps:
	// (layer*2) = negative and (layer * 2) + 1 = postive
	float y = ((2.0 * layer) + 1.5)/nlayer;
	FragColor = texture(colormap, vec2(txl, y)).rgba;
	//negative colors
	mn = cal_minNeg;
	mx = cal_maxNeg;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mx = 0.0;
	//if ((!isnan(cal_minNeg)) && ( f < mx)) {
	if ((cal_minNeg < cal_maxNeg) && ( f < mx)) {
		r = max(0.00001, abs(mx - mn));
		mn = min(mn, mx);
		txl = 1.0 - mix(0.0, 1.0, (f - mn) / r);
		//issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
		y = ((2.0 * layer) + 0.5)/nlayer;
		FragColor = texture(colormap, vec2(txl, y));
	}
	if (layer > 0.7)
		FragColor.a = step(0.00001, FragColor.a);
	//if (modulation > 10)
	//	FragColor.a *= texture(modulationVol, vx.xyz).r;
	//	FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (isAlphaThreshold) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = pow(-f / -cal_maxNeg, 2.0);
		else if ((f > 0.0) && (cal_min > 0.0))
			FragColor.a *= pow(f / cal_min, 2.0); //issue435:  A = (V/X)**2
		//FragColor.g = 0.0;
	} else if (isColorbarFromZero) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = 0.0;
		else if ((f > 0.0) && (cal_min > 0.0) && (f < cal_min))
			FragColor.a *= 0.0;

	}
	if (modulation == 1) {
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	} else if (modulation == 2) {
		FragColor.a = texture(modulationVol, vx.xyz).r;
	}
	FragColor.a *= opacity;
	if (layer < 1.0) return;
	vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
	// https://en.wikipedia.org/wiki/Alpha_compositing
	float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
	if (aout <= 0.0) return;
	if (isAdditiveBlend)
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a)) / aout;
	else
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
	FragColor.a = aout;
}`,JC=`#line 773
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform mat4 mtx;
uniform bool hasAlpha;
uniform int modulation;
uniform highp sampler3D modulationVol;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	uvec4 aColor = texture(intensityVol, vx.xyz);
	FragColor = vec4(float(aColor.r) / 255.0, float(aColor.g) / 255.0, float(aColor.b) / 255.0, float(aColor.a) / 255.0);
	if (modulation == 1)
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (!hasAlpha) {
		FragColor.a = (FragColor.r * 0.21 + FragColor.g * 0.72 + FragColor.b * 0.07);
		//next line: we could binarize alpha, but see rendering of visible human
		//FragColor.a = step(0.01, FragColor.a);
	}
	if (modulation == 2)
		FragColor.a = texture(modulationVol, vx.xyz).r;
	FragColor.a *= opacity;
}`,_C=`#version 300 es
#line 808
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4((vPos.x - 0.5) * 2.0, (vPos.y - 0.5) * 2.0, 0.0, 1.0);
}`,$C=`#version 300 es
#line 829
	precision highp float;
	precision highp int;
	precision highp isampler3D;
	layout(location = 0) out int label;
	layout(location = 1) out int strength;
	in vec2 TexCoord;
	uniform int finalPass;
	uniform float coordZ;
	uniform lowp sampler3D in3D;
	uniform highp isampler3D backTex; // background
	uniform highp isampler3D labelTex; // label
	uniform highp isampler3D strengthTex; // strength
void main(void) {
	vec3 interpolatedTextureCoordinate = vec3(TexCoord.xy, coordZ);
	ivec3 size = textureSize(backTex, 0);
	ivec3 texelIndex = ivec3(floor(interpolatedTextureCoordinate * vec3(size)));
	int background = texelFetch(backTex, texelIndex, 0).r;
	label = texelFetch(labelTex, texelIndex, 0).r;
	strength = texelFetch(strengthTex, texelIndex, 0).r;
	for (int k = -1; k <= 1; k++) {
		for (int j = -1; j <= 1; j++) {
			for (int i = -1; i <= 1; i++) {
				if (i != 0 && j != 0 && k != 0) {
					ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
					int neighborBackground = texelFetch(backTex, neighborIndex, 0).r;
					int neighborStrength = texelFetch(strengthTex, neighborIndex, 0).r;
					int strengthCost = abs(neighborBackground - background);
					int takeoverStrength = neighborStrength - strengthCost;
					if (takeoverStrength > strength) {
						strength = takeoverStrength;
						label = texelFetch(labelTex, neighborIndex, 0).r;
					}
				}
			}
		}
	}
	if (finalPass < 1)
		return;
	int ok = 1;
	ivec4 labelCount = ivec4(0,0,0,0);
	for (int k = -1; k <= 1; k++)
		for (int j = -1; j <= 1; j++)
			for (int i = -1; i <= 1; i++) {
				ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
				int ilabel = texelFetch(labelTex, neighborIndex, 0).r;
				if ((ilabel < 0) || (ilabel > 3))
					ok = 0;
				else
					labelCount[ilabel]++;
			}
	if (ok != 1) {
		return;
	}
	int maxIdx = 0;
	for (int i = 1; i < 4; i++) {
		if (labelCount[i] > labelCount[maxIdx])
			maxIdx = i;
	}
	label = maxIdx;
}`,tS=`#version 300 es
layout(location=0) in vec3 pos;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
}`,eS=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 surfaceColor;
out vec4 color;
void main() {
	color = surfaceColor;
}`,iS=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 clr;
out vec4 vClr;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vClr = clr;
}`,nS=`#version 300 es
precision highp int;
precision highp float;
in vec4 vClr;
out vec4 color;
uniform float opacity;
void main() {
	color = vec4(vClr.rgb, opacity);
}`,rf=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
out vec3 vN;
out vec4 vP;
out vec4 vPc;
void main(void) {
	vec3 lightPosition = vec3(0.0, 0.0, -10.0);
	vP = vec4(pos, 1.0);
	vPc = mvpMtx * vec4(pos, 1.0);
	gl_Position = vPc;
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,sS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
out vec4 color;
vec4 packFloatToVec4i(const float value) {
	const vec4 bitSh = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
	const vec4 bitMsk = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
	vec4 res = fract(value * bitSh);
	res -= res.xxyz * bitMsk;
	return res;
}
void main() {
	color = packFloatToVec4i(gl_FragCoord.z);
}`,aS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
float stepmix(float edge0, float edge1, float E, float x){
	float T = clamp(0.5 * (x - edge0 + E) / E, 0.0, 1.0);
	return mix(edge0, edge1, T);
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0);
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.5;
	float shininess = 50.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float df = max(0.0, dot(n, l));
	float sf = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	const float A = 0.1;
	const float B = 0.3;
	const float C = 0.6;
	const float D = 1.0;
	float E = fwidth(df);
	if (df > A - E && df < A + E) df = stepmix(A, B, E, df);
	else if (df > B - E && df < B + E) df = stepmix(B, C, E, df);
	else if (df > C - E && df < C + E) df = stepmix(C, D, E, df);
	else if (df < A) df = 0.0;
	else if (df < B) df = B;
	else if (df < C) df = C;
	else df = D;
	E = fwidth(sf);
	if (sf > 0.5 - E && sf < 0.5 + E)
		sf = smoothstep(0.5 - E, 0.5 + E, sf);
	else
		sf = step(0.5, sf);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(df, 0.0) * vClr.rgb * diffuse;
	color.rgb = a + d + (specular * sf);
	color.a = opacity;
}`,rS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.25;
	float shininess = 10.0;
	float PenWidth = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	float view = abs(dot(n,r)); //with respect to viewer
	if (PenWidth < view) discard;
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color.rgb = a + d + s;
	color.a = opacity;
}`,oS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float diffuse = 1.0;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 0.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d = lightNormDot * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(d + s, opacity);
}`,lS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float diffuse = 1.4;
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(normalize(vN), l), 0.0);
	color = vec4(lightNormDot * vClr.rgb * diffuse, opacity);
}`,cS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float specularRGB = 0.7;
	float specularWhite = 0.3;
	float shininess = 10.0;
	float diffuse = 1.0;
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	vec3 n = normalize(vN);
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d3 = lightNormDot * vClr.rgb * diffuse;
	float s = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 s3 = specularRGB * s * vClr.rgb;
	s *= specularWhite;
	color = vec4(d3 + s3 + s, opacity);
}`,uS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
in vec4 vPc;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	// Compute curvature
	vec3 dx = dFdx(n);
	vec3 dy = dFdy(n);
	vec3 xneg = n - dx;
	vec3 xpos = n + dx;
	vec3 yneg = n - dy;
	vec3 ypos = n + dy;
	float depth = length(vPc.xyz);
	float curv = (cross(xneg, xpos).y - cross(yneg, ypos).x) / depth;
	//at this stage 0.5 for flat, with valleys dark and ridges bright
	curv = 1.0 - (curv + 0.5);
	//clamp
	curv =  min(max(curv, 0.0), 1.0);
	// easing function
	curv = pow(curv, 0.5);
	//modulate ambient and diffuse with curvature
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.6;
	float diffuse = 0.6;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 lightPosition = vec3(0.0, 10.0, -2.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient * curv;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,hS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,fS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
uniform sampler2D matCap;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	vec2 uv = n.xy * 0.5 + 0.5;
	uv.y = 1.0 - uv.y;
	vec3 clr = texture(matCap,uv.xy).rgb * vClr.rgb;
	color = vec4(clr, opacity);
}`,dS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float ambient = 0.35;
	float diffuse = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	color = vec4(a + d, opacity);
}`,mS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 up = vec3(0.0, 1.0, 0.0);
	float ax = dot(n, up) * 0.5 + 0.5;  //Shreiner et al. (2013) OpenGL Programming Guide, 8th Ed., p 388. ISBN-10: 0321773039
	vec3 upClr = vec3(1.0, 1.0, 0.95);
	vec3 downClr = vec3(0.4, 0.4, 0.6);
	vec3 a = vClr.rgb * ambient;
	a *= mix(downClr, upClr, ax);
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,gS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
//Spherical harmonics constants
const float C1 = 0.429043;
const float C2 = 0.511664;
const float C3 = 0.743125;
const float C4 = 0.886227;
const float C5 = 0.247708;
//Spherical harmonics coefficients
// Ramamoorthi, R., and P. Hanrahan. 2001b. "An Efficient Representation for Irradiance Environment Maps." In Proceedings of SIGGRAPH 2001, pp. 497–500.
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// Constants for Eucalyptus Grove lighting
const vec3 L00  = vec3( 0.3783264,  0.4260425,  0.4504587);
const vec3 L1m1 = vec3( 0.2887813,  0.3586803,  0.4147053);
const vec3 L10  = vec3( 0.0379030,  0.0295216,  0.0098567);
const vec3 L11  = vec3(-0.1033028, -0.1031690, -0.0884924);
const vec3 L2m2 = vec3(-0.0621750, -0.0554432, -0.0396779);
const vec3 L2m1 = vec3( 0.0077820, -0.0148312, -0.0471301);
const vec3 L20  = vec3(-0.0935561, -0.1254260, -0.1525629);
const vec3 L21  = vec3(-0.0572703, -0.0502192, -0.0363410);
const vec3 L22  = vec3( 0.0203348, -0.0044201, -0.0452180);
vec3 SH(vec3 vNormal) {
	vNormal = vec3(vNormal.x,vNormal.z,vNormal.y);
	vec3 diffuseColor = C1 * L22 * (vNormal.x * vNormal.x - vNormal.y * vNormal.y) +
	C3 * L20 * vNormal.z * vNormal.z +
	C4 * L00 -
	C5 * L20 +
	2.0 * C1 * L2m2 * vNormal.x * vNormal.y +
	2.0 * C1 * L21  * vNormal.x * vNormal.z +
	2.0 * C1 * L2m1 * vNormal.y * vNormal.z +
	2.0 * C2 * L11  * vNormal.x +
	2.0 * C2 * L1m1 * vNormal.y +
	2.0 * C2 * L10  * vNormal.z;
	return diffuseColor;
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.1;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 a = vClr.rgb * ambient;
	vec3 d = vClr.rgb * diffuse * SH(-reflect(n, vec3(l.x, l.y, -l.z)) );
	color = vec4(a + d + s, opacity);
}`,pS=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
flat out vec3 vN;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,xp=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
flat in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,AS=`#version 300 es
#line 1260
//precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 volScale;
uniform vec3 texVox;
uniform vec4 clipPlane;
uniform highp sampler3D volume, overlay;
uniform float overlays;
uniform float clipThick;
uniform vec3 clipLo;
uniform vec3 clipHi;
uniform mat4 matRAS;
uniform mat4 mvpMtx;
uniform float drawOpacity, renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform int backgroundMasksOverlays;
in vec3 vColor;
out vec4 fColor;
`+co+`
void main() {
	int id = 254;
	vec3 start = vColor;
	gl_FragDepth = 0.0;
	fColor = vec4(0.0, 0.0, 0.0, 0.0); //assume no hit: ID = 0
	float fid = float(id & 255)/ 255.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) return;//discard; //length limit for parallel rays
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	dir = normalize(dir);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float lenNoClip = len;
	bool isClip = false;
	vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	if (isClip) fColor = vec4(samplePos.xyz, 253.0 / 255.0); //assume no hit: ID = 0
	//start: OPTIONAL fast pass: rapid traversal until first hit
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			break;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//end: fast pass
	if ((overlays < 1.0) || (backgroundMasksOverlays > 0)) {
		return; //background hit, no overlays
	}
	//overlay pass
	len = min(lenNoClip, samplePos.a); //only find overlay closer than background
	samplePos = vec4(start.xyz, 0.0); //ray position
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			return;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//if (fColor.a == 0.0) discard; //no hit in either background or overlays
	//you only get here if there is a hit with the background that is closer than any overlay
}`,vS=`#version 300 es
// an attribute is an input (in) to a vertex shader.
// It will receive data from a buffer
layout(location=0)  in vec3 a_position;
layout(location=1)  in vec3 a_color;
// A matrix to transform the positions by
uniform mat4 u_matrix;
out vec3 vColor;
// all shaders have a main function
void main() {
	// Multiply the position by the matrix.
	vec4 pos = vec4(a_position, 1.0);
	gl_Position = u_matrix * vec4(pos);
	vColor = a_color;
}
`,xS=`#version 300 es
precision highp float;
uniform vec4 u_color;
in vec3 vColor;
out vec4 outColor;
void main() {
	outColor = vec4(vColor, 1.0);
}`,yS=`#version 300 es
#line 1359
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	vec2 viewCoord = (vPos.xy - 0.5) * 2.0;
	gl_Position = vec4((vPos.xy - 0.5) * 2.0, 0.0, 1.0);
}`,wS=`#version 300 es
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform lowp sampler3D in3D;
void main(void) {
 FragColor = texture(in3D, vec3(TexCoord.xy, coordZ));
}`,Nl=`#version 300 es
#line 286
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
    TexCoord = vPos.xy;
    gl_Position = vec4( (vPos.xy-vec2(0.5,0.5))* 2.0, 0.0, 1.0);
}`,bS=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 samp = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
 FragColor = samp*0.125;
}`,CS=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 XYZ = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 vec4 OYZ = texture(intensityVol,vx+vec3(0.0,+dY,+dZ));
 vec4 xYZ = texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 vec4 XOZ = texture(intensityVol,vx+vec3(+dX,0.0,+dZ));
 vec4 OOZ = texture(intensityVol,vx+vec3(0.0,0.0,+dZ));
 vec4 xOZ = texture(intensityVol,vx+vec3(-dX,0.0,+dZ));
 vec4 XyZ = texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 vec4 OyZ = texture(intensityVol,vx+vec3(0.0,-dY,+dZ));
 vec4 xyZ = texture(intensityVol,vx+vec3(-dX,-dY,+dZ));

 vec4 XYO = texture(intensityVol,vx+vec3(+dX,+dY,0.0));
 vec4 OYO = texture(intensityVol,vx+vec3(0.0,+dY,0.0));
 vec4 xYO = texture(intensityVol,vx+vec3(-dX,+dY,0.0));
 vec4 XOO = texture(intensityVol,vx+vec3(+dX,0.0,0.0));
 vec4 OOO = texture(intensityVol,vx+vec3(0.0,0.0,0.0));
 vec4 xOO = texture(intensityVol,vx+vec3(-dX,0.0,0.0));
 vec4 XyO = texture(intensityVol,vx+vec3(+dX,-dY,0.0));
 vec4 OyO = texture(intensityVol,vx+vec3(0.0,-dY,0.0));
 vec4 xyO = texture(intensityVol,vx+vec3(-dX,-dY,0.0));

 vec4 XYz = texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 vec4 OYz = texture(intensityVol,vx+vec3(0.0,+dY,-dZ));
 vec4 xYz = texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 vec4 XOz = texture(intensityVol,vx+vec3(+dX,0.0,-dZ));
 vec4 OOz = texture(intensityVol,vx+vec3(0.0,0.0,-dZ));
 vec4 xOz = texture(intensityVol,vx+vec3(-dX,0.0,-dZ));
 vec4 Xyz = texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 vec4 Oyz = texture(intensityVol,vx+vec3(0.0,-dY,-dZ));
 vec4 xyz = texture(intensityVol,vx+vec3(-dX,-dY,-dZ));

 vec4 blurred = vec4 (0.0, 0.0, 0.0, 0.0);
 blurred.r = 2.0*(xOz.r +xOZ.r +xyO.r +xYO.r +xOO.r +XOz.r +XOZ.r +XyO.r +XYO.r +XOO.r) +xyz.r +xyZ.r +xYz.r +xYZ.r +Xyz.r +XyZ.r +XYz.r +XYZ.r;
 blurred.g = 2.0*(Oyz.r +OyZ.r +xyO.r +XyO.r +OyO.r +OYz.r +OYZ.r +xYO.r +XYO.r +OYO.r) +xyz.r +Xyz.r +xyZ.r +XyZ.r +xYz.r +XYz.r +xYZ.r +XYZ.r;
 blurred.b = 2.0*(Oyz.r +OYz.r +xOz.r +XOz.r +OOz.r +OyZ.r +OYZ.r +xOZ.r +XOZ.r +OOZ.r) +xyz.r +Xyz.r +xYz.r +XYz.r +xyZ.r +XyZ.r +XyZ.r +XYZ.r;
 blurred.a = 0.32*(abs(blurred.r)+abs(blurred.g)+abs(blurred.b));
 // 0.0357 = 1/28 to account for weights, rescale to 2**16,
 FragColor = 0.0357*blurred;
}`,Jv=`
  gradientSample.a = log2(gradientSample.r*gradientSample.r + gradientSample.g*gradientSample.g + gradientSample.b*gradientSample.b + 1.922337562475971e-06) + 18.988706873717717;
`,SS=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  float TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ)).r;
  float TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ)).r;
  float TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ)).r;
  float TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ)).r;
  float BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ)).r;
  float BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ)).r;
  float BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ)).r;
  float BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ)).r;
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r = BAR+BAL+BPR+BPL -TAR-TAL-TPR-TPL;
  gradientSample.g = TPR+TPL+BPR+BPL -TAR-TAL-BAR-BAL;
  gradientSample.b = TAL+TPL+BAL+BPL -TAR-TPR-BAR-BPR;
${Jv}
	// 0.04242020977371934 = 1/(log2(3*8) - log2(1/(255**2*8))) // 3*8 -> max for 1st order gradient
	gradientSample.a *= 0.04242020977371934;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb = (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`,MS=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform float dX2;
uniform float dY2;
uniform float dZ2;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  vec4 TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
  vec4 TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
  vec4 TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
  vec4 TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
  vec4 BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
  vec4 BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
  vec4 BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
  vec4 BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
  vec4 T = texture(intensityVol,vx+vec3(+dX2,0.0,0.0));
  vec4 A = texture(intensityVol,vx+vec3(0.0,+dY2,0.0));
  vec4 R = texture(intensityVol,vx+vec3(0.0,0.0,+dZ2));
  vec4 B = texture(intensityVol,vx+vec3(-dX2,0.0,0.0));
  vec4 P = texture(intensityVol,vx+vec3(0.0,-dY2,0.0));
  vec4 L = texture(intensityVol,vx+vec3(0.0,0.0,-dZ2));
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r = -4.0*B.r +8.0*(BAR.r+BAL.r+BPR.r+BPL.r) -8.0*(TAR.r+TAL.r+TPR.r+TPL.r) +4.0*T.r;
  gradientSample.g = -4.0*P.g +8.0*(TPR.g+TPL.g+BPR.g+BPL.g) -8.0*(TAR.g+TAL.g+BAR.g+BAL.g) +4.0*A.g;
  gradientSample.b = -4.0*L.b +8.0*(TAL.b+TPL.b+BAL.b+BPL.b) -8.0*(TAR.b+TPR.b+BAR.b+BPR.b) +4.0*R.b;
${Jv}
	gradientSample.a *= 0.0325;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb =  (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`,ES=new Float32Array([-1,-1,-1,.28,.28,.28,-1,-1,-1,.28,.28,.28,-1,1,-1,.28,.28,.28,1,-1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,-1,-1,1,.8,.8,.8,-1,-1,1,.8,.8,.8,1,-1,1,.8,.8,.8,-1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,-1,1,-1,0,0,.74,-1,1,-1,0,0,.74,-1,1,1,0,0,.74,1,1,-1,0,0,.74,1,1,1,0,0,.74,1,1,1,0,0,.74,-1,-1,-1,.42,0,.42,-1,-1,-1,.42,0,.42,1,-1,-1,.42,0,.42,-1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,-1,-1,-1,.64,0,0,-1,-1,-1,.64,0,0,-1,-1,1,.64,0,0,-1,1,-1,.64,0,0,-1,1,1,.64,0,0,-1,1,1,.64,0,0,1,-1,-1,0,.5,0,1,-1,-1,0,.5,0,1,1,-1,0,.5,0,1,-1,1,0,.5,0,1,1,1,0,.5,0,1,1,1,0,.5,0,-.45,1,-.8,0,0,0,-.45,1,-.8,0,0,0,-.45,1,.8,0,0,0,-.25,1,-.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.6,0,0,0,-.25,1,.6,0,0,0,-.25,1,.8,0,0,0,.45,1,.6,0,0,0,.25,1,.8,0,0,0,.25,1,.8,0,0,0,.25,1,.1,0,0,0,.25,1,.1,0,0,0,.25,1,.6,0,0,0,.45,1,.1,0,0,0,.45,1,.6,0,0,0,.45,1,.6,0,0,0,-.25,1,-.1,0,0,0,-.25,1,-.1,0,0,0,-.25,1,.1,0,0,0,.25,1,-.1,0,0,0,.45,1,.1,0,0,0,.45,1,.1,0,0,0,.45,-1,-.8,0,0,0,.45,-1,-.8,0,0,0,.05,-1,.8,0,0,0,.25,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,-.25,-1,-.8,0,0,0,-.25,-1,-.8,0,0,0,.05,-1,.8,0,0,0,-.45,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,.13,-1,-.3,0,0,0,.13,-1,-.3,0,0,0,.07,-1,-.1,0,0,0,-.33,-1,-.3,0,0,0,-.27,-1,-.1,0,0,0,-.27,-1,-.1,0,0,0,-.45,.6,1,0,0,0,-.45,.6,1,0,0,0,-.45,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.4,1,0,0,0,-.25,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.8,1,0,0,0,-.25,.6,1,0,0,0,.25,.8,1,0,0,0,.45,.6,1,0,0,0,.45,.6,1,0,0,0,.25,.8,1,0,0,0,.25,.8,1,0,0,0,.25,-.1,1,0,0,0,.45,.6,1,0,0,0,.45,.1,1,0,0,0,.45,.1,1,0,0,0,-.25,.1,1,0,0,0,-.25,.1,1,0,0,0,-.45,-.1,1,0,0,0,.25,.1,1,0,0,0,.25,-.1,1,0,0,0,.25,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.6,1,0,0,0,-.25,-.1,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.8,1,0,0,0,.45,-.6,1,0,0,0,.25,-.8,1,0,0,0,.25,-.8,1,0,0,0,.25,-.4,1,0,0,0,.25,-.4,1,0,0,0,.25,-.6,1,0,0,0,.45,-.4,1,0,0,0,.45,-.6,1,0,0,0,.45,-.6,1,0,0,0,-.1,-.8,-1,0,0,0,-.1,-.8,-1,0,0,0,-.1,.8,-1,0,0,0,.1,-.8,-1,0,0,0,.1,.8,-1,0,0,0,.1,.8,-1,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.6,0,0,0,-1,.45,-.8,0,0,0,-1,.45,-.6,0,0,0,-1,.45,-.6,0,0,0,1,.45,-.8,0,0,0,1,.45,-.8,0,0,0,1,.45,.8,0,0,0,1,.25,-.8,0,0,0,1,.25,.8,0,0,0,1,.25,.8,0,0,0,1,.25,.6,0,0,0,1,.25,.6,0,0,0,1,.25,.8,0,0,0,1,-.45,.6,0,0,0,1,-.25,.8,0,0,0,1,-.25,.8,0,0,0,1,-.25,.1,0,0,0,1,-.25,.1,0,0,0,1,-.25,.6,0,0,0,1,-.45,.1,0,0,0,1,-.45,.6,0,0,0,1,-.45,.6,0,0,0,1,.25,-.1,0,0,0,1,.25,-.1,0,0,0,1,.25,.1,0,0,0,1,-.25,-.1,0,0,0,1,-.45,.1,0,0,0,1,-.45,.1,0,0,0,1,-.25,-.8,0,0,0,1,-.25,-.8,0,0,0,1,-.05,-.1,0,0,0,1,-.45,-.8,0,0,0,1,-.25,-.1,0,0,0,1,-.25,-.1,0,0,0]),Lt=class{constructor(t,i,s,a,o=null,l=null){O(this,"sphereIdx",[]),O(this,"sphereVtx",[]),O(this,"renderShaders",[]),O(this,"isVisible",!0),O(this,"isPickable",!0),O(this,"vertexBuffer"),O(this,"indexCount"),O(this,"indexBuffer"),O(this,"vao"),O(this,"mode"),O(this,"glFlags",0),O(this,"id"),O(this,"colorId"),O(this,"modelMatrix",It()),O(this,"scale",[1,1,1]),O(this,"position",[0,0,0]),O(this,"rotation",[0,0,0]),O(this,"rotationRadians",0),O(this,"extentsMin",[]),O(this,"extentsMax",[]),O(this,"furthestVertexFromOrigin"),O(this,"originNegate"),O(this,"fieldOfViewDeObliqueMM"),O(this,"mm"),this.vertexBuffer=i,this.indexCount=a,this.indexBuffer=o,this.vao=l,this.mode=s,this.id=t,this.colorId=[(t>>0&255)/255,(t>>8&255)/255,(t>>16&255)/255,(t>>24&255)/255]}};O(Lt,"BLEND",1);O(Lt,"CULL_FACE",2);O(Lt,"CULL_FRONT",4);O(Lt,"CULL_BACK",8);O(Lt,"ENABLE_DEPTH_TEST",16);O(Lt,"generateCrosshairs",function(e,t,i,s,a,o,l=20,h=0){const u=Lt.generateCrosshairsGeometry(e,i,s,a,o,l,h);return new Lt(t,u.vertexBuffer,e.TRIANGLES,u.indexCount,u.indexBuffer,u.vao)});O(Lt,"generateCrosshairsGeometry",function(e,t,i,s,a,o=20,l=0){const h=[],u=[],f=a*l;if(f<=0){let A=ut(i[0],t[1],t[2]),x=ut(s[0],t[1],t[2]);Lt.makeCylinder(h,u,A,x,a,o),A=ut(t[0],i[1],t[2]),x=ut(t[0],s[1],t[2]),Lt.makeCylinder(h,u,A,x,a,o),A=ut(t[0],t[1],i[2]),x=ut(t[0],t[1],s[2]),Lt.makeCylinder(h,u,A,x,a,o)}else{let A=ut(i[0],t[1],t[2]),x=ut(t[0]-f,t[1],t[2]);Lt.makeCylinder(h,u,A,x,a,o,!1),A=ut(t[0]+f,t[1],t[2]),x=ut(s[0],t[1],t[2]),Lt.makeCylinder(h,u,A,x,a,o,!1),A=ut(t[0],i[1],t[2]),x=ut(t[0],t[1]-f,t[2]),Lt.makeCylinder(h,u,A,x,a,o,!1),A=ut(t[0],t[1]+f,t[2]),x=ut(t[0],s[1],t[2]),Lt.makeCylinder(h,u,A,x,a,o,!1),A=ut(t[0],t[1],i[2]),x=ut(t[0],t[1],t[2]-f),Lt.makeCylinder(h,u,A,x,a,o,!1),A=ut(t[0],t[1],t[2]+f),x=ut(t[0],t[1],s[2]),Lt.makeCylinder(h,u,A,x,a,o,!1)}const m=e.createBuffer();if(m===null)throw new Error("could not instantiate vertex buffer");e.bindBuffer(e.ARRAY_BUFFER,m),e.bufferData(e.ARRAY_BUFFER,new Float32Array(h),e.STATIC_DRAW);const g=e.createBuffer();if(g===null)throw new Error("could not instantiate index buffer");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,g),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint32Array(u),e.STATIC_DRAW);const p=e.createVertexArray();return e.bindVertexArray(p),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,g),e.bindBuffer(e.ARRAY_BUFFER,m),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,3,e.FLOAT,!1,0,0),e.bindVertexArray(null),{vertexBuffer:m,indexBuffer:g,indexCount:u.length,vao:p}});O(Lt,"getFirstPerpVector",function(e){const t=ut(0,0,0);return e[0]===0?t[0]=1:e[1]===0?t[1]=1:e[2]===0?t[2]=1:(t[0]=e[2],t[1]=e[2],t[2]=-(e[0]+e[1]),xi(t,t)),t});O(Lt,"subdivide",function(e,t){let i=e.length/3,s=t.length/3;const a=s,o=Zt(),l=Zt();for(let h=0;h<a;h++){const u=t[h*3+0],f=t[h*3+1],m=t[h*3+2],g=ut(e[u*3+0],e[u*3+1],e[u*3+2]),p=ut(e[f*3+0],e[f*3+1],e[f*3+2]),A=ut(e[m*3+0],e[m*3+1],e[m*3+2]);ps(o,g,p),xi(l,o),e.push(...l),ps(o,p,A),xi(l,o),e.push(...l),ps(o,g,A),xi(l,o),e.push(...l);let x=[i,i+1,i+2];t.push(...x),x=[u,i,i+2],t.push(...x),x=[i,f,i+1],t.push(...x),t[h*3+0]=i+2,t[h*3+1]=i+1,t[h*3+2]=m,s=s+3,i=i+3}});O(Lt,"weldVertices",function(e,t){const i=e.length/3;let s=0;const a=new Int32Array(i);for(let h=0;h<i-1;h++){if(a[h]!==0)continue;a[h]=s;let u=h*3;const f=e[u],m=e[u+1],g=e[u+2];for(let p=h+1;p<i;p++)u+=3,f===e[u]&&m===e[u+1]&&g===e[u+2]&&(a[p]=s);s++}if(s===i)return e;const o=t.length;for(let h=0;h<o;h++)t[h]=a[t[h]];const l=e.slice(0,s*3-1);for(let h=0;h<i-1;h++){const u=h*3,f=a[h]*3;l[f]=e[u],l[f+1]=e[u+1],l[f+2]=e[u+2]}return l});O(Lt,"makeSphere",function(e,t,i,s=[0,0,0]){let a=[0,0,1,.894,0,.447,.276,.851,.447,-.724,.526,.447,-.724,-.526,.447,.276,-.851,.447,.724,.526,-.447,-.276,.851,-.447,-.894,0,-.447,-.276,-.851,-.447,.724,-.526,-.447,0,0,-1];const o=[0,1,2,0,2,3,0,3,4,0,4,5,0,5,1,7,6,11,8,7,11,9,8,11,10,9,11,6,10,11,6,2,1,7,3,2,8,4,3,9,5,4,10,1,5,6,7,2,7,8,3,8,9,4,9,10,5,10,6,1];Lt.subdivide(a,o),Lt.subdivide(a,o),a=Lt.weldVertices(a,o);for(let f=0;f<a.length;f++)a[f]=a[f]*i;const l=a.length/3;let h=0;for(let f=0;f<l;f++)a[h]=a[h]+s[0],h++,a[h]=a[h]+s[1],h++,a[h]=a[h]+s[2],h++;const u=Math.floor(e.length/3);for(let f=0;f<o.length;f++)o[f]=o[f]+u;t.push(...o),e.push(...a)});O(Lt,"makeCylinder",function(e,t,i,s,a,o=20,l=!0){o<3&&(o=3);const h=Zt();te(h,s,i),xi(h,h);const u=Lt.getFirstPerpVector(h),f=Zt();Ql(f,h,u),xi(f,f);let m=2*o,g=2*o;l&&(g+=2*o,m+=2);const p=Math.floor(e.length/3),A=new Uint32Array(g*3),x=new Float32Array(m*3);function y(T,I){x[T*3+0]=I[0],x[T*3+1]=I[1],x[T*3+2]=I[2]}function b(T,I,R,D){A[T*3+0]=I+p,A[T*3+1]=R+p,A[T*3+2]=D+p}const C=2*o,E=C+1;l&&(y(C,i),y(E,s));const S=Zt(),M=Zt();for(let T=0;T<o;T++){const I=Math.cos(T/o*2*Math.PI),R=Math.sin(T/o*2*Math.PI);S[0]=a*(I*u[0]+R*f[0]),S[1]=a*(I*u[1]+R*f[1]),S[2]=a*(I*u[2]+R*f[2]),ps(M,i,S),y(T,M),ps(M,s,S),y(T+o,M);let D=0;T<o-1&&(D=T+1),b(T*2,T,D,T+o),b(T*2+1,D,D+o,T+o),l&&(b(o*2+T,T,C,D),b(o*2+T+o,E,T+o,D+o))}t.push(...A),e.push(...x)});O(Lt,"makeColoredCylinder",function(e,t,i,s,a,o,l=[192,0,0,255],h=20,u=!1){let f=e.length/3;Lt.makeCylinder(e,t,s,a,o,h,u),f=e.length/3-f;const m=[];for(let g=0;g<f*4-1;g+=4)m[g]=l[0],m[g+1]=l[1],m[g+2]=l[2],m[g+3]=l[3];i.push(...m)});O(Lt,"makeColoredSphere",function(e,t,i,s,a=[0,0,0],o=[0,0,192,255]){let l=e.length/3;Lt.makeSphere(e,t,s,a),l=e.length/3-l;const h=[];for(let u=0;u<l*4-1;u+=4)h[u]=o[0],h[u+1]=o[1],h[u+2]=o[2],h[u+3]=o[3];i.push(...h)});var As=Lt,Wl={};RC(Wl,{$itksnap:()=>TS,$slicer3d:()=>DS,actc:()=>VS,afni_blues_inv:()=>YM,afni_reds_inv:()=>GM,batlow:()=>RS,bcgwhw:()=>BS,bcgwhw_dark:()=>IS,blue:()=>OS,blue2cyan:()=>NS,blue2magenta:()=>FS,blue2red:()=>US,bluegrn:()=>LS,bone:()=>PS,bronze:()=>kS,cet_l17:()=>zS,cividis:()=>jS,cool:()=>YS,copper:()=>HS,copper2:()=>GS,ct_airways:()=>KS,ct_artery:()=>qS,ct_bones:()=>QS,ct_brain:()=>ZS,ct_brain_gray:()=>XS,ct_cardiac:()=>WS,ct_head:()=>JS,ct_kidneys:()=>_S,ct_liver:()=>$S,ct_muscles:()=>tM,ct_scalp:()=>eM,ct_skull:()=>iM,ct_soft:()=>nM,ct_soft_tissue:()=>sM,ct_surface:()=>aM,ct_vessels:()=>rM,ct_w_contrast:()=>oM,cubehelix:()=>lM,electric_blue:()=>cM,freesurfer:()=>uM,ge_color:()=>hM,gold:()=>fM,gray:()=>dM,green:()=>mM,green2cyan:()=>gM,green2orange:()=>pM,hot:()=>vM,hotiron:()=>AM,hsv:()=>xM,inferno:()=>yM,jet:()=>wM,kry:()=>bM,linspecer:()=>CM,lipari:()=>SM,magma:()=>MM,mako:()=>EM,navia:()=>TM,nih:()=>DM,plasma:()=>VM,random:()=>RM,red:()=>IM,redyell:()=>BM,rocket:()=>UM,roi_i256:()=>HM,surface:()=>FM,thermal:()=>NM,turbo:()=>LM,violet:()=>OM,viridis:()=>PM,warm:()=>kM,winter:()=>zM,x_rain:()=>jM});var TS={R:[0,255,0,0,255,0,255,255,0,205,210,102,0,0,46,255,106,221,233,165,255,147,218,75,255,60,255,255,218,0,188,255,255,222,127,139,124,255,70,0,238,238,240,245,184,32,255,25,112,34,248,245,255,144,173,65,255,250,128,50,244,255,123,255,173,255,127,255,143,220,253,255,0,0,128,255,250,148,178,255,135,100,240,250,255,107,135,0,139,245,186,255,255,0,210,255,47,72,175,128,176,255,139,240,255,216,119,219,72,255,199,154,189,240,230,0,85,64,153,205,250,95,0,255,224,176,138,30,240,152,160],G:[0,0,255,0,255,255,0,239,0,133,180,205,0,139,139,228,90,160,150,42,250,112,112,0,182,179,235,228,165,128,143,105,218,184,255,69,252,255,130,100,130,232,255,222,134,178,20,25,128,139,248,255,160,238,255,105,99,240,0,205,164,255,104,165,216,192,255,140,188,20,245,250,206,255,0,250,128,0,34,127,206,149,230,235,245,142,206,0,0,245,85,228,222,191,105,248,79,61,238,128,224,240,0,255,215,191,136,112,209,0,21,205,183,248,230,250,107,224,50,92,250,158,128,69,255,196,43,144,128,251,82],B:[0,0,0,255,0,255,255,213,205,63,140,170,128,139,87,225,205,221,122,42,250,219,214,130,193,113,205,196,32,128,143,180,185,135,0,19,0,224,180,0,238,170,240,179,11,170,147,112,144,34,255,250,122,144,47,225,71,230,0,50,96,240,238,0,230,203,212,0,143,60,230,240,209,127,128,205,114,211,34,80,235,237,140,215,238,35,250,139,139,220,211,181,173,255,30,220,79,139,238,0,230,245,0,255,0,216,153,147,204,255,133,50,107,255,250,154,47,208,204,92,210,160,0,0,255,222,226,255,128,152,45],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130]},DS={labels:["background","tissue","bone","skin","connective tissue","blood","organ","mass","muscle","foreign object","waste","teeth","fat","gray matter","white matter","nerve","vein","artery","capillary","ligament","tendon","cartilage","meniscus","lymph node","lymphatic vessel","cerebro-spinal fluid","bile","urine","feces","gas","fluid","edema","bleeding","necrosis","clot","embolism","head","central nervous system","brain","gray matter of brain","telencephalon","cerebral cortex","right frontal lobe","left frontal lobe","right temporal lobe","left temporal lobe","right parietal lobe","left parietal lobe","right occipital lobe","left occipital lobe","right insular lobe","left insular lobe","right limbic lobe","left limbic lobe","right striatum","left striatum","right caudate nucleus","left caudate nucleus","right putamen","left putamen","right pallidum","left pallidum","right amygdaloid complex","left amygdaloid complex","diencephalon","thalamus","right thalamus","left thalamus","pineal gland","midbrain","substantia nigra","right substantia nigra","left substantia nigra","cerebral white matter","right superior longitudinal fasciculus","left superior longitudinal fasciculus","right inferior longitudinal fasciculus","left inferior longitudinal fasciculus","right arcuate fasciculus","left arcuate fasciculus","right uncinate fasciculus","left uncinate fasciculus","right cingulum bundle","left cingulum bundle","projection fibers","right corticospinal tract","left corticospinal tract","right optic radiation","left optic radiation","right medial lemniscus","left medial lemniscus","right superior cerebellar peduncle","left superior cerebellar peduncle","right middle cerebellar peduncle","left middle cerebellar peduncle","right inferior cerebellar peduncle","left inferior cerebellar peduncle","optic chiasm","right optic tract","left optic tract","right fornix","left fornix","commissural fibers","corpus callosum","posterior commissure","cerebellar white matter","CSF space","ventricles of brain","right lateral ventricle","left lateral ventricle","right third ventricle","left third ventricle","cerebral aqueduct","fourth ventricle","subarachnoid space","spinal cord","gray matter of spinal cord","white matter of spinal cord","endocrine system of brain","pituitary gland","adenohypophysis","neurohypophysis","meninges","dura mater","arachnoid","pia mater","muscles of head","salivary glands","lips","nose","tongue","soft palate","right inner ear","left inner ear","right external ear","left external ear","right middle ear","left middle ear","right eyeball","left eyeball","skull","right frontal bone","left frontal bone","right parietal bone","left parietal bone","right temporal bone","left temporal bone","right sphenoid bone","left sphenoid bone","right ethmoid bone","left ethmoid bone","occipital bone","maxilla","right zygomatic bone","right lacrimal bone","vomer bone","right palatine bone","left palatine bone","mandible","neck","muscles of neck","pharynx","larynx","thyroid gland","right parathyroid glands","left parathyroid glands","skeleton of neck","hyoid bone","cervical vertebral column","thorax","trachea","bronchi","right lung","left lung","superior lobe of right lung","superior lobe of left lung","middle lobe of right lung","inferior lobe of right lung","inferior lobe of left lung","pleura","heart","right atrium","left atrium","atrial septum","ventricular septum","right ventricle of heart","left ventricle of heart","mitral valve","tricuspid valve","aortic valve","pulmonary valve","aorta","pericardium","pericardial cavity","esophagus","thymus","mediastinum","skin of thoracic wall","muscles of thoracic wall","skeleton of thorax","thoracic vertebral column","ribs","sternum","right clavicle","left clavicle","abdominal cavity","abdomen","peritoneum","omentum","peritoneal cavity","retroperitoneal space","stomach","duodenum","small bowel","colon","anus","liver","biliary tree","gallbladder","pancreas","spleen","urinary system","right kidney","left kidney","right ureter","left ureter","urinary bladder","urethra","right adrenal gland","left adrenal gland","female internal genitalia","uterus","right fallopian tube","left fallopian tube","right ovary","left ovary","vagina","male internal genitalia","prostate","right seminal vesicle","left seminal vesicle","right deferent duct","left deferent duct","skin of abdominal wall","muscles of abdominal wall","skeleton of abdomen","lumbar vertebral column","female external genitalia","male external genitalia","skeleton of upper limb","muscles of upper limb","right upper limb","left upper limb","right shoulder","left shoulder","right arm"],R:[0,128,241,177,111,216,221,144,192,220,78,255,230,200,250,244,0,216,183,183,152,111,178,68,111,85,0,214,78,218,170,140,188,216,145,150,177,244,250,200,68,128,83,83,162,162,141,141,182,182,188,188,154,154,177,177,30,30,210,210,48,48,98,98,69,166,122,122,253,145,46,0,0,250,127,127,159,159,125,125,106,106,154,154,126,201,201,78,78,174,174,139,139,148,148,186,186,99,156,156,64,64,138,97,126,194,85,88,88,88,88,88,88,88,88,244,200,250,82,57,60,92,255,255,255,255,201,70,188,177,166,182,229,229,174,174,201,201,194,194,241,203,203,229,229,255,255,209,209,248,248,255,196,255,255,255,242,242,222,177,213,184,150,62,62,62,242,250,255,177,182,175,197,197,172,172,202,224,224,255,206,210,203,233,195,181,152,159,166,218,225,224,255,184,211,47,255,173,188,255,226,253,244,205,205,186,177,255,234,204,180,216,255,205,204,255,221,0,139,249,157,203,185,185,247,247,222,124,249,249,244,255,255,227,213,213,193,216,230,245,245,241,241,177,171,217,212,185,185,198,194,177,177,177,177,177],G:[0,174,214,122,184,101,130,238,104,245,63,250,220,200,250,214,151,101,156,214,189,184,212,172,197,188,145,230,63,255,250,224,65,191,60,98,122,214,250,200,131,174,146,146,115,115,93,93,166,166,135,135,150,150,140,140,111,111,157,157,129,129,153,153,110,113,101,101,135,92,101,108,108,250,150,150,116,116,102,102,174,174,146,146,126,160,160,152,152,140,140,126,126,120,120,135,135,106,171,171,123,123,95,113,161,195,188,106,106,106,106,106,106,106,106,214,200,250,174,157,143,162,244,244,244,244,121,163,91,122,84,105,147,147,122,122,112,112,142,142,213,179,179,204,204,243,243,185,185,223,223,230,172,255,250,237,217,217,198,122,124,105,208,162,162,162,206,210,255,122,228,216,165,165,138,138,164,186,186,245,110,115,108,138,100,85,55,63,70,123,130,97,244,122,171,150,244,121,95,239,202,232,217,179,179,124,122,255,234,142,119,132,253,167,168,224,130,145,150,180,108,136,102,102,182,182,154,186,186,186,170,181,190,153,141,141,123,146,158,172,172,172,172,124,85,198,188,135,135,175,98,122,122,122,122,122],B:[0,128,145,101,210,79,101,144,88,20,0,220,70,235,210,49,206,79,220,211,207,210,242,100,131,255,30,130,0,255,250,228,28,216,66,83,101,49,225,215,98,128,164,164,105,105,137,137,110,110,166,166,201,201,190,190,85,85,166,166,126,126,112,112,53,137,38,38,192,109,131,112,112,225,88,88,163,163,154,154,155,155,83,83,55,133,133,141,141,103,103,177,177,72,72,135,135,24,108,108,147,147,74,158,197,164,255,215,215,215,215,215,215,215,215,49,215,225,128,110,83,109,209,209,209,209,77,117,95,101,94,107,118,118,90,90,73,73,0,0,144,77,77,109,109,152,152,85,85,131,131,138,68,167,160,145,123,123,101,101,109,108,243,114,114,114,142,139,207,101,255,244,145,145,115,115,140,162,162,217,84,89,81,112,73,57,13,27,38,97,104,76,209,154,143,103,209,88,76,172,134,158,154,108,108,161,101,220,194,178,153,105,229,142,143,199,101,30,98,111,162,116,83,83,164,164,132,223,150,150,147,158,165,130,113,113,103,127,140,147,147,151,151,92,68,131,102,134,134,125,79,101,101,101,101,101],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},VS={R:[0,0,24,248,255],G:[0,0,177,254,0],B:[0,136,0,0,0],A:[0,32,64,78,128],I:[0,64,128,156,255]},RS={R:[1,10,15,17,21,27,36,49,65,82,99,118,140,161,183,203,222,238,248,253,253,253,252,250],G:[25,42,56,68,79,88,97,105,111,116,122,127,133,138,142,146,150,155,162,170,178,186,195,204],B:[89,92,95,96,98,98,96,91,83,74,64,55,46,43,49,62,79,100,126,151,175,199,223,250],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},IS={R:[0,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[0,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[0,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},BS={R:[255,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[255,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[255,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},US={R:[0,0,0,0,196,255],G:[0,32,128,128,128,32],B:[0,255,196,0,0,0],A:[0,128,64,64,64,128],I:[0,1,64,128,192,255]},FS={R:[0,255],G:[0,0],B:[255,255],A:[0,128],I:[0,255]},NS={R:[0,0],G:[0,255],B:[255,255],A:[0,128],I:[0,255]},LS={R:[0,0,0,0],G:[0,1,128,255],B:[0,222,127,32],A:[0,0,64,128],I:[0,1,128,255]},OS={R:[0,0,0],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},PS={R:[0,103,255],G:[0,126,255],B:[0,165,255],A:[0,76,128],I:[0,153,255]},kS={R:[0,43,103,199,216,255],G:[0,0,37,155,213,255],B:[0,0,20,97,201,255],A:[0,44,48,54,56,56],I:[0,64,128,196,240,255]},zS={R:[0,9,24,33,40,46,52,57,62,66,70,74,78,81,85,88,91,94,98,101,103,106,109,112,114,117,119,121,124,126,128,130,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,164,166,168,169,171,172,174,175,177,178,180,181,183,184,186,187,189,190,191,193,194,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,222,223,224,224,225,226,226,227,228,228,229,229,230,231,231,232,233,233,234,234,235,235,236,236,236,237,237,237,238,238,238,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,243,243,243,243,243,244,244,244,244,244,244,244,244,244,244,244,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,243,243,243,243,243,243,243,243,243,243,243,243,242,242,242,242,242,242,242,242,241,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,243,243,244,244,245,246,246,247,247,248,249,249,250,250,251,251,252,252,253,253,254,254,254],G:[42,41,41,41,40,40,40,39,39,39,38,38,37,37,36,36,35,35,34,34,33,32,32,31,30,30,30,30,29,29,29,29,28,28,28,27,27,27,26,26,26,25,25,25,24,24,24,24,24,25,25,26,27,27,28,28,29,30,30,31,31,32,33,33,34,34,35,36,36,37,38,39,40,42,43,44,45,47,48,49,50,51,53,54,55,56,57,58,59,60,62,63,64,65,66,68,69,71,72,73,75,76,77,79,80,81,83,84,85,87,88,89,90,92,93,94,95,97,98,100,101,102,104,105,107,108,109,111,112,113,115,116,117,119,120,121,122,124,125,126,128,129,130,132,133,134,136,137,138,140,141,142,144,145,146,147,149,150,151,153,154,155,156,158,159,160,161,163,164,165,167,168,169,170,172,173,174,175,176,178,179,180,181,183,184,185,186,187,189,190,191,192,193,194,196,197,198,199,200,201,203,204,205,206,207,208,209,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,228,229,230,231,232,233,234,235,236,237,238,238,239,240,241,241,242,243,244,244,245,246,247,248,248,249,250,251,251,252,253,254,255],B:[167,167,166,166,166,165,165,165,164,164,164,163,163,162,162,162,161,161,161,160,160,160,159,159,158,158,157,157,156,155,155,154,154,153,153,152,151,151,150,150,149,149,148,147,147,146,146,145,144,144,143,143,142,141,141,140,139,139,138,137,137,136,135,135,134,133,133,132,131,131,130,130,129,128,128,127,127,126,125,125,124,124,123,123,122,121,121,120,119,119,118,118,117,116,116,116,115,115,114,114,113,113,113,112,112,111,111,110,110,109,109,109,108,108,107,107,106,106,106,106,106,105,105,105,105,105,105,105,104,104,104,104,104,103,103,103,103,103,102,102,102,103,103,103,103,104,104,104,104,104,105,105,105,105,106,106,106,106,106,107,107,107,107,108,108,109,110,111,111,112,113,113,114,115,115,116,117,117,118,119,120,120,121,122,122,123,124,125,126,128,129,130,131,132,134,135,136,137,138,140,141,142,143,144,146,147,148,149,150,152,153,155,157,158,160,162,163,165,167,168,170,172,173,175,177,178,180,182,183,185,187,188,190,193,196,199,201,204,207,210,212,215,218,221,224,226,229,232,235,238,240,243,246,249,252,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},jS={R:[0,86,166,255],G:[32,92,156,233],B:[76,108,117,69],A:[0,56,80,88],I:[0,64,192,255]},YS={R:[0,0,0],G:[127,196,254],B:[255,255,255],A:[0,64,128],I:[0,128,255]},GS={R:[0,61,122,183,244,255],G:[0,41,81,122,163,255],B:[0,25,51,76,102,255],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},HS={R:[0,61,122,183,244,255],G:[0,41,81,122,163,203],B:[0,25,51,76,102,127],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},KS={min:-643,max:-235,R:[0,0,0],G:[154,154,154],B:[179,179,101],A:[0,32,0],I:[0,163,255]},qS={min:114,max:800,R:[0,255,255,255],G:[0,0,129,255],B:[0,0,0,255],A:[0,64,88,228],I:[0,80,160,255]},QS={min:180,max:600,R:[0,0,113,255],G:[0,0,109,250],B:[0,0,101,245],A:[0,0,100,160],I:[0,1,128,255]},XS={min:-10,max:110,R:[0,127,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},ZS={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},WS={min:-80,max:1e3,R:[0,189,150,150,150,150,255],G:[0,169,54,54,54,54,240],B:[0,153,52,52,52,52,242],A:[0,32,64,0,0,64,64],I:[0,1,82,92,234,242,255]},JS={min:-590,max:600,R:[0,241,241,248,248,178,178,232,255,255,255],G:[0,156,156,222,222,36,36,51,255,255,255],B:[0,130,130,169,169,24,24,37,255,255,255],A:[0,8,0,0,0,64,64,0,0,222,222],I:[0,2,3,64,122,142,172,182,252,253,255]},_S={min:114,max:302,R:[0,255,255],G:[0,129,255],B:[0,0,255],A:[0,88,228],I:[0,103,255]},$S={min:-23,max:246,R:[0,44,255,255,255],G:[0,128,90,255,255],B:[0,0,70,0,255],A:[0,0,82,184,228],I:[0,64,131,196,255]},tM={min:-100,max:246,R:[0,128,159,255,255,255,255],G:[0,0,56,90,0,255,255],B:[0,0,41,70,0,0,255],A:[0,63,105,135,167,184,228],I:[0,100,128,155,180,209,255]},eM={min:-590,max:600,R:[0,241,241,248,248,178,232,255,255],G:[0,156,156,222,222,36,51,255,255],B:[0,130,130,169,169,24,37,255,255],A:[0,63,105,135,167,184,228,228,228],I:[0,1,52,127,137,162,172,252,255]},iM={min:140,max:1024,R:[0,2,113,255],G:[0,1,109,250],B:[0,1,101,245],A:[0,1,96,168],I:[0,1,128,255]},nM={min:-923,max:679,R:[0,0,0,0,0,255,255,255],G:[154,154,154,154,0,0,254,255],B:[179,179,179,179,0,0,0,255],A:[0,3,8,0,0,10,15,20],I:[0,30,62,88,170,200,232,255]},sM={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},aM={min:-600,max:100,R:[0,134,255],G:[0,109,250],B:[0,101,245],A:[0,60,148],I:[0,128,255]},rM={min:114,max:246,R:[0,255,255],G:[0,128,255],B:[0,128,255],A:[0,64,96],I:[0,87,255]},oM={min:50,max:1e3,R:[98,210,169,128,255],G:[94,26,77,128,255],B:[45,21,74,128,255],A:[0,25,0,4,168],I:[0,41,87,154,255]},lM={R:[0,13,21,26,27,25,22,21,22,28,39,54,75,98,124,148,171,189,202,210,213,211,206,200,195,193,195,201,211,225,240,255],G:[0,5,11,20,31,44,58,72,86,99,109,116,120,122,122,122,121,121,124,129,137,147,161,175,190,205,218,229,238,245,251,255],B:[0,14,30,46,61,71,77,78,75,68,60,52,48,47,53,65,83,105,131,157,183,205,222,235,241,243,242,240,239,240,245,255],A:[0,4,8,12,17,21,25,29,33,37,41,45,50,54,58,62,66,70,74,78,83,87,91,95,99,103,107,111,116,120,124,128],I:[0,8,16,25,33,41,49,58,66,74,82,90,99,107,115,123,132,140,148,156,165,173,181,189,197,206,214,222,230,239,247,255]},cM={R:[0,10,136,255],G:[0,39,220,255],B:[0,223,253,255],A:[0,48,64,70],I:[0,92,192,255]},uM={R:[0,245,205,120,196,220,230,0,122,236,12,204,42,119,220,103,60,255,165,160,0,245,205,120,196,220,230,0,122,236,13,220,103,255,165,160,0,120,200,255,255,164,164,164,234,0,0,0,0,0],G:[0,245,62,18,58,248,148,118,186,13,48,182,204,159,216,255,60,165,42,32,200,245,62,18,58,248,148,118,186,13,48,216,255,165,42,32,200,190,70,148,148,108,108,108,169,0,0,0,0,0],B:[0,245,78,134,250,164,34,14,220,176,255,142,164,176,20,255,60,0,42,240,200,245,78,134,250,164,34,14,220,176,255,20,255,0,42,240,221,150,255,10,10,226,226,226,30,64,112,160,208,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,2,3,4,5,7,8,10,11,12,13,14,15,16,17,18,24,26,28,30,31,41,42,43,44,46,47,49,50,51,52,53,54,58,60,62,63,72,77,78,79,80,81,82,85,251,252,253,254,255]},hM={R:[0,0,128,255,255],G:[0,128,0,128,255],B:[0,125,255,0,255],A:[0,32,64,96,128],I:[0,63,128,192,255]},fM={R:[0,142,227,255],G:[0,85,170,255],B:[0,14,76,255],A:[0,42,84,128],I:[0,85,170,255]},dM={R:[0,255],G:[0,255],B:[0,255],A:[0,128],I:[0,255]},mM={R:[0,0,0],G:[0,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},gM={R:[0,0,0],G:[72,72,255],B:[0,255,255],A:[0,64,128],I:[0,88,255]},pM={R:[0,255,255],G:[72,88,255],B:[0,0,0],A:[0,64,128],I:[0,88,255]},AM={R:[0,255,255,255],G:[0,0,126,255],B:[0,0,0,255],A:[0,64,96,128],I:[0,128,191,255]},vM={R:[3,255,255,255],G:[0,0,255,255],B:[0,0,0,255],A:[0,48,96,128],I:[0,95,191,255]},xM={R:[255,255,0,0,0,255,255],G:[0,255,255,255,0,0,0],B:[0,0,0,255,255,255,0],A:[0,14,28,43,57,71,85],I:[0,43,85,128,170,213,255]},yM={R:[0,120,237,240],G:[0,28,105,249],B:[4,109,37,33],A:[0,56,80,88],I:[0,64,192,255]},wM={R:[0,0,127,255,127],G:[0,127,255,127,0],B:[127,255,127,0,0],A:[0,32,64,96,128],I:[0,63,128,192,255]},bM={R:[0,255,255],G:[0,0,255],B:[0,0,0],A:[0,64,64],I:[0,86,255]},CM={R:[94,50,90,152,215,238,249,254,252,241,209,158],G:[79,131,186,214,240,244,237,210,157,100,57,1],B:[162,189,167,164,155,169,168,123,86,68,79,66],A:[0,12,23,35,47,58,70,81,93,105,116,128],I:[0,23,46,70,93,116,139,162,185,209,232,255]},SM={R:[3,7,13,25,45,67,84,98,110,124,138,154,173,191,210,225,233,233,231,229,230,235,243,253],G:[19,33,48,63,77,87,92,94,95,96,96,97,99,101,106,118,133,149,163,177,192,208,225,245],B:[38,58,79,99,114,122,122,120,117,113,110,105,101,97,94,96,103,112,122,134,149,169,192,218],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},MM={R:[0,148,183,223,247,252],G:[0,44,55,74,112,253],B:[4,128,121,104,92,191],A:[0,44,53,64,75,107],I:[0,107,128,154,179,255]},EM={R:[11,59,55,222],G:[4,45,165,245],B:[5,91,172,229],A:[0,23,70,107],I:[0,56,167,255]},TM={R:[3,5,6,8,12,19,28,36,42,48,54,61,68,76,86,96,110,129,154,181,205,224,239,252],G:[19,32,44,58,72,86,98,108,116,122,128,134,141,149,157,167,178,191,204,216,225,232,239,244],B:[39,60,82,104,123,137,144,145,142,138,134,130,126,121,116,110,105,104,112,131,155,178,198,217],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},DM={R:[0,85,0,0,0,0,0,0,85,255,255,255,172],G:[0,0,0,0,85,170,255,255,255,255,85,0,0],B:[0,170,85,255,255,170,170,0,85,0,0,0,0],A:[0,5,10,21,26,32,37,42,48,53,64,72,85],I:[0,15,31,63,79,95,111,127,143,159,191,217,255]},VM={R:[13,156,237,240],G:[8,23,121,249],B:[135,158,83,33],A:[0,56,80,88],I:[0,64,192,255]},RM={R:[208,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248],G:[182,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21],B:[191,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},IM={R:[0,128,255],G:[0,0,0],B:[0,0,0],A:[0,64,128],I:[0,128,255]},BM={R:[192,224,255],G:[1,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},UM={R:[3,112,144,188,236,246,255],G:[5,31,29,22,76,158,250],B:[26,87,91,86,62,117,235],A:[0,30,38,49,67,85,107],I:[0,73,92,118,160,205,255]},FM={R:[1,240,255],G:[1,128,255],B:[1,128,255],A:[0,76,128],I:[0,153,255]},NM={R:[0,5,18,34,53,72,90,107,126,144,161,178,194,209,222,233,242,248,251,251,249,244,241,252],G:[0,4,10,11,9,11,17,23,30,36,43,50,59,70,83,98,117,136,157,177,199,220,240,254],B:[3,24,50,76,96,106,109,110,108,104,97,89,79,67,55,42,26,12,6,22,47,79,121,164],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},LM={R:[48,48,64,70,65,25,132,195,244,254,218,122],G:[18,18,64,107,150,226,255,241,199,158,57,4],B:[59,59,162,227,255,187,81,52,58,47,7,3],A:[0,22,26,30,34,43,52,57,63,67,77,86],I:[0,1,16,32,49,83,118,140,164,181,219,255]},OM={R:[0,128,255],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},PM={R:[68,49,53,253],G:[1,104,183,231],B:[84,142,121,37],A:[0,56,80,88],I:[0,64,192,255]},kM={R:[255,255,255],G:[127,196,254],B:[0,0,0],A:[0,64,128],I:[0,128,255]},zM={R:[0,0,0],G:[0,128,255],B:[255,196,128],A:[0,64,128],I:[0,128,255]},jM={R:[3,64,0,0,255,255,255],G:[0,0,0,255,255,192,3],B:[0,32,48,56,64,96,128],A:[0,8,16,24,32,52,80],I:[0,32,64,96,160,192,255]},YM={min:0,max:0,R:[0,37],G:[242,0],B:[255,255],A:[0,64],I:[0,255]},GM={R:[255,255],G:[255,11],B:[0,0],A:[0,64],I:[0,255]},HM={min:0,max:0,R:[65,10,223,120,216,207,251,93,252,217,21,253,131,165,173,143,144,217,86,89,63,254,172,1,142,107,42,78,221,8,222,71,127,126,167,33,104,2,208,216,0,251,7,105,2,101,248,190,253,62,255,224,166,37,110,138,45,34,6,37,69,201,43,122,199,37,173,194,103,211,75,159,96,4,239,98,110,193,253,166,40,255,48,130,140,243,101,9,177,220,133,32,4,81,48,48,210,109,60,132,1,119,1,159,247,33,212,187,253,144,196,254,168,79,64,196,39,97,73,173,104,216,217,43,101,119,254,5,237,103,203,122,57,87,251,164,19,75,200,2,252,150,66,0,255,157,23,254,55,16,240,161,69,253,207,195,5,60,255,251,200,217,134,123,253,180,27,246,130,136,250,232,4,125,140,22,253,255,13,180,123,61,254,111,10,185,76,192,255,223,186,61,198,5,172,13,83,172,171,6,23,73,134,133,109,61,213,55,57,132,36,209,2,144,1,253,68,155,3,160,2,77,121,70,67,176,223,131,4,162,232,255,150,94,235,191,207,10,246,0,225,4,209,116,57,112,172,253,1,6,92,227,73,62,135,223],G:[162,50,112,245,4,124,176,243,56,125,183,139,182,68,189,4,225,10,20,223,7,46,31,193,225,250,219,41,2,100,83,181,34,150,72,223,168,248,80,253,7,117,214,2,248,10,3,59,179,160,90,244,146,4,207,4,125,255,96,100,1,208,130,51,116,181,236,53,244,5,165,28,181,86,96,42,254,1,134,194,214,92,41,204,137,86,207,3,143,3,100,239,164,94,65,251,131,244,173,57,143,107,217,53,210,0,148,250,45,198,81,40,61,218,252,88,171,0,248,24,248,4,41,100,187,46,208,145,43,168,121,46,175,250,125,107,233,112,207,231,174,215,53,9,43,153,52,124,128,65,210,147,255,147,63,200,148,254,0,179,241,42,239,2,230,8,82,135,87,16,3,87,86,151,254,8,255,86,53,19,7,192,171,201,253,247,197,103,251,126,0,149,54,183,61,126,79,113,10,103,184,75,11,195,222,136,149,131,8,99,240,177,252,255,198,16,7,68,178,66,191,150,73,26,211,109,78,209,240,254,1,166,247,131,2,0,167,127,133,10,43,99,235,3,214,142,176,82,132,38,10,249,255,215,44,81],B:[176,182,248,37,117,35,96,69,32,152,108,20,237,250,2,89,141,216,111,251,211,149,10,44,214,103,31,251,3,32,252,246,97,1,219,167,197,4,36,116,206,118,106,43,205,204,114,69,127,205,87,80,41,251,145,204,253,161,247,1,149,9,43,253,97,72,136,161,171,181,26,255,108,80,218,214,231,255,84,31,109,4,218,3,217,36,68,85,241,39,221,2,240,2,173,42,206,5,110,46,103,27,212,184,2,207,246,45,116,72,110,253,38,105,248,159,243,81,192,93,141,145,24,157,234,131,57,178,62,75,65,176,148,40,253,66,76,240,51,154,17,251,139,253,207,9,114,49,200,254,96,73,138,118,204,102,137,89,145,161,4,112,66,234,147,178,212,205,185,11,203,131,2,250,118,169,1,185,154,53,171,197,61,175,249,96,15,254,95,5,222,75,246,194,2,61,180,25,133,165,15,233,59,35,221,140,109,7,114,255,198,0,115,168,252,23,242,80,75,142,137,255,12,182,68,201,4,111,37,228,83,248,24,192,249,5,54,223,160,122,160,114,145,119,252,31,253,250,10,214,8,47,0,142,222,70],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},KM=class{constructor(){O(this,"gamma",1),O(this,"version",.1),O(this,"cluts",{});const t=Object.keys(Wl).filter(i=>!i.startsWith("$")).sort(new Intl.Collator("en").compare);for(const i of t)this.cluts[i]=Wl[i]}addColormap(e,t){this.cluts[e]=t}colormaps(){return Object.keys(this.cluts)}colorMaps(){return this.colormaps()}colormapFromKey(e){let t=this.cluts[e];return t!==void 0||(t=this.cluts[e.toLowerCase()],t!==void 0)?t:(e.length>0&&H.warn("No color map named "+e),{min:0,max:0,R:[0,255],G:[0,255],B:[0,255],A:[0,255],I:[0,255]})}colormap(e="",t=!1){const i=this.colormapFromKey(e);return this.makeLut(i.R,i.G,i.B,i.A,i.I,t)}makeLabelLut(e,t=255){if(e.R===void 0||e.G===void 0||e.B===void 0)throw new Error(`Invalid colormap table: ${e}`);const i=e.R.length,s=e.I??[...Array(i).keys()];if(i!==e.G.length||i!==e.B.length||i!==s.length)throw new Error(`colormap does not make sense: ${e} Rs ${e.R.length} Gs ${e.G.length} Bs ${e.B.length} Is ${s.length}`);let a=new Uint8ClampedArray(i).fill(t);a[0]=0,e.A!==void 0&&(a=Uint8ClampedArray.from(e.A));const o=Math.min(...s),l=Math.max(...s),h=l-o+1,u=new Uint8ClampedArray(h*4).fill(0);for(let m=0;m<i;m++){let g=(s[m]-o)*4;u[g++]=e.R[m],u[g++]=e.G[m],u[g++]=e.B[m],u[g++]=a[m]}const f={lut:u,min:o,max:l};if(e.labels){const m=e.labels.length;if(m===h)f.labels=e.labels;else if(m===i){f.labels=Array(h).fill("?");for(let g=0;g<i;g++){const p=s[g];f.labels[p]=e.labels[g]}}}return f}async makeLabelLutFromUrl(e){const i=await(await fetch(e)).json();return this.makeLabelLut(i)}makeDrawLut(e){let t=typeof e=="object"?e:Wl[e];t===void 0&&(t={min:0,max:0,R:[0,255,0,0,255,0,255],G:[0,0,255,0,255,255,0],B:[0,0,0,255,0,255,255],A:[0,255,255,255,255,255,255],I:[0,255]});const i=this.makeLabelLut(t,255);if(i.labels===void 0&&(i.labels=[]),i.labels.length<256){const l=i.labels.length;for(let h=l;h<256;h++)i.labels.push(h.toString())}const s=new Uint8ClampedArray(256*4);let a=0;for(let l=0;l<256;l++)s[a++]=255,s[a++]=0,s[a++]=0,s[a++]=255;s[3]=0;const o=Math.min(i.lut.length,256*4);if(o>0)for(let l=0;l<o;l++)s[l]=i.lut[l];return{lut:s,labels:i.labels}}makeLut(e,t,i,s,a,o){const l=e.length,h=[...e],u=[...t],f=[...i];if(!a){a=new Array(l);for(let A=0;A<l;A++)a[A]=A/(l-1)*255}s||(s=new Array(l).fill(64),s[0]=0);let m=Uint8ClampedArray.from(s),g=Uint8ClampedArray.from(a);if(o)for(let A=0;A<l;A++)h[A]=e[l-1-A],u[A]=t[l-1-A],f[A]=i[l-1-A],m[A]=255-s[l-1-A],g[A]=255-a[l-1-A];const p=new Uint8ClampedArray(256*4);if(typeof g>"u"){g=new Uint8ClampedArray(l).fill(0);for(let A=0;A<l;A++)g[A]=Math.round(A*255/(l-1))}typeof m>"u"&&(m=new Uint8ClampedArray(l).fill(64),m[0]=0);for(let A=0;A<l-1;A++){const x=g[A];let y=g[A+1];A===0&&x!==0&&H.warn("colormap issue: indices expected to start with 0 not ",x),A===g.length-2&&y!==255&&(H.warn("padding colormap: indices expected end with 255 not ",y),y=255);const b=y-x;let C=x*4;for(let E=x;E<=y;E++){const S=(E-x)/b;p[C++]=h[A]+S*(h[A+1]-h[A]),p[C++]=u[A]+S*(u[A+1]-u[A]),p[C++]=f[A]+S*(f[A+1]-f[A]),p[C++]=m[A]+S*(m[A+1]-m[A])}}if(this.gamma===1)return p;for(let A=0;A<255*4;A++)A%4!==3&&(p[A]=Math.pow(p[A]/255,1/this.gamma)*255);return p}},Ht=new KM,hs=class{static getClusterBoundaryU8(e,t){const i=new Array(e.length).fill(!1),s=new Array(e.length).fill(!1);for(let l=0;l<e.length;l++)e[l]>0&&(s[l]=!0);const a=t.length/3;let o=0;for(let l=0;l<a;l++){const h=t[o],u=t[o+1],f=t[o+2];o+=3,!(s[h]===s[u]&&s[h]===s[f]&&s[u]===s[f])&&(i[h]=!0,i[u]=!0,i[f]=!0)}return i}static async gzip(e){const t=new CompressionStream("gzip"),i=t.writable.getWriter();i.write(e).catch(console.error);const s=i.close().catch(console.error),a=new Response(t.readable),o=new Uint8Array(await a.arrayBuffer());return await s,o}static createMZ3(e,t,i=!1,s=null){const o=s instanceof Uint8Array&&s.length===e.length/3*4,l=o?7:3,h=t.length/3,u=e.length/3,f=0,m=16,g=h*3*4,p=u*3*4,A=m+g+p,x=new ArrayBuffer(A),y=new DataView(x);y.setUint16(0,23117,!0),y.setUint16(2,l,!0),y.setUint32(4,h,!0),y.setUint32(8,u,!0),y.setUint32(12,f,!0);let b=m;if(new Uint32Array(x,b,t.length).set(t),b+=g,new Float32Array(x,b,e.length).set(e),o&&(b+=p,new Uint8Array(x,b,s.length).set(s)),i)throw new Error("Call async createMZ3Async() for compression");return x}static async createMZ3Async(e,t,i=!1,s=null){const a=this.createMZ3(e,t,i,s);return i?await this.gzip(new Uint8Array(a)):a}static createOBJ(e,t){let i="";for(let o=0;o<e.length;o+=3)i+=`v ${e[o]} ${e[o+1]} ${e[o+2]}
`;for(let o=0;o<t.length;o+=3)i+=`f ${t[o]+1} ${t[o+1]+1} ${t[o+2]+1}
`;return new TextEncoder().encode(i).buffer}static createSTL(e,t){const i=t.length/3,s=84+i*50,a=new ArrayBuffer(s),o=new DataView(a);for(let h=0;h<80;h++)o.setUint8(h,0);o.setUint32(80,i,!0);let l=84;for(let h=0;h<t.length;h+=3){const u=t[h]*3,f=t[h+1]*3,m=t[h+2]*3;o.setFloat32(l,0,!0),o.setFloat32(l+4,0,!0),o.setFloat32(l+8,0,!0),l+=12,o.setFloat32(l,e[u],!0),o.setFloat32(l+4,e[u+1],!0),o.setFloat32(l+8,e[u+2],!0),l+=12,o.setFloat32(l,e[f],!0),o.setFloat32(l+4,e[f+1],!0),o.setFloat32(l+8,e[f+2],!0),l+=12,o.setFloat32(l,e[m],!0),o.setFloat32(l+4,e[m+1],!0),o.setFloat32(l+8,e[m+2],!0),l+=12,o.setUint16(l,0,!0),l+=2}return a}static downloadArrayBuffer(e,t){const i=new Blob([e],{type:"application/octet-stream"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=t,document.body.appendChild(a),a.style.display="none",a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(s)},0)}static async saveMesh(e,t,i=".mz3",s=!1){let a=new ArrayBuffer(0);return/\.obj$/i.test(i)?a=this.createOBJ(e,t):/\.stl$/i.test(i)?a=this.createSTL(e,t):(/\.mz3$/i.test(i)||(i+=".mz3"),a=await this.createMZ3Async(e,t,s)),i.length>4&&this.downloadArrayBuffer(a,i),a}static getClusterBoundary(e,t){const i=new Uint32Array(e.buffer),s=new Array(i.length).fill(!1),a=t.length/3;let o=0;for(let l=0;l<a;l++){const h=t[o],u=t[o+1],f=t[o+2];o+=3,!(i[h]===i[u]&&i[h]===i[f]&&i[u]===i[f])&&(s[h]=!0,s[u]=!0,s[f]=!0)}return s}static getExtents(e){if(!ArrayBuffer.isView(e)&&!Array.isArray(e)||e.length<3)return{mxDx:0,extentsMin:0,extentsMax:0};let t=0;const i=ut(e[0],e[1],e[2]),s=ut(e[0],e[1],e[2]);for(let l=0;l<e.length;l+=3){const h=ut(e[l],e[l+1],e[l+2]);t=Math.max(t,to(h)),C0(i,i,h),S0(s,s,h)}const a=[i[0],i[1],i[2]],o=[s[0],s[1],s[2]];return{mxDx:t,extentsMin:a,extentsMax:o}}static generateNormals(e,t){const i=[];let s;const a=e.length;let o,l,h,u,f,m,g,p,A;const x=new Float32Array(a),y=t.length;for(s=0;s<y;s+=3){g=t[s]*3,p=t[s+1]*3,A=t[s+2]*3;const b=[e[g],e[g+1],e[g+2]],C=[e[p],e[p+1],e[p+2]],E=[e[A],e[A+1],e[A+2]];o=C[0]-b[0],l=C[1]-b[1],h=C[2]-b[2],u=E[0]-b[0],f=E[1]-b[1],m=E[2]-b[2],i[0]=f*h-m*l,i[1]=m*o-u*h,i[2]=u*l-f*o,x[g]+=i[0],x[g+1]+=i[1],x[g+2]+=i[2],x[p]+=i[0],x[p+1]+=i[1],x[p+2]+=i[2],x[A]+=i[0],x[A+1]+=i[1],x[A+2]+=i[2]}for(s=0;s<a;s+=3){i[0]=-1*x[s],i[1]=-1*x[s+1],i[2]=-1*x[s+2];let b=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];b>0&&(b=1/Math.sqrt(b),i[0]*=b,i[1]*=b,i[2]*=b),x[s]=i[0],x[s+1]=i[1],x[s+2]=i[2]}return x}},xt,qe,Jl,Of,Pr,qM=class{constructor(e){Ur(this,xt),Ur(this,qe,0),Ur(this,Jl,[]),Ur(this,Of,[]),Ur(this,Pr),ra(this,xt,new DataView(e)),this.read()}async extract(e){const t=new Uint8Array(gt(this,xt).buffer.slice(e.startsAt,e.startsAt+e.compressedSize));if(e.compressionMethod===0)return t;if(e.compressionMethod===8){const i=new DecompressionStream("deflate-raw"),s=i.writable.getWriter();s.write(t).catch(console.error);const a=s.close().catch(console.error),o=new Response(i.readable),l=new Uint8Array(await o.arrayBuffer());return await a,l}throw new Error(`Unsupported compression method: ${e.compressionMethod}`)}read(){for(;!gt(this,Pr)&&gt(this,qe)<gt(this,xt).byteLength;){const e=gt(this,xt).getUint32(gt(this,qe),!0);if(e===67324752){const t=this.readLocalFile(gt(this,qe));t.extract=this.extract.bind(this,t),gt(this,Jl).push(t);const i=(t.generalPurpose&8)!==0;if(t.startsAt=gt(this,qe)+30+t.fileNameLength+t.extraLength,t.compressedSize===0&&i){let s=t.startsAt;for(;s+20<=gt(this,xt).byteLength;){if(gt(this,xt).getUint32(s,!0)===134695760&&gt(this,xt).getUint16(s+16,!0)===19280){s+=4;break}s++}t.crc=gt(this,xt).getUint32(s,!0),t.compressedSize=gt(this,xt).getUint32(s+4,!0),t.uncompressedSize=gt(this,xt).getUint32(s+8,!0),ra(this,qe,s+12)}else ra(this,qe,t.startsAt+t.compressedSize)}else if(e===33639248){const t=this.readCentralDirectory(gt(this,qe));gt(this,Of).push(t),ra(this,qe,gt(this,qe)+(46+t.fileNameLength+t.extraLength+t.fileCommentLength))}else if(e===101010256){ra(this,Pr,this.readEndCentralDirectory(gt(this,qe)));break}else if(e===101075792){ra(this,Pr,this.readEndCentralDirectory64(gt(this,qe)));break}else{console.error(`Unexpected ZIP signature 0x${e.toString(16).padStart(8,"0")} at index ${gt(this,qe)}`);break}}}readLocalFile(e){let t=gt(this,xt).getUint32(e+18,!0),i=gt(this,xt).getUint32(e+22,!0);const s=gt(this,xt).getUint16(e+26,!0),a=gt(this,xt).getUint16(e+28,!0),o=e+30+s;if(this.readString(o,a),t===4294967295&&i===4294967295){let l=o,h=!1;for(;l<o+a-4;){const u=gt(this,xt).getUint16(l,!0),f=gt(this,xt).getUint16(l+2,!0);if(l+=4,u===1)if(f>=16){i=Number(gt(this,xt).getBigUint64(l,!0)),l+=8,t=Number(gt(this,xt).getBigUint64(l,!0)),h=!0;break}else throw new Error(`ZIP64 extra field found but is too small (expected at least 16 bytes, got ${f}).`);l+=f}if(!h)throw new Error("ZIP64 format missing extra field with signature 0x0001.")}return{signature:this.readString(e,4),version:gt(this,xt).getUint16(e+4,!0),generalPurpose:gt(this,xt).getUint16(e+6,!0),compressionMethod:gt(this,xt).getUint16(e+8,!0),lastModifiedTime:gt(this,xt).getUint16(e+10,!0),lastModifiedDate:gt(this,xt).getUint16(e+12,!0),crc:gt(this,xt).getUint32(e+14,!0),compressedSize:t,uncompressedSize:i,fileNameLength:s,extraLength:a,fileName:this.readString(e+30,s),extra:this.readString(e+30+s,a)}}readCentralDirectory(e){return{versionCreated:gt(this,xt).getUint16(e+4,!0),versionNeeded:gt(this,xt).getUint16(e+6,!0),fileNameLength:gt(this,xt).getUint16(e+28,!0),extraLength:gt(this,xt).getUint16(e+30,!0),fileCommentLength:gt(this,xt).getUint16(e+32,!0),diskNumber:gt(this,xt).getUint16(e+34,!0),internalAttributes:gt(this,xt).getUint16(e+36,!0),externalAttributes:gt(this,xt).getUint32(e+38,!0),offset:gt(this,xt).getUint32(e+42,!0),comments:this.readString(e+46,gt(this,xt).getUint16(e+32,!0))}}readEndCentralDirectory(e){const t=gt(this,xt).getUint16(e+20,!0);return{numberOfDisks:gt(this,xt).getUint16(e+4,!0),centralDirectoryStartDisk:gt(this,xt).getUint16(e+6,!0),numberCentralDirectoryRecordsOnThisDisk:gt(this,xt).getUint16(e+8,!0),numberCentralDirectoryRecords:gt(this,xt).getUint16(e+10,!0),centralDirectorySize:gt(this,xt).getUint32(e+12,!0),centralDirectoryOffset:gt(this,xt).getUint32(e+16,!0),commentLength:t,comment:this.readString(e+22,t)}}readEndCentralDirectory64(e){const t=Number(gt(this,xt).getBigUint64(e+0,!0));return{numberOfDisks:gt(this,xt).getUint32(e+16,!0),centralDirectoryStartDisk:gt(this,xt).getUint32(e+20,!0),numberCentralDirectoryRecordsOnThisDisk:Number(gt(this,xt).getBigUint64(e+24,!0)),numberCentralDirectoryRecords:Number(gt(this,xt).getBigUint64(e+32,!0)),centralDirectorySize:Number(gt(this,xt).getBigUint64(e+40,!0)),centralDirectoryOffset:Number(gt(this,xt).getBigUint64(e+48,!0)),commentLength:t,comment:""}}readString(e,t){return Array.from({length:t},(i,s)=>String.fromCharCode(gt(this,xt).getUint8(e+s))).join("")}get entries(){return gt(this,Jl)}};xt=new WeakMap;qe=new WeakMap;Jl=new WeakMap;Of=new WeakMap;Pr=new WeakMap;var ft=class fa{static arrayBufferToBase64(t){const i=new Uint8Array(t);return fa.uint8tob64(i)}static async decompress(t){const i=t[0]===31&&t[1]===139&&t[2]===8?"gzip":t[0]===120&&(t[1]===1||t[1]===94||t[1]===156||t[1]===218)?"deflate":"deflate-raw",s=new DecompressionStream(i),a=s.writable.getWriter();a.write(t).catch(console.error);const o=a.close().catch(console.error),l=new Response(s.readable),h=new Uint8Array(await l.arrayBuffer());return await o,h}static async decompressToBuffer(t){const i=await fa.decompress(t);return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}static async readMatV4(t){let i=t.byteLength;if(i<40)throw new Error("File too small to be MAT v4: bytes = "+t.byteLength);let s=new DataView(t),a=s.getUint16(0,!0),o=t;if(a===35615||a===8075){const A=await this.decompress(new Uint8Array(t));s=new DataView(A.buffer),a=s.getUint16(0,!0),o=A.buffer,i=o.byteLength}const l=new TextDecoder("utf-8"),h=new Uint8Array(o);let u=0;const f={};function m(A){return Math.floor(A/10)%10}function g(A,x,y){const b=new Uint8Array(h.subarray(x,y));return A===1?new Float32Array(b.buffer):A===2?new Int32Array(b.buffer):A===3?new Int16Array(b.buffer):A===4?new Uint16Array(b.buffer):A===5?new Uint8Array(b.buffer):new Float64Array(b.buffer)}function p(){const A=s.getUint32(u,!0),x=s.getUint32(u+4,!0),y=s.getUint32(u+8,!0),b=s.getUint32(u+12,!0),C=s.getUint32(u+16,!0);if(u+=20,b!==0)throw new Error("Matlab V4 reader does not support imaginary numbers");const E=x*y;if(E<1)throw new Error("mrows * ncols must be greater than one");const S=new Uint8Array(h.subarray(u,u+C)),M=l.decode(S).trim().replaceAll("\0",""),T=m(A);let I=8;if(T>=1&&T<=2)I=4;else if(T>=3&&T<=4)I=2;else if(T===5)I=1;else if(T!==0)throw new Error("impossible Matlab v4 datatype");if(u+=C,A>50)throw new Error("Does not appear to be little-endian V4 Matlab file");const R=u+E*I;f[M]=g(T,u,R),u=R}for(;u+20<i;)p();return f}static b64toUint8(t){const i=atob(t),s=i.length,a=new Uint8Array(s);for(let o=0;o<s;o++)a[o]=i.charCodeAt(o);return a}static uint8tob64(t){let i="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=t.byteLength,o=a%3,l=a-o;let h,u,f,m,g;for(let p=0;p<l;p=p+3)g=t[p]<<16|t[p+1]<<8|t[p+2],h=(g&16515072)>>18,u=(g&258048)>>12,f=(g&4032)>>6,m=g&63,i+=s[h]+s[u]+s[f]+s[m];return o===1?(g=t[l],h=(g&252)>>2,u=(g&3)<<4,i+=s[h]+s[u]+"=="):o===2&&(g=t[l]<<8|t[l+1],h=(g&64512)>>10,u=(g&1008)>>4,f=(g&15)<<2,i+=s[h]+s[u]+s[f]+"="),i}static download(t,i,s){const a=document.createElement("a"),o=Array.isArray(t)?t:[t],l=new Blob(o,{type:s});a.href=URL.createObjectURL(l),a.download=i,a.click()}static readFileAsync(t){return new Promise((i,s)=>{const a=new FileReader;a.onload=()=>{i(a.result)},a.onerror=s,a.readAsArrayBuffer(t)})}static blobToBase64(t){return new Promise(i=>{const s=new FileReader;s.onloadend=()=>i(s.result),s.readAsDataURL(t)})}static async decompressBase64String(t){const i=atob(t),s=new ArrayBuffer(i.length),a=new Uint8Array(s);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return fa.decompressArrayBuffer(a)}static async compressToBase64String(t){const i=await fa.compressStringToArrayBuffer(t);return fa.uint8tob64(new Uint8Array(i))}static strToU8(t,i){if(i){const u=new Uint8Array(t.length);for(let f=0;f<t.length;++f)u[f]=t.charCodeAt(f);return u}const s=t.length,a=(u,f,m)=>((m==null||m>u.length)&&(m=u.length),new Uint8Array(u.subarray(f,m)));let o=new Uint8Array(t.length+(t.length>>1)),l=0;const h=u=>{o[l++]=u};for(let u=0;u<s;++u){if(l+5>o.length){const m=new Uint8Array(l+8+(s-u<<1));m.set(o),o=m}let f=t.charCodeAt(u);f<128||i?h(f):f<2048?(h(192|f>>6),h(128|f&63)):(f>55295&&f<57344,f=65536+(f&1047552)|t.charCodeAt(++u)&1023,h(240|f>>18),h(128|f>>12&63),h(128|f>>6&63),h(128|f&63))}return a(o,0,l)}static async compress(t,i="gzip"){const s=new CompressionStream(i),a=s.writable.getWriter();a.write(t).catch(console.error);const o=a.close().catch(console.error),h=await new Response(s.readable).arrayBuffer();return await o,h}static async compressStringToArrayBuffer(t){const i=this.strToU8(t);return await this.compress(i)}static isArrayBufferCompressed(t){if(t&&t.byteLength){const i=new Uint8Array(t);return(i[0]<<8|i[1])===8075}else return!1}static strFromU8(t,i){if(i){let s="";for(let a=0;a<t.length;a+=16384)s+=String.fromCharCode.apply(null,t.subarray(a,a+16384));return s}else{const s=(h,u,f)=>((u==null||u<0)&&(u=0),(f==null||f>h.length)&&(f=h.length),new Uint8Array(h.subarray(u,f))),a=h=>{for(let u="",f=0;;){let m=h[f++];const g=(m>127)+(m>223)+(m>239);if(f+g>h.length)return{s:u,r:s(h,f-1)};g?g===3?(m=((m&15)<<18|(h[f++]&63)<<12|(h[f++]&63)<<6|h[f++]&63)-65536,u+=String.fromCharCode(55296|m>>10,56320|m&1023)):g&1?u+=String.fromCharCode((m&31)<<6|h[f++]&63):u+=String.fromCharCode((m&15)<<12|(h[f++]&63)<<6|h[f++]&63):u+=String.fromCharCode(m)}},{s:o,r:l}=a(t);if(l.length)throw new Error("Unexpected trailing bytes in UTF-8 decoding");return o}}static async decompressArrayBuffer(t){const i=await this.decompress(new Uint8Array(t));return this.strFromU8(i)}static arraysAreEqual(t,i){return tC(t,i)}static range(t,i,s){return Array.from({length:(i-t)/s+1},(a,o)=>t+o*s)}static sph2cartDeg(t,i){const s=-i*(Math.PI/180),a=(t-90)%360*(Math.PI/180),o=[Math.cos(s)*Math.cos(a),Math.cos(s)*Math.sin(a),Math.sin(s)],l=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);return l<=0||(o[0]/=l,o[1]/=l,o[2]/=l),o}static vox2mm(t,i){const s=he(i);ai(s,s);const a=Wt(t[0],t[1],t[2],1);return Ve(a,a,s),ut(a[0],a[1],a[2])}},Ll=H,$t=class we{static readTRACT(t){const i=t.byteLength;if(i<20)throw new Error("File too small to be niml.tract: bytes = "+i);const s=new DataView(t),a=new Uint8Array(t);let o=0;function l(){for(;o<i&&a[o]!==60;)o++;const y=o;for(;o<i&&a[o]!==62;)o++;return o++,o-y<1?"":new TextDecoder().decode(t.slice(y,o-1)).trim()}let h=l();function u(y){const b=h.indexOf(y);if(b<0)return 0;const C=h.indexOf('"',b)+1,E=h.indexOf('"',C),S=h.slice(C,E);return parseInt(S)}const f=u("N_tracts=");(!h.startsWith("<network")||f<1)&&H.warn("This is not a valid niml.tract file "+h);let m=0;const g=[];g.push(m);const p=[],A=[];for(let y=0;y<f;y++){h=l();const b=u("ni_dimen="),C=u("Bundle_Tag="),E=h.includes("binary.lsbfirst");for(let S=0;S<b;S++){o+=4;const M=s.getUint32(o,E)/3;o+=4;for(let T=0;T<M;T++)p.push(s.getFloat32(o,E)),o+=4,p.push(-s.getFloat32(o,E)),o+=4,p.push(s.getFloat32(o,E)),o+=4;m+=M,g.push(m),A.push(C)}h=l()}const x=[];return x.push({id:"tract",vals:Float32Array.from(A)}),{pts:new Float32Array(p),offsetPt0:new Uint32Array(g),dps:x}}static async readTT(t){let i=new Uint32Array(0),s=new Float32Array(0);const a=await ft.readMatV4(t);if(!("trans_to_mni"in a))throw new Error("TT format file must have 'trans_to_mni'");if(!("voxel_size"in a))throw new Error("TT format file must have 'voxel_size'");if(!("track"in a))throw new Error("TT format file must have 'track'");let o=It();const l=a.trans_to_mni;o=si(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]),ai(o,o);function h(u){const f=new DataView(u.buffer),m=[];let g=0,p=0;for(;p<u.length;){m.push(p);const y=f.getUint32(p,!0);p=p+y+13,g+=y}i=new Uint32Array(m.length+1),s=new Float32Array(g);let A=0;for(let y=0;y<m.length;y++){i[y]=A/3;let b=m[y];const C=f.getUint32(b,!0)/3;let E=f.getInt32(b+4,!0),S=f.getInt32(b+8,!0),M=f.getInt32(b+12,!0);b+=16,s[A++]=E,s[A++]=S,s[A++]=M;for(let T=2;T<=C;T++)E=E+f.getInt8(b++),S=S+f.getInt8(b++),M=M+f.getInt8(b++),s[A++]=E,s[A++]=S,s[A++]=M}for(let y=0;y<A;y++)s[y]=s[y]/32;let x=0;for(let y=0;y<A/3;y++){const b=Wt(s[x],s[x+1],s[x+2],1);Ve(b,b,o),s[x++]=b[0],s[x++]=b[1],s[x++]=b[2]}i[m.length]=A/3}return h(a.track),{pts:s,offsetPt0:i}}static async readTRX(t){function i(A){const x=(A&31744)>>10,y=A&1023;return(A>>15?-1:1)*(x?x===31?y?NaN:1/0:Math.pow(2,x-15)*(1+y/1024):6103515625e-14*(y/1024))}let s=0,a=0,o=new Float32Array([]);const l=[],h=[],u=[],f=[];let m=[],g=!1;const p=new qM(t);for(let A=0;A<p.entries.length;A++){const x=p.entries[A];if(x.uncompressedSize===0)continue;const y=x.fileName.split("/"),b=y.slice(-1)[0];if(b.startsWith("."))continue;const C=y.slice(-2)[0],E=b.split(".")[0],S=await x.extract();if(b.includes("header.json")){const I=new TextDecoder().decode(S);m=JSON.parse(I);continue}let M=0,T=[];if(b.endsWith(".uint64")||b.endsWith(".int64")){M=S.length/8,T=new Uint32Array(M);const I=new Uint32Array(S.buffer);let R=0;for(let D=0;D<M;D++)T[D]=I[R],I[R+1]!==0&&(g=!0),R+=2}else if(b.endsWith(".uint32"))T=new Uint32Array(S.buffer);else if(b.endsWith(".uint16"))T=new Uint16Array(S.buffer);else if(b.endsWith(".uint8"))T=new Uint8Array(S.buffer);else if(b.endsWith(".int32"))T=new Int32Array(S.buffer);else if(b.endsWith(".int16"))T=new Int16Array(S.buffer);else if(b.endsWith(".int8"))T=new Int8Array(S.buffer);else if(b.endsWith(".float64"))T=new Float64Array(S.buffer);else if(b.endsWith(".float32"))T=new Float32Array(S.buffer);else if(b.endsWith(".float16")){M=S.length/2,T=new Float32Array(M);const I=new Uint16Array(S.buffer),R=new Float32Array(65536);for(let D=0;D<65536;D++)R[D]=i(D);for(let D=0;D<M;D++)T[D]=R[I[D]]}else continue;if(M=T.length,C.includes("groups")){h.push({id:E,vals:Float32Array.from(T.slice())});continue}if(C.includes("dpv")){f.push({id:E,vals:Float32Array.from(T.slice())});continue}if(C.includes("dps")){u.push({id:E,vals:Float32Array.from(T.slice())});continue}if(b.startsWith("offsets.")){s=M;for(let I=0;I<M;I++)l[I]=T[I]}b.startsWith("positions.3.")&&(a=M,o=new Float32Array(T))}if(s===0||a===0)throw new Error("Failure reading TRX format (no offsets or points).");if(g)throw new Error("Too many vertices: JavaScript does not support 64 bit integers");return l[s]=a/3,{pts:o,offsetPt0:new Uint32Array(l),dpg:h,dps:u,dpv:f,header:m}}static readTSF(t,i=0){const s=new Float32Array(i),a=t.byteLength;if(a<20)throw new Error("File too small to be TSF: bytes = "+a);const o=new Uint8Array(t);let l=0;function h(){for(;l<a&&o[l]===10;)l++;const p=l;for(;l<a&&o[l]!==10;)l++;return l++,l-p<1?"":new TextDecoder().decode(t.slice(p,l-1))}let u=h();if(!u.includes("mrtrix track scalars"))throw new Error("Not a valid TSF file");let f=-1;for(;l<a&&!u.includes("END");)if(u=h(),u.toLowerCase().startsWith("file:")&&(f=parseInt(u.split(" ").pop())),u.toLowerCase().startsWith("datatype:")&&!u.endsWith("Float32LE"))throw new Error("Only supports TSF files with Float32LE");if(f<20)throw new Error("Not a valid TSF file (missing file offset)");l=f;const m=new DataView(t);let g=0;for(;l+4<=a&&g<i;){const p=m.getFloat32(l,!0);if(l+=4,isFinite(p))s[g++]=p;else if(!isNaN(p))break}return s}static readTCK(t){const i=t.byteLength;if(i<20)throw new Error("File too small to be TCK: bytes = "+i);const s=new Uint8Array(t);let a=0;function o(){for(;a<i&&s[a]===10;)a++;const x=a;for(;a<i&&s[a]!==10;)a++;return a++,a-x<1?"":new TextDecoder().decode(t.slice(x,a-1))}let l=o();if(!l.includes("mrtrix tracks"))throw new Error("Not a valid TCK file");let h=-1;for(;a<i&&!l.includes("END");)l=o(),l.toLowerCase().startsWith("file:")&&(h=parseInt(l.split(" ").pop()));if(h<20)throw new Error("Not a valid TCK file (missing file offset)");a=h;const u=new DataView(t);let f=0,m=new Uint32Array(i/(4*4)),g=0,p=0,A=new Float32Array(i/4);for(m[0]=0;a+12<i;){const x=u.getFloat32(a,!0);a+=4;const y=u.getFloat32(a,!0);a+=4;const b=u.getFloat32(a,!0);if(a+=4,isFinite(x))A[p++]=x,A[p++]=y,A[p++]=b,f++;else if(m[g++]=f,!isNaN(x))break}return A=A.slice(0,p),m=m.slice(0,g),{pts:A,offsetPt0:m}}static async readTRK(t){let i=new DataView(t),s=i.getUint32(0,!0);if(s!==1128354388){let P;if(s===4247762216)throw new Error("zstd TRK decompression is not supported");P=await ft.decompress(new Uint8Array(t)),t=P.buffer,i=new DataView(t),s=i.getUint32(0,!0)}const a=i.getUint32(992,!0),o=i.getUint32(996,!0);if(a>2||o!==1e3||s!==1128354388)throw new Error("Not a valid TRK file");const l=i.getInt16(36,!0),h=[];for(let P=0;P<l;P++){const N=new Uint8Array(t.slice(38+P*20,58+P*20)),k=new TextDecoder().decode(N).split("\0").shift();h.push({id:k.trim(),vals:[]})}const u=i.getFloat32(12,!0),f=i.getFloat32(16,!0),m=i.getFloat32(20,!0),g=si(1/u,0,0,-.5,0,1/f,0,-.5,0,0,1/m,-.5,0,0,0,1),p=i.getInt16(238,!0),A=[];for(let P=0;P<p;P++){const N=new Uint8Array(t.slice(240+P*20,260+P*20)),k=new TextDecoder().decode(N).split("\0").shift();A.push({id:k.trim(),vals:[]})}const x=It();for(let P=0;P<16;P++)x[P]=i.getFloat32(440+P*4,!0);x[15]===0&&(H.warn("TRK vox_to_ras not set"),Vv(x));const y=It();Rv(y,g,x);let b=null,C=null;b=new Int32Array(t.slice(o)),C=new Float32Array(b.buffer);const E=b.length;if(E<1)throw new Error("Empty TRK file.");let S=0,M=0,T=new Uint32Array(b.length/4),I=0,R=new Float32Array(b.length),D=0;for(;S<E;){const P=b[S];S=S+1,T[I++]=M;for(let N=0;N<P;N++){const k=C[S+0],z=C[S+1],q=C[S+2];if(S+=3,R[D++]=k*y[0]+z*y[1]+q*y[2]+y[3],R[D++]=k*y[4]+z*y[5]+q*y[6]+y[7],R[D++]=k*y[8]+z*y[9]+q*y[10]+y[11],l>0)for(let j=0;j<l;j++)h[j].vals.push(C[S]),S++;M++}if(p>0)for(let N=0;N<p;N++)A[N].vals.push(C[S]),S++}const U=[];for(let P=0;P<A.length;P++)U.push({id:A[P].id,vals:Float32Array.from(A[P].vals)});const F=[];for(let P=0;P<h.length;P++)F.push({id:h[P].id,vals:Float32Array.from(h[P].vals)});return T[I++]=M,R=R.slice(0,D),T=T.slice(0,I),{pts:R,offsetPt0:T,dps:U,dpv:F}}static readTxtVTK(t){const a=new TextDecoder("utf-8").decode(t).split(`
`);if(a.length<7||!a[0].startsWith("# vtk DataFile"))throw new Error("Invalid VTK image");if(!a[2].startsWith("ASCII"))throw new Error("Not ASCII VTK mesh");let l=3;for(;a[l].length<1;)l++;if(!a[l].includes("POLYDATA"))throw new Error("Not ASCII VTK polydata");for(l++;a[l].length<1;)l++;if(!a[l].startsWith("POINTS"))throw new Error("Not VTK POINTS");let h=a[l].trim().split(/\s+/);const u=parseInt(h[1]),f=u*3,m=new Float32Array(u*3);let g=0;for(;g<u*3;){l++;const y=a[l].trim().trim().split(/\s+/);for(let b=0;b<y.length&&!(g>=f);b++)m[g]=parseFloat(y[b]),g++}const p=[];for(l++;a[l].length<1;)l++;if(a[l].startsWith("METADATA")){for(;a[l].length>1;)l++;l++}if(h=a[l].trim().split(/\s+/),l++,h[0].includes("LINES")){const x=parseInt(h[1]);if(x<1)throw new Error("Corrupted VTK ASCII");let y=a[l].trim();const b=[];let C=[];if(y.startsWith("OFFSETS")){l++;let E=0;for(;E<x;){y=a[l].trim(),l++;const S=y.trim().split(/\s+/);for(let M=0;M<S.length&&(b[E]=parseInt(S[M]),E++,!(E>=x));M++);}C=Array.from(m)}else{let E=function(){y=a[l].trim();const I=y.trim().split(/\s+/);M=[];for(let R=0;R<I.length;R++)M.push(parseInt(I[R]));T=0,l++},S=0;b[0]=0;let M=[],T=0;E();for(let I=0;I<x;I++){T>=M.length&&E();const R=M[T++];S+=R,b[I+1]=S;for(let D=0;D<R;D++){T>=M.length&&E();const U=M[T++]*3;C.push(m[U+0]),C.push(m[U+1]),C.push(m[U+2])}}}return{pts:Float32Array.from(C),offsetPt0:Uint32Array.from(b)}}else if(h[0].includes("TRIANGLE_STRIPS")){const x=parseInt(h[1]);for(let y=0;y<x;y++){const b=a[l].trim();l++;const C=b.trim().split(/\s+/),E=parseInt(C[0])-2;let S=1;for(let M=0;M<E;M++)M%2?(p.push(parseInt(C[S+2])),p.push(parseInt(C[S+1])),p.push(parseInt(C[S]))):(p.push(parseInt(C[S])),p.push(parseInt(C[S+1])),p.push(parseInt(C[S+2]))),S+=1}}else if(h[0].includes("POLYGONS")){const x=parseInt(h[1]);for(let y=0;y<x;y++){const b=a[l].trim();l++;const C=b.trim().split(/\s+/),E=parseInt(C[0])-2,S=parseInt(C[1]);let M=parseInt(C[2]);for(let T=0;T<E;T++){const I=parseInt(C[3+T]);p.push(S),p.push(M),p.push(I),M=I}}}else throw new Error("Unsupported ASCII VTK datatype "+h[0]);const A=new Uint32Array(p);return{positions:m,indices:A}}static async readLayer(t="",i,s,a=.5,o="warm",l="winter",h=!1,u=null,f=null,m=0){const g={...ZM,colormapInvert:!1,colormapType:0,isTransparentBelowCalMin:!0,isAdditiveBlend:!1,colorbarVisible:!0,colormapLabel:null},p=/(?:\.([^.]+))?$/;let A=p.exec(t)[1];A=A.toUpperCase(),A==="GZ"&&(A=p.exec(t.slice(0,-3))[1],A=A.toUpperCase());const x=s.vertexCount/3;if(s.offsetPt0){if(A!=="TSF")throw new Error("readLayer for streamlines only supports TSF files.");const C=s.pts.length/3,E=t.split("/");let S="Unknown";E.length>1&&E.pop()&&(S=S.split(".").slice(0,-1).join("."));const M=we.readTSF(i,C);s.dpv||(s.dpv=[]);const T=M.reduce((R,D)=>Math.min(R,D)),I=M.reduce((R,D)=>Math.max(R,D));return s.dpv.push({id:S,vals:Float32Array.from(M.slice()),global_min:T,global_max:I,cal_min:T,cal_max:I}),g}if(x<3){H.error("n_vert < 3 in layer");return}if(A==="MZ3"){const C=await we.readMZ3(i,x);g.values=C.scalars,"colormapLabel"in C&&(g.colormapLabel=C.colormapLabel)}else if(A==="ANNOT"){const C=we.readANNOT(i,x,!0);C instanceof Uint32Array?g.values=C:(g.values=C.scalars,g.colormapLabel=C.colormapLabel)}else if(A==="CRV"||A==="CURV"||A==="THICKNESS"||A==="AREA")g.values=we.readCURV(i,x),g.isTransparentBelowCalMin=!1;else if(A==="GII"){const C=await we.readGII(i,x);g.values=C.scalars,g.colormapLabel=C.colormapLabel}else if(A==="MGH"||A==="MGZ"){const C=await we.readMGH(i,x,!0);"scalars"in C?(g.values=C.scalars,g.colormapLabel=C.colormapLabel):g.values=C}else if(A==="NII")g.values=await we.readNII(i,x,s.anatomicalStructurePrimary);else if(A==="SMP")g.values=await we.readSMP(i,x);else if(A==="STC")g.values=we.readSTC(i,x);else if(we.isCurv(i))g.values=we.readCURV(i,x),g.isTransparentBelowCalMin=!1;else return H.warn("Unknown layer overlay format "+t),g;if(!g.values){H.error("no values in layer");return}g.nFrame4D=g.values.length/x,g.frame4D=0,g.outlineBorder=m;let y=g.values[0],b=g.values[0];for(let C=0;C<g.values.length;C++)y=Math.min(y,g.values[C]),b=Math.max(b,g.values[C]);return g.global_min=y,g.global_max=b,g.cal_min=u||0,u||(g.cal_min=y),g.cal_max=f||0,f||(g.cal_max=b),g.cal_minNeg=NaN,g.cal_maxNeg=NaN,g.opacity=a,g.colormap=o,g.colormapNegative=l,g.useNegativeCmap=h,g}static async readSMP(t,i){const s=t.byteLength;let a=new DataView(t),o=a.getUint16(0,!0);if(o>5){const g=await ft.decompress(new Uint8Array(t));a=new DataView(g.buffer),o=a.getUint16(0,!0),t=g.buffer}o>5&&H.error("Unsupported or invalid BrainVoyager SMP version "+o);const l=a.getUint32(2,!0);l!==i&&H.error("SMP file has "+l+" vertices, background mesh has "+i);const h=a.getUint16(6,!0),u=new Float32Array(l*h);let f=9;function m(){const g=f;for(;f<s&&a.getUint8(f)!==0;)f++;return f++,new TextDecoder().decode(t.slice(g,f-1))}m();for(let g=0;g<h;g++){const p={};p.mapType=a.getUint32(f,!0),f+=4,o>=3&&p.mapType===3&&(p.nLags=a.getUint32(f,!0),f+=4,p.mnLag=a.getUint32(f,!0),f+=4,p.mxLag=a.getUint32(f,!0),f+=4,p.ccOverlay=a.getUint32(f,!0),f+=4),p.clusterSize=a.getUint32(f,!0),f+=4,p.clusterCheck=a.getUint8(f),f+=1,p.critThresh=a.getFloat32(f,!0),f+=4,p.maxThresh=a.getFloat32(f,!0),f+=4,o>=4&&(p.includeValuesGreaterThreshMax=a.getUint32(f,!0),f+=4),p.df1=a.getUint32(f,!0),f+=4,p.df2=a.getUint32(f,!0),f+=4,o>=5?(p.posNegFlag=a.getUint32(f,!0),f+=4):p.posNegFlag=3,p.cortexBonferroni=a.getUint32(f,!0),f+=4,p.posMinRGB=[0,0,0],p.posMaxRGB=[0,0,0],p.negMinRGB=[0,0,0],p.negMaxRGB=[0,0,0],o>=2&&(p.posMinRGB[0]=a.getUint8(f),f++,p.posMinRGB[1]=a.getUint8(f),f++,p.posMinRGB[2]=a.getUint8(f),f++,p.posMaxRGB[0]=a.getUint8(f),f++,p.posMaxRGB[1]=a.getUint8(f),f++,p.posMaxRGB[2]=a.getUint8(f),f++,o>=4&&(p.negMinRGB[0]=a.getUint8(f),f++,p.negMinRGB[1]=a.getUint8(f),f++,p.negMinRGB[2]=a.getUint8(f),f++,p.negMaxRGB[0]=a.getUint8(f),f++,p.negMaxRGB[1]=a.getUint8(f),f++,p.negMaxRGB[2]=a.getUint8(f),f++),p.enableSMPColor=a.getUint8(f),f++,o>=4&&(p.lut=m()),p.colorAlpha=a.getFloat32(f,!0),f+=4),p.name=m();const A=new Float32Array(t,f,l);u.set(A,g*l),f+=l*4}return u}static readSTC(t,i){const s=new DataView(t),a=s.getInt32(8,!1);if(a!==i)throw new Error("Overlay has "+a+" vertices, expected "+i);let o=12+a*4;const l=s.getUint32(o,!1);o+=4;const h=new Float32Array(l*a);for(let u=0;u<l*a;u++)h[u]=s.getFloat32(o,!1),o+=4;return h}static isCurv(t){const i=new DataView(t),s=i.getUint8(0),a=i.getUint8(1),o=i.getUint8(2);return s!==255||a!==255||o!==255?(Ll.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),!1):!0}static readCURV(t,i){const s=new DataView(t),a=s.getUint8(0),o=s.getUint8(1),l=s.getUint8(2),h=s.getUint32(3,!1),u=s.getUint32(11,!1);if((a!==255||o!==255||l!==255)&&Ll.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),i!==h)throw new Error("CURV file has different number of vertices ( "+h+")than mesh ("+i+")");if(t.byteLength<15+4*h*u)throw new Error("CURV file smaller than specified");const f=new Float32Array(u*h);let m=15;for(let x=0;x<u*h;x++)f[x]=s.getFloat32(m,!1),m+=4;let g=f[0],p=f[0];for(let x=0;x<f.length;x++)g=Math.min(g,f[x]),p=Math.max(p,f[x]);const A=1/(p-g);for(let x=0;x<f.length;x++)f[x]=1-(f[x]-g)*A;return f}static readANNOT(t,i,s=!1){const a=new DataView(t),o=a.getUint32(0,!1),l=this.decimateLayerVertices(o,i);if(i!==l)throw new Error("ANNOT file has different number of vertices than mesh");if(t.byteLength<4+8*o)throw new Error("ANNOT file smaller than specified");let h=0;const u=new Uint32Array(o);for(let S=0;S<o;S++){const M=a.getUint32(h+=4,!1);u[M]=a.getUint32(h+=4,!1)}if(!s)return u;let f=0;try{f=a.getInt32(h+=4,!1)}catch{return u}if(f!==1||a.getInt32(h+=4,!1)>0)return u;const p=a.getInt32(h+=4,!1),A=a.getInt32(h+=4,!1);h+=A;const x=a.getInt32(h+=4,!1);if(x<1)return u;const y={R:Array(p).fill(0),G:Array(p).fill(0),B:Array(p).fill(0),A:Array(p).fill(0),I:Array(p).fill(0),labels:Array(p).fill("")};for(let S=0;S<x;S++){const M=a.getInt32(h+=4,!1),T=a.getInt32(h+=4,!1);h+=4;let I="";for(let P=0;P<T;P++){const N=a.getUint8(h++);if(N===0)break;I+=String.fromCharCode(N)}h-=4;const R=a.getInt32(h+=4,!1),D=a.getInt32(h+=4,!1),U=a.getInt32(h+=4,!1),F=a.getInt32(h+=4,!1);if(M<0||M>=p){H.warn("annot entry out of range");continue}y.R[M]=R,y.G[M]=D,y.B[M]=U,y.A[M]=F,y.I[M]=(F<<24)+(U<<16)+(D<<8)+R,y.labels[M]=I}const b=new Float32Array(o);b.fill(-1);let C=0;for(let S=0;S<i;S++){const M=u[S];for(let T=0;T<p;T++)if(y.I[T]===M){b[S]=T;break}b[S]<0&&(C++,b[S]=0)}C>0&&H.error(`annot vertex colors do not match ${C} of ${o} vertices.`);for(let S=0;S<p;S++)y.I[S]=S;const E=Ht.makeLabelLut(y);return{scalars:b,colormapLabel:E}}static readNV(t){const i=t.byteLength,s=new Uint8Array(t);let a=0;function o(){for(;a<i&&s[a]===10;)a++;const p=a;for(;a<i&&s[a]!==10;)a++;return a++,a-p<1?"":new TextDecoder().decode(t.slice(p,a-1))}let l=0,h=0,u=0,f=0,m,g;for(;a<i;){const p=o();if(p.startsWith("#"))continue;const A=p.trim().split(/\s+/);if(l<1){l=parseInt(A[0]),m=new Float32Array(l*3);continue}if(u<l*3){m[u]=parseFloat(A[0]),m[u+1]=parseFloat(A[1]),m[u+2]=parseFloat(A[2]),u+=3;continue}if(h<1){h=parseInt(A[0]),g=new Uint32Array(h*3);continue}if(f>=h*3)break;g[f+2]=parseInt(A[0])-1,g[f+1]=parseInt(A[1])-1,g[f+0]=parseInt(A[2])-1,f+=3}return{positions:m,indices:g}}static readASC(t){const i=t.byteLength,s=new Uint8Array(t);let a=0;function o(){for(;a<i&&s[a]===10;)a++;const A=a;for(;a<i&&s[a]!==10;)a++;return a++,a-A<1?"":new TextDecoder().decode(t.slice(A,a-1))}let l=o();l.startsWith("#!ascii")||H.warn("Invalid ASC mesh"),l=o();let h=l.trim().split(/\s+/);const u=parseInt(h[0]),f=parseInt(h[1]),m=new Float32Array(u*3);let g=0;for(let A=0;A<u;A++)l=o(),h=l.trim().split(/\s+/),m[g]=parseFloat(h[0]),m[g+1]=parseFloat(h[1]),m[g+2]=parseFloat(h[2]),g+=3;const p=new Uint32Array(f*3);g=0;for(let A=0;A<f;A++)l=o(),h=l.trim().split(/\s+/),p[g]=parseInt(h[0]),p[g+1]=parseInt(h[1]),p[g+2]=parseInt(h[2]),g+=3;return{positions:m,indices:p}}static readVTK(t){const i=t.byteLength;if(i<20)throw new Error("File too small to be VTK: bytes = "+t.byteLength);const s=new Uint8Array(t);let a=0;function o(y=!0){if(y)for(;a<i&&s[a]===10;)a++;const b=a;for(;a<i&&s[a]!==10;)a++;return a++,a-b<1?"":new TextDecoder().decode(t.slice(b,a-1))}let l=o();if(!l.startsWith("# vtk DataFile"))throw new Error("Invalid VTK mesh");if(l=o(!1),l=o(),l.startsWith("ASCII"))return we.readTxtVTK(t);if(!l.startsWith("BINARY"))throw new Error("Invalid VTK image, expected ASCII or BINARY "+l);if(l=o(),!l.includes("POLYDATA"))throw new Error("Only able to read VTK POLYDATA "+l);l=o(),(!l.includes("POINTS")||!l.includes("double")&&!l.includes("float"))&&H.warn("Only able to read VTK float or double POINTS"+l);const h=l.includes("double");let u=l.trim().split(/\s+/);const m=parseInt(u[1])*3,g=new Float32Array(m),p=new DataView(t);if(h)for(let y=0;y<m;y++)g[y]=p.getFloat64(a,!1),a+=8;else for(let y=0;y<m;y++)g[y]=p.getFloat32(a,!1),a+=4;l=o(),u=l.trim().split(/\s+/);const A=[];if(u[0].includes("LINES")){const y=parseInt(u[1]),b=a;if(l=o(),l.startsWith("OFFSETS")){let M=!1;l.includes("int64")&&(M=!0);const T=new Uint32Array(y);if(M){let R=!1;for(let D=0;D<y;D++){let U=p.getInt32(a,!1);U!==0&&(R=!0),a+=4,U=p.getInt32(a,!1),a+=4,T[D]=U}R&&H.warn("int32 overflow: JavaScript does not support int64")}else for(let R=0;R<y;R++){const D=p.getInt32(a,!1);a+=4,T[R]=D}return{pts:g,offsetPt0:T}}a=b;let C=0;const E=[],S=[];E.push(C);for(let M=0;M<y;M++){const T=p.getInt32(a,!1);a+=4,C+=T,E.push(C);for(let I=0;I<T;I++){const R=p.getInt32(a,!1)*3;a+=4,S.push(g[R+0]),S.push(g[R+1]),S.push(g[R+2])}}return{pts:Float32Array.from(S),offsetPt0:Uint32Array.from(E)}}else if(u[0].includes("TRIANGLE_STRIPS")){const y=parseInt(u[1]);for(let b=0;b<y;b++){const C=p.getInt32(a,!1)-2;a+=4;for(let E=0;E<C;E++)E%2?(A.push(p.getInt32(a+8,!1)),A.push(p.getInt32(a+4,!1)),A.push(p.getInt32(a,!1))):(A.push(p.getInt32(a,!1)),A.push(p.getInt32(a+4,!1)),A.push(p.getInt32(a+8,!1))),a+=4;a+=8}}else if(u[0].includes("POLYGONS")){const y=parseInt(u[1]);for(let b=0;b<y;b++){const C=p.getInt32(a,!1)-2;if(b===0&&C>65535)throw new Error("Invalid VTK binary polygons using little-endian data (MRtrix)");a+=4;const E=p.getInt32(a,!1);a+=4;let S=p.getInt32(a,!1);a+=4;for(let M=0;M<C;M++){const T=p.getInt32(a,!1);a+=4,A.push(E),A.push(S),A.push(T),S=T}}}else throw new Error("Unsupported binary VTK datatype "+u[0]);const x=new Uint32Array(A);return{positions:g,indices:x}}static readWRL(t){const i=new TextDecoder("utf-8").decode(t),s=/coord\s+Coordinate\s*\{\s*point\s*\[([\s\S]*?)\]/,a=/coordIndex\s*\[([\s\S]*?)\]/,o=/color\s+Color\s*\{\s*color\s*\[([\s\S]*?)\]/,l=s.exec(i),h=a.exec(i),u=o.exec(i);if(!l||!h)throw new Error("Invalid WRL file: Could not find vertices or indices.");const f=new Float32Array(l[1].trim().split(/[\s,]+/).map(Number));let m=null;if(u){m=new Float32Array(u[1].trim().split(/[\s,]+/).map(Number));const p=f.length/3;m.length!==p*3&&(console.warn(`Unexpected color count: expected ${p*3}, got ${m.length}`),m=null)}const g=new Uint32Array(h[1].trim().split(/[\s,]+/).map(Number).filter(p=>p!==-1));return{positions:f,indices:g,colors:m}}static readDFS(t){const i=new DataView(t),s=i.getUint32(0,!0),a=i.getUint16(4,!0);(s!==1599292996||a!==17740)&&H.warn("Not a little-endian brainsuite DFS mesh");const o=i.getUint32(12,!0),l=i.getUint32(24,!0),h=i.getUint32(28,!0),u=i.getUint32(48,!0);let f=o;const m=new Uint32Array(t,f,l*3);f+=l*3*4;const g=new Float32Array(t,f,h*3);for(let A=0;A<h*3;A+=3){const x=g[A];g[A]=g[A+1],g[A+1]=x}let p;return u>=0&&(p=new Float32Array(t,u,h*3)),{positions:g,indices:m,colors:p}}static async readMZ3(t,i=0){if(t.byteLength<20)throw new Error("File too small to be mz3: bytes = "+t.byteLength);let s=new DataView(t),a=s.getUint16(0,!0),o=t;if(a===35615||a===8075){const I=await ft.decompress(new Uint8Array(t));s=new DataView(I.buffer),a=s.getUint16(0,!0),o=I.buffer}const l=s.getUint16(2,!0),h=s.getUint32(4,!0);let u=s.getUint32(8,!0);const f=s.getUint32(12,!0);if(Ll.debug("MZ3 magic %d attr %d face %d vert %d skip %d",a,l,h,u,f),a!==23117)throw new Error("Invalid MZ3 file");const m=(l&1)!==0,g=(l&2)!==0,p=(l&4)!==0;let A=(l&8)!==0;const x=(l&16)!==0;if(l>63)throw new Error("Unsupported future version of MZ3 file");let y=4;x&&(y=8);let b=0;if(i>0&&!m&&h<1&&!p&&(A=!0),A){let I=i;i===0&&(I=u);const R=16+f+(m?1:0)*h*12+(g?1:0)*I*12+(p?1:0)*I*4,D=Math.floor((o.byteLength-R)/y);u!==i&&D%i===0&&(H.warn("Issue 729: mz3 mismatch scalar NVERT does not match mesh NVERT"),u=i),b=Math.floor(D/u),b<1&&(H.warn("Corrupt MZ3: file reports NSCALAR but not enough bytes"),A=!1)}if(u<3&&i<3)throw new Error("Not a mesh MZ3 file (maybe scalar)");i>0&&i!==u&&H.warn("Layer has "+u+"vertices, but background mesh has "+i);let C=16+f,E=null;m&&(E=new Uint32Array(o,C,h*3),C+=h*3*4);let S=null;g&&(S=new Float32Array(o,C,u*3),C+=u*3*4);let M=null;if(p){M=new Float32Array(u*3);const I=new Uint8Array(o,C,u*4);C+=u*4;let R=0,D=0;for(let U=0;U<u;U++){for(let F=0;F<3;F++)M[R]=I[D]/255,R++,D++;D++}}let T=new Float32Array;if((!p||i>0)&&A&&b>0){if(x){const I=new Float64Array(o,C,b*u);T=Float32Array.from(I)}else T=new Float32Array(o,C,b*u);C+=y*b*u}if(i>0&&p&&A){let I=T[0];for(let U=0;U<u;U++)I=Math.max(I,T[U]);const R={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let U=0;U<=I;U++)for(let F=0;F<u;F++)if(U===T[F]){const P=F*3;R.I.push(U),R.R.push(M[P]*255),R.G.push(M[P+1]*255),R.B.push(M[P+2]*255),R.A.push(255),R.labels.push(`${U}`);break}const D=Ht.makeLabelLut(R);return{scalars:T,colormapLabel:D}}return i>0?{scalars:T}:{positions:S,indices:E,scalars:T,colors:M}}static readPLY(t){const i=t.byteLength,s=new Uint8Array(t);let a=0;function o(){for(;a<i&&s[a]===10;)a++;const D=a;for(;a<i&&s[a]!==10;)a++;return a++,a-D<1?"":new TextDecoder().decode(t.slice(D,a-1))}let l=o();if(!l.startsWith("ply"))throw new Error("Not a valid PLY file");l=o();const h=l.includes("ascii");function u(D){if(D==="char"||D==="uchar"||D==="int8"||D==="uint8")return 1;if(D==="short"||D==="ushort"||D==="int16"||D==="uint16")return 2;if(D==="int"||D==="uint"||D==="int32"||D==="uint32"||D==="float"||D==="float32")return 4;if(D==="double")return 8;throw new Error("Unknown data type: "+D)}const f=l.includes("binary_little_endian");let m=0,g=!1,p=0,A=0,x=0,y=0,b=0,C=0,E=0;for(;a<i&&!l.startsWith("end_header");){if(l=o(),l.startsWith("comment"))continue;let D=l.split(/\s/);if(l.startsWith("element vertex"))for(m=parseInt(D[D.length-1]),l=o(),D=l.split(/\s/);l.startsWith("property");){const U=D[1];D[2]==="x"&&U.startsWith("double")?g=!0:D[2]==="x"&&!U.startsWith("float")&&H.error("Error: expect ply xyz to be float or double: "+l),p+=u(U),l=o(),D=l.split(/\s/)}if(l.startsWith("element face"))for(E=parseInt(D[D.length-1]),l=o(),D=l.split(/\s/);l.startsWith("property");){if(D[1]==="list")x=u(D[2]),y=u(D[3]),A+=x+3*y;else{const U=u(D[1]);A+=U,y===0&&(b+=U,C++)}l=o(),D=l.split(/\s/)}}if(h){E<1&&H.error(`Malformed ply format: faces ${E} `);const D=new Float32Array(m*3);let U=0;for(let N=0;N<m;N++){l=o();const k=l.split(/\s/);D[U]=parseFloat(k[0]),D[U+1]=parseFloat(k[1]),D[U+2]=parseFloat(k[2]),U+=3}let F=new Uint32Array(E*3),P=0;for(let N=0;N<E;N++){l=o();const k=l.split(/\s/),z=parseInt(k[C])-2;if(z<1)break;if(P+z*3>F.length){const Q=new Uint32Array(F.length+F.length);Q.set(F),F=Q.slice()}const q=parseInt(k[C+1]);let j=parseInt(k[C+2]);for(let Q=0;Q<z;Q++){const tt=parseInt(k[C+3+Q]);F[P+0]=q,F[P+1]=j,F[P+2]=tt,j=tt,P+=3}}return F.length!==P&&(F=F.slice(0,P)),{positions:D,indices:F}}(p<12||x<1||y<1||E<1)&&H.warn(`Malformed ply format: stride ${p} count ${x} iBytes ${y} iStrideBytes ${A} iPadBytes ${b} faces ${E}`);const S=new DataView(t);let M;if(a%4===0&&p===12&&f)M=new Float32Array(t,a,m*3),a+=m*p;else{M=new Float32Array(m*3);let D=0;for(let U=0;U<m;U++)g?(M[D]=S.getFloat64(a,f),M[D+1]=S.getFloat64(a+8,f),M[D+2]=S.getFloat64(a+16,f)):(M[D]=S.getFloat32(a,f),M[D+1]=S.getFloat32(a+4,f),M[D+2]=S.getFloat32(a+8,f)),D+=3,a+=p}const T=new Uint32Array(E*3);let I=!0,R=0;if(x===1&&y===4&&A===13)for(let D=0;D<E;D++){const U=S.getUint8(a);a+=x,U!==3&&(I=!1),T[R]=S.getUint32(a,f),a+=4,T[R+1]=S.getUint32(a,f),a+=4,T[R+2]=S.getUint32(a,f),a+=4,R+=3}else{let D=a;for(let U=0;U<E;U++){a=D+b;let F=0;x===1?F=S.getUint8(a):x===2?F=S.getUint16(a,f):x===4&&(F=S.getUint32(a,f)),a+=x,F!==3&&(I=!1);for(let P=0;P<3;P++)y===1?T[R]=S.getUint8(a):y===2?T[R]=S.getUint16(a,f):y===4&&(T[R]=S.getUint32(a,f)),R++,a+=y;D+=A}}return I||H.warn("Only able to read PLY meshes limited to triangles."),{positions:M,indices:T}}static readICO(t){const a=new TextDecoder("utf-8").decode(t).split(`
`);let o=a[0].trim().split(/\s+/);o.length>1&&H.warn("This is not a valid FreeSurfer ICO/TRI mesh.");const l=parseInt(o[0]),h=new Float32Array(l*3);let u=1;for(let g=0;g<l;g++){const p=a[u].trim().split(/\s+/);u++;let A=parseInt(p[0])-1;const x=parseFloat(p[1]),y=parseFloat(p[2]),b=parseFloat(p[3]);if(A<0||A>=l){H.error("ICO vertices corrupted");break}A*=3,h[A]=x,h[A+1]=y,h[A+2]=b}o=a[u].trim().split(/\s+/),u++;const f=parseInt(o[0]),m=new Uint32Array(f*3);for(let g=0;g<f;g++){const p=a[u].trim().split(/\s+/);u++;let A=parseInt(p[0])-1;const x=parseInt(p[1])-1,y=parseInt(p[2])-1,b=parseInt(p[3])-1;if(A<0||A>=f){H.error("ICO indices corrupted");break}A*=3,m[A]=x,m[A+1]=y,m[A+2]=b}for(let g=0;g<m.length;g+=3){const p=m[g];m[g]=m[g+1],m[g+1]=p}return{positions:h,indices:m}}static readGEO(t,i=!1){const o=new TextDecoder("utf-8").decode(t).split(`
`),l=o[0].trim().split(/\s+/),h=parseInt(l[0]);let u=parseInt(l[1]),f=parseInt(l[2]);const m=parseInt(l[3]);(h>1||m!==f*3)&&H.warn("Multi-part BYU/GEO header or not a triangular mesh.");const g=[];u*=3;let p=0,A=2;for(;p<u;){const E=o[A].trim().split(/\s+/);A++;for(let S=0;S<E.length&&(g.push(parseFloat(E[S])),p++,!(p>=u));S++);}const x=[];f*=3;let y=0;for(;y<f;){const E=o[A].trim().split(/\s+/);A++;for(let S=0;S<E.length&&(x.push(Math.abs(parseInt(E[S]))-1),y++,!(y>=f));S++);}if(i)for(let E=0;E<x.length;E+=3){const S=x[E];x[E]=x[E+1],x[E+1]=S}const b=new Float32Array(g),C=new Uint32Array(x);return{positions:b,indices:C}}static readOFF(t){const a=new TextDecoder("utf-8").decode(t).split(`
`),o=[],l=[];let h=0;a[h].includes("OFF")?h++:H.warn("File does not start with OFF");let u=a[h].trim().split(/\s+/);const f=parseInt(u[0]),m=parseInt(u[1]);h++;for(let A=0;A<f;A++)u=a[h].trim().split(/\s+/),o.push(parseFloat(u[0])),o.push(parseFloat(u[1])),o.push(parseFloat(u[2])),h++;for(let A=0;A<m;A++)u=a[h].trim().split(/\s+/),parseInt(u[0])!==3&&H.warn("Only able to read OFF files with triangular meshes"),l.push(parseInt(u[1])),l.push(parseInt(u[2])),l.push(parseInt(u[3])),h++;const g=new Float32Array(o),p=new Uint32Array(l);return{positions:g,indices:p}}static readOBJMNI(t){const a=new TextDecoder("utf-8").decode(t).trim().split(/\s*,\s*|\s+/);(a.length<1||a[0]!=="P")&&H.warn("This is not a valid MNI OBJ mesh.");let o=6;const l=parseInt(a[o++]),h=l*3,u=new Float32Array(h);for(let x=0;x<h;x++)u[x]=parseFloat(a[o++]);o+=h;const f=parseInt(a[o++]),m=parseInt(a[o++]);(f<1||m<0||m>2)&&H.warn("This is not a valid MNI OBJ mesh.");let g=1;m===1?g=f:m===1&&(g=l),o+=g*4,o+=f;const p=f*3,A=new Uint32Array(p);for(let x=0;x<p;x++)A[x]=parseInt(a[o++]);return{positions:u,indices:A}}static async readOBJ(t){const i=new Uint8Array(t,0,2);i[0]===31&&i[1]===139&&(t=await ft.decompressToBuffer(new Uint8Array(t)));const a=new TextDecoder("utf-8").decode(t);if(a[0]==="P")return this.readOBJMNI(t);const o=a.split(`
`),l=o.length,h=[],u=[];for(let A=0;A<l;A++){const x=o[A];if(x[0]==="v"&&x[1]===" "){const y=x.trim().split(/\s+/);h.push(parseFloat(y[1])),h.push(parseFloat(y[2])),h.push(parseFloat(y[3]))}if(x[0]==="f"){const y=x.trim().split(/\s+/),b=y.length-3;if(b<1)break;let C=y[1].split("/");const E=parseInt(C[0])-1;C=y[2].split("/");let S=parseInt(C[0])-1;for(let M=0;M<b;M++){C=y[3+M].split("/");const T=parseInt(C[0])-1;u.push(E),u.push(S),u.push(T),S=T}}}const f=new Float32Array(h),m=new Uint32Array(u);let g=m[0],p=m[0];for(let A=1;A<m.length;A++)m[A]<g&&(g=m[A]),m[A]>p&&(p=m[A]);if(p-g+1>f.length/3)throw new Error("Not a valid OBJ file");for(let A=0;A<m.length;A++)m[A]-=g;return{positions:f,indices:m}}static readFreeSurfer(t){const i=new Uint8Array(t);if(i[0]===35&&i[1]===33&&i[2]===97)return we.readASC(t);const s=new DataView(t),a=s.getUint32(0,!1),o=s.getUint32(4,!1);(a!==4294966883||o!==1919246708)&&Ll.debug("Unable to recognize file type: does not appear to be FreeSurfer format.");let l=0;for(;s.getUint8(l)!==10;)l++;l+=2;let h=s.getUint32(l,!1);l+=4;let u=s.getUint32(l,!1);l+=4,h*=3;const f=new Float32Array(h);for(let A=0;A<h;A++)f[A]=s.getFloat32(l,!1),l+=4;u*=3;const m=new Uint32Array(u);for(let A=0;A<u;A++)m[A]=s.getUint32(l,!1),l+=4;const g=s.getUint32(l,!1);l+=4;let p=g===20;if(!p){const A=s.getUint32(l,!1);l+=4;const x=s.getUint32(l,!1);l+=4,p=g===2&&A===0&&x===20}if(!p)H.warn("Unknown FreeSurfer Mesh extension code.");else{const x=new TextDecoder().decode(t.slice(l)).trim().split(`
`);for(let y=0;y<x.length;y++){if(!x[y].startsWith("cras"))continue;const C=x[y].split("=")[1].trim().split(" ").map(Number),E=Math.floor(f.length/3);let S=0;for(let M=0;M<E;M++)f[S]+=C[0],S++,f[S]+=C[1],S++,f[S]+=C[2],S++}}return{positions:f,indices:m}}static async readSRF(t){const i=new Uint8Array(t);if(i[0]===35&&i[1]===33&&i[2]===97)return we.readASC(t);i[0]===31&&i[1]===139&&(t=(await ft.decompress(new Uint8Array(t))).buffer);const s=new DataView(t),a=s.getFloat32(0,!0),o=s.getUint32(8,!0),l=s.getUint32(12,!0),h=s.getFloat32(16,!0),u=s.getFloat32(20,!0),f=s.getFloat32(24,!0),m=new Float32Array(o*3);let g=28,p=1;for(let I=0;I<o;I++)m[p]=-s.getFloat32(g,!0)+h,p+=3,g+=4;p=2;for(let I=0;I<o;I++)m[p]=-s.getFloat32(g,!0)+u,p+=3,g+=4;p=0;for(let I=0;I<o;I++)m[p]=-s.getFloat32(g,!0)+f,p+=3,g+=4;g=28+4*6*o;const A=s.getFloat32(g,!0),x=s.getFloat32(g+4,!0),y=s.getFloat32(g+8,!0),b=s.getFloat32(g+16,!0),C=s.getFloat32(g+20,!0),E=s.getFloat32(g+24,!0);g+=8*4;const S=new Float32Array(o*3),M=new Uint32Array(t,g,o);p=0;for(let I=0;I<o;I++){const R=M[I];R>1056964608&&(S[p+0]=(R>>16&255)/255,S[p+1]=(R>>8&255)/255,S[p+2]=(R&255)/255),R===0&&(S[p+0]=A,S[p+1]=x,S[p+2]=y),R===1&&(S[p+0]=b,S[p+1]=C,S[p+2]=E),p+=3}g+=o*4;for(let I=0;I<o;I++){const R=s.getUint32(g,!0);g+=4+4*R}const T=new Uint32Array(l*3);for(let I=0;I<l*3;I++)T[I]=s.getInt32(g,!0),g+=4;return a!==4&&H.warn("Not valid SRF"),{positions:m,indices:T,colors:S}}static readTxtSTL(t){const a=new TextDecoder("utf-8").decode(t).split(`
`);if(!a[0].startsWith("solid"))throw new Error("Not a valid STL file");const o=[];for(let f=1;f<a.length;f++){if(!a[f].includes("vertex"))continue;const m=a[f].trim().split(/\s+/);for(let g=1;g<m.length;g++)o.push(parseFloat(m[g]))}const l=Math.floor(o.length/3);if(l*3!==o.length)throw new Error("Unable to parse ASCII STL file.");const h=new Float32Array(o),u=new Uint32Array(l);for(let f=0;f<l;f++)u[f]=f;return{positions:h,indices:u}}static readSTL(t){if(t.byteLength<134)throw new Error("File too small to be STL: bytes = "+t.byteLength);const i=new DataView(t);if(i.getUint32(0,!0)===1768714099)return we.readTxtSTL(t);const a=i.getUint32(80,!0),o=3*a;if(t.byteLength<84+a*50)throw new Error("STL file too small to store triangles = "+a);const l=new Uint32Array(o),h=new Float32Array(o*3);let u=96,f=0;for(let m=0;m<a;m++){for(let g=0;g<9;g++)h[f]=i.getFloat32(u,!0),f+=1,u+=4;u+=14}for(let m=0;m<o;m++)l[m]=m;return{positions:h,indices:l}}static decimateLayerVertices(t,i){if(t%i===0)return t;const s=12,a=Math.round(Math.log((t-2)/(s-2))/Math.log(4)),o=Math.round(Math.log((i-2)/(s-2))/Math.log(4)),l=Math.pow(4,a)*(s-2)+2,h=Math.pow(4,o)*(s-2)+2;return l!==t||h!==i?t:i}static async readNII2(t,i=0,s=""){let a=new Float32Array;const o=t.byteLength;let l=!0;const h=new DataView(t);let u=h.getUint16(0,l);if(u===469893120&&(l=!1,u=h.getUint16(0,l)),u!==540)throw new Error("Not a valid NIfTI-2 dataset");const f=Number(h.getBigInt64(168,l)),m=h.getFloat64(176,l),g=h.getFloat64(184,l);(m!==1||g!==0)&&H.warn("ignoring scale slope and intercept");const p=h.getUint32(504,l),A=h.getUint16(12,l);if(A!==2&&A!==4&&A!==8&&A!==16)throw new Error("Unsupported NIfTI datatype "+A);let x=1;const y=[1,1,1,1,1,1,1,1];for(let b=1;b<8;b++)y[b]=Math.max(Number(h.getBigInt64(16+b*8,l)),1),x*=y[b];if(p>=3e3&&p<=3099&&f>580){let b=function(){for(;U<o&&D[U]===10;)U++;const j=U;for(;U<o&&D[U]!==10;)U++;return U++,U-j<1?"":new TextDecoder().decode(t.slice(j,U-1)).trim()},C=function(){let j=b();if(!j.startsWith("<")||j.endsWith(">"))return j;for(;U<o&&!j.endsWith(">");)j+=b();return j},E=function(j,Q=!1){const tt=F.indexOf(j);if(tt<0)return 1;const ot=F.indexOf('"',tt)+1,Y=F.indexOf('"',ot),it=F.slice(ot,Y);return Q?it:parseInt(it)},S=0,M=0,T=0,I="",R=new Uint32Array;const D=new Uint8Array(t);let U=552,F;const P=y[5],N=new Float32Array(i*P);for(;U<o&&(F=C(),!F.includes("</CIFTI>"));)if(F.includes("<BrainModel")){const j=E("SurfaceNumberOfVertices="),Q=E("BrainStructure=",!0).toUpperCase();if(j%i!==0)continue;let tt=!1;if(s.includes("CORTEX")&&Q.includes("CORTEX")&&(tt=!0),!tt||(tt=!1,s.includes("LEFT")&&Q.includes("LEFT")&&(tt=!0),s.includes("RIGHT")&&Q.includes("RIGHT")&&(tt=!0),!tt))continue;if(T=j,S=E("IndexOffset="),M=E("IndexCount="),I=Q,F.includes("<VertexIndices>")||(F=C()),!F.startsWith("<VertexIndices>")||!F.endsWith("</VertexIndices>"))return H.warn("Unable to find CIfTI <VertexIndices>"),N;F=F.slice(15,-16);const ot=F.trim().split(/\s+/);ot.length<M&&H.error("Error parsing VertexIndices"),R=new Uint32Array(M);for(let Y=0;Y<M;Y++)R[Y]=parseInt(ot[Y])}if(T===0||R.length===0)return H.warn("Unable to find CIfTI structure that matches the mesh."),N;if(A!==16)return H.warn("Only able to read float32 CIfTI (only known datatype)."),N;const k=new Float32Array(M*P),z=f+P*S*4;for(let j=0;j<M*P;j++)k[j]=h.getFloat32(z+j*4,l);let q=0;for(let j=0;j<M;j++)for(let Q=0;Q<P;Q++)N[R[j]+Q*i]=k[q],q++;return H.debug("CIfTI diagnostics",T,I,S,M,S,s),N}if(x=this.decimateLayerVertices(x,i),x%i!==0)throw new Error("Vertices in layer ("+x+") is not a multiple of number of vertices ("+i+")");if(l)A===16?a=new Float32Array(t,f,x):A===8?a=new Int32Array(t,f,x):A===4&&(a=new Int16Array(t,f,x));else if(A===16){a=new Float32Array(x);for(let b=0;b<x;b++)a[b]=h.getFloat32(f+b*4,l)}else if(A===8){a=new Int32Array(x);for(let b=0;b<x;b++)a[b]=h.getInt32(f+b*4,l)}else if(A===4){a=new Int16Array(x);for(let b=0;b<x;b++)a[b]=h.getInt16(f+b*2,l)}return A===2&&(a=new Uint8Array(t,f,x)),a}static async readNII(t,i=0,s=""){let a=new Float32Array,o=!0,l=new DataView(t),h=l.getUint16(0,o);if(h===540||h===469893120)return we.readNII2(t,i,s);if(h===23553&&(o=!1,h=l.getUint16(0,o)),h!==348){const A=await ft.decompress(new Uint8Array(t));if(l=new DataView(A.buffer),t=A.buffer,h=l.getUint16(0,o),h===540||h===469893120)return we.readNII2(t,i,s);h===23553&&(o=!1,h=l.getUint16(0,o))}h!==348&&H.error("Not a valid NIfTI image.");const u=l.getFloat32(108,o),f=l.getFloat32(112,o),m=l.getFloat32(116,o);(f!==1||m!==0)&&H.warn("ignoring scale slope and intercept");const g=l.getUint16(70,o);if(g!==2&&g!==4&&g!==8&&g!==16)throw new Error("Unsupported NIfTI datatype "+g);let p=1;for(let A=1;A<8;A++){const x=l.getUint16(40+A*2,o);p*=Math.max(x,1)}if(p=this.decimateLayerVertices(p,i),p%i!==0)throw new Error("Vertices in layer ("+p+") is not a multiple of number of vertices ("+i+")");if(o)g===16?a=new Float32Array(t,u,p):g===8?a=new Int32Array(t,u,p):g===4&&(a=new Int16Array(t,u,p));else if(g===16){a=new Float32Array(p);for(let A=0;A<p;A++)a[A]=l.getFloat32(u+A*4,o)}else if(g===8){a=new Int32Array(p);for(let A=0;A<p;A++)a[A]=l.getInt32(u+A*4,o)}else if(g===4){a=new Int16Array(p);for(let A=0;A<p;A++)a[A]=l.getInt16(u+A*2,o)}return g===2&&(a=new Uint8Array(t,u,p)),a}static async readMGH(t,i=0,s=!1){let a=new DataView(t),o=t;if(a.getUint8(0)===31&&a.getUint8(1)===139){const R=await ft.decompress(new Uint8Array(t));o=new ArrayBuffer(R.byteLength),new Uint8Array(o).set(new Uint8Array(R)),a=new DataView(R.buffer)}const l=a.getInt32(0,!1),h=Math.max(1,a.getInt32(4,!1)),u=Math.max(1,a.getInt32(8,!1)),f=Math.max(1,a.getInt32(12,!1)),m=Math.max(1,a.getInt32(16,!1)),g=a.getInt32(20,!1);let p=284;const A=!1;(l!==1||g<0||g>4)&&H.warn("Not a valid MGH file");let x=h*u*f*m,y=[];if(x=this.decimateLayerVertices(x,i),x%i!==0)return H.warn("Vertices in layer ("+x+") is not a multiple of number of vertices ("+i+")"),y;if(g===3){y=new Float32Array(x);for(let R=0;R<x;R++)y[R]=a.getFloat32(p+R*4,A)}else if(g===1){y=new Int32Array(x);for(let R=0;R<x;R++)y[R]=a.getInt32(p+R*4,A)}else if(g===4){y=new Int16Array(x);for(let R=0;R<x;R++)y[R]=a.getInt16(p+R*2,A)}else g===0&&(y=new Uint8Array(t,p,x));if(!s)return y;let b=4;g===4&&(b=2),g===0&&(b=1),p+=b*x,p+=4*4;const C=1,E=2,S=20,M=30,T=o.byteLength;let I;for(;p<T-8;){const R=a.getInt32(p+=4,A);let D=0;switch(R){case M:D=a.getInt32(p+=4,A)-1;break;case S:case E:D=0;break;case C:D=0;{let U=a.getInt32(p+=4,A);if(U>0)return H.warn("unsupported CTABreadFromBinaryV1"),y;if(U=-U,U!==2)return H.warn("CTABreadFromBinary: unknown version"),y;const F=a.getInt32(p+=4,A);if(F<0)return H.warn("CTABreadFromBinaryV2: nentries was ",F),y;const P=a.getInt32(p+=4,A);p+=P;const N=a.getInt32(p+=4,A);if(N<0)return y;const k={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let z=0;z<N;z++){const q=a.getInt32(p+=4,A),j=a.getInt32(p+=4,A);let Q=p+4,tt="";for(let lt=0;lt<j;lt++){const mt=a.getUint8(Q++);if(mt===0)break;tt+=String.fromCharCode(mt)}p+=j;const ot=a.getInt32(p+=4,A),Y=a.getInt32(p+=4,A),it=a.getInt32(p+=4,A),ct=255-a.getInt32(p+=4,A);k.I.push(q),k.R.push(ot),k.G.push(Y),k.B.push(it),k.A.push(ct),k.labels.push(tt)}I=Ht.makeLabelLut(k)}break;default:D=a.getInt32(p+=8,A)}p+=D}return{scalars:y,colormapLabel:I}}static readX3D(t){const i=t.byteLength;if(i<20)throw new Error("File too small to be X3D: bytes = "+i);const s=new Uint8Array(t);let a=0;function o(){for(;a<i&&s[a]!==60;)a++;const S=a;for(;a<i&&s[a]!==62;)a++;const M=a;return new TextDecoder().decode(t.slice(S,M+1)).trim()}let l=o();function h(S){const M=l.indexOf(S+"=");if(M<0)return"";const T=l[M+S.length+1],I=l.indexOf(T,M)+1,R=l.indexOf(T,I);return l.slice(I,R)}function u(S){const M=l.indexOf(S+"=");if(M<0)return 1;const T=l[M+S.length+1],I=l.indexOf(T,M)+1,R=l.indexOf(T,I);let D=l.slice(I,R).trim();D=D.replace(/,\s*$/,"");const U=D.trim().split(/\s*,\s*|\s+/);if(U.length<2)return parseFloat(D);let F=new Array(U.length),P=0;for(let N=0;N<U.length;N++){const k=parseFloat(U[N]);isFinite(k)&&(F[P]=k,P++)}return F=F.slice(0,P),F}l.includes("xml version")||H.warn("Not a X3D image");let f=[],m=[],g=[],p=[],A=[0,0,0,0],x=[0,0,0,0],y=[255,255,255,255],b=[255,255,255,255];const C={};function E(){if(!l.endsWith("/>"))if(l.startsWith("<Appearance>"))for(;a<i&&!l.endsWith("</Appearance>");)l+=o();else for(;a<i&&!l.endsWith("/>");)l+=o();const S=h("USE");if(S.length>1){S in C?y=C[S]:H.warn("Unable to find DEF for "+S);return}const M=u("diffuseColor");if(M.length<3)return;y[0]=Math.round(M[0]*255),y[1]=Math.round(M[1]*255),y[2]=Math.round(M[2]*255);const T=h("DEF");T.length<1||(C[T]=y)}for(;a<i;)if(l=o(),y=b.slice(),l.startsWith("<Transform")&&(A=u("translation"),x=u("rotation")),l.startsWith("<Appearance")&&(E(),b=y.slice()),l.startsWith("<Shape")){let S=1,M=1,T=[],I=[];for(;a<i&&(l=o(),l.startsWith("<Appearance")&&E(),!l.startsWith("</Shape"));){if(l.startsWith("<Sphere")&&(S=u("radius"),M=-1),l.startsWith("<Cylinder")&&(S=u("radius"),M=u("height")),l.startsWith("<IndexedFaceSet")&&(M=-2,T=u("coordIndex")),l.startsWith("<IndexedTriangleSet")&&(M=-7,T=u("index")),l.startsWith("<IndexedTriangleStripSet")&&(M=-3,T=u("index")),l.startsWith("<Coordinate")){I=u("point");const R=I.length%3;R!==0&&(I=I.slice(0,-R))}l.startsWith("<Color")&&(p=u("color")),l.startsWith("<Box")&&(M=-4,H.warn("Unsupported x3d shape: Box")),l.startsWith("<Cone")&&(M=-5,H.warn("Unsupported x3d shape: Cone")),l.startsWith("<ElevationGrid")&&(M=-6,H.warn("Unsupported x3d shape: ElevationGrid"))}if(!(M<-3&&M!==-7))if(M<-1){if(T.length<1||I.length<3||I.length===void 0){H.warn("Indexed mesh must specify indices and points");break}const R=Math.floor(f.length/3);let D=2;if(M===-7)m=[...m,...T];else if(M===-2){let P=0;for(;D<T.length;)T[D]>=0?(m.push(T[P]+R),m.push(T[D-1]+R),m.push(T[D-0]+R),D+=1):(D+=3,P=D-2)}else for(;D<T.length;)T[D]>=0?(m.push(T[D-2]+R),m.push(T[D-1]+R),m.push(T[D-0]+R),D+=1):D+=3;f=[...f,...I];const U=Math.floor(I.length/3),F=Array(U).fill(y).flat();if(p.length===U*3){let P=0,N=0;for(let k=0;k<U;k++){for(let z=0;z<3;z++)F[N]=Math.round(p[P]*255),P++,N++;N++}}g=[...g,...F]}else if(M<0)As.makeColoredSphere(f,m,g,S,A,y);else{const R=It();k8(R,x[3],[x[0],x[1],x[2]]);const D=Wt(0,-M*.5,0,1),U=Wt(0,+M*.5,0,1);Ve(D,D,R),Ve(U,U,R),rp(D,D,A),rp(U,U,A);const F=ut(D[0],D[1],D[2]),P=ut(U[0],U[1],U[2]);As.makeColoredCylinder(f,m,g,F,P,S,y)}}return{positions:Float32Array.from(f),indices:Uint32Array.from(m),rgba255:Uint8Array.from(g)}}static async readGII(t,i=0){let s=t.byteLength;if(s<20)throw new Error("File too small to be GII: bytes = "+s);let a=new TextDecoder("ascii").decode(t);if(a[0].charCodeAt(0)===31){const N=await ft.decompress(new Uint8Array(t));t=N.buffer,a=new TextDecoder("ascii").decode(N.buffer)}let o=0;function l(){let N=!0,k=o;for(;N;){for(;o<s&&a[o]!=="<";)o++;for(k=o;o<s&&a[o]!==">";)o++;if(N=a[o-1]==="/",k+1<s&&a[k+1]==="/"&&(o+=1,N=!0),o>=s)break}const z=new TextDecoder().decode(t.slice(k+1,o)).trim(),q=z.split(" ")[0].trim(),j=o;let Q=o,tt=o;if(a[k+1]!=="?"&&a[k+1]!=="!"){const ot="</"+q+">";Q=a.indexOf(ot,j),tt=Q+ot.length-1}return{name:z,startPos:k,contentStartPos:j,contentEndPos:Q,endPos:tt}}let h=l();if(!h.name.startsWith("?xml"))throw new Error("readGII: Invalid XML file");for(;!h.name.startsWith("GIFTI")&&h.endPos<s;)h=l();if(!h.name.startsWith("GIFTI")||h.contentStartPos===h.contentEndPos)throw new Error("readGII: XML file does not include GIFTI tag");s=h.contentEndPos;let u=new Float32Array,f=new Uint32Array,m=new Float32Array,g="",p=!1,A=!1,x=!1,y=!1,b=[1,1,1];const C=[0,0,0];let E=0,S=!1,M=!1,T=0,I=!1;h.endPos=h.contentStartPos;let R="";function D(N,k=!1){const z=R.indexOf(N);if(z<0)return 1;const q=R.indexOf('"',z)+1,j=R.indexOf('"',q),Q=R.slice(q,j);return k?parseFloat(Q):parseInt(Q)}function U(N){const k=R.indexOf(N);if(k<0)return"";const z=k+N.length,q=R.indexOf("]",z);return R.slice(z,q)}const F={R:[],G:[],B:[],A:[],I:[],labels:[]};for(;h.endPos<s&&h.name.length>1;){if(h=l(),h.name.startsWith("Label Key")&&(R=h.name,F.I.push(D("Key=")),F.R.push(Math.round(255*D("Red=",!0))),F.G.push(Math.round(255*D("Green=",!0))),F.B.push(Math.round(255*D("Blue=",!0))),F.A.push(Math.round(255*D("Alpha",!0))),R=new TextDecoder().decode(t.slice(h.contentStartPos+1,h.contentEndPos)).trim(),F.labels.push(U("<![CDATA["))),h.name.trim()==="Data"){if(x)continue;R=new TextDecoder().decode(t.slice(h.contentStartPos+1,h.contentEndPos)).trim();let N;if(M){const k=b[0]*b[1]*b[2],z=R.split(/\s+/);if(k!==z.length)throw new Error("Unable to parse ASCII GIfTI");if(E===2&&(E=8),E===32&&(E=16),E===8){N=new Int32Array(k);for(let q=0;q<k;q++)N[q]=parseInt(z[q])}if(E===16){N=new Float32Array(k);for(let q=0;q<k;q++)N[q]=parseFloat(z[q])}}else if(typeof Buffer>"u"){let k=function(z){const q=atob(z),j=q.length,Q=new Uint8Array(j);for(let tt=0;tt<j;tt++)Q[tt]=q.charCodeAt(tt);return Q};if(S){const z=k(R.slice());N=await ft.decompress(new Uint8Array(z))}else N=k(R.slice())}else if(S){const k=Buffer.from(R.slice(),"base64");N=await ft.decompress(new Uint8Array(k))}else N=Buffer.from(R.slice(),"base64");if(A){if(E!==16&&H.warn("expect positions as FLOAT32"),u=new Float32Array(N.buffer),y){const k=u.slice(),z=k.length/3;let q=0;for(let j=0;j<z;j++)for(let Q=0;Q<3;Q++)u[q]=k[Q*z+j],q++}}else if(p){if(E!==8&&H.warn("expect indices as INT32"),f=new Uint32Array(N.buffer),y){const k=f.slice(),z=k.length/3;let q=0;for(let j=0;j<z;j++)for(let Q=0;Q<3;Q++)f[q]=k[Q*z+j],q++}}else{let k=function(q,j){const Q=q.length,tt=new Float32Array(Q+j.length);return tt.set(q),tt.set(j,Q),tt};T=b[0]*b[1]*b[2],i!==0&&T%i!==0&&H.warn("Number of vertices in scalar overlay ("+T+") does not match mesh ("+i+")");let z;if(E===2){const q=new Uint8Array(N.buffer);z=Float32Array.from(q)}else if(E===8){const q=new Int32Array(N.buffer);z=Float32Array.from(q)}else if(E===16)z=new Float32Array(N.buffer);else if(E===32){const q=new Float64Array(N.buffer);z=Float32Array.from(q)}else throw new Error(`Invalid dataType: ${E}`);m=k(m,z)}continue}if(h.name.trim()==="DataSpace"&&(R=new TextDecoder().decode(t.slice(h.contentStartPos+1,h.contentEndPos)).trim(),R.includes("NIFTI_XFORM_SCANNER_ANAT")&&(I=!0)),h.name.trim()==="MD"&&(R=new TextDecoder().decode(t.slice(h.contentStartPos+1,h.contentEndPos)).trim(),R.includes("AnatomicalStructurePrimary")&&R.includes("CDATA[")&&(g=U("<Value><![CDATA[").toUpperCase()),R.includes("VolGeom")&&R.includes("CDATA["))){let N=-1;if(R.includes("VolGeomC_R")&&(N=0),R.includes("VolGeomC_A")&&(N=1),R.includes("VolGeomC_S")&&(N=2),N<0)continue;C[N]=parseFloat(U("<Value><![CDATA["))}h.name.startsWith("DataArray")&&(R=h.name,b=[1,1,1],S=R.includes('Encoding="GZipBase64Binary"'),M=R.includes('Encoding="ASCII"'),p=R.includes('Intent="NIFTI_INTENT_TRIANGLE"'),A=R.includes('Intent="NIFTI_INTENT_POINTSET"'),x=R.includes('Intent="NIFTI_INTENT_VECTOR"'),y=R.includes('ArrayIndexingOrder="ColumnMajorOrder"'),R.includes('DataType="NIFTI_TYPE_UINT8"')&&(E=2),R.includes('DataType="NIFTI_TYPE_INT32"')&&(E=8),R.includes('DataType="NIFTI_TYPE_FLOAT32"')&&(E=16),R.includes('DataType="NIFTI_TYPE_FLOAT64"')&&(E=32),b[0]=D("Dim0="),b[1]=D("Dim1="),b[2]=D("Dim2="))}let P;if(F.I.length>1&&(P=Ht.makeLabelLut(F)),i>0)return{scalars:m,colormapLabel:P,anatomicalStructurePrimary:g};if(u.length>2&&!I&&(C[0]!==0||C[1]!==0||C[2]!==0)){T=Math.floor(u.length/3);let N=0;for(let k=0;k<T;k++)u[N]+=C[0],N++,u[N]+=C[1],N++,u[N]+=C[2],N++}return{positions:u,indices:f,scalars:m,colormapLabel:P,anatomicalStructurePrimary:g}}},QM=()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256},_v=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.NII=1]="NII",e[e.DCM=2]="DCM",e[e.DCM_MANIFEST=3]="DCM_MANIFEST",e[e.MIH=4]="MIH",e[e.MIF=5]="MIF",e[e.NHDR=6]="NHDR",e[e.NRRD=7]="NRRD",e[e.MHD=8]="MHD",e[e.MHA=9]="MHA",e[e.MGH=10]="MGH",e[e.MGZ=11]="MGZ",e[e.V=12]="V",e[e.V16=13]="V16",e[e.VMR=14]="VMR",e[e.HEAD=15]="HEAD",e[e.DCM_FOLDER=16]="DCM_FOLDER",e[e.SRC=17]="SRC",e[e.FIB=18]="FIB",e[e.BMP=19]="BMP",e))(_v||{}),Et=Object.freeze({..._v,parse:e=>{let t=0;switch(e.toUpperCase()){case"":case"DCM":t=2;break;case"TXT":t=3;break;case"FIB":t=18;break;case"NII":t=1;break;case"MIH":t=4;break;case"MIF":t=5;break;case"NHDR":t=6;break;case"NRRD":t=7;break;case"MHD":t=8;break;case"MHA":t=9;break;case"MGH":t=10;break;case"MGZ":t=11;break;case"SRC":t=17;break;case"V":t=12;break;case"V16":t=13;break;case"VMR":t=14;break;case"HEAD":t=15;break;case"PNG":case"BMP":case"GIF":case"JPG":case"JPEG":t=19;break}return t}}),_l=(e,t="",i="",s="gray",a=1,o=NaN,l=NaN,h=!0,u=.02,f=!1,m=!1,g="",p=0,A=Et.UNKNOWN,x=NaN,y=NaN,b=!0,C=!1,E=null)=>({url:e,urlImageData:t,name:i,colormap:s,colorMap:s,opacity:a,cal_min:o,cal_max:l,trustCalMinMax:h,percentileFrac:u,ignoreZeroVoxels:f,useQFormNotSForm:m,colormapNegative:g,imageType:A,cal_minNeg:x,cal_maxNeg:y,colorbarVisible:b,frame4D:p,alphaThreshold:C,colormapLabel:E});function yp(e,t=80){e=e.replace(/[`$]/g,"");const i=[],s=Math.min(t,e.length);for(let a=0;a<s;a++){const o=e.charCodeAt(a);i.push(o&255)}return i}function Ol(e,t=!1,i=!1){let o=!0;i&&(o=e.littleEndian);const l=new Uint8Array(348),h=new DataView(l.buffer);h.setInt32(0,348,o),h.setUint8(38,114),h.setUint8(39,e.dim_info);for(let f=0;f<8;f++)h.setUint16(40+2*f,e.dims[f],o);h.setFloat32(56,e.intent_p1,o),h.setFloat32(60,e.intent_p2,o),h.setFloat32(64,e.intent_p3,o),h.setInt16(68,e.intent_code,o),t?(h.setInt16(70,2,o),h.setInt16(72,8,o)):(h.setInt16(70,e.datatypeCode,o),h.setInt16(72,e.numBitsPerVoxel,o)),h.setInt16(74,e.slice_start,o);for(let f=0;f<8;f++)h.setFloat32(76+4*f,e.pixDims[f],o);t?(h.setFloat32(108,352,o),h.setFloat32(112,1,o),h.setFloat32(116,0,o)):(h.setFloat32(108,352,o),h.setFloat32(112,e.scl_slope,o),h.setFloat32(116,e.scl_inter,o)),h.setInt16(120,e.slice_end,o),h.setUint8(122,e.slice_code),e.xyzt_units===0?h.setUint8(123,10):h.setUint8(123,e.xyzt_units),t?(h.setFloat32(124,0,o),h.setFloat32(128,0,o)):(h.setFloat32(124,e.cal_max,o),h.setFloat32(128,e.cal_min,o)),h.setFloat32(132,e.slice_duration,o),h.setFloat32(136,e.toffset,o),l.set(yp(e.description),148),l.set(yp(e.aux_file),228),h.setInt16(252,e.qform_code,o),e.sform_code<1||e.sform_code<1?h.setInt16(254,1,o):h.setInt16(254,e.sform_code,o),h.setFloat32(256,e.quatern_b,o),h.setFloat32(260,e.quatern_c,o),h.setFloat32(264,e.quatern_d,o),h.setFloat32(268,e.qoffset_x,o),h.setFloat32(272,e.qoffset_y,o),h.setFloat32(276,e.qoffset_z,o);const u=e.affine.flat();for(let f=0;f<12;f++)h.setFloat32(280+4*f,u[f],o);return h.setInt32(344,3222382,!0),l}function XM(e,t=!0){const i=Math.round(e.length/3),s=ut(0,0,0),a=Zt(),o=Zt();let l=0,h=1;t&&(h=2);for(let g=0;g<h;g++){l=0;for(let A=0;A<i;A++){const x=ut(e[A*3],e[A*3+1],e[A*3+2]);A===0&&(sp(a,x),sp(o,x)),C0(a,a,x),S0(o,o,x),te(x,x,s);const y=to(x);l=Math.max(l,y)}if(g+1>=h)break;let p=!0;for(let A=0;A<3;++A)a[A]>s[A]&&(p=!1),o[A]<s[A]&&(p=!1);if(p)break;K8(s,a,o,.5),H.debug("origin moved inside volume: ",s)}const u=[a[0],a[1],a[2]],f=[o[0],o[1],o[2]];return{min:u,max:f,furthestVertexFromOrigin:l,origin:s}}function wp(e){const t=[!1,!1,!1,!1],i=[!1,!1,!1,!1];for(let s=0;s<4;s++)for(let a=0;a<4;a++)if(isNaN(e[s][a]))return!1;for(let s=0;s<3;s++)for(let a=0;a<3;a++)e[s][a]!==0&&(t[s]=!0,i[a]=!0);for(let s=0;s<3;s++)if(!t[s]||!i[s])return!1;return!0}async function of(e){const t=e.getReader(),{done:i,value:s}=await t.read();if(i)return t.releaseLock(),new ReadableStream({start(l){l.close()}});if(!s||s.length<2)return t.releaseLock(),new ReadableStream({start(l){s&&l.enqueue(s),l.close()}});const a=s[0]===31&&s[1]===139,o=new ReadableStream({async start(l){try{for(l.enqueue(s);;){const{done:h,value:u}=await t.read();if(h){l.close(),t.releaseLock();break}l.enqueue(u)}}catch(h){l.error(h),t.releaseLock()}}});return a?o.pipeThrough(new DecompressionStream("gzip")):o}var Oe=class $l{constructor(t=null,i="",s="gray",a=1,o=null,l=NaN,h=NaN,u=!0,f=.02,m=!1,g=!1,p="",A=0,x=Et.UNKNOWN,y=NaN,b=NaN,C=!0,E=null,S=0){O(this,"name"),O(this,"id"),O(this,"url"),O(this,"headers"),O(this,"_colormap"),O(this,"_opacity"),O(this,"percentileFrac"),O(this,"ignoreZeroVoxels"),O(this,"trustCalMinMax"),O(this,"colormapNegative"),O(this,"colormapLabel"),O(this,"colormapInvert"),O(this,"nFrame4D"),O(this,"frame4D"),O(this,"nTotalFrame4D"),O(this,"cal_minNeg"),O(this,"cal_maxNeg"),O(this,"colorbarVisible",!0),O(this,"modulationImage",null),O(this,"modulateAlpha",0),O(this,"series",[]),O(this,"nVox3D"),O(this,"oblique_angle"),O(this,"maxShearDeg"),O(this,"useQFormNotSForm"),O(this,"colormapType"),O(this,"pixDims"),O(this,"matRAS"),O(this,"pixDimsRAS"),O(this,"obliqueRAS"),O(this,"dimsRAS"),O(this,"permRAS"),O(this,"img2RASstep"),O(this,"img2RASstart"),O(this,"toRAS"),O(this,"toRASvox"),O(this,"frac2mm"),O(this,"frac2mmOrtho"),O(this,"extentsMinOrtho"),O(this,"extentsMaxOrtho"),O(this,"mm2ortho"),O(this,"hdr",null),O(this,"imageType"),O(this,"img"),O(this,"imaginary"),O(this,"v1"),O(this,"fileObject"),O(this,"dims"),O(this,"onColormapChange",()=>{}),O(this,"onOpacityChange",()=>{}),O(this,"mm000"),O(this,"mm100"),O(this,"mm010"),O(this,"mm001"),O(this,"cal_min"),O(this,"cal_max"),O(this,"robust_min"),O(this,"robust_max"),O(this,"global_min"),O(this,"global_max"),O(this,"urlImgData"),O(this,"isManifest"),O(this,"limitFrames4D"),this.init(t,i,s,a,o,l,h,u,f,m,g,p,A,x,y,b,C,E,S)}init(t=null,i="",s="gray",a=1,o=null,l=NaN,h=NaN,u=!0,f=.02,m=!1,g=!1,p="",A=0,x=Et.UNKNOWN,y=NaN,b=NaN,C=!0,E=null,S=0,M=null){if(this.name=i,this.imageType=x,this.id=Nf(),this._colormap=s,this._opacity=a>1?1:a,this.percentileFrac=f,this.ignoreZeroVoxels=m,this.trustCalMinMax=u,this.colormapNegative=p,this.colormapLabel=E,this.frame4D=A,this.cal_minNeg=y,this.cal_maxNeg=b,this.colorbarVisible=C,this.colormapType=S,this.useQFormNotSForm=g,!t)return;if(this.hdr&&typeof this.hdr.magic=="number"&&(this.hdr.magic="n+1"),this.nFrame4D=1,this.hdr)for(let D=4;D<7;D++)this.hdr.dims[D]>1&&(this.nFrame4D*=this.hdr.dims[D]);if(this.frame4D=Math.min(this.frame4D,this.nFrame4D-1),this.nTotalFrame4D=this.nFrame4D,!this.hdr||!M)return;this.nVox3D=this.hdr.dims[1]*this.hdr.dims[2]*this.hdr.dims[3];const T=this.nVox3D*(this.hdr.numBitsPerVoxel/8),I=M.byteLength/T;I!==this.nFrame4D&&(I>0&&I*T===M.byteLength?H.debug("Loading the first "+I+" of "+this.nFrame4D+" volumes"):H.warn("This header does not match voxel data",this.hdr,M.byteLength),this.nFrame4D=I),(this.hdr.intent_code===1007||this.hdr.intent_code===2003)&&this.nFrame4D===3&&this.hdr.datatypeCode===16&&(M=this.float32V1asRGBA(new Float32Array(M))),(this.hdr.pixDims[1]===0||this.hdr.pixDims[2]===0||this.hdr.pixDims[3]===0)&&H.error("pixDims not plausible",this.hdr),(isNaN(this.hdr.scl_slope)||this.hdr.scl_slope===0)&&(this.hdr.scl_slope=1),isNaN(this.hdr.scl_inter)&&(this.hdr.scl_inter=0);let R=wp(this.hdr.affine);if(g||!R||this.hdr.qform_code>this.hdr.sform_code){H.debug("spatial transform based on QForm");const D=this.hdr.quatern_b,U=this.hdr.quatern_c,F=this.hdr.quatern_d,P=Math.sqrt(1-(Math.pow(D,2)+Math.pow(U,2)+Math.pow(F,2))),N=this.hdr.pixDims[0]===0?1:this.hdr.pixDims[0],k=[[P*P+D*D-U*U-F*F,2*D*U-2*P*F,2*D*F+2*P*U],[2*D*U+2*P*F,P*P+U*U-D*D-F*F,2*U*F-2*P*D],[2*D*F-2*P*U,2*U*F+2*P*D,P*P+F*F-U*U-D*D]],z=this.hdr.affine;for(let q=0;q<3;q+=1)for(let j=0;j<3;j+=1)z[q][j]=k[q][j]*this.hdr.pixDims[j+1],j===2&&(z[q][j]*=N);z[0][3]=this.hdr.qoffset_x,z[1][3]=this.hdr.qoffset_y,z[2][3]=this.hdr.qoffset_z,this.hdr.affine=z}if(R=wp(this.hdr.affine),!R){H.debug("Defective NIfTI: spatial transform does not make sense");let D=this.hdr.pixDims[1],U=this.hdr.pixDims[2],F=this.hdr.pixDims[3];(isNaN(D)||D===0)&&(D=1),(isNaN(U)||U===0)&&(U=1),(isNaN(F)||F===0)&&(F=1),this.hdr.pixDims[1]=D,this.hdr.pixDims[2]=U,this.hdr.pixDims[3]=F;const P=[[D,0,0,0],[0,U,0,0],[0,0,F,0],[0,0,0,1]];this.hdr.affine=P}if(this.hdr.datatypeCode!==128&&this.hdr.datatypeCode!==2304&&this.hdr.littleEndian!==QM()&&this.hdr.numBitsPerVoxel>8){if(this.hdr.numBitsPerVoxel===16){const D=new Uint16Array(M);for(let U=0;U<D.length;U++){const F=D[U];D[U]=((F&255)<<8|F>>8&255)<<16>>16}}else if(this.hdr.numBitsPerVoxel===32){const D=new Uint32Array(M);for(let U=0;U<D.length;U++){const F=D[U];D[U]=(F&255)<<24|(F&65280)<<8|F>>8&65280|F>>24&255}}else if(this.hdr.numBitsPerVoxel===64){const D=this.hdr.numBitsPerVoxel/8,U=new Uint8Array(M);for(let F=0;F<U.length;F+=D){let P=D-1;for(let N=0;N<P;N++){const k=U[F+N];U[F+N]=U[F+P],U[F+P]=k,P--}}}}switch(this.hdr.datatypeCode){case 2:this.img=new Uint8Array(M);break;case 4:this.img=new Int16Array(M);break;case 16:this.img=new Float32Array(M);break;case 64:this.img=new Float64Array(M);break;case 128:this.img=new Uint8Array(M);break;case 512:this.img=new Uint16Array(M);break;case 2304:this.img=new Uint8Array(M);break;case 256:{const D=new Int8Array(M),U=D.length;this.img=new Int16Array(U);for(let F=0;F<U;F++)this.img[F]=D[F];this.hdr.datatypeCode=4,this.hdr.numBitsPerVoxel=16;break}case 1:{const D=this.hdr.dims[1]*this.hdr.dims[2]*Math.max(1,this.hdr.dims[3])*Math.max(1,this.hdr.dims[4]),U=new Uint8Array(M);this.img=new Uint8Array(D);const F=new Uint8Array(8);for(let N=0;N<8;N++)F[N]=Math.pow(2,N);let P=-1;for(let N=0;N<D;N++){const k=N%8;k===0&&P++,(U[P]&F[k])!==0&&(this.img[N]=1)}this.hdr.datatypeCode=2,this.hdr.numBitsPerVoxel=8;break}case 768:{const D=new Uint32Array(M),U=D.length;this.img=new Float64Array(U);for(let F=0;F<U-1;F++)this.img[F]=D[F];this.hdr.datatypeCode=64;break}case 8:{const D=new Int32Array(M),U=D.length;this.img=new Float64Array(U);for(let F=0;F<U-1;F++)this.img[F]=D[F];this.hdr.datatypeCode=64;break}case 1024:{const D=new BigInt64Array(M),U=D.length;this.img=new Float64Array(U);for(let F=0;F<U-1;F++)this.img[F]=Number(D[F]);this.hdr.datatypeCode=64;break}case 32:{const D=new Float32Array(M),U=Math.floor(D.length/2);this.imaginary=new Float32Array(U),this.img=new Float32Array(U);let F=0;for(let P=0;P<U-1;P++)this.img[P]=D[F],this.imaginary[P]=D[F+1],F+=2;this.hdr.datatypeCode=16;break}default:throw new Error("datatype "+this.hdr.datatypeCode+" not supported")}this.calculateRAS(),isNaN(l)||(this.hdr.cal_min=l),isNaN(h)||(this.hdr.cal_max=h),this.calMinMax()}static async new(t=null,i="",s="gray",a=1,o=null,l=NaN,h=NaN,u=!0,f=.02,m=!1,g=!1,p="",A=0,x=Et.UNKNOWN,y=NaN,b=NaN,C=!0,E=null,S=0){const M=new $l,T=/(?:\.([^.]+))?$/;let I=T.exec(i)[1]||"";I=I.toUpperCase(),I==="GZ"&&(I=T.exec(i.slice(0,-3))[1],I=I.toUpperCase());let R=null;if(x===Et.UNKNOWN&&(x=Et.parse(I)),t instanceof ArrayBuffer&&t.byteLength>=2&&x===Et.DCM){const D=new Uint8Array(t);(D[0]===92&&D[1]===1||D[1]===92&&D[0]===1)&&(x=Et.NII)}switch(M.imageType=x,x){case Et.DCM_FOLDER:case Et.DCM_MANIFEST:case Et.DCM:return;case Et.FIB:[R,M.v1]=await M.readFIB(t);break;case Et.MIH:case Et.MIF:R=await M.readMIF(t,o);break;case Et.NHDR:case Et.NRRD:R=await M.readNRRD(t,o);break;case Et.MHD:case Et.MHA:R=await M.readMHA(t,o);break;case Et.MGH:case Et.MGZ:R=await M.readMGH(t);break;case Et.SRC:R=await M.readSRC(t);break;case Et.V:R=M.readECAT(t);break;case Et.V16:R=M.readV16(t);break;case Et.VMR:R=M.readVMR(t);break;case Et.HEAD:R=await M.readHEAD(t,o);break;case Et.BMP:R=await M.readBMP(t);break;case Et.NII:cc(t)&&(t=await hp(t)),M.hdr=await Br(t),M.hdr!==null&&(M.hdr.cal_min===0&&M.hdr.cal_max===255&&(M.hdr.cal_max=0),cc(t)?R=dp(M.hdr,await hp(t)):R=dp(M.hdr,t));break;default:throw new Error("Image type not supported")}return M.init(t,i,s,a,o,l,h,u,f,m,g,p,A,x,y,b,C,E,S,R),M}computeObliqueAngle(t){const i=he(t);ai(i,t);const s=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),a=Math.max(Math.max(Math.abs(i[0]),Math.abs(i[1])),Math.abs(i[2]))/s,o=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),l=Math.max(Math.max(Math.abs(i[4]),Math.abs(i[5])),Math.abs(i[6]))/o,h=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]),u=Math.max(Math.max(Math.abs(i[8]),Math.abs(i[9])),Math.abs(i[10]))/h,f=Math.min(Math.min(a,l),u);let m=Math.abs(Math.acos(f)*180/3.141592653);return m>.01?H.warn("Warning voxels not aligned with world space: "+m+` degrees from plumb.
`):m=0,m}float32V1asRGBA(t){t.length!==this.nVox3D*3&&H.warn("float32V1asRGBA() expects "+this.nVox3D*3+"voxels, got ",+t.length);const i=t.slice();this.hdr.datatypeCode=2304,this.nFrame4D=1;for(let u=4;u<7;u++)this.hdr.dims[u]=1;this.hdr.dims[0]=3;const s=new Uint8Array(this.nVox3D*4);let a=1;for(let u=0;u<this.nVox3D*3;u++)isNaN(i[u])||(a=Math.max(a,Math.abs(i[u])));const o=255/a,l=this.nVox3D*2;let h=0;for(let u=0;u<this.nVox3D;u++){const f=i[u],m=i[u+this.nVox3D],g=i[u+l];s[h]=Math.abs(f*o),s[h+1]=Math.abs(m*o),s[h+2]=Math.abs(g*o);const p=+(f>0)*1,A=+(m>0)*2,x=+(g>0)*4;let y=248+p+A+x;Math.abs(f)+Math.abs(m)+Math.abs(g)<.1&&(y=0),s[h+3]=y,h+=4}return s}loadImgV1(t=!1,i=!1,s=!1){let a=this.v1;if(!a&&this.nFrame4D===3&&this.img.constructor===Float32Array&&(a=this.img.slice()),!a)return H.warn("Image does not have V1 data"),!1;if(t)for(let o=0;o<this.nVox3D;o++)a[o]=-a[o];if(i)for(let o=this.nVox3D;o<2*this.nVox3D;o++)a[o]=-a[o];if(s)for(let o=2*this.nVox3D;o<3*this.nVox3D;o++)a[o]=-a[o];return this.img=this.float32V1asRGBA(a),!0}calculateOblique(){if(!this.matRAS)throw new Error("matRAS not defined");if(this.pixDimsRAS===void 0)throw new Error("pixDimsRAS not defined");if(!this.dimsRAS)throw new Error("dimsRAS not defined");this.oblique_angle=this.computeObliqueAngle(this.matRAS);const t=this.vox2mm([0,0,0],this.matRAS),i=this.vox2mm([1/this.pixDimsRAS[1],0,0],this.matRAS),s=this.vox2mm([0,1/this.pixDimsRAS[2],0],this.matRAS),a=this.vox2mm([0,0,1/this.pixDimsRAS[3]],this.matRAS);te(i,i,t),te(s,s,t),te(a,a,t);const o=si(i[0],i[1],i[2],0,s[0],s[1],s[2],0,a[0],a[1],a[2],0,0,0,0,1);this.obliqueRAS=he(o);const l=Math.abs(90-Jh(i,s)*(180/Math.PI)),h=Math.abs(90-Jh(i,a)*(180/Math.PI)),u=Math.abs(90-Jh(s,a)*(180/Math.PI));this.maxShearDeg=Math.max(Math.max(l,h),u),this.maxShearDeg>.1&&H.warn("Warning: voxels are rhomboidal, maximum shear is %f degrees.",this.maxShearDeg);const f=Wt(this.dimsRAS[1],this.dimsRAS[2],this.dimsRAS[3],1),m=he(this.matRAS);ai(m,m);const g=Wt(-.5,-.5,-.5,0);ha(m,m,ut(g[0],g[1],g[2])),m[0]*=f[0],m[1]*=f[0],m[2]*=f[0],m[4]*=f[1],m[5]*=f[1],m[6]*=f[1],m[8]*=f[2],m[9]*=f[2],m[10]*=f[2],this.frac2mm=he(m);const p=this.pixDimsRAS[1],A=this.pixDimsRAS[2],x=this.pixDimsRAS[3],y=he(m);y[0]=p*f[0],y[1]=0,y[2]=0,y[4]=0,y[5]=A*f[1],y[6]=0,y[8]=0,y[9]=0,y[10]=x*f[2];const b=this.mm2vox([0,0,0],!0);y[12]=(-b[0]-.5)*p,y[13]=(-b[1]-.5)*A,y[14]=(-b[2]-.5)*x,this.frac2mmOrtho=he(y),this.extentsMinOrtho=[y[12],y[13],y[14]],this.extentsMaxOrtho=[y[0]+y[12],y[5]+y[13],y[10]+y[14]],this.mm2ortho=It(),Xe(this.mm2ortho,o)}THD_daxes_to_NIFTI(t,i,s){const a=this.hdr;if(a===null)throw new Error("HDR is not set");a.sform_code=2;const o="xxyyzzg";let l=-1,h=-1,u=-1;const f=["x","y","z"];f[0]=o[s[0]],f[1]=o[s[1]],f[2]=o[s[2]];const m=t.slice(0,3),g=i.slice(0,3);for(let p=0;p<3;p++)f[p]==="x"?l=p:f[p]==="y"?h=p:u=p;l<0||h<0||u<0||l===h||l===u||h===u||(a.pixDims[1]=Math.abs(m[0]),a.pixDims[2]=Math.abs(m[1]),a.pixDims[3]=Math.abs(m[2]),a.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],a.affine[0][l]=-m[l],a.affine[1][h]=-m[h],a.affine[2][u]=m[u],a.affine[0][3]=-g[l],a.affine[1][3]=-g[h],a.affine[2][3]=g[u])}SetPixDimFromSForm(){if(!this.hdr)throw new Error("hdr not defined");const t=this.hdr.affine,i=si(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],t[3][0],t[3][1],t[3][2],t[3][3]),s=this.vox2mm([0,0,0],i),a=this.vox2mm([1,0,0],i);te(a,a,s);const o=this.vox2mm([0,1,0],i);te(o,o,s);const l=this.vox2mm([0,0,1],i);te(l,l,s),this.hdr.pixDims[1]=Pn(a),this.hdr.pixDims[2]=Pn(o),this.hdr.pixDims[3]=Pn(l)}readECAT(t){this.hdr=new Mt;const i=this.hdr;i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const s=new DataView(t),a=s.getInt32(0,!1),o=s.getInt16(50,!1);if(a!==1296127058||o<1||o>14)throw new Error("Not a valid ECAT file");let l=512,h=0;const u=[];let f=new Float32Array;for(;;){const m=s.getInt32(l,!1),g=s.getInt32(l+12,!1);if(m+g!==31)break;let p=l+20,A=0,x=0;for(;A<31&&(x=s.getInt32(p,!1),p+=16,x!==0);){A++;let y=x*512;const b=y-512,C=s.getUint16(b,!1);i.dims[1]=s.getUint16(b+4,!1),i.dims[2]=s.getUint16(b+6,!1),i.dims[3]=s.getUint16(b+8,!1);const E=s.getFloat32(b+26,!1);i.pixDims[1]=s.getFloat32(b+34,!1)*10,i.pixDims[2]=s.getFloat32(b+38,!1)*10,i.pixDims[3]=s.getFloat32(b+42,!1)*10,i.pixDims[4]=s.getUint32(b+46,!1)/1e3,u.push(i.pixDims[4]);const S=i.dims[1]*i.dims[2]*i.dims[3],M=new Float32Array(S);if(C===1)for(let I=0;I<S;I++)M[I]=s.getUint8(y)*E,y++;else if(C===6)for(let I=0;I<S;I++)M[I]=s.getUint16(y,!1)*E,y+=2;else if(C===7)for(let I=0;I<S;I++)M[I]=s.getUint32(y,!1)*E,y+=4;else H.warn("Unknown ECAT data type "+C);const T=f.slice(0);f=new Float32Array(T.length+M.length),f.set(T),f.set(M,T.length),h++}if(x===0)break;l+=512}if(i.dims[4]=h,i.pixDims[4]=u[0],h>1){i.dims[0]=4;let m=!1;for(let g=0;g<h;g++)u[g]!==u[0]&&(m=!0);m&&H.warn("Frame durations vary")}return i.sform_code=1,i.affine=[[-i.pixDims[1],0,0,(i.dims[1]-2)*.5*i.pixDims[1]],[0,-i.pixDims[2],0,(i.dims[2]-2)*.5*i.pixDims[2]],[0,0,-i.pixDims[3],(i.dims[3]-2)*.5*i.pixDims[3]],[0,0,0,1]],i.numBitsPerVoxel=32,i.datatypeCode=16,f}readV16(t){this.hdr=new Mt;const i=this.hdr;i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const s=new DataView(t);return i.dims[1]=s.getUint16(0,!0),i.dims[2]=s.getUint16(2,!0),i.dims[3]=s.getUint16(4,!0),2*i.dims[1]*i.dims[2]*i.dims[3]+6!==t.byteLength&&H.warn("This does not look like a valid BrainVoyager V16 file"),i.numBitsPerVoxel=16,i.datatypeCode=512,H.warn("Warning: V16 files have no spatial transforms"),i.affine=[[0,0,-i.pixDims[1],(i.dims[1]-2)*.5*i.pixDims[1]],[-i.pixDims[2],0,0,(i.dims[2]-2)*.5*i.pixDims[2]],[0,-i.pixDims[3],0,(i.dims[3]-2)*.5*i.pixDims[3]],[0,0,0,1]],i.littleEndian=!0,t.slice(6)}async imageDataFromArrayBuffer(t){return new Promise((i,s)=>{const a=new Blob([t]),o=URL.createObjectURL(a),l=new Image;l.crossOrigin="Anonymous",l.src=o,l.onload=()=>{URL.revokeObjectURL(o);const h=document.createElement("canvas");h.width=l.width,h.height=l.height;const u=h.getContext("2d");if(!u){s(new Error("Failed to get 2D context"));return}u.drawImage(l,0,0),i(u.getImageData(0,0,l.width,l.height))},l.onerror=h=>{URL.revokeObjectURL(o),s(h)}})}async readBMP(t){const i=await this.imageDataFromArrayBuffer(t),{width:s,height:a,data:o}=i;this.hdr=new Mt;const l=this.hdr;return l.dims=[3,s,a,1,0,0,0,0],l.pixDims=[1,1,1,1,1,0,0,0],l.affine=[[l.pixDims[1],0,0,-(l.dims[1]-2)*.5*l.pixDims[1]],[0,-l.pixDims[2],0,(l.dims[2]-2)*.5*l.pixDims[2]],[0,0,-l.pixDims[3],(l.dims[3]-2)*.5*l.pixDims[3]],[0,0,0,1]],l.numBitsPerVoxel=8,l.datatypeCode=2304,o.buffer}readVMR(t){this.hdr=new Mt;const i=this.hdr;i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const s=new DataView(t),a=s.getUint16(0,!0);a!==4&&H.warn("Not a valid version 4 VMR image"),i.dims[1]=s.getUint16(2,!0),i.dims[2]=s.getUint16(4,!0),i.dims[3]=s.getUint16(6,!0);const o=i.dims[1]*i.dims[2]*i.dims[3];if(a>=4){let l=8+o;const h=s.getUint32(l+88,!0);if(l=l+92,h>0){const u=t.byteLength;for(let f=0;f<h;f++){for(;l<u&&s.getUint8(l)!==0;)l++;for(l++,l+=4;l<u&&s.getUint8(l)!==0;)l++;l++;const m=s.getUint32(l,!0);l+=4;for(let g=0;g<m;g++)l+=4}}i.pixDims[1]=s.getFloat32(l+2,!0),i.pixDims[2]=s.getFloat32(l+6,!0),i.pixDims[3]=s.getFloat32(l+10,!0)}return H.warn("Warning: VMR spatial transform not implemented"),i.affine=[[0,0,-i.pixDims[1],(i.dims[1]-2)*.5*i.pixDims[1]],[-i.pixDims[2],0,0,(i.dims[2]-2)*.5*i.pixDims[2]],[0,-i.pixDims[3],0,(i.dims[3]-2)*.5*i.pixDims[3]],[0,0,0,1]],H.debug(i),i.numBitsPerVoxel=8,i.datatypeCode=2,t.slice(8,8+o)}async readMGH(t){this.hdr=new Mt;const i=this.hdr;i.littleEndian=!1,i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];let s=t,a=new DataView(s);a.getUint8(0)===31&&a.getUint8(1)===139&&(s=await ft.decompressToBuffer(new Uint8Array(t)),a=new DataView(s));const o=a.getInt32(0,!1),l=a.getInt32(4,!1),h=a.getInt32(8,!1),u=a.getInt32(12,!1),f=a.getInt32(16,!1),m=a.getInt32(20,!1),g=a.getFloat32(30,!1),p=a.getFloat32(34,!1),A=a.getFloat32(38,!1),x=a.getFloat32(42,!1),y=a.getFloat32(46,!1),b=a.getFloat32(50,!1),C=a.getFloat32(54,!1),E=a.getFloat32(58,!1),S=a.getFloat32(62,!1),M=a.getFloat32(66,!1),T=a.getFloat32(70,!1),I=a.getFloat32(74,!1),R=a.getFloat32(78,!1),D=a.getFloat32(82,!1),U=a.getFloat32(86,!1);(o!==1||m<0||m>4)&&H.warn("Not a valid MGH file"),m===0?(i.numBitsPerVoxel=8,i.datatypeCode=2):m===4?(i.numBitsPerVoxel=16,i.datatypeCode=4):m===1?(i.numBitsPerVoxel=32,i.datatypeCode=8):m===3&&(i.numBitsPerVoxel=32,i.datatypeCode=16),i.dims[1]=l,i.dims[2]=h,i.dims[3]=u,i.dims[4]=f,f>1&&(i.dims[0]=4),i.pixDims[1]=g,i.pixDims[2]=p,i.pixDims[3]=A,i.vox_offset=284,i.sform_code=1;const F=si(x*i.pixDims[1],C*i.pixDims[2],M*i.pixDims[3],0,y*i.pixDims[1],E*i.pixDims[2],T*i.pixDims[3],0,b*i.pixDims[1],S*i.pixDims[2],I*i.pixDims[3],0,0,0,0,1),P=[i.dims[1]/2,i.dims[2]/2,i.dims[3]/2,1],N=[0,0,0,0];for(let z=0;z<3;z++){N[z]=0;for(let q=0;q<3;q++)N[z]=N[z]+F[q+z*4]*P[q]}i.affine=[[F[0],F[1],F[2],R-N[0]],[F[4],F[5],F[6],D-N[1]],[F[8],F[9],F[10],U-N[2]],[0,0,0,1]];const k=i.dims[1]*i.dims[2]*i.dims[3]*i.dims[4]*(i.numBitsPerVoxel/8);return s.slice(i.vox_offset,i.vox_offset+k)}async readFIB(t){this.hdr=new Mt;const i=this.hdr;i.littleEndian=!1,i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const s=await ft.readMatV4(t);if(!("dimension"in s)||!("dti_fa"in s))throw new Error("Not a valid DSIstudio FIB file");const a="index0"in s&&"index1"in s&&"index2"in s;i.numBitsPerVoxel=32,i.datatypeCode=16,i.dims[1]=s.dimension[0],i.dims[2]=s.dimension[1],i.dims[3]=s.dimension[2],i.dims[4]=1,i.pixDims[1]=s.voxel_size[0],i.pixDims[2]=s.voxel_size[1],i.pixDims[3]=s.voxel_size[2],i.sform_code=1;const o=(i.dims[1]-1)*.5*i.pixDims[1],l=(i.dims[2]-1)*.5*i.pixDims[2],h=(i.dims[3]-1)*.5*i.pixDims[3];i.affine=[[i.pixDims[1],0,0,-o],[0,-i.pixDims[2],0,l],[0,0,i.pixDims[2],-h],[0,0,0,1]],i.littleEndian=!0;const u=i.dims[1]*i.dims[2]*i.dims[3],f=u*Math.ceil(i.numBitsPerVoxel/8),m=f*i.dims[4],g=new Uint8Array(new ArrayBuffer(u*4*3));if(a){const y=i.dims[1]*i.dims[2]*i.dims[3],b=new Float32Array(y),C=new Float32Array(y),E=new Float32Array(y),S=s.index0,M=s.odf_vertices;for(let T=0;T<y;T++){const I=S[T]*3;b[T]=M[I+0],C[T]=M[I+1],E[T]=-M[I+2]}g.set(new Uint8Array(b.buffer,b.byteOffset,b.byteLength),0*f),g.set(new Uint8Array(C.buffer,C.byteOffset,C.byteLength),1*f),g.set(new Uint8Array(E.buffer,E.byteOffset,E.byteLength),2*f)}const p=new Uint8Array(new ArrayBuffer(m)),A=Float32Array.from(s.dti_fa),x=new Uint8Array(A.buffer,A.byteOffset,A.byteLength);return p.set(x,0),"report"in s&&(i.description=new TextDecoder().decode(s.report.subarray(0,Math.min(79,s.report.byteLength)))),[p.buffer,new Float32Array(g.buffer)]}async readSRC(t){this.hdr=new Mt;const i=this.hdr;i.littleEndian=!1,i.dims=[3,1,1,1,0,0,0,0],i.pixDims=[1,1,1,1,1,0,0,0];const s=await ft.readMatV4(t);if(!("dimension"in s)||!("image0"in s))throw new Error("Not a valid DSIstudio SRC file");let a=0,o=0;for(const[A,x]of Object.entries(s))if(A.startsWith("image")){if(a===0?o=x.length:o!==x.length&&(o=-1),x.constructor!==Uint16Array)throw new Error("DSIstudio SRC files always use Uint16 datatype");a++}if(o<1||a<1)throw new Error("SRC file not valid DSI Studio data. The image(s) should have the same length");i.numBitsPerVoxel=16,i.datatypeCode=512,i.dims[1]=s.dimension[0],i.dims[2]=s.dimension[1],i.dims[3]=s.dimension[2],i.dims[4]=a,i.dims[4]>1&&(i.dims[0]=4),i.pixDims[1]=s.voxel_size[0],i.pixDims[2]=s.voxel_size[1],i.pixDims[3]=s.voxel_size[2],i.sform_code=1;const l=(i.dims[1]-1)*.5*i.pixDims[1],h=(i.dims[2]-1)*.5*i.pixDims[2],u=(i.dims[3]-1)*.5*i.pixDims[3];i.affine=[[i.pixDims[1],0,0,-l],[0,-i.pixDims[2],0,h],[0,0,i.pixDims[2],-u],[0,0,0,1]],i.littleEndian=!0;const f=i.dims[1]*i.dims[2]*i.dims[3]*(i.numBitsPerVoxel/8),m=f*i.dims[4],g=new Uint8Array(new ArrayBuffer(m));let p=0;for(let A=0;A<a;A++){const x=s[`image${A}`],y=new Uint8Array(x.buffer,x.byteOffset,x.byteLength);g.set(y,p),p+=f}return"report"in s&&(i.description=new TextDecoder().decode(s.report.subarray(0,Math.min(79,s.report.byteLength)))),g.buffer}async readHEAD(t,i){this.hdr=new Mt;const s=this.hdr;s.dims[0]=3,s.pixDims=[1,1,1,1,1,0,0,0];let a=[0,0,0],o=[0,0,0],l=[1,1,1];const u=new TextDecoder().decode(t).split(/\r?\n/),f=(t.byteLength+8)%16,m=t.byteLength+(16-f);H.debug(t.byteLength,"len",m);const g=new Uint8Array(m);g.fill(0),g.set(new Uint8Array(t));const p=new Yv(m+8,42,g,!0);s.addExtension(p),s.extensionCode=42,s.extensionFlag[0]=1,s.extensionSize=m+8;const A=u.length;let x=0,y=!1;for(;x<A;){let C=u[x];if(x++,!C.startsWith("type"))continue;const E=C.includes("integer-attribute"),S=C.includes("float-attribute");if(C=u[x],x++,!C.startsWith("name"))continue;let M=C.split("= ");const T=M[1];C=u[x],x++,M=C.split("= ");let I=parseInt(M[1]);if(!(I<1)){if(C=u[x],x++,M=C.trim().split(/\s+/),S||E){for(;M.length<I;){C=u[x],x++;const R=C.trim().split(/\s+/);M.push(...R)}for(let R=0;R<I;R++)M[R]=parseFloat(M[R])}switch(T){case"BYTEORDER_STRING":M[0].includes("LSB_FIRST")?s.littleEndian=!0:M[0].includes("MSB_FIRST")&&(s.littleEndian=!1);break;case"BRICK_TYPES":{s.dims[4]=I;const R=parseInt(M[0]);R===0?(s.numBitsPerVoxel=8,s.datatypeCode=2):R===1?(s.numBitsPerVoxel=16,s.datatypeCode=4):R===3?(s.numBitsPerVoxel=32,s.datatypeCode=16):H.warn("Unknown BRICK_TYPES ",R)}break;case"IJK_TO_DICOM_REAL":if(I<12)break;y=!0,s.sform_code=2,s.affine=[[-M[0],-M[1],-M[2],-M[3]],[-M[4],-M[5],-M[6],-M[7]],[M[8],M[9],M[10],M[11]],[0,0,0,1]];break;case"DATASET_DIMENSIONS":I=Math.max(I,3);for(let R=0;R<I;R++)s.dims[R+1]=M[R];break;case"ORIENT_SPECIFIC":a=M;break;case"ORIGIN":o=M;break;case"DELTA":l=M;break;case"TAXIS_FLOATS":s.pixDims[4]=M[0];break;default:H.warn("Unknown:",T)}}}y?this.SetPixDimFromSForm():this.THD_daxes_to_NIFTI(l,o,a);const b=s.numBitsPerVoxel/8*s.dims[1]*s.dims[2]*s.dims[3]*s.dims[4];if(!i)throw new Error("pairedImgData not set");return i.byteLength<b?await ft.decompressToBuffer(new Uint8Array(i)):i.slice(0)}async readMHA(t,i){const s=t.byteLength;if(s<20)throw new Error("File too small to be VTK: bytes = "+t.byteLength);const a=new Uint8Array(t);let o=0;function l(y){return y===10||y===13}function h(){for(;o<s&&l(a[o]);)o++;const y=o;for(;o<s&&!l(a[o]);)o++;return o-y<2?"":new TextDecoder().decode(t.slice(y,o))}let u=h();this.hdr=new Mt;const f=this.hdr;f.pixDims=[1,1,1,1,1,0,0,0],f.dims=[1,1,1,1,1,1,1,1],f.littleEndian=!0;let m=!1,g=!1;const p=ls(NaN,0,0,0,1,0,0,0,1),A=ut(0,0,0);for(;u!=="";){let y=u.split(" ");if(y.length>2&&(y=y.slice(2)),u.startsWith("BinaryDataByteOrderMSB")&&y[0].includes("False")&&(f.littleEndian=!0),u.startsWith("BinaryDataByteOrderMSB")&&y[0].includes("True")&&(f.littleEndian=!1),u.startsWith("CompressedData")&&y[0].includes("True")&&(m=!0),u.startsWith("TransformMatrix"))for(let b=0;b<9;b++)p[b]=parseFloat(y[b]);if(u.startsWith("Offset"))for(let b=0;b<Math.min(y.length,3);b++)A[b]=parseFloat(y[b]);if(u.startsWith("ElementSpacing"))for(let b=0;b<y.length;b++)f.pixDims[b+1]=parseFloat(y[b]);if(u.startsWith("DimSize")){f.dims[0]=y.length;for(let b=0;b<y.length;b++)f.dims[b+1]=parseInt(y[b])}if(u.startsWith("ElementType"))switch(y[0]){case"MET_UCHAR":f.numBitsPerVoxel=8,f.datatypeCode=2;break;case"MET_CHAR":f.numBitsPerVoxel=8,f.datatypeCode=256;break;case"MET_SHORT":f.numBitsPerVoxel=16,f.datatypeCode=4;break;case"MET_USHORT":f.numBitsPerVoxel=16,f.datatypeCode=512;break;case"MET_INT":f.numBitsPerVoxel=32,f.datatypeCode=8;break;case"MET_UINT":f.numBitsPerVoxel=32,f.datatypeCode=768;break;case"MET_FLOAT":f.numBitsPerVoxel=32,f.datatypeCode=16;break;case"MET_DOUBLE":f.numBitsPerVoxel=64,f.datatypeCode=64;break;default:throw new Error("Unsupported MHA data type: "+y[0])}if(u.startsWith("ObjectType")&&!y[0].includes("Image")&&H.warn("Only able to read ObjectType = Image, not "+u),u.startsWith("ElementDataFile")){y[0]!=="LOCAL"&&(g=!0);break}u=h()}const x=ls(f.pixDims[1],0,0,0,f.pixDims[2],0,0,0,f.pixDims[3]);for(ip(p,p,x),f.affine=[[-p[0],-p[3],-p[6],-A[0]],[-p[1],-p[4],-p[7],-A[1]],[p[2],p[5],p[8],A[2]],[0,0,0,1]];a[o]===10;)o++;return f.vox_offset=o,g&&i?m?await ft.decompressToBuffer(new Uint8Array(i.slice(0))):i.slice(0):m?await ft.decompressToBuffer(new Uint8Array(t.slice(f.vox_offset))):t.slice(f.vox_offset)}async readMIF(t,i){this.hdr=new Mt;const s=this.hdr;s.pixDims=[1,1,1,1,1,0,0,0],s.dims=[1,1,1,1,1,1,1,1];let a=t.byteLength;if(a<20)throw new Error("File too small to be MIF: bytes = "+a);const o=new Uint8Array(t);o[0]===31&&o[1]===139&&(H.debug("MIF with GZ decompression"),t=await ft.decompressToBuffer(new Uint8Array(t)),a=t.byteLength);let l=0;function h(){for(;l<a&&o[l]===10;)l++;const N=l;for(;l<a&&o[l]!==10;)l++;return l++,l-N<1?"":new TextDecoder().decode(t.slice(N,l-1))}let u=h();if(!u.startsWith("mrtrix image"))throw new Error("Not a valid MIF file");const f=[];let m=!1,g=0,p=0,A=!1;for(u=h();l<a&&!u.startsWith("END");){let N=u.split(":");if(u=h(),N.length<2)break;const k=N[0];N=N[1].split(",");for(let z=0;z<N.length;z++)N[z]=N[z].trim();switch(k){case"dim":s.dims[0]=N.length;for(let z=0;z<N.length;z++)s.dims[z+1]=parseInt(N[z]);break;case"vox":for(let z=0;z<N.length;z++)s.pixDims[z+1]=parseFloat(N[z]),isNaN(s.pixDims[z+1])&&(s.pixDims[z+1]=0);break;case"layout":for(let z=0;z<N.length;z++)f.push(parseInt(N[z]));break;case"datatype":{const z=N[0];z.startsWith("Bit")?(m=!0,s.datatypeCode=2):z.startsWith("Int8")?s.datatypeCode=256:z.startsWith("UInt8")?s.datatypeCode=2:z.startsWith("Int16")?s.datatypeCode=4:z.startsWith("UInt16")?s.datatypeCode=512:z.startsWith("Int32")?s.datatypeCode=8:z.startsWith("UInt32")?s.datatypeCode=768:z.startsWith("Float32")?s.datatypeCode=16:z.startsWith("Float64")?s.datatypeCode=64:H.warn("Unsupported datatype "+z),z.includes("8")?s.numBitsPerVoxel=8:z.includes("16")?s.numBitsPerVoxel=16:z.includes("32")?s.numBitsPerVoxel=32:z.includes("64")&&(s.numBitsPerVoxel=64),s.littleEndian=!0,z.endsWith("LE")&&(s.littleEndian=!0),z.endsWith("BE")&&(s.littleEndian=!1)}break;case"transform":if(g>2||N.length!==4)break;s.affine[g][0]=parseFloat(N[0]),s.affine[g][1]=parseFloat(N[1]),s.affine[g][2]=parseFloat(N[2]),s.affine[g][3]=parseFloat(N[3]),g++;break;case"comments":s.description=N[0].substring(0,Math.min(79,N[0].length));break;case"RepetitionTime":p=parseFloat(N[0]);break;case"file":A=!N[0].startsWith(". "),A||(N=N[0].split(" "),s.vox_offset=parseInt(N[1]));break}}const x=s.dims[0];x>5&&H.warn("reader only designed for a maximum of 5 dimensions (XYZTD)");let y=1;for(let N=0;N<x;N++)y*=Math.max(s.dims[N+1],1);for(let N=0;N<3;N++)for(let k=0;k<3;k++)s.affine[N][k]*=s.pixDims[k+1];H.debug("mif affine:"+s.affine[0]),p>0&&(s.pixDims[4]=p),A&&!i&&H.warn("MIH header provided without paired image data");let b;if(i&&A)b=i.slice(0);else if(m){s.numBitsPerVoxel=8;const N=new Uint8Array(y),k=t.slice(s.vox_offset,s.vox_offset+Math.ceil(y/8)),z=new Uint8Array(k);let q=0;for(let j=0;j<y;j++){const Q=j%8;N[j]=z[q]>>7-Q&1,Q===7&&q++}b=N.buffer}else b=t.slice(s.vox_offset,s.vox_offset+y*(s.numBitsPerVoxel/8));f.length!==s.dims[0]&&H.warn("dims does not match layout");let C=1;const E=[1,1,1,1,1],S=[!1,!1,!1,!1,!1];for(let N=0;N<f.length;N++)for(let k=0;k<f.length;k++)Math.abs(f[k])===N&&(E[k]=C,(f[k]<0||Object.is(f[k],-0))&&(S[k]=!0),C*=s.dims[k+1]);let M=ft.range(0,s.dims[1]-1,1);S[0]&&(M=ft.range(s.dims[1]-1,0,-1));for(let N=0;N<s.dims[1];N++)M[N]*=E[0];let T=ft.range(0,s.dims[2]-1,1);S[1]&&(T=ft.range(s.dims[2]-1,0,-1));for(let N=0;N<s.dims[2];N++)T[N]*=E[1];let I=ft.range(0,s.dims[3]-1,1);S[2]&&(I=ft.range(s.dims[3]-1,0,-1));for(let N=0;N<s.dims[3];N++)I[N]*=E[2];let R=ft.range(0,s.dims[4]-1,1);S[3]&&(R=ft.range(s.dims[4]-1,0,-1));for(let N=0;N<s.dims[4];N++)R[N]*=E[3];let D=ft.range(0,s.dims[5]-1,1);S[4]&&(D=ft.range(s.dims[5]-1,0,-1));for(let N=0;N<s.dims[5];N++)D[N]*=E[4];let U=0,F,P;switch(s.datatypeCode){case 256:F=new Int8Array(b),P=new Int8Array(y);break;case 2:F=new Uint8Array(b),P=new Uint8Array(y);break;case 4:F=new Int16Array(b),P=new Int16Array(y);break;case 512:F=new Uint16Array(b),P=new Uint16Array(y);break;case 8:F=new Int32Array(b),P=new Int32Array(y);break;case 768:F=new Uint32Array(b),P=new Uint32Array(y);break;case 16:F=new Float32Array(b),P=new Float32Array(y);break;case 64:F=new Float64Array(b),P=new Float64Array(y);break;default:throw new Error("unknown datatypeCode")}for(let N=0;N<s.dims[5];N++)for(let k=0;k<s.dims[4];k++)for(let z=0;z<s.dims[3];z++)for(let q=0;q<s.dims[2];q++)for(let j=0;j<s.dims[1];j++)P[U]=F[M[j]+T[q]+I[z]+R[k]+D[N]],U++;return P}async readNRRD(t,i){this.hdr=new Mt;const s=this.hdr;s.pixDims=[1,1,1,1,1,0,0,0];const a=t.byteLength;let o=null;const l=new Uint8Array(t);for(let y=1;y<a;y++)if(l[y-1]===10&&l[y]===10){const b=t.slice(0,y-1);o=new TextDecoder().decode(b),s.vox_offset=y+1;break}if(o===null)throw new Error("could not extract txt");const h=o.split(`
`);h[0].startsWith("NRRD")||alert("Invalid NRRD image");const u=h.length;let f=!1,m=!1,g=!1;const p=ls(NaN,0,0,0,1,0,0,0,1),A=ut(0,0,0);let x=O8();for(let y=1;y<u;y++){let b=h[y];if(b[0]==="#")continue;b=b.toLowerCase();const C=b.split(":");if(C.length<2)continue;const E=C[0].trim();let S=C[1].trim();switch(S=S.replaceAll(")"," "),S=S.replaceAll("("," "),S=S.trim(),E){case"data file":g=!0;break;case"encoding":S.includes("raw")?f=!1:S.includes("gz")?f=!0:alert("Unsupported NRRD encoding");break;case"type":switch(S){case"uchar":case"unsigned char":case"uint8":case"uint8_t":s.numBitsPerVoxel=8,s.datatypeCode=2;break;case"signed char":case"int8":case"int8_t":s.numBitsPerVoxel=8,s.datatypeCode=256;break;case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":s.numBitsPerVoxel=16,s.datatypeCode=4;break;case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":s.numBitsPerVoxel=16,s.datatypeCode=512;break;case"int":case"signed int":case"int32":case"int32_t":s.numBitsPerVoxel=32,s.datatypeCode=8;break;case"uint":case"unsigned int":case"uint32":case"uint32_t":s.numBitsPerVoxel=32,s.datatypeCode=768;break;case"float":s.numBitsPerVoxel=32,s.datatypeCode=16;break;case"double":s.numBitsPerVoxel=64,s.datatypeCode=64;break;default:throw new Error("Unsupported NRRD data type: "+S)}break;case"spacings":{const M=S.split(/[ ,]+/);for(let T=0;T<M.length;T++)s.pixDims[T+1]=parseFloat(M[T])}break;case"sizes":{const M=S.split(/[ ,]+/);s.dims[0]=M.length;for(let T=0;T<M.length;T++)s.dims[T+1]=parseInt(M[T])}break;case"endian":S.includes("little")?s.littleEndian=!0:S.includes("big")&&(s.littleEndian=!1);break;case"space directions":{const M=S.split(/[ ,]+/);if(M.length!==9)break;for(let T=0;T<9;T++)p[T]=parseFloat(M[T])}break;case"space origin":{const M=S.split(/[ ,]+/);if(M.length!==3)break;A[0]=parseFloat(M[0]),A[1]=parseFloat(M[1]),A[2]=parseFloat(M[2])}break;case"space units":S.includes("microns")&&(m=!0);break;case"space":S.includes("right-anterior-superior")||S.includes("ras")?x=ls(1,0,0,0,1,0,0,0,1):S.includes("left-anterior-superior")||S.includes("las")?x=ls(-1,0,0,0,1,0,0,0,1):S.includes("left-posterior-superior")||S.includes("lps")?x=ls(-1,0,0,0,-1,0,0,0,1):H.warn("Unsupported NRRD space value:",S);break;default:H.warn("Unknown:",E)}}if(!isNaN(p[0])){this.hdr.sform_code=2,m&&(j8(p,p,.001),A[0]*=.001,A[1]*=.001,A[2]*=.001),x[0]<0&&(A[0]=-A[0]),x[4]<0&&(A[1]=-A[1]),x[8]<0&&(A[2]=-A[2]),ip(p,x,p);const y=si(p[0],p[3],p[6],A[0],p[1],p[4],p[7],A[1],p[2],p[5],p[8],A[2],0,0,0,1),b=this.vox2mm([0,0,0],y),C=this.vox2mm([1,0,0],y);te(C,C,b);const E=this.vox2mm([0,1,0],y);te(E,E,b);const S=this.vox2mm([0,0,1],y);te(S,S,b),s.pixDims[1]=Pn(C),s.pixDims[2]=Pn(E),s.pixDims[3]=Pn(S),s.affine=[[y[0],y[1],y[2],y[3]],[y[4],y[5],y[6],y[7]],[y[8],y[9],y[10],y[11]],[0,0,0,1]]}return g&&i?i.slice(0):(g&&H.warn("Missing data: NRRD header describes detached data file but only one URL provided"),f?await ft.decompressToBuffer(new Uint8Array(t.slice(s.vox_offset))):t.slice(s.vox_offset))}calculateRAS(){if(!this.hdr)throw new Error("hdr not set");const t=this.hdr.affine,i=this.hdr,s=ls(Math.abs(t[0][0]),Math.abs(t[0][1]),Math.abs(t[0][2]),Math.abs(t[1][0]),Math.abs(t[1][1]),Math.abs(t[1][2]),Math.abs(t[2][0]),Math.abs(t[2][1]),Math.abs(t[2][2])),a=[1,1,1];s[3]>s[0]&&(a[0]=2),s[6]>s[0]&&s[6]>s[3]&&(a[0]=3),a[1]=1,a[0]===1?s[4]>s[7]?a[1]=2:a[1]=3:a[0]===2?s[1]>s[7]?a[1]=1:a[1]=3:s[1]>s[4]?a[1]=1:a[1]=2,a[2]=6-a[1]-a[0];let o=[1,2,3];o[a[0]-1]=1,o[a[1]-1]=2,o[a[2]-1]=3;let l=si(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],0,0,0,1);this.mm000=this.vox2mm([-.5,-.5,-.5],l),this.mm100=this.vox2mm([i.dims[1]-.5,-.5,-.5],l),this.mm010=this.vox2mm([-.5,i.dims[2]-.5,-.5],l),this.mm001=this.vox2mm([-.5,-.5,i.dims[3]-.5],l);const h=It();P8(h,l);for(let b=0;b<3;b++)for(let C=0;C<3;C++)h[b*4+C]=l[b*4+o[C]-1];const u=[0,0,0];h[0]<0&&(u[0]=1),h[5]<0&&(u[1]=1),h[10]<0&&(u[2]=1),this.dimsRAS=[i.dims[0],i.dims[o[0]],i.dims[o[1]],i.dims[o[2]]],this.pixDimsRAS=[i.pixDims[0],i.pixDims[o[0]],i.pixDims[o[1]],i.pixDims[o[2]]],this.permRAS=o.slice();for(let b=0;b<3;b++)u[b]===1&&(this.permRAS[b]=-this.permRAS[b]);if(this.arrayEquals(o,[1,2,3])&&this.arrayEquals(u,[0,0,0])){this.toRAS=It(),this.matRAS=he(l),this.calculateOblique(),this.img2RASstep=[1,this.dimsRAS[1],this.dimsRAS[1]*this.dimsRAS[2]],this.img2RASstart=[0,0,0];return}Vv(l),l[0+0*4]=1-u[0]*2,l[1+1*4]=1-u[1]*2,l[2+2*4]=1-u[2]*2,l[3+0*4]=(i.dims[o[0]]-1)*u[0],l[3+1*4]=(i.dims[o[1]]-1)*u[1],l[3+2*4]=(i.dims[o[2]]-1)*u[2];const f=It();Xe(f,l),On(f,f,h),this.matRAS=he(f),l=si(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),l[o[0]-1+0*4]=-u[0]*2+1,l[o[1]-1+1*4]=-u[1]*2+1,l[o[2]-1+2*4]=-u[2]*2+1,l[3+0*4]=u[0],l[3+1*4]=u[1],l[3+2*4]=u[2],this.toRAS=he(l),l[3]=0,l[7]=0,l[11]=0,l[12]=0,(this.permRAS[0]===-1||this.permRAS[1]===-1||this.permRAS[2]===-1)&&(l[12]=i.dims[1]-1),l[13]=0,(this.permRAS[0]===-2||this.permRAS[1]===-2||this.permRAS[2]===-2)&&(l[13]=i.dims[2]-1),l[14]=0,(this.permRAS[0]===-3||this.permRAS[1]===-3||this.permRAS[2]===-3)&&(l[14]=i.dims[3]-1),this.toRASvox=he(l),H.debug(this.hdr.dims),H.debug(this.dimsRAS);const m=this.hdr;o=this.permRAS;const g=[Math.abs(o[0]),Math.abs(o[1]),Math.abs(o[2])],p=[m.dims[g[0]],m.dims[g[1]],m.dims[g[2]]],A=[1,m.dims[1],m.dims[1]*m.dims[2]],x=[A[g[0]-1],A[g[1]-1],A[g[2]-1]],y=[0,0,0];for(let b=0;b<3;b++)o[b]<0&&(y[b]=x[b]*(p[b]-1),x[b]=-x[b]);this.img2RASstep=x,this.img2RASstart=y,this.calculateOblique()}async hdr2RAS(t=1){if(!this.permRAS)throw new Error("permRAS undefined");if(!this.hdr)throw new Error("hdr undefined");const i=Ol({...this.hdr},!1),s=await Br(i.buffer,!0);t===1?(s.dims[0]=3,s.dims[4]=1):t>1&&(s.dims[0]=4,s.dims[4]=t);const a=this.permRAS.slice();if(a[0]===1&&a[1]===2&&a[2]===3)return s;s.qform_code=0;for(let l=1;l<4;l++)s.dims[l]=this.dimsRAS[l];for(let l=0;l<this.pixDimsRAS.length;l++)s.pixDims[l]=this.pixDimsRAS[l];let o=0;for(let l=0;l<4;l++)for(let h=0;h<4;h++)s.affine[l][h]=this.matRAS[o],o++;return s}img2RAS(t=0){if(!this.permRAS)throw new Error("permRAS undefined");if(!this.img)throw new Error("img undefined");if(!this.hdr)throw new Error("hdr undefined");const i=this.permRAS.slice();if(i[0]===1&&i[1]===2&&i[2]===3)return this.img;const s=this.hdr,a=s.dims[1]*s.dims[2]*s.dims[3];let o=t*a;(o+a>this.img.length||o<0)&&(o=0,H.warn(`img2RAS nVolume (${t}) out of bounds (${t}+1)×${a} > ${this.img.length}`));const l=this.img.slice(0,a),h=[Math.abs(i[0]),Math.abs(i[1]),Math.abs(i[2])],u=[s.dims[h[0]],s.dims[h[1]],s.dims[h[2]]],f=[1,s.dims[1],s.dims[1]*s.dims[2]],m=[f[h[0]-1],f[h[1]-1],f[h[2]-1]],g=[0,0,0];for(let A=0;A<3;A++)i[A]<0&&(g[A]=m[A]*(u[A]-1),m[A]=-m[A]);let p=0;for(let A=0;A<u[2];A++){const x=g[2]+A*m[2];for(let y=0;y<u[1];y++){const b=g[1]+y*m[1];for(let C=0;C<u[0];C++){const E=g[0]+C*m[0];l[p]=this.img[E+b+x+o],p++}}}return l}vox2mm(t,i){const s=he(i);ai(s,s);const a=Wt(t[0],t[1],t[2],1);return Ve(a,a,s),ut(a[0],a[1],a[2])}mm2vox(t,i=!1){if(!this.matRAS)throw new Error("matRAS undefined");const s=he(this.matRAS),a=he(s);ai(a,s),Xe(a,a);const o=Wt(t[0],t[1],t[2],1);Ve(o,o,a);const l=ut(o[0],o[1],o[2]);return i?l:[Math.round(l[0]),Math.round(l[1]),Math.round(l[2])]}arrayEquals(t,i){return Array.isArray(t)&&Array.isArray(i)&&t.length===i.length&&t.every((s,a)=>s===i[a])}setColormap(t){this._colormap=t,this.calMinMax(),this.onColormapChange&&this.onColormapChange(this)}setColormapLabel(t){this.colormapLabel=Ht.makeLabelLut(t)}async setColormapLabelFromUrl(t){this.colormapLabel=await Ht.makeLabelLutFromUrl(t)}get colormap(){return this._colormap}get colorMap(){return this._colormap}set colormap(t){this.setColormap(t)}set colorMap(t){this.setColormap(t)}get opacity(){return this._opacity}set opacity(t){this._opacity=t,this.onOpacityChange&&this.onOpacityChange(this)}calMinMax(t=Number.POSITIVE_INFINITY,i=!0){if(!this.hdr)throw new Error("hdr undefined");if(!this.img)throw new Error("img undefined");let s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=0,l=0,h=this.hdr.dims[1]*this.hdr.dims[2]*this.hdr.dims[3];const u=Math.floor(this.img.length/h);t>=u&&(t=this.frame4D),t=Math.min(t,u-1);const f=t*h;let m=[];if(i){const k=[Math.floor(.25*this.hdr.dims[1]),Math.floor(.25*this.hdr.dims[2]),Math.floor(.25*this.hdr.dims[3])],z=[this.hdr.dims[1]-2*k[0],this.hdr.dims[2]-2*k[1],this.hdr.dims[3]-2*k[2]],q=[z[0]+k[0],z[1]+k[1],z[2]+k[2]];h=z[0]*z[1]*z[2],m=new this.img.constructor(h);let j=-1,Q=0;for(let tt=0;tt<this.hdr.dims[3];tt++)for(let ot=0;ot<this.hdr.dims[2];ot++)for(let Y=0;Y<this.hdr.dims[1];Y++)j++,!(Y<k[0]||ot<k[1]||tt<k[2])&&(Y>=q[0]||ot>=q[1]||tt>=q[2]||(m[Q]=this.img[j+f],Q++))}else{m=new this.img.constructor(h);for(let N=0;N<h;N++)m[N]=this.img[N+f]}const g=m.constructor!==Float64Array&&m.constructor!==Float32Array&&this.ignoreZeroVoxels;if(g)for(let N=0;N<h;N++)s=Math.min(m[N],s),a=Math.max(m[N],a),m[N]===0&&o++;else for(let N=0;N<h;N++){if(isNaN(m[N])){l++;continue}m[N]===0&&(o++,this.ignoreZeroVoxels)||(s=Math.min(m[N],s),a=Math.max(m[N],a))}this.ignoreZeroVoxels&&s===a&&o>0&&(s=0);const p=this.intensityRaw2Scaled(s),A=this.intensityRaw2Scaled(a),x=Ht.colormapFromKey(this._colormap);let y=0,b=0;if(x.min!==void 0&&(y=x.min),x.max!==void 0&&(b=x.max),y===b&&this.trustCalMinMax&&isFinite(this.hdr.cal_min)&&isFinite(this.hdr.cal_max)&&this.hdr.cal_max>this.hdr.cal_min)return this.cal_min=this.hdr.cal_min,this.cal_max=this.hdr.cal_max,this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=p,this.global_max=A,[this.hdr.cal_min,this.hdr.cal_max,this.hdr.cal_min,this.hdr.cal_max];if(y!==b)return this.cal_min=y,this.cal_max=b,this.robust_min=this.cal_min,this.robust_max=this.cal_max,[y,b,y,b];const C=100*o/(h-0);let E=!1;C>60&&!this.ignoreZeroVoxels&&(H.warn(`${Math.round(C)}% of voxels are zero: ignoring zeros for cal_max`),E=!0,this.ignoreZeroVoxels=!0),this.ignoreZeroVoxels||(o=0),o+=l;const S=Math.round((h-0-o)*this.percentileFrac);if(S<1||s===a)return H.debug("no variability in image intensity?"),this.cal_min=p,this.cal_max=A,this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=p,this.global_max=A,[p,A,p,A];const M=1001,T=(M-1)/(a-s),I=new Array(M);for(let N=0;N<M;N++)I[N]=0;if(g)for(let N=0;N<h;N++)I[Math.round((m[N]-s)*T)]++;else if(this.ignoreZeroVoxels)for(let N=0;N<h;N++)m[N]!==0&&(isNaN(m[N])||I[Math.round((m[N]-s)*T)]++);else for(let N=0;N<h;N++)isNaN(m[N])||I[Math.round((m[N]-s)*T)]++;let R=0,D=0;for(;R<S;)R+=I[D],D++;D--,R=0;let U=M;for(;R<S;)U--,R+=I[U];if(D===U){let N=-1;for(;N!==0;)D>0&&(D--,I[D]>0&&(N=0)),N!==0&&U<M-1&&(U++,I[U]>0&&(N=0)),D===0&&U===M-1&&(N=0)}let F=this.intensityRaw2Scaled(D/T+s),P=this.intensityRaw2Scaled(U/T+s);return this.hdr.cal_min<this.hdr.cal_max&&this.hdr.cal_min>=p&&this.hdr.cal_max<=A&&(F=this.hdr.cal_min,P=this.hdr.cal_max),E&&(F=Math.min(F,0)),this.cal_min=F,this.cal_max=P,this.robust_min=this.cal_min,this.robust_max=this.cal_max,this.global_min=p,this.global_max=A,[F,P,p,A]}intensityRaw2Scaled(t){if(!this.hdr)throw new Error("hdr undefined");return this.hdr.scl_slope===0&&(this.hdr.scl_slope=1),t*this.hdr.scl_slope+this.hdr.scl_inter}intensityScaled2Raw(t){if(!this.hdr)throw new Error("hdr undefined");return this.hdr.scl_slope===0&&(this.hdr.scl_slope=1),(t-this.hdr.scl_inter)/this.hdr.scl_slope}async saveToUint8Array(t,i=null){if(!this.hdr)throw new Error("hdr undefined");if(!this.img)throw new Error("img undefined");const s=i!==null,a=Ol(this.hdr,s),o=new Uint8Array(4);let l=new Uint8Array(this.img.buffer);s&&(l=new Uint8Array(i.buffer));const h=new Uint8Array(a.length+o.length+l.length);h.set(a),h.set(o,a.length),h.set(l,a.length+o.length);let u=null;return t.endsWith(".gz")?u=new Uint8Array(await ft.compress(h,"gzip")):u=h,u}async saveToDisk(t="",i=null){const s=await this.saveToUint8Array(t,i);if(t==="")return H.debug("saveToDisk: empty file name, returning data as Uint8Array rather than triggering download"),s;const a=new Blob([s.buffer],{type:"application/octet-stream"}),o=URL.createObjectURL(a),l=document.createElement("a");return l.setAttribute("href",o),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),s}static async fetchDicomData(t,i={}){if(t==="")throw Error("url must not be empty");let a=/^(?:[a-z+]+:)?\/\//i.test(t)?t:new URL(t,window.location.href);/(?:.([^.]+))?$/.exec(a.pathname)||(a=new URL("niivue-manifest.txt",t));let h=await fetch(a,{headers:i});if(!h.ok)throw Error(h.statusText);const f=(await h.text()).split(`
`),g=/(.*\/).*/.exec(a)[0],p=[];for(const A of f){const x=new URL(A,g);if(h=await fetch(x,{headers:i}),!h.ok)throw Error(h.statusText);const y=await h.arrayBuffer();p.push({name:A,data:y})}return p}static async readFirstDecompressedBytes(t,i){const s=t.getReader(),a=new xC,o=[];let l=0,h=!1,u,f;const m=new Promise((p,A)=>{u=p,f=A});function g(){const p=new Uint8Array(l);let A=0;for(const x of o)p.set(x,A),A+=x.length;u(p)}return a.ondata=p=>{o.push(p),l+=p.length,l>=i&&(h=!0,s.cancel().catch(()=>{}),g())},(async()=>{try{for(;!h;){const{done:p,value:A}=await s.read();if(p){h=!0,a.push(new Uint8Array,!0);return}a.push(A,!1)}}catch(p){f(p)}})().catch(()=>{}),m}static extractFilenameFromUrl(t){const s=new URL(t).searchParams.get("response-content-disposition");if(s){const a=s.match(/filename\*?=(?:UTF-8'')?"?([^";]+)"?/);if(a)return decodeURIComponent(a[1])}return t.split("/").pop().split("?")[0]}static async loadInitialVolumesGz(t="",i={},s=NaN){if(isNaN(s))return null;const a=await fetch(t,{headers:i,cache:"force-cache"});let o=352,l=await this.readFirstDecompressedBytes(a.body,o);const h=new DataView(l.buffer,l.byteOffset,l.byteLength),u=h.getUint16(0,!0),f=u===348;if(!f&&!(u===23553)||(l.length>111&&(o=h.getFloat32(108,f)),o>l.length&&(l=await this.readFirstDecompressedBytes(a.body,o)),!(l[0]===92&&l[1]===1||l[1]===92&&l[0]===1)))return null;const p=await Br(l.buffer);if(!p)throw new Error("Could not read NIfTI header");const A=p.numBitsPerVoxel/8,x=[1,2,3].reduce((M,T)=>M*(p.dims[T]>1?p.dims[T]:1),1),y=[4,5,6].reduce((M,T)=>M*(p.dims[T]>1?p.dims[T]:1),1),b=Math.max(Math.min(s,y),1),C=p.vox_offset+b*x*A;if(b===y)return null;const E=await fetch(t,{headers:i,cache:"force-cache"});return(await this.readFirstDecompressedBytes(E.body,C)).buffer.slice(0,C)}static async loadInitialVolumes(t="",i={},s=NaN){if(isNaN(s))return null;const o=(await fetch(t,{headers:i,cache:"force-cache"})).body.getReader(),{value:l,done:h}=await o.read();let u=l;if(h||!u||u.length<2)throw new Error("Not enough data to determine compression");const f=new DataView(u.buffer,u.byteOffset,u.byteLength),m=f.getUint16(0,!0);if(m===35615)return await o.cancel(),this.loadInitialVolumesGz(t,i,s);const p=m===348;if(!p&&!(m===23553))return await o.cancel(),null;let x=352;for(u.length>111&&(x=f.getFloat32(108,p));u.length<x;){let D=function(P,N){const k=new Uint8Array(P.length+N.length);return k.set(P,0),k.set(N,P.length),k};const{value:U,done:F}=await o.read();if(F||!U)break;u=D(u,U)}const y=await Br(u.buffer);if(!y)throw new Error("Could not read NIfTI header");const b=y.numBitsPerVoxel/8,C=[1,2,3].reduce((D,U)=>D*(y.dims[U]>1?y.dims[U]:1),1),E=[4,5,6].reduce((D,U)=>D*(y.dims[U]>1?y.dims[U]:1),1),S=Math.max(Math.min(s,E),1),M=y.vox_offset+S*C*b,T=new Uint8Array(M),I=Math.min(u.length,M);T.set(u.subarray(0,I),0);let R=I;for(;R<M;){const{value:D,done:U}=await o.read();if(U||!D)return await o.cancel(),null;const F=Math.min(D.length,M-R);T.set(D.subarray(0,F),R),R+=F}return await o.cancel(),T.buffer}static async loadFromUrl({url:t="",urlImgData:i="",headers:s={},name:a="",colormap:o="gray",opacity:l=1,cal_min:h=NaN,cal_max:u=NaN,trustCalMinMax:f=!0,percentileFrac:m=.02,ignoreZeroVoxels:g=!1,useQFormNotSForm:p=!1,colormapNegative:A="",frame4D:x=0,isManifest:y=!1,limitFrames4D:b=NaN,imageType:C=Et.UNKNOWN,colorbarVisible:E=!0,buffer:S=new ArrayBuffer(0)}={}){if(t==="")throw Error("url must not be empty");let M=null,T=null;if(t instanceof Uint8Array&&(t=t.buffer),S.byteLength>0&&(t=S),t instanceof ArrayBuffer)if(T=t,a!=="")t=a;else{const F=new Uint8Array(T);t=F[0]===31&&F[1]===139?"array.nii.gz":"array.nii"}function I(F){const P=F.match(/\.([^.]+)(?:\.gz|\.bz2|\.xz)?$/);return P?P[1]:""}let R="";if(a===""?R=I(t):R=I(a),C===Et.UNKNOWN&&(C=Et.parse(R)),C===Et.UNKNOWN&&typeof t=="string"){const F=await fetch(t,{});if(F.redirected){const P=this.extractFilenameFromUrl(F.url);P&&P.length>0&&a===""&&(a=P,R=I(a),C=Et.parse(R))}}const D=C===Et.DCM||Et.NII;if(!T&&D&&(T=await this.loadInitialVolumes(t,s,b)),!T)if(y)T=await $l.fetchDicomData(t,s),C=Et.DCM_MANIFEST;else{const F=await fetch(t,{headers:s});if(!F.ok)throw Error(F.statusText);if(!F.body)throw new Error("No readable stream available");const P=await of(F.body),N=[],k=P.getReader();for(;;){const{done:Q,value:tt}=await k.read();if(Q)break;N.push(tt)}const z=N.reduce((Q,tt)=>Q+tt.length,0);T=new ArrayBuffer(z);const q=new Uint8Array(T);let j=0;for(const Q of N)q.set(Q,j),j+=Q.length}R.toUpperCase()==="HEAD"&&i===""&&(i=t.substring(0,t.lastIndexOf("HEAD"))+"BRIK");let U=null;if(i)try{let F=await fetch(i,{headers:s});if(F.status===404&&i.includes("BRIK")&&(F=await fetch(`${i}.gz`,{headers:s})),F.ok&&F.body){const P=await of(F.body),N=[],k=P.getReader();for(;;){const{done:Q,value:tt}=await k.read();if(Q)break;N.push(tt)}const z=N.reduce((Q,tt)=>Q+tt.length,0);U=new ArrayBuffer(z);const q=new Uint8Array(U);let j=0;for(const Q of N)q.set(Q,j),j+=Q.length}}catch(F){console.error("Error loading paired image data:",F)}if(!T)throw new Error("Unable to load buffer properly from volume");if(!a){let F;try{F=new URL(t).pathname.split("/")}catch{F=t.split("/")}a=F.slice(-1)[0],a.indexOf("?")>-1&&(a=a.slice(0,a.indexOf("?")))}return M=await this.new(T,a,o,l,U,h,u,f,m,g,p,A,x,C),M.url=t,M.colorbarVisible=E,M}static async readFileAsync(t,i=NaN){let s=t.stream();if(!isNaN(i)){let g=0;const p=new TransformStream({transform(A,x){if(g>=i){x.terminate();return}const y=i-g;A.length>y?(x.enqueue(A.slice(0,y)),x.terminate()):x.enqueue(A),g+=A.length}});s=s.pipeThrough(p)}const a=await of(s),o=[],l=a.getReader();for(;;){const{done:g,value:p}=await l.read();if(g)break;o.push(p)}const h=o.reduce((g,p)=>g+p.length,0),u=new ArrayBuffer(h),f=new Uint8Array(u);let m=0;for(const g of o)f.set(g,m),m+=g.length;return u}static async loadFromFile({file:t,name:i="",colormap:s="gray",opacity:a=1,urlImgData:o=null,cal_min:l=NaN,cal_max:h=NaN,trustCalMinMax:u=!0,percentileFrac:f=.02,ignoreZeroVoxels:m=!1,useQFormNotSForm:g=!1,colormapNegative:p="",frame4D:A=0,limitFrames4D:x=NaN,imageType:y=Et.UNKNOWN}){let b=null,C=[];try{if(Array.isArray(t))C=await Promise.all(t.map(S=>this.readFileAsync(S)));else{if(isNaN(x))C=await this.readFileAsync(t);else{const S=await this.readFileAsync(t,512),M=new Uint8Array(S);if(!(M[0]===92&&M[1]===1||M[1]===92&&M[0]===1))C=await this.readFileAsync(t);else{const I=await Br(S);if(!I)throw new Error("could not read nifti header");const R=I.numBitsPerVoxel/8,D=[1,2,3].reduce((N,k)=>N*(I.dims[k]>1?I.dims[k]:1),1),U=[4,5,6].reduce((N,k)=>N*(I.dims[k]>1?I.dims[k]:1),1),F=Math.max(Math.min(x,U),1),P=I.vox_offset+F*D*R;C=await this.readFileAsync(t,P)}}i=t.name}let E=null;o&&(E=await this.readFileAsync(o)),b=await this.new(C,i,s,a,E,l,h,u,f,m,g,p,A,y),b.fileObject=t}catch(E){throw H.error(E),new Error("could not build NVImage")}if(b===null)throw new Error("could not build NVImage");return b}static createNiftiArray(t=[256,256,256],i=[1,1,1],s=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],a=2,o=new Uint8Array){const l=this.createNiftiHeader(t,i,s,a),h=Ol(l,!1);if(o.length<1)return h;const u=new Uint8Array(4),f=new Uint8Array(o.buffer),m=new Uint8Array(h.length+u.length+f.length);return m.set(h),m.set(u,h.length),m.set(f,h.length+u.length),m}static createNiftiHeader(t=[256,256,256],i=[1,1,1],s=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],a=2){const o=new Mt;o.littleEndian=!0,o.dims=[3,1,1,1,0,0,0,0],o.dims[0]=Math.max(3,t.length);for(let h=0;h<t.length;h++)o.dims[h+1]=t[h];o.pixDims=[1,1,1,1,1,0,0,0];for(let h=0;h<t.length;h++)o.pixDims[h+1]=i[h];if(s.length===16){let h=0;for(let u=0;u<4;u++)for(let f=0;f<4;f++)o.affine[u][f]=s[h],h++}let l=8;return a===256||a===2?l=8:a===512||a===4?l=16:a===16||a===768||a===8||a===2304?l=32:a===64?l=64:H.warn("Unsupported NIfTI datatypeCode: "+a),o.datatypeCode=a,o.numBitsPerVoxel=l,o.scl_inter=0,o.scl_slope=0,o.sform_code=2,o.magic="n+1",o.vox_offset=352,o}getVolumeData(t=[-1,0,0],i=[0,0,0],s="same"){let a=new Uint8Array;if(Math.min(...t)<0||Math.min(...i)<0)return[a,[0,0,0]];const o=this.dimsRAS.slice(1,4);for(let p=0;p<3;p++)if(t[p]=Math.min(t[p],o[p]-1),i[p]=Math.min(i[p],o[p]-1),i[p]<t[p]){const A=i[p];i[p]=t[p],t[p]=A}const l=[i[0]-t[0]+1,i[1]-t[1]+1,i[2]-t[2]+1],h=l[0]*l[1]*l[2];let u=this.hdr.datatypeCode;if(s==="uint8"?u=2:(s==="float32"||s==="scaled"||s==="normalized"||s==="windowed")&&(u=16),u===2)a=new Uint8Array(h);else if(u===4)a=new Int16Array(h);else if(u===512)a=new Uint16Array(h);else if(u===16)a=new Float32Array(h);else if(u===64)a=new Float64Array(h);else return H.error("getVolumeData unsupported datatype"),[a,[0,0,0]];const f=this.img2RASstep,m=this.img2RASstart;let g=0;for(let p=t[2];p<=i[2];p++){const A=m[2]+p*f[2];for(let x=t[1];x<=i[1];x++){const y=A+m[1]+x*f[1];for(let b=t[0];b<=i[0];b++){const C=m[0]+b*f[0];a[g++]=this.img[C+y]}}}if(s==="scaled"||s==="normalized"||s==="windowed")for(let p=0;p<a.length;p++)a[p]=a[p]*this.hdr.scl_slope+this.hdr.scl_inter;if(s==="normalized"||s==="windowed"){let p=this.cal_min,A=this.cal_max;s==="normalized"&&(p=this.global_min,A=this.global_max);const x=1/(A-p);for(let y=0;y<a.length;y++)a[y]=(a[y]-p)*x,a[y]=Math.max(Math.min(a[y],1),0)}return[a,l]}setVolumeData(t=[-1,0,0],i=[0,0,0],s=new Uint8Array){if(s.length<1||Math.min(...t)<0||Math.min(...i)<0)return;const a=this.dimsRAS.slice(1,4);for(let m=0;m<3;m++)if(t[m]=Math.min(t[m],a[m]-1),i[m]=Math.min(i[m],a[m]-1),i[m]<t[m]){const g=i[m];i[m]=t[m],t[m]=g}const o=[i[0]-t[0]+1,i[1]-t[1]+1,i[2]-t[2]+1],l=o[0]*o[1]*o[2];if(s.length<l){H.error("setVolumeData image does not have enough voxels");return}const h=this.img2RASstep,u=this.img2RASstart;let f=0;for(let m=t[2];m<=i[2];m++){const g=u[2]+m*h[2];for(let p=t[1];p<=i[1];p++){const A=g+u[1]+p*h[1];for(let x=t[0];x<=i[0];x++){const y=u[0]+x*h[0];this.img[y+A]=s[f++]}}}}static async loadFromBase64({base64:t,name:i="",colormap:s="gray",opacity:a=1,cal_min:o=NaN,cal_max:l=NaN,trustCalMinMax:h=!0,percentileFrac:u=.02,ignoreZeroVoxels:f=!1,useQFormNotSForm:m=!1,colormapNegative:g="",frame4D:p=0,imageType:A=Et.UNKNOWN,cal_minNeg:x=NaN,cal_maxNeg:y=NaN,colorbarVisible:b=!0,colormapLabel:C=null}){function E(M){const T=window.atob(M),I=T.length,R=new Uint8Array(I);for(let D=0;D<I;D++)R[D]=T.charCodeAt(D);return R.buffer}let S=null;try{const M=E(t);S=await this.new(M,i,s,a,null,o,l,h,u,f,m,g,p,A,x,y,b,C)}catch(M){H.debug(M)}if(S===null)throw new Error("could not load NVImage");return S}clone(){const t=new $l;return t.id=Nf(),t.hdr=Object.assign({},this.hdr),t.img=this.img.slice(),t.calculateRAS(),t.calMinMax(),t}zeroImage(){this.img.fill(0)}getImageMetadata(){if(!this.hdr)throw new Error("hdr undefined");const t=this.id,i=this.hdr.datatypeCode,s=this.hdr.dims,a=s[1],o=s[2],l=s[3],h=Math.max(1,s[4]),u=this.hdr.pixDims,f=u[1],m=u[2],g=u[3],p=u[4],A=Math.floor(this.hdr.numBitsPerVoxel/8);return{id:t,datatypeCode:i,nx:a,ny:o,nz:l,nt:h,dx:f,dy:m,dz:g,dt:p,bpv:A}}static zerosLike(t,i="same"){const s=t.clone();return s.zeroImage(),i==="uint8"&&(s.img=Uint8Array.from(s.img),s.hdr.datatypeCode=2,s.hdr.numBitsPerVoxel=8),i==="float32"&&(s.img=Float32Array.from(s.img),s.hdr.datatypeCode=16,s.hdr.numBitsPerVoxel=32),s}getValue(t,i,s,a=0,o=!1){if(!this.hdr)throw new Error("hdr undefined");if(!this.img)throw new Error("img undefined");const l=this.hdr.dims[1],h=this.hdr.dims[2],u=this.hdr.dims[3],f=this.permRAS.slice();if(f[0]!==1||f[1]!==2||f[2]!==3){const A=Wt(t,i,s,1);Ve(A,A,this.toRASvox),t=A[0],i=A[1],s=A[2]}let m=t+i*l+s*l*h;if(this.hdr.datatypeCode===2304)return m*=4,Math.round(this.img[m]*.21+this.img[m+1]*.72+this.img[m+2]*.07);if(this.hdr.datatypeCode===128)return m*=3,Math.round(this.img[m]*.21+this.img[m+1]*.72+this.img[m+2]*.07);const g=a*l*h*u;let p=this.img[m+g];return o&&(p=this.imaginary[m+g]),this.hdr.scl_slope*p+this.hdr.scl_inter}toNiivueObject3D(t,i){const s=this.dimsRAS,a=this.matRAS,o=this.pixDimsRAS,l=-.5,h=-.5,u=-.5,f=s[1]-1+.5,m=s[2]-1+.5,g=s[3]-1+.5,p=this.vox2mm([l,h,u],a),A=this.vox2mm([l,m,u],a),x=this.vox2mm([l,h,g],a),y=this.vox2mm([l,m,g],a),b=this.vox2mm([f,h,u],a),C=this.vox2mm([f,m,u],a),E=this.vox2mm([f,h,g],a),S=this.vox2mm([f,m,g],a),M=[...x,0,0,1,...E,1,0,1,...S,1,1,1,...y,0,1,1,...p,0,0,0,...A,0,1,0,...C,1,1,0,...b,1,0,0],T=i.createBuffer();i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,T);const I=[0,3,2,2,1,0,4,7,6,6,5,4,5,6,2,2,3,5,4,0,1,1,7,4,7,1,2,2,6,7,4,5,3,3,0,4];i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(I),i.STATIC_DRAW);const R=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,R),i.bufferData(i.ARRAY_BUFFER,new Float32Array(M),i.STATIC_DRAW);const D=i.createVertexArray();i.bindVertexArray(D),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,T),i.bindBuffer(i.ARRAY_BUFFER,R),i.enableVertexAttribArray(0),i.vertexAttribPointer(0,3,i.FLOAT,!1,24,0),i.enableVertexAttribArray(1),i.vertexAttribPointer(1,3,i.FLOAT,!1,24,12),i.bindVertexArray(null);const U=new As(t,R,i.TRIANGLES,I.length,T,D),F=XM([...x,...E,...S,...y,...p,...A,...C,...b]);return U.extentsMin=F.min.slice(),U.extentsMax=F.max.slice(),U.furthestVertexFromOrigin=F.furthestVertexFromOrigin,U.originNegate=Gr(F.origin),G8(U.originNegate,U.originNegate),U.fieldOfViewDeObliqueMM=[s[1]*o[1],s[2]*o[2],s[3]*o[3]],U}applyOptionsUpdate(t){this.hdr.cal_min=t.cal_min,this.hdr.cal_max=t.cal_max,Object.assign(this,t)}getImageOptions(){return _l("","",this.name,this._colormap,this.opacity,this.hdr.cal_min,this.hdr.cal_max,this.trustCalMinMax,this.percentileFrac,this.ignoreZeroVoxels,this.useQFormNotSForm,this.colormapNegative,this.frame4D,this.imageType,this.colormapType)}toUint8Array(t=null){const i=t!==null,s=Ol({...this.hdr},i);let a=t;if(i){const u=this.permRAS;if(u[0]!==1||u[1]!==2||u[2]!==3){const f=this.hdr.dims,m=[0,0,0];for(let M=0;M<3;M++)for(let T=0;T<3;T++)Math.abs(u[M])-1===T&&(m[T]=M*Math.sign(u[M]));let g=1;const p=[1,1,1],A=[!1,!1,!1];for(let M=0;M<m.length;M++)for(let T=0;T<m.length;T++)Math.abs(m[T])===M&&(p[T]=g,(m[T]<0||Object.is(m[T],-0))&&(A[T]=!0),g*=f[T+1]);let x=ft.range(0,f[1]-1,1);A[0]&&(x=ft.range(f[1]-1,0,-1));for(let M=0;M<f[1];M++)x[M]*=p[0];let y=ft.range(0,f[2]-1,1);A[1]&&(y=ft.range(f[2]-1,0,-1));for(let M=0;M<f[2];M++)y[M]*=p[1];let b=ft.range(0,f[3]-1,1);A[2]&&(b=ft.range(f[3]-1,0,-1));for(let M=0;M<f[3];M++)b[M]*=p[2];const C=new Uint8Array(t),E=new Uint8Array(f[1]*f[2]*f[3]);let S=0;for(let M=0;M<f[3];M++)for(let T=0;T<f[2];T++)for(let I=0;I<f[1];I++)E[S]=C[x[I]+y[T]+b[M]],S++;a=E,H.debug("drawing bytes"),H.debug(a)}}const o=i?a:new Uint8Array(this.img.buffer),l=new Uint8Array(4),h=new Uint8Array(s.length+l.length+o.length);return h.set(s),h.set(l,s.length),h.set(o,s.length+l.length),h}convertVox2Frac(t){return ut((t[0]+.5)/this.dimsRAS[1],(t[1]+.5)/this.dimsRAS[2],(t[2]+.5)/this.dimsRAS[3])}convertFrac2Vox(t){return ut(Math.round(t[0]*this.dims[1]-.5),Math.round(t[1]*this.dims[2]-.5),Math.round(t[2]*this.dims[3]-.5))}convertFrac2MM(t,i=!1){const s=Wt(t[0],t[1],t[2],1);return i?Ve(s,s,this.frac2mm):Ve(s,s,this.frac2mmOrtho),s}convertMM2Frac(t,i=!1){const s=Wt(t[0],t[1],t[2],1),a=this.dimsRAS,o=ut(0,0,0);if(typeof a>"u")return o;if(!i){const h=he(this.frac2mmOrtho);return Xe(h,h),Ve(s,s,h),o[0]=s[0],o[1]=s[1],o[2]=s[2],o}if(a[1]<1||a[2]<1||a[3]<1)return o;const l=he(this.matRAS);return Xe(l,l),ai(l,l),Ve(s,s,l),o[0]=(s[0]+.5)/a[1],o[1]=(s[1]+.5)/a[2],o[2]=(s[2]+.5)/a[3],o}},$v=(e=>(e[e.none=0]="none",e[e.contrast=1]="contrast",e[e.measurement=2]="measurement",e[e.pan=3]="pan",e[e.slicer3D=4]="slicer3D",e[e.callbackOnly=5]="callbackOnly",e[e.roiSelection=6]="roiSelection",e))($v||{}),Ln={textHeight:.06,colorbarHeight:.05,crosshairWidth:1,crosshairWidthUnit:"voxels",crosshairGap:0,rulerWidth:4,show3Dcrosshair:!1,backColor:[0,0,0,1],crosshairColor:[1,0,0,1],fontColor:[.5,.5,.5,1],selectionBoxColor:[1,1,1,.5],clipPlaneColor:[.7,0,.7,.5],clipThick:2,clipVolumeLow:[0,0,0],clipVolumeHigh:[1,1,1],rulerColor:[1,0,0,.8],colorbarMargin:.05,trustCalMinMax:!0,clipPlaneHotKey:"KeyC",viewModeHotKey:"KeyV",doubleTouchTimeout:500,longTouchTimeout:1e3,keyDebounceTime:50,isNearestInterpolation:!1,isResizeCanvas:!0,atlasOutline:0,isRuler:!1,isColorbar:!1,isOrientCube:!1,tileMargin:0,multiplanarPadPixels:0,multiplanarForceRender:!1,multiplanarEqualSize:!1,multiplanarShowRender:2,isRadiologicalConvention:!1,meshThicknessOn2D:1/0,dragMode:1,dragModePrimary:0,yoke3Dto2DZoom:!1,isDepthPickMesh:!1,isCornerOrientationText:!1,heroImageFraction:0,heroSliceType:4,sagittalNoseLeft:!1,isSliceMM:!1,isV1SliceShader:!1,forceDevicePixelRatio:0,logLevel:"info",loadingText:"loading ...",isForceMouseClickToVoxelCenters:!1,dragAndDropEnabled:!0,drawingEnabled:!1,penValue:1,floodFillNeighbors:6,isFilledPen:!1,thumbnail:"",maxDrawUndoBitmaps:8,sliceType:3,meshXRay:0,isAntiAlias:null,limitFrames4D:NaN,isAdditiveBlend:!1,showLegend:!0,legendBackgroundColor:[.3,.3,.3,.5],legendTextColor:[1,1,1,1],multiplanarLayout:0,renderOverlayBlend:1,sliceMosaicString:"",centerMosaic:!1,penSize:1,interactive:!0,clickToSegment:!1,clickToSegmentRadius:3,clickToSegmentBright:!0,clickToSegmentAutoIntensity:!1,clickToSegmentIntensityMax:NaN,clickToSegmentIntensityMin:NaN,clickToSegmentPercent:0,clickToSegmentMaxDistanceMM:Number.POSITIVE_INFINITY,clickToSegmentIs2D:!1,selectionBoxLineThickness:4,selectionBoxIsOutline:!1,scrollRequiresFocus:!1,showMeasureUnits:!0,measureTextJustify:"center",measureTextColor:[1,0,0,1],measureLineColor:[1,0,0,1],measureTextHeight:.03,isAlphaClipDark:!1,gradientOrder:1,gradientOpacity:0},tc={gamma:1,azimuth:110,elevation:10,crosshairPos:ut(.5,.5,.5),clipPlane:[0,0,0,0],clipPlaneDepthAziElev:[2,0,0],volScaleMultiplier:1,pan2Dxyzmm:Wt(0,0,0,1),clipThick:2,clipVolumeLow:[0,0,0],clipVolumeHigh:[1,1,1]},lf=class da{constructor(){O(this,"data",{title:"Untitled document",imageOptionsArray:[],meshOptionsArray:[],opts:{...Ln},previewImageDataURL:"",labels:[],encodedImageBlobs:[],encodedDrawingBlob:""}),O(this,"scene"),O(this,"volumes",[]),O(this,"meshDataObjects"),O(this,"meshes",[]),O(this,"drawBitmap",null),O(this,"imageOptionsMap",new Map),O(this,"meshOptionsMap",new Map),this.scene={onAzimuthElevationChange:()=>{},onZoom3DChange:()=>{},sceneData:{...tc,pan2Dxyzmm:Wt(0,0,0,1),crosshairPos:ut(.5,.5,.5)},get renderAzimuth(){return this.sceneData.azimuth},set renderAzimuth(t){this.sceneData.azimuth=t,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get renderElevation(){return this.sceneData.elevation},set renderElevation(t){this.sceneData.elevation=t,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get volScaleMultiplier(){return this.sceneData.volScaleMultiplier},set volScaleMultiplier(t){this.sceneData.volScaleMultiplier=t,this.onZoom3DChange(t)},get crosshairPos(){return this.sceneData.crosshairPos},set crosshairPos(t){this.sceneData.crosshairPos=t},get clipPlane(){return this.sceneData.clipPlane},set clipPlane(t){this.sceneData.clipPlane=t},get clipPlaneDepthAziElev(){return this.sceneData.clipPlaneDepthAziElev},set clipPlaneDepthAziElev(t){this.sceneData.clipPlaneDepthAziElev=t},get pan2Dxyzmm(){return this.sceneData.pan2Dxyzmm},set pan2Dxyzmm(t){this.sceneData.pan2Dxyzmm=t},get gamma(){return this.sceneData.gamma},set gamma(t){this.sceneData.gamma=t}}}get title(){return this.data.title}get previewImageDataURL(){return this.data.previewImageDataURL}set previewImageDataURL(t){this.data.previewImageDataURL=t}set title(t){this.data.title=t}get imageOptionsArray(){return this.data.imageOptionsArray}get encodedImageBlobs(){return this.data.encodedImageBlobs}get encodedDrawingBlob(){return this.data.encodedDrawingBlob}get opts(){return this.data.opts}set opts(t){this.data.opts={...t}}get labels(){return this.data.labels}set labels(t){this.data.labels=t}get customData(){return this.data.customData}set customData(t){this.data.customData=t}hasImage(t){return this.volumes.find(i=>i.id===t.id)!==void 0}hasImageFromUrl(t){return this.data.imageOptionsArray.find(i=>i.url===t)!==void 0}addImageOptions(t,i){if(!this.hasImage(t)&&!i.name)if(i.url){const a=/^(?:[a-z+]+:)?\/\//i.test(i.url)?new URL(i.url):new URL(i.url,window.location.href);i.name=a.pathname.split("/").pop(),i.name.toLowerCase().endsWith(".gz")&&(i.name=i.name.slice(0,-3)),i.name.toLowerCase().endsWith(".nii")||(i.name+=".nii")}else i.name="untitled.nii";i.imageType=Et.NII,this.data.imageOptionsArray.push(i),this.imageOptionsMap.set(t.id,this.data.imageOptionsArray.length-1)}removeImage(t){if(this.imageOptionsMap.has(t.id)){const i=this.imageOptionsMap.get(t.id);this.data.imageOptionsArray.length>i&&this.data.imageOptionsArray.splice(i,1),this.imageOptionsMap.delete(t.id)}this.volumes=this.volumes.filter(i=>i.id!==t.id)}getImageOptions(t){return this.imageOptionsMap.has(t.id)?this.data.imageOptionsArray[this.imageOptionsMap.get(t.id)]:null}json(){const t={encodedImageBlobs:[],previewImageDataURL:this.data.previewImageDataURL,imageOptionsMap:new Map},i=[];t.sceneData={...this.scene.sceneData},t.opts={...this.opts},this.opts.meshThicknessOn2D===1/0&&(t.opts.meshThicknessOn2D="infinity"),t.labels=[...this.data.labels];for(const a of t.labels)delete a.onClick;if(t.customData=this.customData,this.volumes.length)for(let a=0;a<this.volumes.length;a++){const o=this.volumes[a];let l=this.getImageOptions(o);l===null?(H.warn("no options found for image, using default"),l={name:"",colormap:"gray",opacity:1,pairedImgData:null,cal_min:NaN,cal_max:NaN,trustCalMinMax:!0,percentileFrac:.02,ignoreZeroVoxels:!1,useQFormNotSForm:!1,colormapNegative:"",colormapLabel:null,imageType:Et.NII,frame4D:0,limitFrames4D:NaN,url:"",urlImageData:"",alphaThreshold:!1,cal_minNeg:NaN,cal_maxNeg:NaN,colorbarVisible:!0}):"imageType"in l||(l.imageType=Et.NII),l.colormap=o.colormap,l.colormapLabel=o.colormapLabel,l.opacity=o.opacity,l.cal_max=o.cal_max||NaN,l.cal_min=o.cal_min||NaN,i.push(l);const h=ft.uint8tob64(o.toUint8Array());t.encodedImageBlobs.push(h),t.imageOptionsMap.set(o.id,a)}t.imageOptionsArray=[...i];const s=[];t.connectomes=[];for(const a of this.meshes){if(a.type==="connectome"){t.connectomes.push(JSON.stringify(a.json()));continue}const o={pts:a.pts,tris:a.tris,name:a.name,rgba255:Uint8Array.from(a.rgba255),opacity:a.opacity,connectome:a.connectome,dpg:a.dpg,dps:a.dps,dpv:a.dpv,meshShaderIndex:a.meshShaderIndex,layers:a.layers.map(l=>({values:l.values,nFrame4D:l.nFrame4D,frame4D:0,outlineBorder:l.outlineBorder,global_min:l.global_min,global_max:l.global_max,cal_min:l.cal_min,cal_max:l.cal_max,opacity:l.opacity,colormap:l.colormap,colormapNegative:l.colormapNegative,colormapLabel:l.colormapLabel,useNegativeCmap:l.useNegativeCmap})),hasConnectome:a.hasConnectome,edgeColormap:a.edgeColormap,edgeColormapNegative:a.edgeColormapNegative,edgeMax:a.edgeMax,edgeMin:a.edgeMin,edges:a.edges&&Array.isArray(a.edges)?[...a.edges]:[],extentsMax:a.extentsMax,extentsMin:a.extentsMin,furthestVertexFromOrigin:a.furthestVertexFromOrigin,nodeColormap:a.nodeColormap,nodeColormapNegative:a.nodeColormapNegative,nodeMaxColor:a.nodeMaxColor,nodeMinColor:a.nodeMinColor,nodeScale:a.nodeScale,legendLineThickness:a.legendLineThickness,offsetPt0:a.offsetPt0,nodes:a.nodes};a.offsetPt0&&a.offsetPt0.length>0&&(o.offsetPt0=a.offsetPt0,o.fiberGroupColormap=a.fiberGroupColormap,o.fiberColor=a.fiberColor,o.fiberDither=a.fiberDither,o.fiberRadius=a.fiberRadius,o.colormap=a.colormap),s.push(o)}return t.meshesString=JSON.stringify(rC(s)),this.drawBitmap&&(t.encodedDrawingBlob=ft.uint8tob64(this.drawBitmap)),t}async download(t,i){const s=this.json(),a=JSON.stringify(s),o=i?"application/gzip":"application/json";let l;i?l=await ft.compressStringToArrayBuffer(a):l=a,ft.download(l,t,o)}static deserializeMeshDataObjects(t){if(t.data.meshesString){t.meshDataObjects=iC(JSON.parse(t.data.meshesString));for(const i of t.meshDataObjects)for(const s of i.layers)"colorMap"in s&&(s.colormap=s.colorMap,delete s.colorMap),"colorMapNegative"in s&&(s.colormapNegative=s.colorMapNegative,delete s.colorMapNegative)}}static async loadFromUrl(t){const s=await(await fetch(t)).arrayBuffer();let a;if(ft.isArrayBufferCompressed(s)){const o=await ft.decompressArrayBuffer(s);a=JSON.parse(o)}else{const o=new TextDecoder;a=JSON.parse(o.decode(s))}return da.loadFromJSON(a)}static async loadFromFile(t){const i=await ft.readFileAsync(t);let s;const a=new da;return ft.isArrayBufferCompressed(i)?s=await ft.decompressArrayBuffer(i):s=new TextDecoder().decode(i),a.data=JSON.parse(s),a.data.opts.meshThicknessOn2D==="infinity"&&(a.data.opts.meshThicknessOn2D=1/0),a.scene.sceneData={...tc,...a.data.sceneData},da.deserializeMeshDataObjects(a),a}static loadFromJSON(t){const i=new da;return i.data=t,i.data.opts.meshThicknessOn2D==="infinity"&&(i.data.opts.meshThicknessOn2D=1/0),i.scene.sceneData={...tc,...t.sceneData},da.deserializeMeshDataObjects(i),i}},ZM={colormap:"gray",opacity:0,nFrame4D:0,frame4D:0,outlineBorder:0,cal_min:0,cal_max:0,cal_minNeg:0,cal_maxNeg:0,colormapType:0,values:new Array},ma=class Ii{constructor(t,i,s="",a=new Uint8Array([255,255,255,255]),o=1,l=!0,h,u=null,f=null,m=null,g=null,p=!0,A=""){O(this,"id"),O(this,"name"),O(this,"anatomicalStructurePrimary"),O(this,"colorbarVisible"),O(this,"furthestVertexFromOrigin"),O(this,"extentsMin"),O(this,"extentsMax"),O(this,"opacity"),O(this,"visible"),O(this,"meshShaderIndex",0),O(this,"offsetPt0",null),O(this,"colormapInvert",!1),O(this,"fiberGroupColormap",null),O(this,"indexBuffer"),O(this,"vertexBuffer"),O(this,"vao"),O(this,"vaoFiber"),O(this,"pts"),O(this,"tris"),O(this,"layers"),O(this,"type","mesh"),O(this,"data_type"),O(this,"rgba255"),O(this,"fiberLength"),O(this,"fiberLengths"),O(this,"fiberDensity"),O(this,"fiberDither",.1),O(this,"fiberColor","Global"),O(this,"fiberDecimationStride",1),O(this,"fiberSides",5),O(this,"fiberRadius",0),O(this,"fiberOcclusion",0),O(this,"f32PerVertex",5),O(this,"fiberMask"),O(this,"colormap"),O(this,"dpg"),O(this,"dps"),O(this,"dpv"),O(this,"hasConnectome",!1),O(this,"connectome"),O(this,"indexCount"),O(this,"vertexCount",1),O(this,"nodeScale",4),O(this,"edgeScale",1),O(this,"legendLineThickness",0),O(this,"nodeColormap","warm"),O(this,"edgeColormap","warm"),O(this,"nodeColormapNegative"),O(this,"edgeColormapNegative"),O(this,"nodeMinColor"),O(this,"nodeMaxColor"),O(this,"edgeMin"),O(this,"edgeMax"),O(this,"nodes"),O(this,"edges"),O(this,"points"),this.anatomicalStructurePrimary=A,this.name=s,this.colorbarVisible=p,this.id=Nf();const x=hs.getExtents(t);if(this.furthestVertexFromOrigin=x.mxDx,this.extentsMin=x.extentsMin,this.extentsMax=x.extentsMax,this.opacity=o>1?1:o,this.visible=l,this.meshShaderIndex=0,this.indexBuffer=h.createBuffer(),this.vertexBuffer=h.createBuffer(),this.vao=h.createVertexArray(),h.bindVertexArray(this.vao),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.indexBuffer),h.bindBuffer(h.ARRAY_BUFFER,this.vertexBuffer),h.enableVertexAttribArray(0),h.enableVertexAttribArray(1),this.f32PerVertex!==7?(h.vertexAttribPointer(0,3,h.FLOAT,!1,20,0),h.vertexAttribPointer(1,4,h.BYTE,!0,20,12),h.enableVertexAttribArray(2),h.vertexAttribPointer(2,4,h.UNSIGNED_BYTE,!0,20,16)):(h.vertexAttribPointer(0,3,h.FLOAT,!1,28,0),h.vertexAttribPointer(1,3,h.FLOAT,!1,28,12),h.enableVertexAttribArray(2),h.vertexAttribPointer(2,4,h.UNSIGNED_BYTE,!0,28,24)),h.bindVertexArray(null),this.vaoFiber=h.createVertexArray(),this.offsetPt0=null,this.hasConnectome=!1,this.colormapInvert=!1,this.fiberGroupColormap=null,this.pts=t,this.layers=[],this.type="mesh",this.tris=i,a[3]<1){this.rgba255=a,this.fiberLength=2,this.fiberDither=.1,this.fiberColor="Global",this.fiberDecimationStride=1,this.fiberMask=[],this.colormap=u,this.dpg=f,this.dps=m,this.dpv=g,f&&this.initValuesArray(f),m&&this.initValuesArray(m),g&&this.initValuesArray(g),this.offsetPt0=new Uint32Array(i),this.tris=new Uint32Array(0),this.updateFibers(h),h.bindVertexArray(this.vaoFiber),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.indexBuffer),h.bindBuffer(h.ARRAY_BUFFER,this.vertexBuffer),h.enableVertexAttribArray(0),h.vertexAttribPointer(0,3,h.FLOAT,!1,16,0),h.enableVertexAttribArray(1),h.vertexAttribPointer(1,4,h.UNSIGNED_BYTE,!0,16,12),h.bindVertexArray(null);return}if(u){this.connectome=u,this.hasConnectome=!0;const b=Object.keys(u);for(let C=0,E=b.length;C<E;C++)this[b[C]]=u[b[C]]}this.rgba255=a,this.updateMesh(h)}initValuesArray(t){for(let i=0;i<t.length;i++){const s=t[i].vals.reduce((o,l)=>Math.min(o,l)),a=t[i].vals.reduce((o,l)=>Math.max(o,l));t[i].global_min=s,t[i].global_max=a,t[i].cal_min=s,t[i].cal_max=a}return t}linesToCylinders(t,i,s){function a(U){return ut(U[0],U[1],U[2])}const o=Math.pow(2,32)-1,l=s.length;let h=0,u=0;for(let U=0;U<l;U++){if(s[U]===o){u++;continue}h++}const f=this.fiberSides,m=f*h,g=this.f32PerVertex;if(g!==5)throw Error("fiberSides > 1 requires f32PerVertex == 5");const p=new Float32Array(m*g),A=new Uint8Array(p.buffer);let x=0,y=an(),b=an(),C=an();const E=Zt();let S=Zt(),M=0;const T=this.fiberRadius;for(let U=0;U<l;U++){const F=s[U]===o;if(F&&M<1)continue;let P=s[U]*4;if(M++,M<=1){y=Wt(i[P+0],i[P+1],i[P+2],i[P+3]),b=tn(y),U+1<l&&s[U+1]!==o&&(P=s[U+1]*4,C=Wt(i[P+0],i[P+1],i[P+2],i[P+3]),te(E,a(y),a(C)),xi(E,E),S=As.getFirstPerpVector(E));continue}F?C=tn(b):C=Wt(i[P+0],i[P+1],i[P+2],i[P+3]),te(E,a(y),a(C)),xi(E,E);const N=Zt();Ql(N,S,E);const k=Zt();Ql(k,E,N),S=Gr(S);const z=Zt();Ql(z,E,k),xi(z,z);const q=Zt();for(let j=0;j<f;j++){const Q=Math.cos(j/f*2*Math.PI),tt=Math.sin(j/f*2*Math.PI);q[0]=T*(Q*k[0]+tt*z[0]),q[1]=T*(Q*k[1]+tt*z[1]),q[2]=T*(Q*k[2]+tt*z[2]),ps(q,a(b),q);const ot=x*g;p[ot+0]=q[0],p[ot+1]=q[1],p[ot+2]=q[2];const Y=Zt();te(Y,q,a(b)),xi(Y,Y);const it=(ot+3)*4;A[it+0]=Y[0]*127,A[it+1]=Y[1]*127,A[it+2]=Y[2]*127,p[ot+4]=b[3],x++}y=tn(b),b=tn(C),F&&(M=0)}const I=(h-u)*f*2*3,R=new Uint32Array(I);let D=0;x=0;for(let U=1;U<l;U++){if(s[U]===o){x+=f;continue}if(s[U-1]===o)continue;let F=x,P=x+f;const N=P,k=P+f;for(let z=0;z<f;z++)R[D++]=F,R[D++]=P++,P===k&&(P=k-f),R[D++]=P,R[D++]=F++,F===N&&(F=N-f),R[D++]=P,R[D++]=F;x+=f}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(R),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,A,t.STATIC_DRAW),this.indexCount=I}createFiberDensityMap(){if(this.fiberDensity)return;const t=this.pts,i=t.length/3;let s=0;for(let E=0;E<3;E++){const S=this.extentsMax[E]-this.extentsMin[E];s=Math.max(s,S)}if(this.fiberDensity=new Float32Array(i),s===0)return;const a=64,l=s/(a-1)/2,h=(a-1)/s;let u=new Float32Array(a*a*a);const f=[this.extentsMin[0]-l,this.extentsMin[1]-l,this.extentsMin[2]-l],m=[0,0,0],g=-1,p=a*a;let A=0;for(let E=0;E<i;E++){m[0]=Math.round((t[A++]-f[0])*h),m[1]=Math.round((t[A++]-f[1])*h),m[2]=Math.round((t[A++]-f[2])*h);const S=m[0]+m[1]*a+m[2]*p;S!==g&&u[S]++}function x(E,S){let M=E.slice(),T=-1;const I=S-1;for(let D=0;D<S;D++)for(let U=0;U<S;U++)for(let F=0;F<S;F++)T++,!(F<1||F>=I)&&(E[T]=M[T-1]+M[T]+M[T]+M[T+1]);T=-1,M=E.slice();for(let D=0;D<S;D++)for(let U=0;U<S;U++)for(let F=0;F<S;F++)T++,!(U<1||U>=I)&&(E[T]=M[T-S]+M[T]+M[T]+M[T+S]);const R=S*S;T=-1,M=E.slice();for(let D=0;D<S;D++)for(let U=0;U<S;U++)for(let F=0;F<S;F++)T++,!(D<1||D>=I)&&(E[T]=M[T-R]+M[T]+M[T]+M[R]);return E}u=x(u,a),u=x(u,a);let y=0,b=1/0;const C=a*a*a;for(let E=0;E<C;E++)u[E]<=0||(y=Math.max(y,u[E]),b=Math.min(b,u[E]));if(!(y<=1||y<=b)){A=0;for(let E=0;E<C;E++)u[E]=Math.max(0,u[E]-b);y-=b;for(let E=0;E<i;E++){m[0]=Math.round((t[A++]-f[0])*h),m[1]=Math.round((t[A++]-f[1])*h),m[2]=Math.round((t[A++]-f[2])*h);const S=m[0]+m[1]*a+m[2]*p;this.fiberDensity[E]=u[S]/y}}}updateFibers(t){if(!this.offsetPt0||!this.fiberLength)return;const i=this.pts,s=this.offsetPt0,a=s.length-1,o=i.length/3;if(!this.fiberLengths){this.fiberLengths=new Uint32Array(a);for(let I=0;I<a;I++){const R=s[I]*3,D=(s[I+1]-1)*3;let U=0;for(let F=R;F<D;F+=3){const P=ut(i[F+0]-i[F+3],i[F+1]-i[F+4],i[F+2]-i[F+5]);U+=to(P)}this.fiberLengths[I]=U}}const l=new Float32Array(o*4),h=new Uint32Array(l.buffer);let u=0,f=0;for(let I=0;I<o;I++)l[f+0]=i[u+0],l[f+1]=i[u+1],l[f+2]=i[u+2],u+=3,f+=4;const m=this.fiberDither,g=m*.5;function p(I,R,D){const F=255*(m*Math.random()-g);return I=Math.max(Math.min(I+F,255),0),R=Math.max(Math.min(R+F,255),0),D=Math.max(Math.min(D+F,255),0),I+(R<<8)+(D<<16)}function A(I,R,D,U,F,P,N){const k=ut(Math.abs(I-U),Math.abs(R-F),Math.abs(D-P));xi(k,k);const z=N-g;for(let q=0;q<3;q++)k[q]=255*Math.max(Math.min(Math.abs(k[q])+z,1),0);return k[0]+(k[1]<<8)+(k[2]<<16)}const x=this.fiberColor.toLowerCase();let y=null,b=null;if(x.startsWith("dps")&&this.dps&&this.dps.length>0){const I=parseInt(x.substring(3));I<this.dps.length&&this.dps[I].vals.length===a&&(y=this.dps[I].vals)}if(x.startsWith("dpv")&&this.dpv&&this.dpv.length>0){const I=parseInt(x.substring(3));I<this.dpv.length&&this.dpv[I].vals.length===o&&(b=this.dpv[I])}const C=new Int16Array(a);if(this.dpg&&this.fiberGroupColormap!==null){const I=new Uint8ClampedArray(this.dpg.length*4),R=new Array(this.dpg.length).fill(!1),D=this.fiberGroupColormap;D.A===void 0&&(D.A=Array.from(new Uint8ClampedArray(D.I.length).fill(255)));for(let U=0;U<D.I.length;U++){let F=D.I[U];F<0||F>=this.dpg.length||D.A[U]<1||(R[F]=!0,F*=4,I[F]=D.R[U],I[F+1]=D.G[U],I[F+2]=D.B[U],I[F+3]=255)}C.fill(-1);for(let U=0;U<this.dpg.length;U++)if(R[U])for(let F=0;F<this.dpg[U].vals.length;F++)C[this.dpg[U].vals[F]]=U;for(let U=0;U<a;U++){if(C[U]<0)continue;const F=C[U]%256*4,P=p(I[F],I[F+1],I[F+2]),N=s[U],k=s[U+1]-1,z=N*4+3,q=k*4+3;for(let j=z;j<=q;j+=4)h[j]=P}}else if(b){const I=Ht.colormap(this.colormap,this.colormapInvert),R=b.cal_min,D=b.cal_max;let U=3;for(let F=0;F<o;F++){let P=Math.min(Math.max((b.vals[F]-R)/(D-R),0),1);P=Math.round(Math.max(Math.min(255,P*255)))*4;const N=I[P]+(I[P+1]<<8)+(I[P+2]<<16);h[U]=N,U+=4}}else if(y){const I=Ht.colormap(this.colormap,this.colormapInvert);let R=y[0],D=y[0];for(let U=0;U<a;U++)R=Math.min(R,y[U]),D=Math.max(D,y[U]);D===R&&(R-=1);for(let U=0;U<a;U++){let F=(y[U]-R)/(D-R);F=Math.round(Math.max(Math.min(255,F*255)))*4;const P=I[F]+(I[F+1]<<8)+(I[F+2]<<16),N=s[U],k=s[U+1]-1,z=N*4+3,q=k*4+3;for(let j=z;j<=q;j+=4)h[j]=P}}else if(x.includes("fixed"))if(m===0){const I=this.rgba255[0]+(this.rgba255[1]<<8)+(this.rgba255[2]<<16);let R=3;for(let D=0;D<o;D++)h[R]=I,R+=4}else for(let I=0;I<a;I++){const R=p(this.rgba255[0],this.rgba255[1],this.rgba255[2]),D=s[I],U=s[I+1]-1,F=D*4+3,P=U*4+3;for(let N=F;N<=P;N+=4)h[N]=R}else if(x.includes("local"))for(let I=0;I<a;I++){const R=s[I],D=s[I+1]-1;let U=R*3;const F=D*3,P=m*Math.random();let N=A(i[U],i[U+1],i[U+2],i[U+4],i[U+5],i[U+6],P),k=R*4+3;for(;U<F;)h[k]=N,k+=4,U+=3,N=A(i[U-3],i[U-2],i[U-1],i[U+3],i[U+4],i[U+5],P);h[k]=h[k-4]}else for(let I=0;I<a;I++){const R=s[I],D=s[I+1]-1,U=R*3,F=D*3,P=A(i[U],i[U+1],i[U+2],i[F],i[F+1],i[F+2],m*Math.random()),N=R*4+3,k=D*4+3;for(let z=N;z<=k;z+=4)h[z]=P}if(this.fiberOcclusion>0){let I=function(R,D){const U=D*(R&255),F=D*(R>>8&255),P=D*(R>>16&255);return U+(F<<8)+(P<<16)};this.createFiberDensityMap();for(let R=0;R<a;R++){const D=s[R],U=s[R+1]-1,F=D*4+3,P=U*4+3;let N=D;const k=Math.min(this.fiberOcclusion,.99);for(let z=F;z<=P;z+=4){let q=this.fiberDensity[N++];if(q<=0)continue;q=q/((1/k-2)*(1-q)+1);const j=1-Math.min(q,.9);let Q=h[z];Q=I(Q,j),h[z]=Q}}}const E=this.fiberLength,S=Math.pow(2,32)-1,M=[];let T=-1;for(let I=0;I<a;I++)if(!(C[I]<0)&&!(this.fiberLengths[I]<E)&&(T++,T%this.fiberDecimationStride===0)){for(let R=s[I];R<s[I+1];R++)M.push(R);M.push(S)}this.fiberSides>2&&this.fiberRadius>0?this.linesToCylinders(t,l,M):(this.indexCount=M.length,t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,Uint32Array.from(h),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(M),t.STATIC_DRAW))}indexNearestXYZmm(t,i,s){const a=this.pts,o=this.pts.length/3;let l=0,h=1/0,u=0;for(let f=0;f<o;f++){const m=Math.pow(a[l]-t,2)+Math.pow(a[l+1]-i,2)+Math.pow(a[l+2]-s,2);m<h&&(h=m,u=f),l+=3}return h=Math.sqrt(h),[u,h]}unloadMesh(t){if(t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindVertexArray(null),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteVertexArray(this.vao),t.deleteVertexArray(this.vaoFiber),this.offsetPt0=null,this.tris=null,this.pts=null,this.layers&&this.layers.length>0)for(let i=0;i<this.layers.length;i++)this.layers[i].values=null;if(this.dpg&&this.dpg.length>0)for(let i=0;i<this.dpg.length;i++)this.dpg[i].vals=null;if(this.dps&&this.dps.length>0)for(let i=0;i<this.dps.length;i++)this.dps[i].vals=null}blendColormap(t,i,s,a,o,l,h=!1){const u=this.pts.length/3,f=Math.min(s.opacity,1);function m(S,M,T){return S*(1-T)+M*T}function g(S,M){return Math.min(S+M,255)}const p=h?-1:1,A=Math.min(Math.max(s.frame4D,0),s.nFrame4D-1),x=u*A;let y=a;s.isTransparentBelowCalMin||(y=Number.NEGATIVE_INFINITY),s.colormapType!==0&&(a=Math.min(a,0));const b=255/(o-a);let C=new Array(u).fill(!1);if(s.outlineBorder!==0){const S=new Uint8Array(u).fill(0);for(let M=0;M<u;M++)p*s.values[M+x]>=y&&(S[M]=1);C=hs.getClusterBoundaryU8(S,this.tris);for(let M=0;M<u;M++)p*s.values[M+x]<y&&(C[M]=!1)}const E=new Float32Array(256).fill(f);if(y>a&&s.colormapType===2){let S=Math.round((y-a)*b);S=Math.max(S,1);for(let M=1;M<S;M++)E[M]=f*Math.pow(M/S,2);E[0]=0,y=a+Number.EPSILON}for(let S=0;S<u;S++){const M=p*s.values[S+x];if(M<y)continue;let T=Math.round((M-a)*b);if(T<0&&s.isTransparentBelowCalMin)continue;T=Math.max(0,T),T=Math.min(255,T);let I=E[T];T*=4;let R=S*28+24;if(this.f32PerVertex!==7&&(R=S*20+16),s.isAdditiveBlend){const D=S*4;i[D+0]=g(i[D+0],l[T+0]),i[D+1]=g(i[D+1],l[T+1]),i[D+2]=g(i[D+2],l[T+2]),i[D+3]=g(i[D+3],255)}else{if(C[S]&&(I=s.outlineBorder,s.outlineBorder<0)){t[R+0]=0,t[R+1]=0,t[R+2]=0;continue}t[R+0]=m(t[R+0],l[T+0],I),t[R+1]=m(t[R+1],l[T+1],I),t[R+2]=m(t[R+2],l[T+2],I)}}}updateMesh(t){if(this.offsetPt0){this.updateFibers(t);return}if(this.hasConnectome)return;if(!this.pts||!this.tris||!this.rgba255){H.warn("underspecified mesh");return}function i(h,u,f){return h*(1-f)+u*f}const s=this.generatePosNormClr(this.pts,this.tris,this.rgba255),a=this.pts.length/3,o=new Uint8Array(s.buffer),l=new Uint8Array(a*4);if(this.layers&&this.layers.length>0)for(let h=0;h<this.layers.length;h++){const u=this.layers[h],f=u.opacity;if(f<=0||u.cal_min>u.cal_max)continue;if(u.outlineBorder===void 0&&(u.outlineBorder=0),u.isAdditiveBlend===void 0&&(u.isAdditiveBlend=!1),u.colormapLabel&&u.colormapLabel.R&&!u.colormapLabel.lut&&(u.colormapLabel=Ht.makeLabelLut(u.colormapLabel)),u.colormapLabel&&u.colormapLabel.lut){const p=u.colormapLabel.lut,A=Math.floor(p.length/4),x=Math.min(Math.max(u.frame4D,0),u.nFrame4D-1),y=a*x,b=new Uint8Array(a*4);let C=0;for(let S=0;S<u.values.length;S++){let M=4*Math.min(Math.max(u.values[S+y],0),A-1);b[C+0]=p[M+0],b[C+1]=p[M+1],b[C+2]=p[M+2],C+=4}let E=new Array(a).fill(!1);u.outlineBorder!==0&&(E=hs.getClusterBoundary(b,this.tris)),C=0;for(let S=0;S<u.values.length;S++){let M=S*28+24;this.f32PerVertex!==7&&(M=S*20+16);let T=f;if(E[S]&&(T=u.outlineBorder,u.outlineBorder<0)){o[M+0]=0,o[M+1]=0,o[M+2]=0,C+=4;continue}o[M+0]=i(o[M+0],b[C+0],T),o[M+1]=i(o[M+1],b[C+1],T),o[M+2]=i(o[M+2],b[C+2],T),C+=4}continue}if(u.values instanceof Uint8Array){const g=new Uint8Array(u.values.buffer);let p=new Array(a).fill(!0);u.outlineBorder!==0&&(p=hs.getClusterBoundary(g,this.tris));let A=0;for(let x=0;x<u.values.length;x++){let y=x*28+24;this.f32PerVertex!==7&&(y=x*20+16);let b=f;if(p[x]&&(b=u.outlineBorder,u.outlineBorder<0)){o[y+0]=0,o[y+1]=0,o[y+2]=0,A+=4;continue}o[y+0]=i(o[y+0],g[A+0],b),o[y+1]=i(o[y+1],g[A+1],b),o[y+2]=i(o[y+2],g[A+2],b),A+=4}continue}u.useNegativeCmap&&(u.cal_min=Math.max(Number.EPSILON,u.cal_min),u.cal_max=Math.max(u.cal_min+1e-6,u.cal_max)),u.isTransparentBelowCalMin===void 0&&(u.isTransparentBelowCalMin=!0);const m=Ht.colormap(u.colormap,u.colormapInvert);if(this.blendColormap(o,l,u,u.cal_min,u.cal_max,m),u.useNegativeCmap){const g=Ht.colormap(u.colormapNegative,u.colormapInvert);let p=u.cal_min,A=u.cal_max;isFinite(u.cal_minNeg)&&isFinite(u.cal_minNeg)&&(p=-u.cal_minNeg,A=-u.cal_maxNeg),this.blendColormap(o,l,u,p,A,g,!0)}}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(this.tris),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),this.indexCount=this.tris.length,this.vertexCount=this.pts.length}reverseFaces(t){if(this.offsetPt0||this.hasConnectome)return;const i=this.tris||[];for(let s=0;s<i.length;s+=3){const a=i[s];i[s]=i[s+1],i[s+1]=a}this.updateMesh(t)}hierarchicalOrder(){const s=this.tris.length/3,a=Math.log(s/20)/Math.log(4);if(s!==Math.pow(4,a)*20)return NaN;if(this.pts.length/3!==Math.pow(4,a)*10+2)return NaN;for(let l=0;l<15;l+=3)if(this.tris[l]!==0)return NaN;for(let l=15;l<24;l+=3)if(this.tris[l]!==3)return NaN;for(let l=24;l<30;l+=3)if(this.tris[l]!==4)return NaN;return a}decimateFaces(t,i){let s=this.tris;const a=12,o=20;for(let l=t-1;l>=i;l--){const h=Math.pow(4,l+1)*(a-2)+2,u=Math.pow(4,l)*(a-2)+2,f=s.length/3,m=Math.pow(4,l)*o;console.log(`order ${l+1} -> ${l} vertices ${h} -> ${u} faces ${f} -> ${m}`);const g=Array.from({length:h},(A,x)=>x+1);for(let A=0;A<f;A++){const x=s[3*A],y=s[3*A+1],b=s[3*A+2];g[x-1]=Math.min(g[x-1],y,b)}const p=new Uint32Array(m*3);for(let A=0;A<m;A++)p[3*A]=g[s[3*A]-1],p[3*A+1]=g[s[3*A+1]-1],p[3*A+2]=g[s[3*A+2]-1];s=p}this.tris=new Uint32Array(s)}decimateHierarchicalMesh(t,i=4){const s=this.hierarchicalOrder();if(isNaN(s))return H.warn("Unable to decimate mesh: it does not have a hierarchical structure"),!1;if(i>=s)return H.warn(`Unable to decimate mesh: input order (${s}) must be larger than downsampled order (${i})`),!1;const a=this.pts.length/3,l=Math.pow(4,i)*(12-2)+2;if(this.pts=new Float32Array(this.pts.slice(0,l*3)),this.decimateFaces(s,i),this.layers&&this.layers.length>0)for(let h=0;h<this.layers.length;h++){const u=this.layers[h];u.values instanceof Float32Array||u.values.length!==a?u.values=new Float32Array(u.values.slice(0,l)):H.warn("decimation logic needs to be updated")}return this.updateMesh(t),!0}async setLayerProperty(t,i,s,a){const o=this.layers[t];if(!o||!(i in o)){H.warn("mesh does not have property ",i," for layer ",o);return}if(i==="colormapLabel")if(typeof s=="object")o[i]=Ht.makeLabelLut(s);else if(typeof s=="string"){const l=await Ht.makeLabelLutFromUrl(s);o[i]=l,this.updateMesh(a);return}else H.error("colormapLabel requires a string or object");else o[i]=s;this.updateMesh(a)}setProperty(t,i,s){if(!(t in this)){H.warn("mesh does not have property ",t,this);return}this[t]=i,this.updateMesh(s)}generatePosNormClr(t,i,s){(t.length<3||s.length<4)&&(H.error("Catastrophic failure generatePosNormClr()"),H.debug("this",this),H.debug("pts",t),H.debug("rgba",s));const a=hs.generateNormals(t,i),o=t.length/3,l=o===s.length/4,h=this.f32PerVertex,u=new Float32Array(o*h),f=new Uint8Array(u.buffer);let m=0,g=0,p=0,A=(h-1)*4;for(let x=0;x<o;x++)u[p+0]=t[m+0],u[p+1]=t[m+1],u[p+2]=t[m+2],h!==7?(f[A-4]=a[m+0]*127,f[A-3]=a[m+1]*127,f[A-2]=a[m+2]*127):(u[p+3]=a[m+0],u[p+4]=a[m+1],u[p+5]=a[m+2]),f[A]=s[g+0],f[A+1]=s[g+1],f[A+2]=s[g+2],f[A+3]=s[g+3],l&&(g+=4),m+=3,p+=h,A+=h*4;return u}static async readMesh(t,i,s,a=1,o=new Uint8Array([255,255,255,255]),l=!0){let h=new Uint32Array([]),u=new Float32Array([]),f="",m;const g=/(?:\.([^.]+))?$/;let p=g.exec(i)[1];if(p=p.toUpperCase(),p==="GZ"&&(p=g.exec(i.slice(0,-3))[1],p=p.toUpperCase()),p==="JCON"&&H.error("you should never see this message: load using nvconnectome not nvmesh"),p==="JSON"&&H.error("you should never see this message: load using nvconnectome not nvmesh"),o[3]=Math.max(1,o[3]),p==="TCK"||p==="TRK"||p==="TT"||p==="TRX"||p==="TRACT"){if(p==="TCK"?m=$t.readTCK(t):p==="TRACT"?m=$t.readTRACT(t):p==="TT"?m=await $t.readTT(t):p==="TRX"?m=await $t.readTRX(t):m=await $t.readTRK(t),typeof m>"u"){const b=new Float32Array([0,0,0,0,0,0]),C=new Uint32Array([0]);m={pts:b,offsetPt0:C},H.error("Creating empty tracts")}return o[3]=0,new Ii(m.pts,m.offsetPt0,i,o,a,l,s,"inferno",m.dpg||null,m.dps||null,m.dpv||null)}if(p==="GII")m=await $t.readGII(t);else if(p==="MZ3")m=await $t.readMZ3(t),"positions"in m||H.warn("MZ3 does not have positions (statistical overlay?)");else if(p==="ASC")m=$t.readASC(t);else if(p==="DFS")m=$t.readDFS(t);else if(p==="BYU"||p==="G")m=$t.readGEO(t);else if(p==="GEO")m=$t.readGEO(t,!0);else if(p==="ICO"||p==="TRI")m=$t.readICO(t);else if(p==="OFF")m=$t.readOFF(t);else if(p==="NV")m=$t.readNV(t);else if(p==="OBJ")m=await $t.readOBJ(t);else if(p==="PLY")m=$t.readPLY(t);else if(p==="WRL")m=$t.readWRL(t);else if(p==="X3D")m=$t.readX3D(t);else if(p==="FIB"||p==="VTK"){if(m=$t.readVTK(t),"offsetPt0"in m)return o[3]=0,new Ii(m.pts,m.offsetPt0,i,o,a,l,s,"inferno")}else p==="SRF"?m=await $t.readSRF(t):p==="STL"?m=$t.readSTL(t):m=$t.readFreeSurfer(t);if(m.anatomicalStructurePrimary&&(f=m.anatomicalStructurePrimary),m instanceof Float32Array)throw new Error("fatal: unknown mesh type loaded");if(!("positions"in m))throw new Error("positions not loaded");if(!m.indices)throw new Error("indices not loaded");if(u=m.positions,h=m.indices,"rgba255"in m&&m.rgba255.length>0&&(o=m.rgba255),"colors"in m&&m.colors&&m.colors.length===u.length){const b=u.length/3;o=new Uint8Array(b*4);let C=0,E=0;for(let S=0;S<b;S++)o[E++]=m.colors[C]*255,o[E++]=m.colors[C+1]*255,o[E++]=m.colors[C+2]*255,o[E++]=255,C+=3}const A=u.length/3;if(h.length/3<1||A<3)throw new Error("Mesh should have at least one triangle and three vertices");o[3]=Math.max(1,o[3]);const y=new Ii(u,h,i,o,a,l,s,null,null,null,null,!0,f);if("scalars"in m&&m.scalars.length>0){const b=await $t.readLayer(i,t,y,a,"gray");typeof b>"u"?H.warn("readLayer() failed to convert scalars"):(y.layers.push(b),y.updateMesh(s))}return y}static async loadLayer(t,i){let s=new Uint8Array().buffer;function a(x){const y=window.atob(x),b=y.length,C=new Uint8Array(b);for(let E=0;E<b;E++)C[E]=y.charCodeAt(E);return C.buffer}if(t.base64!==void 0)s=a(t.base64);else{if(!t.url)throw new Error("layer: missing url");const x=await fetch(t.url,{headers:t.headers});if(!x.ok)throw Error(x.statusText);s=await x.arrayBuffer()}let o,l=[];if(t.name&&t.name!=="")o=t.name;else{if(!t.url)throw new Error("layer: missing url");try{l=new URL(t.url).pathname.split("/")}catch{l=t.url.split("/")}finally{o=l.slice(-1)[0]}}o.indexOf("?")>-1&&(o=o.slice(0,o.indexOf("?")));let h=.5;"opacity"in t&&(h=t.opacity);let u="warm";"colormap"in t&&(u=t.colormap);let f="winter";"colormapNegative"in t&&(f=t.colormapNegative);let m=!1;"useNegativeCmap"in t&&(m=t.useNegativeCmap);let g=null;"cal_min"in t&&(g=t.cal_min);let p=null;"cal_max"in t&&(p=t.cal_max);const A=await $t.readLayer(o,s,i,h,u,f,m,g,p);A&&i.layers.push(A)}static async loadFromUrl({url:t="",headers:i={},gl:s,name:a="",opacity:o=1,rgba255:l=[255,255,255,255],visible:h=!0,layers:u=[],buffer:f=new ArrayBuffer(0)}={}){let m=t.split("/");if(a===""){try{m=new URL(t).pathname.split("/")}catch{m=t.split("/")}a=m.slice(-1)[0],a.indexOf("?")>-1&&(a=a.slice(0,a.indexOf("?")))}if(t==="")throw Error("url must not be empty");if(!s)throw Error("gl context is null");let g;if(f.byteLength>0)g=f;else{const A=await fetch(t,{headers:i});if(!A.ok)throw Error(A.statusText);g=await A.arrayBuffer()}const p=await this.readMesh(g,a,s,o,new Uint8Array(l),h);if(!u||u.length<1)return p;for(let A=0;A<u.length;A++)await Ii.loadLayer(u[A],p);return p.updateMesh(s),p}static async readFileAsync(t){return new Promise((i,s)=>{const a=new FileReader;a.onload=()=>{i(a.result)},a.onerror=s,a.readAsArrayBuffer(t)})}static async loadFromFile({file:t,gl:i,name:s="",opacity:a=1,rgba255:o=[255,255,255,255],visible:l=!0,layers:h=[]}={}){if(!t)throw new Error("file must be set");if(!i)throw new Error("rendering context must be set");const u=await Ii.readFileAsync(t),f=await Ii.readMesh(u,s,i,a,new Uint8Array(o),l);if(!h||h.length<1)return f;for(let m=0;m<h.length;m++)await Ii.loadLayer(h[m],f);return f.updateMesh(i),f}async loadFromBase64({base64:t,gl:i,name:s="",opacity:a=1,rgba255:o=[255,255,255,255],visible:l=!0,layers:h=[]}={}){if(!t)throw new Error("base64 must bet set");if(!i)throw new Error("rendering context must be set");function u(g){const p=window.atob(g),A=p.length,x=new Uint8Array(A);for(let y=0;y<A;y++)x[y]=p.charCodeAt(y);return x.buffer}const f=u(t),m=await Ii.readMesh(f,s,i,a,new Uint8Array(o),l);if(!h||h.length<1)return m;for(let g=0;g<h.length;g++)await Ii.loadLayer(h[g],m);return m.updateMesh(i),m}},WM="data:image/jpeg;base64,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ZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAASAAAAAEAAQBIAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAAeOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAAOEJJTQQCAAAAAAACAAA4QklNBDAAAAAAAAEBADhCSU0ELQAAAAAABgABAAAAMjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAAM9AAAABgAAAAAAAAAAAAACAAAAAgAAAAAEAG0AYwA2ADEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAIAAAAAAFJnaHRsb25nAAACAAAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAA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bnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDctMTJUMjA6MDc6NDcrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0OGNjMGI3YS1iYTJkLWZmNDAtYmNkNC1jNGQzMzIyZjBiNzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYzFjM2NhNS1hYTg4LWI5NGMtOGE4MS05YmU4MjA3ZGZiODciPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6YThjMGNhZTYtODNjYy1hYzQ4LWI2YzAtN2FiODNlOWJkMGM3PC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWMxYzNjYTUtYWE4OC1iOTRjLThhODEtOWJlODIwN2RmYjg3IiBzdEV2dDp3aGVuPSIyMDE4LTA3LTEyVDIwOjA3OjQ3KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYmI3MzZlZC0zOTRhLTM2NDgtYThiOC02Mzk1MmY0NDcxMjIiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTY6MTM6NTgrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RFdnQ6d2hlbj0iMjAxOC0wNy0xM1QxNzo1NDoyNyswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTc6NTQ6MjcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg3NjM1NDk5LWZiMTItYWU0MC04NWEzLThkMWFiN2NkZGVhOSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmFjMWMzY2E1LWFhODgtYjk0Yy04YTgxLTliZTgyMDdkZmI4NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEAAAAA0y1IUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARY3BydAAAAVAAAAAzZGVzYwAAAYQAAABsd3RwdAAAAfAAAAAUYmtwdAAAAgQAAAAUclhZWgAAAhgAAAAUZ1hZWgAAAiwAAAAUYlhZWgAAAkAAAAAUZG1uZAAAAlQAAABwZG1kZAAAAsQAAACIdnVlZAAAA0wAAACGdmlldwAAA9QAAAAkbHVtaQAAA/gAAAAUbWVhcwAABAwAAAAkdGVjaAAABDAAAAAMclRSQwAABDwAAAgMZ1RSQwAABDwAAAgMYlRSQwAABDwAAAgMdGV4dAAAAABDb3B5cmlnaHQgKGMpIDE5OTggSGV3bGV0dC1Q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",bp="data:image/png;base64,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",Cp={atlas:{type:"msdf",distanceRange:2,size:59.65625,width:512,height:256,yOrigin:"bottom"},metrics:{emSize:1,lineHeight:1.171875,ascender:.927734375,descender:-.244140625,underlineY:-.09765625,underlineThickness:.048828125},glyphs:[{unicode:32,advance:.24755859375},{unicode:33,advance:.25732421875,planeBounds:{left:.056159633438645884,bottom:-.02437761405677056,right:.20702396031135412,top:.7299440203067705},atlasBounds:{left:488.5,bottom:145.5,right:497.5,top:190.5}},{unicode:34,advance:.31982421875,planeBounds:{left:.049409125974004715,bottom:.48691155587022,right:.2840869677759953,top:.77187750662978},atlasBounds:{left:486.5,bottom:213.5,right:500.5,top:230.5}},{unicode:35,advance:.61572265625,planeBounds:{left:.037219103997511785,bottom:-.02169206718177056,right:.6239137085024882,top:.7326295671817705},atlasBounds:{left:66.5,bottom:51.5,right:101.5,top:96.5}},{unicode:36,advance:.5615234375,planeBounds:{left:.02956531458715296,bottom:-.12381369908983761,right:.5324464041628472,top:.8484230740898377},atlasBounds:{left:109.5,bottom:197.5,right:139.5,top:255.5}},{unicode:37,advance:.732421875,planeBounds:{left:.026481776289942378,bottom:-.030073418674698794,right:.7137525987100576,top:.7410109186746989},atlasBounds:{left:88.5,bottom:144.5,right:129.5,top:190.5}},{unicode:38,advance:.62158203125,planeBounds:{left:.03225572125458355,bottom:-.030073418674698794,right:.6357130287454166,top:.7410109186746989},atlasBounds:{left:130.5,bottom:144.5,right:166.5,top:190.5}},{unicode:39,advance:.17431640625,planeBounds:{left:.028244602049502358,bottom:.49895501673814824,right:.14558352295049765,top:.7671582645118518},atlasBounds:{left:498.5,bottom:62.5,right:505.5,top:78.5}},{unicode:40,advance:.341796875,planeBounds:{left:.042983329377291775,bottom:-.250029542422407,right:.34471198312270823,top:.8227834486724072},atlasBounds:{left:.5,bottom:191.5,right:18.5,top:255.5}},{unicode:41,advance:.34765625,planeBounds:{left:-.003159248747708225,bottom:-.250029542422407,right:.29856940499770823,top:.8227834486724072},atlasBounds:{left:19.5,bottom:191.5,right:37.5,top:255.5}},{unicode:42,advance:.4306640625,planeBounds:{left:-.011208599684062338,bottom:.27785390031593765,right:.44138438093406235,top:.7304468809340623},atlasBounds:{left:449.5,bottom:23.5,right:476.5,top:50.5}},{unicode:43,advance:.56689453125,planeBounds:{left:.01353503347629649,bottom:.053493525733368255,right:.5499415290237036,top:.6066627242666317},atlasBounds:{left:361.5,bottom:17.5,right:393.5,top:50.5}},{unicode:44,advance:.1962890625,planeBounds:{left:-.009919475797210583,bottom:-.15981695975478,right:.1744702570472106,top:.12514899100478},atlasBounds:{left:498.5,bottom:79.5,right:509.5,top:96.5}},{unicode:45,advance:.27587890625,planeBounds:{left:-.00527594412977999,bottom:.24333249267450235,right:.27969000662978,top:.36067141357549765},atlasBounds:{left:52.5,bottom:7.5,right:69.5,top:14.5}},{unicode:46,advance:.26318359375,planeBounds:{left:.051032680313645884,bottom:-.027092319686354116,right:.20189700718635412,top:.12377200718635412},atlasBounds:{left:501.5,bottom:221.5,right:510.5,top:230.5}},{unicode:47,advance:.412109375,planeBounds:{left:-.013733006073205867,bottom:-.08573505127848349,right:.4053345685732059,top:.7356373950284835},atlasBounds:{left:252.5,bottom:206.5,right:277.5,top:255.5}},{unicode:48,advance:.5615234375,planeBounds:{left:.037458384830081196,bottom:-.030073418674698794,right:.5235767714199189,top:.7410109186746989},atlasBounds:{left:167.5,bottom:144.5,right:196.5,top:190.5}},{unicode:49,advance:.5615234375,planeBounds:{left:.06023674350936354,bottom:-.01998308280677056,right:.37872810024063647,top:.7343385515567705},atlasBounds:{left:488.5,bottom:97.5,right:507.5,top:142.5}},{unicode:50,advance:.5615234375,planeBounds:{left:.025334353719224725,bottom:-.01680925468177056,right:.5449781462807752,top:.7375123796817705},atlasBounds:{left:278.5,bottom:51.5,right:309.5,top:96.5}},{unicode:51,advance:.5615234375,planeBounds:{left:.028181041080081196,bottom:-.030073418674698794,right:.5142994276699189,top:.7410109186746989},atlasBounds:{left:197.5,bottom:144.5,right:226.5,top:190.5}},{unicode:52,advance:.5615234375,planeBounds:{left:.005886103858368255,bottom:-.02169206718177056,right:.5590553023916317,top:.7326295671817705},atlasBounds:{left:310.5,bottom:51.5,right:343.5,top:96.5}},{unicode:53,advance:.5615234375,planeBounds:{left:.055524791080081196,bottom:-.02657487968177056,right:.5416431776699189,top:.7277467546817705},atlasBounds:{left:344.5,bottom:51.5,right:373.5,top:96.5}},{unicode:54,advance:.5615234375,planeBounds:{left:.046003306705081196,bottom:-.034712090549698794,right:.5321216932949189,top:.7363722467996989},atlasBounds:{left:227.5,bottom:144.5,right:256.5,top:190.5}},{unicode:55,advance:.5615234375,planeBounds:{left:.018010134969224725,bottom:-.02169206718177056,right:.5376539275307752,top:.7326295671817705},atlasBounds:{left:374.5,bottom:51.5,right:405.5,top:96.5}},{unicode:56,advance:.5615234375,planeBounds:{left:.037702525455081196,bottom:-.030073418674698794,right:.5238209120449189,top:.7410109186746989},atlasBounds:{left:257.5,bottom:144.5,right:286.5,top:190.5}},{unicode:57,advance:.5615234375,planeBounds:{left:.029401744205081196,bottom:-.025434746799698794,right:.5155201307949189,top:.7456495905496989},atlasBounds:{left:287.5,bottom:144.5,right:316.5,top:190.5}},{unicode:58,advance:.2421875,planeBounds:{left:.046394008438645884,bottom:-.029431286627488215,right:.19725833531135412,top:.5572633178774882},atlasBounds:{left:439.5,bottom:61.5,right:448.5,top:96.5}},{unicode:59,advance:.21142578125,planeBounds:{left:.001066852327789419,bottom:-.16459733294591408,right:.1854565851722106,top:.556198895445914},atlasBounds:{left:406.5,bottom:53.5,right:417.5,top:96.5}},{unicode:60,advance:.50830078125,planeBounds:{left:.016948142433865897,bottom:.0726146348300812,right:.4527784200661341,top:.5587330214199189},atlasBounds:{left:394.5,bottom:21.5,right:420.5,top:50.5}},{unicode:61,advance:.548828125,planeBounds:{left:.051535540940937666,bottom:.17620354038436353,right:.5041285215590624,top:.49469489711563647},atlasBounds:{left:477.5,bottom:31.5,right:504.5,top:50.5}},{unicode:62,advance:.5224609375,planeBounds:{left:.047629290940937666,bottom:.0731029160800812,right:.5002222715590624,top:.5592213026699189},atlasBounds:{left:421.5,bottom:21.5,right:448.5,top:50.5}},{unicode:63,advance:.47216796875,planeBounds:{left:.016704001808865897,bottom:-.027876153049698794,right:.4525342794411341,top:.7432081842996989},atlasBounds:{left:317.5,bottom:144.5,right:343.5,top:190.5}},{unicode:64,advance:.89794921875,planeBounds:{left:.034064457306783605,bottom:-.23896750384690937,right:.8721996065996072,top:.7165065663469093},atlasBounds:{left:155.5,bottom:198.5,right:205.5,top:255.5}},{unicode:65,advance:.65234375,planeBounds:{left:-.008838044092129387,bottom:-.02169206718177056,right:.6616700753421295,top:.7326295671817705},atlasBounds:{left:237.5,bottom:51.5,right:277.5,top:96.5}},{unicode:66,advance:.62255859375,planeBounds:{left:.06464099434422473,bottom:-.02169206718177056,right:.5842847869057752,top:.7326295671817705},atlasBounds:{left:205.5,bottom:51.5,right:236.5,top:96.5}},{unicode:67,advance:.65087890625,planeBounds:{left:.038439807122511785,bottom:-.030073418674698794,right:.6251344116274882,top:.7410109186746989},atlasBounds:{left:344.5,bottom:144.5,right:379.5,top:190.5}},{unicode:68,advance:.65576171875,planeBounds:{left:.06301501010836826,bottom:-.02169206718177056,right:.6161842086416317,top:.7326295671817705},atlasBounds:{left:162.5,bottom:51.5,right:195.5,top:96.5}},{unicode:69,advance:.568359375,planeBounds:{left:.0652904160800812,bottom:-.02169206718177056,right:.5514088026699189,top:.7326295671817705},atlasBounds:{left:132.5,bottom:51.5,right:161.5,top:96.5}},{unicode:70,advance:.552734375,planeBounds:{left:.059675181705081196,bottom:-.02169206718177056,right:.5457935682949189,top:.7326295671817705},atlasBounds:{left:102.5,bottom:51.5,right:131.5,top:96.5}},{unicode:71,advance:.68115234375,planeBounds:{left:.040148791497511785,bottom:-.030073418674698794,right:.6268433960024882,top:.7410109186746989},atlasBounds:{left:380.5,bottom:144.5,right:415.5,top:190.5}},{unicode:72,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:30.5,bottom:51.5,right:65.5,top:96.5}},{unicode:73,advance:.27197265625,planeBounds:{left:.06917965680657412,bottom:-.02169206718177056,right:.20328128069342588,top:.7326295671817705},atlasBounds:{left:196.5,bottom:51.5,right:204.5,top:96.5}},{unicode:74,advance:.5517578125,planeBounds:{left:.007184947330081194,bottom:-.02657487968177056,right:.4933033339199188,top:.7277467546817705},atlasBounds:{left:.5,bottom:51.5,right:29.5,top:96.5}},{unicode:75,advance:.626953125,planeBounds:{left:.061633166497511785,bottom:-.02169206718177056,right:.6483277710024882,top:.7326295671817705},atlasBounds:{left:452.5,bottom:97.5,right:487.5,top:142.5}},{unicode:76,advance:.5380859375,planeBounds:{left:.06341786132300943,bottom:-.02169206718177056,right:.5327735449269906,top:.7326295671817705},atlasBounds:{left:423.5,bottom:97.5,right:451.5,top:142.5}},{unicode:77,advance:.873046875,planeBounds:{left:.05911847969322944,bottom:-.02169206718177056,right:.8134401140567705,top:.7326295671817705},atlasBounds:{left:377.5,bottom:97.5,right:422.5,top:142.5}},{unicode:78,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:341.5,bottom:97.5,right:376.5,top:142.5}},{unicode:79,advance:.6875,planeBounds:{left:.033395854136655315,bottom:-.030073418674698794,right:.6536158646133446,top:.7410109186746989},atlasBounds:{left:416.5,bottom:144.5,right:453.5,top:190.5}},{unicode:80,advance:.630859375,planeBounds:{left:.061550166358368255,bottom:-.02169206718177056,right:.6147193648916317,top:.7326295671817705},atlasBounds:{left:273.5,bottom:97.5,right:306.5,top:142.5}},{unicode:81,advance:.6875,planeBounds:{left:.030466166636655315,bottom:-.14391866037519643,right:.6506861771133446,top:.7445045978751964},atlasBounds:{left:214.5,bottom:202.5,right:251.5,top:255.5}},{unicode:82,advance:.61572265625,planeBounds:{left:.06350329135836826,bottom:-.02169206718177056,right:.6166724898916317,top:.7326295671817705},atlasBounds:{left:186.5,bottom:97.5,right:219.5,top:142.5}},{unicode:83,advance:.59326171875,planeBounds:{left:.020778681983368255,bottom:-.030073418674698794,right:.5739478805166317,top:.7410109186746989},atlasBounds:{left:454.5,bottom:144.5,right:487.5,top:190.5}},{unicode:84,advance:.5966796875,planeBounds:{left:.005480822747511787,bottom:-.02169206718177056,right:.5921754272524882,top:.7326295671817705},atlasBounds:{left:112.5,bottom:97.5,right:147.5,top:142.5}},{unicode:85,advance:.6484375,planeBounds:{left:.049098994483368255,bottom:-.02657487968177056,right:.6022681930166317,top:.7277467546817705},atlasBounds:{left:78.5,bottom:97.5,right:111.5,top:142.5}},{unicode:86,advance:.63623046875,planeBounds:{left:-.008269192599201152,bottom:-.02169206718177056,right:.6454762238492011,top:.7326295671817705},atlasBounds:{left:38.5,bottom:97.5,right:77.5,top:142.5}},{unicode:87,advance:.88720703125,planeBounds:{left:.011923628617731797,bottom:-.02169206718177056,right:.8835841838822683,top:.7326295671817705},atlasBounds:{left:220.5,bottom:97.5,right:272.5,top:142.5}},{unicode:88,advance:.626953125,planeBounds:{left:.004098979136655316,bottom:-.02169206718177056,right:.6243189896133446,top:.7326295671817705},atlasBounds:{left:.5,bottom:97.5,right:37.5,top:142.5}},{unicode:89,advance:.6005859375,planeBounds:{left:-.010793598988344685,bottom:-.02169206718177056,right:.6094264114883446,top:.7326295671817705},atlasBounds:{left:148.5,bottom:97.5,right:185.5,top:142.5}},{unicode:90,advance:.5986328125,planeBounds:{left:.024196650733368255,bottom:-.02169206718177056,right:.5773658492666317,top:.7326295671817705},atlasBounds:{left:307.5,bottom:97.5,right:340.5,top:142.5}},{unicode:91,advance:.26513671875,planeBounds:{left:.05437250871693295,bottom:-.17280296457569408,right:.27228764753306706,top:.8329592145756942},atlasBounds:{left:59.5,bottom:195.5,right:72.5,top:255.5}},{unicode:92,advance:.41015625,planeBounds:{left:.0014037126767941326,bottom:-.08573505127848349,right:.4204712873232059,top:.7356373950284835},atlasBounds:{left:278.5,bottom:206.5,right:303.5,top:255.5}},{unicode:93,advance:.26513671875,planeBounds:{left:-.020659233400995285,bottom:-.17280296457569408,right:.2140186084009953,top:.8329592145756942},atlasBounds:{left:94.5,bottom:195.5,right:108.5,top:255.5}},{unicode:94,advance:.41796875,planeBounds:{left:.006855376669722368,bottom:.33229482979472236,right:.40916024833027764,top:.7345997014552776},atlasBounds:{left:486.5,bottom:231.5,right:510.5,top:255.5}},{unicode:95,advance:.451171875,planeBounds:{left:-.017473255794918804,bottom:-.09553469482549765,right:.4686451307949188,top:.021804226075497646},atlasBounds:{left:70.5,bottom:7.5,right:99.5,top:14.5}},{unicode:96,advance:.30908203125,planeBounds:{left:.00391839948107648,bottom:.5860277898277895,right:.2553589442689235,top:.7704175226722105},atlasBounds:{left:36.5,bottom:3.5,right:51.5,top:14.5}},{unicode:97,advance:.5439453125,planeBounds:{left:.028181041080081196,bottom:-.029187146002488215,right:.5142994276699189,top:.5575074585024882},atlasBounds:{left:30.5,bottom:15.5,right:59.5,top:50.5}},{unicode:98,advance:.56103515625,planeBounds:{left:.048932994205081196,bottom:-.032187684160555265,right:.5350513807949189,top:.7724220591605554},atlasBounds:{left:304.5,bottom:207.5,right:333.5,top:255.5}},{unicode:99,advance:.5234375,planeBounds:{left:.024518931705081196,bottom:-.029187146002488215,right:.5106373182949189,top:.5575074585024882},atlasBounds:{left:.5,bottom:15.5,right:29.5,top:50.5}},{unicode:100,advance:.56396484375,planeBounds:{left:.026227916080081196,bottom:-.032187684160555265,right:.5123463026699189,top:.7724220591605554},atlasBounds:{left:334.5,bottom:207.5,right:363.5,top:255.5}},{unicode:101,advance:.52978515625,planeBounds:{left:.026472056705081196,bottom:-.029187146002488215,right:.5125904432949189,top:.5575074585024882},atlasBounds:{left:468.5,bottom:61.5,right:497.5,top:96.5}},{unicode:102,advance:.34716796875,planeBounds:{left:.004575110905578838,bottom:-.022177918535555265,right:.3733545765944212,top:.7824318247855554},atlasBounds:{left:364.5,bottom:207.5,right:386.5,top:255.5}},{unicode:103,advance:.56103515625,planeBounds:{left:.026960337955081196,bottom:-.22888445766762702,right:.5130787245449189,top:.558962582667627},atlasBounds:{left:28.5,bottom:143.5,right:57.5,top:190.5}},{unicode:104,advance:.55078125,planeBounds:{left:.049826556565937666,bottom:-.01892352016762703,right:.5024195371840624,top:.768923520167627},atlasBounds:{left:.5,bottom:143.5,right:27.5,top:190.5}},{unicode:105,advance:.24267578125,planeBounds:{left:.046882289688645884,bottom:-.01680925468177056,right:.19774661656135412,top:.7375123796817705},atlasBounds:{left:498.5,bottom:145.5,right:507.5,top:190.5}},{unicode:106,advance:.23876953125,planeBounds:{left:-.048979545900995285,bottom:-.2324562772148376,right:.1856982959009953,top:.7397804959648377},atlasBounds:{left:140.5,bottom:197.5,right:154.5,top:255.5}},{unicode:107,advance:.5068359375,planeBounds:{left:.044294322330081196,bottom:-.01892352016762703,right:.5304127089199189,top:.768923520167627},atlasBounds:{left:58.5,bottom:143.5,right:87.5,top:190.5}},{unicode:108,advance:.24267578125,planeBounds:{left:.05428707868157412,bottom:-.01892352016762703,right:.18838870256842588,top:.768923520167627},atlasBounds:{left:477.5,bottom:208.5,right:485.5,top:255.5}},{unicode:109,advance:.87646484375,planeBounds:{left:.04430890170737297,bottom:-.024304333502488215,right:.832155942042627,top:.5623902710024882},atlasBounds:{left:116.5,bottom:15.5,right:163.5,top:50.5}},{unicode:110,advance:.5517578125,planeBounds:{left:.049826556565937666,bottom:-.024304333502488215,right:.5024195371840624,top:.5623902710024882},atlasBounds:{left:60.5,bottom:15.5,right:87.5,top:50.5}},{unicode:111,advance:.5703125,planeBounds:{left:.025090213094224725,bottom:-.029187146002488215,right:.5447340056557752,top:.5575074585024882},atlasBounds:{left:193.5,bottom:15.5,right:224.5,top:50.5}},{unicode:112,advance:.56103515625,planeBounds:{left:.048444712955081196,bottom:-.22644305141762702,right:.5345630995449189,top:.561403988917627},atlasBounds:{left:447.5,bottom:208.5,right:476.5,top:255.5}},{unicode:113,advance:.568359375,planeBounds:{left:.025983775455081196,bottom:-.22644305141762702,right:.5121021620449189,top:.561403988917627},atlasBounds:{left:417.5,bottom:208.5,right:446.5,top:255.5}},{unicode:114,advance:.33837890625,planeBounds:{left:.045180595002291775,bottom:-.024304333502488215,right:.34690924874770823,top:.5623902710024882},atlasBounds:{left:449.5,bottom:61.5,right:467.5,top:96.5}},{unicode:115,advance:.515625,planeBounds:{left:.021669814448009427,bottom:-.029187146002488215,right:.4910254980519906,top:.5575074585024882},atlasBounds:{left:164.5,bottom:15.5,right:192.5,top:50.5}},{unicode:116,advance:.32666015625,planeBounds:{left:-.019433670483564695,bottom:-.02877457520298586,right:.3158203892335647,top:.675258950202986},atlasBounds:{left:418.5,bottom:54.5,right:438.5,top:96.5}},{unicode:117,advance:.55126953125,planeBounds:{left:.048117572190937666,bottom:-.034069958502488215,right:.5007105528090624,top:.5526246460024882},atlasBounds:{left:88.5,bottom:15.5,right:115.5,top:50.5}},{unicode:118,advance:.484375,planeBounds:{left:-.002092396419918806,bottom:-.02080579450955998,right:.4840259901699188,top:.5491261070095601},atlasBounds:{left:331.5,bottom:16.5,right:360.5,top:50.5}},{unicode:119,advance:.75146484375,planeBounds:{left:-.002649098431770561,bottom:-.02080579450955998,right:.7516725359317705,top:.5491261070095601},atlasBounds:{left:225.5,bottom:16.5,right:270.5,top:50.5}},{unicode:120,advance:.49560546875,planeBounds:{left:-.0046143729128470395,bottom:-.02080579450955998,right:.4982667166628471,top:.5491261070095601},atlasBounds:{left:300.5,bottom:16.5,right:330.5,top:50.5}},{unicode:121,advance:.47314453125,planeBounds:{left:-.007219349544918806,bottom:-.23645281704262702,right:.4788990370449188,top:.551394223292627},atlasBounds:{left:387.5,bottom:208.5,right:416.5,top:255.5}},{unicode:122,advance:.49560546875,planeBounds:{left:.018007705073009427,bottom:-.02080579450955998,right:.4873633886769906,top:.5491261070095601},atlasBounds:{left:271.5,bottom:16.5,right:299.5,top:50.5}},{unicode:123,advance:.33837890625,planeBounds:{left:.011572188891435306,bottom:-.20234398020069408,right:.3468262486085647,top:.8034181989506942},atlasBounds:{left:73.5,bottom:195.5,right:93.5,top:255.5}},{unicode:124,advance:.24365234375,planeBounds:{left:.06315671142450235,bottom:-.15466084787519643,right:.18049563232549765,top:.7337624103751964},atlasBounds:{left:206.5,bottom:202.5,right:213.5,top:255.5}},{unicode:125,advance:.33837890625,planeBounds:{left:-.010156326733564695,bottom:-.20234398020069408,right:.3250977329835647,top:.8034181989506942},atlasBounds:{left:38.5,bottom:195.5,right:58.5,top:255.5}},{unicode:126,advance:.68017578125,planeBounds:{left:.046984728997511785,bottom:.1766063915990047,right:.6336793335024882,top:.4112842334009953},atlasBounds:{left:.5,bottom:.5,right:35.5,top:14.5}}],kerning:[]},t5=class{constructor(e,t,i,s,a){O(this,"text"),O(this,"style"),O(this,"points"),O(this,"anchor"),O(this,"onClick"),this.text=e,this.style=t,this.points=i,this.anchor=s||0,this.onClick=a}},Pl={name:"untitled connectome",nodeColormap:"warm",nodeColormapNegative:"winter",nodeMinColor:0,nodeMaxColor:4,nodeScale:3,edgeColormap:"warm",edgeColormapNegative:"winter",edgeMin:2,edgeMax:6,edgeScale:1,legendLineThickness:0},kl=class e5 extends ma{constructor(t,i){super(new Float32Array([]),new Uint32Array([]),i.name,new Uint8Array([]),1,!0,t,i),O(this,"gl"),O(this,"nodesChanged"),this.gl=t,this.type="connectome",this.nodes&&this.updateLabels(),this.nodesChanged=new EventTarget}static convertLegacyConnectome(t){const i={nodes:[],edges:[],...Pl};for(const a in t)if(a in Pl){const o=a;i[o]=t[o]}const s=t.nodes;for(let a=0;a<s.names.length;a++)i.nodes.push({name:s.names[a],x:s.X[a],y:s.Y[a],z:s.Z[a],colorValue:s.Color[a],sizeValue:s.Size[a]});for(let a=0;a<s.names.length-1;a++)for(let o=a+1;o<s.names.length;o++){const l=t.edges[a*s.names.length+o];i.edges.push({first:a,second:o,colorValue:l})}return i}static convertFreeSurferConnectome(t,i="warm"){let s=!0;if("data_type"in t?t.data_type!=="fs_pointset"&&(s=!1):s=!1,"points"in t||(s=!1),!s)throw Error("not a valid FreeSurfer json pointset");const a=t.points.map(l=>({name:Array.isArray(l.comments)&&l.comments.length>0&&"text"in l.comments[0]?l.comments[0].text:"",x:l.coordinates.x,y:l.coordinates.y,z:l.coordinates.z,colorValue:1,sizeValue:1,metadata:l.comments}));return{...Pl,nodeColormap:i,edgeColormap:i,nodes:a,edges:[]}}updateLabels(){const t=this.nodes;if(t&&t.length>0){const i=t.reduce((f,m)=>f.sizeValue>m.sizeValue?f:m).sizeValue;let s,a;if(typeof this.nodeMinColor<"u"&&isFinite(this.nodeMinColor))s=this.nodeMinColor;else{s=t[0].colorValue;for(let f=1;f<t.length;f++)t[f].colorValue<s&&(s=t[f].colorValue)}if(typeof this.nodeMaxColor<"u"&&isFinite(this.nodeMaxColor))a=this.nodeMaxColor;else{a=t[0].colorValue;for(let f=1;f<t.length;f++)t[f].colorValue>a&&(a=t[f].colorValue)}const o=Ht.colormap(this.nodeColormap,this.colormapInvert),l=Ht.colormap(this.nodeColormapNegative,this.colormapInvert),h="nodeColormapNegative"in this,u=this.legendLineThickness?this.legendLineThickness:0;for(let f=0;f<t.length;f++){let m=t[f].colorValue,g=!1;if(h&&m<0&&(g=!0,m=-m),s<a){if(m<s){H.warn("color value lower than min");continue}m=(m-s)/(a-s)}else m=1;m=Math.round(Math.max(Math.min(255,m*255)))*4;let p=[o[m],o[m+1],o[m+2],255];g&&(p=[l[m],l[m+1],l[m+2],255]),p=p.map(A=>A/255),H.debug("adding label for ",t[f]),t[f].label=new t5(t[f].name,{textColor:p,bulletScale:t[f].sizeValue/i,bulletColor:p,lineWidth:u,lineColor:p,textScale:1,textAlignment:"left",lineTerminator:"none"},[t[f].x,t[f].y,t[f].z]),H.debug("label for node:",t[f].label)}}}addConnectomeNode(t){if(H.debug("adding node",t),!this.nodes)throw new Error("nodes not defined");this.nodes.push(t),this.updateLabels(),this.nodesChanged.dispatchEvent(new CustomEvent("nodeAdded",{detail:{node:t}}))}deleteConnectomeNode(t){const i=this.nodes.indexOf(t),s=this.edges;s&&(this.edges=s.filter(a=>a.first!==i&&a.second!==i)),this.nodes=this.nodes.filter(a=>a!==t),this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeDeleted",{detail:{node:t}}))}updateConnectomeNodeByIndex(t,i){this.nodes[t]=i,this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeChanged",{detail:{node:i}}))}updateConnectomeNodeByPoint(t,i){const s=this.nodes;if(!s)throw new Error("Node to update does not exist");const a=s.find(l=>ft.arraysAreEqual([l.x,l.y,l.z],t));if(!a)throw new Error(`Node with point ${t} to update does not exist`);const o=s.findIndex(l=>l===a);this.updateConnectomeNodeByIndex(o,i)}addConnectomeEdge(t,i,s){const a=this.edges;let o=a.find(l=>(l.first===t||l.second===t)&&l.first+l.second===t+i);return o||(o={first:t,second:i,colorValue:s},a.push(o),this.updateConnectome(this.gl),o)}deleteConnectomeEdge(t,i){const s=this.edges,a=s.find(o=>(o.first===t||o.first===i)&&o.first+o.second===t+i);if(a)this.edges=s.filter(o=>o!==a);else throw new Error(`edge between ${t} and ${i} not found`);return this.updateConnectome(this.gl),a}findClosestConnectomeNode(t,i){const s=this.nodes;if(!s||s.length===0)return null;const a=s.map((o,l)=>({node:o,distance:Math.sqrt(Math.pow(o.x-t[0],2)+Math.pow(o.y-t[1],2)+Math.pow(o.z-t[2],2)),index:l})).filter(o=>o.distance<i).sort((o,l)=>o.distance-l.distance);return a.length>0?a[0].node:null}updateConnectome(t){const i=[],s=[],a=[];let o=Ht.colormap(this.nodeColormap,this.colormapInvert),l=Ht.colormap(this.nodeColormapNegative,this.colormapInvert),h="nodeColormapNegative"in this;this.nodeMinColor===void 0&&(this.nodeMinColor=NaN),this.nodeMaxColor===void 0&&(this.nodeMaxColor=NaN),this.edgeMin===void 0&&(this.edgeMin=NaN),this.edgeMax===void 0&&(this.edgeMax=NaN);let u=this.nodeMinColor,f=this.nodeMaxColor;if(!isFinite(u)||!isFinite(u)){const C=this.nodes;u=C[0].colorValue,f=C[0].colorValue;for(let E=0;E<C.length;E++)u=Math.min(u,C[E].colorValue),f=Math.max(f,C[E].colorValue)}const m=this.nodes,g=m.length;for(let C=0;C<g;C++){const E=m[C].sizeValue*this.nodeScale;if(E<=0)continue;let S=m[C].colorValue,M=!1;if(h&&S<0&&(M=!0,S=-S),u<f){if(S<u)continue;S=(S-u)/(f-u)}else S=1;S=Math.round(Math.max(Math.min(255,S*255)))*4;let T=[o[S],o[S+1],o[S+2],255];M&&(T=[l[S],l[S+1],l[S+2],255]);const I=ut(m[C].x,m[C].y,m[C].z);As.makeColoredSphere(s,i,a,E,I,T)}o=Ht.colormap(this.edgeColormap,this.colormapInvert),l=Ht.colormap(this.edgeColormapNegative,this.colormapInvert),h="edgeColormapNegative"in this;const p=this.edges;if(p!==void 0&&p.length>0){if(u=this.edgeMin,f=this.edgeMax,!isFinite(u)||!isFinite(u)){u=p[0].colorValue,f=p[0].colorValue;for(let C=0;C<p.length;C++)u=Math.min(u,p[C].colorValue),f=Math.max(f,p[C].colorValue)}for(const C of p){let E=C.colorValue;const S=h&&E<0;S&&(E=-E);const M=E*this.edgeScale;if(M<=0)continue;if(u<f){if(E<u)continue;E=(E-u)/(f-u)}else E=1;E=Math.round(Math.max(Math.min(255,E*255)))*4;let T=[o[E],o[E+1],o[E+2],255];S&&(T=[l[E],l[E+1],l[E+2],255]);const I=ut(m[C.first].x,m[C.first].y,m[C.first].z),R=ut(m[C.second].x,m[C.second].y,m[C.second].z);As.makeColoredCylinder(s,i,a,I,R,M,T)}}const A=new Float32Array(s),x=new Uint32Array(i),y=hs.getExtents(A);this.furthestVertexFromOrigin=y.mxDx,this.extentsMin=y.extentsMin,this.extentsMax=y.extentsMax;const b=this.generatePosNormClr(A,x,new Uint8Array(a));t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(x),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,Float32Array.from(b),t.STATIC_DRAW),this.indexCount=i.length}updateMesh(t){this.updateConnectome(t),this.updateLabels()}json(){const t={};for(const i in this)(i in Pl||i==="nodes"||i==="edges")&&(t[i]=this[i]);return t}static async loadConnectomeFromUrl(t,i){const a=await(await fetch(i)).json();return new e5(t,a)}};function JM(e){return new Promise((t,i)=>{let s;e instanceof File?s=Promise.resolve(e):s=new Promise((a,o)=>{e.file(a,o)}),s.then(a=>{const o=new FileReader;o.onload=()=>{typeof o.result=="string"?t(o.result):i(new Error("Expected a string from FileReader.result"))},o.onerror=()=>{i(o.error??new Error("Unknown FileReader error"))},o.readAsDataURL(a)}).catch(a=>i(a))})}function _M(e){const t=e.hdr.dims,i=e.permRAS,s=t[1]*t[2]*t[3],a=new Int16Array(s),o=[0,0,0];for(let A=0;A<3;A++)for(let x=0;x<3;x++)Math.abs(i[A])-1===x&&(o[x]=A*Math.sign(i[A]));let l=1;const h=[1,1,1],u=[!1,!1,!1];for(let A=0;A<o.length;A++)for(let x=0;x<o.length;x++)Math.abs(o[x])===A&&(h[x]=l,(o[x]<0||Object.is(o[x],-0))&&(u[x]=!0),l*=t[x+1]);let f=ft.range(0,t[1]-1,1);u[0]&&(f=ft.range(t[1]-1,0,-1));for(let A=0;A<t[1];A++)f[A]*=h[0];let m=ft.range(0,t[2]-1,1);u[1]&&(m=ft.range(t[2]-1,0,-1));for(let A=0;A<t[2];A++)m[A]*=h[1];let g=ft.range(0,t[3]-1,1);u[2]&&(g=ft.range(t[3]-1,0,-1));for(let A=0;A<t[3];A++)g[A]*=h[2];let p=0;for(let A=0;A<t[3];A++)for(let x=0;x<t[2];x++)for(let y=0;y<t[1];y++)a[f[y]+m[x]+g[A]]=e.img[p],p++;return a}function Sp(e,t){const i=Math.floor(Math.log(e)/Math.log(10)),s=e/Math.pow(10,i);let a;return t?s<1.5?a=1:s<3?a=2:s<7?a=5:a=10:s<=1?a=1:s<=2?a=2:s<=5?a=5:a=10,a*Math.pow(10,i)}function Nr(e,t,i=4){const s=Sp(t-e,!1),a=Sp(s/(i-1),!0),o=Math.floor(e/a)*a,l=Math.ceil(t/a)*a;return[a,o,l,o===e&&l===t]}function Mp(e,t){let i=Nr(e,t,3);return i[3]||(i=Nr(e,t,5)),i[3]||(i=Nr(e,t,4)),i[3]||(i=Nr(e,t,3)),i[3]||(i=Nr(e,t,5)),[i[0],i[1],i[2]]}function Fn(e){return e*(Math.PI/180)}function cf(e,t,i,s){let a=-e,o=-t;return isFinite(i)&&isFinite(s)&&(a=i,o=s),a>o&&([a,o]=[o,a]),[a,o]}function Ue(e,t=[0,1,2]){const i=Zt();return i[0]=e[t[0]],i[1]=e[t[1]],i[2]=e[t[2]],i}function Ep(e){const t=Wt(1,0,0,0),i=an();return Ve(i,t,e),i[0]}function $M(e,t,i,s){const a=Wt(e,t,i,1),o=he(s);Xe(o,o),a[0]=a[0]*2-1,a[1]=a[1]*2-1,a[2]=a[2]*2-1;const l=an();return Ve(l,a,o),l[3]===0||(l[0]/=l[3],l[1]/=l[3],l[2]/=l[3]),l}function tE(e){const t=[5960464477539063e-23,152587890625e-16,.00390625,1];return(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3])/255}function uf(e,t,i){return Math.min(Math.max(e,t),i)}function eE(e){const t=e.length;let i=0;const s=new Uint8Array(t+Math.ceil(.01*t)),a=new Int8Array(s.buffer);let o=0;for(;i<t;){let l=e[i];i++;let h=1;for(;h<129&&i<t&&e[i]===l;)i++,h++;if(h>1){a[o]=-h+1,o++,s[o]=l,o++;continue}for(;i<t&&!(h>127||i+2<t&&l!==e[i]&&e[i+2]===e[i]&&e[i+1]===e[i]);)l=e[i],i++,h++;s[o]=h-1,o++;for(let u=0;u<h;u++)s[o]=e[i-h+u],o++}return H.info("PackBits "+t+" -> "+o+" bytes (x"+t/o+")"),s.slice(0,o)}function Tp(e,t){const i=new Uint8Array(e.buffer),s=new Int8Array(i.buffer);let a=0;const o=new Uint8Array(t);let l=0;for(;a<i.length;){const h=s[a];if(a++,h<0){const u=s[a];a++;for(let f=0;f<1-h;f++)o[l]=u,l++}else for(let u=0;u<h+1;u++)o[l]=s[a],a++,l++}return o}function Dp(e,t){return e.scl_slope===0&&(e.scl_slope=1),t*e.scl_slope+e.scl_inter}var cs=["ASC","BYU","DFS","FSM","PIAL","ORIG","INFLATED","SMOOTHWM","SPHERE","WHITE","G","GEO","GII","ICO","MZ3","NV","OBJ","OFF","PLY","SRF","STL","TCK","TRACT","TRI","TRK","TT","TRX","VTK","WRL","X3D","JCON","JSON"],Vp=0,iE=1,nE=2,zl=33984,jl=33985,hf=33986,sE=33987,aE=33988,Rp=33989,Ip=33990,la=33991,Bp=33992,rE=33993,Up=33994,oE=33995,lE=33996,cE=33997,uE=33998,hE=33999,Fp={filename:"",isSaveDrawing:!1,volumeByIndex:0},fE=class{constructor(e=Ln){O(this,"loaders",{}),O(this,"dicomLoader",null),O(this,"canvas",null),O(this,"_gl",null),O(this,"isBusy",!1),O(this,"needsRefresh",!1),O(this,"colormapTexture",null),O(this,"colormapLists",[]),O(this,"volumeTexture",null),O(this,"gradientTexture",null),O(this,"gradientTextureAmount",0),O(this,"renderGradientValues",!1),O(this,"drawTexture",null),O(this,"drawUndoBitmaps",[]),O(this,"drawLut",Ht.makeDrawLut("$itksnap")),O(this,"drawOpacity",.8),O(this,"clickToSegmentIsGrowing",!1),O(this,"clickToSegmentGrowingBitmap",null),O(this,"clickToSegmentXY",[0,0]),O(this,"renderDrawAmbientOcclusion",.4),O(this,"colorbarHeight",0),O(this,"drawPenLocation",[NaN,NaN,NaN]),O(this,"drawPenAxCorSag",-1),O(this,"drawFillOverwrites",!0),O(this,"drawPenFillPts",[]),O(this,"overlayTexture",null),O(this,"overlayTextureID",null),O(this,"sliceMMShader"),O(this,"sliceV1Shader"),O(this,"orientCubeShader"),O(this,"orientCubeShaderVAO",null),O(this,"rectShader"),O(this,"rectOutlineShader"),O(this,"renderShader"),O(this,"lineShader"),O(this,"line3DShader"),O(this,"passThroughShader"),O(this,"renderGradientShader"),O(this,"renderGradientValuesShader"),O(this,"renderSliceShader"),O(this,"renderVolumeShader"),O(this,"pickingMeshShader"),O(this,"pickingImageShader"),O(this,"colorbarShader"),O(this,"fontShader",null),O(this,"fiberShader"),O(this,"fontTexture",null),O(this,"circleShader"),O(this,"matCapTexture",null),O(this,"bmpShader",null),O(this,"bmpTexture",null),O(this,"thumbnailVisible",!1),O(this,"bmpTextureWH",1),O(this,"growCutShader"),O(this,"orientShaderAtlasU",null),O(this,"orientShaderAtlasI",null),O(this,"orientShaderU",null),O(this,"orientShaderI",null),O(this,"orientShaderF",null),O(this,"orientShaderRGBU",null),O(this,"surfaceShader",null),O(this,"blurShader",null),O(this,"sobelBlurShader",null),O(this,"sobelFirstOrderShader",null),O(this,"sobelSecondOrderShader",null),O(this,"genericVAO",null),O(this,"unusedVAO",null),O(this,"crosshairs3D",null),O(this,"DEFAULT_FONT_GLYPH_SHEET",bp),O(this,"DEFAULT_FONT_METRICS",Cp),O(this,"fontMetrics"),O(this,"fontMets",null),O(this,"backgroundMasksOverlays",0),O(this,"overlayOutlineWidth",0),O(this,"overlayAlphaShader",1),O(this,"position"),O(this,"extentsMin"),O(this,"extentsMax"),O(this,"resizeObserver",null),O(this,"syncOpts",{"3d":!1,"2d":!1,zoomPan:!1,cal_min:!1,cal_max:!1,clipPlane:!1,gamma:!1,sliceType:!1,crosshair:!1}),O(this,"readyForSync",!1),O(this,"uiData",{mousedown:!1,touchdown:!1,mouseButtonLeftDown:!1,mouseButtonCenterDown:!1,mouseButtonRightDown:!1,mouseDepthPicker:!1,clickedTile:-1,pan2DxyzmmAtMouseDown:[0,0,0,1],prevX:0,prevY:0,currX:0,currY:0,currentTouchTime:0,lastTouchTime:0,touchTimer:null,doubleTouch:!1,isDragging:!1,dragStart:[0,0],dragEnd:[0,0],dragClipPlaneStartDepthAziElev:[0,0,0],lastTwoTouchDistance:0,multiTouchGesture:!1,windowX:0,windowY:0}),O(this,"back",null),O(this,"overlays",[]),O(this,"deferredVolumes",[]),O(this,"deferredMeshes",[]),O(this,"furthestVertexFromOrigin",100),O(this,"volScale",[]),O(this,"vox",[]),O(this,"mousePos",[0,0]),O(this,"screenSlices",[]),O(this,"cuboidVertexBuffer"),O(this,"otherNV",null),O(this,"volumeObject3D",null),O(this,"pivot3D",[0,0,0]),O(this,"furthestFromPivot",10),O(this,"currentClipPlaneIndex",0),O(this,"lastCalled",new Date().getTime()),O(this,"selectedObjectId",-1),O(this,"CLIP_PLANE_ID",1),O(this,"VOLUME_ID",254),O(this,"DISTANCE_FROM_CAMERA",-.54),O(this,"graph",{LTWH:[0,0,640,480],opacity:0,vols:[0],autoSizeMultiplanar:!1,normalizeValues:!1,isRangeCalMinMax:!1}),O(this,"meshShaders",[{Name:"Phong",Frag:hS},{Name:"Matte",Frag:dS},{Name:"Harmonic",Frag:gS},{Name:"Hemispheric",Frag:mS},{Name:"Crevice",Frag:uS},{Name:"Edge",Frag:oS},{Name:"Diffuse",Frag:lS},{Name:"Outline",Frag:rS},{Name:"Specular",Frag:cS},{Name:"Toon",Frag:aS},{Name:"Flat",Frag:xp},{Name:"Matcap",Frag:fS}]),O(this,"dragModes",{contrast:1,measurement:2,none:0,pan:3,slicer3D:4,callbackOnly:5}),O(this,"sliceTypeAxial",0),O(this,"sliceTypeCoronal",1),O(this,"sliceTypeSagittal",2),O(this,"sliceTypeMultiplanar",3),O(this,"sliceTypeRender",4),O(this,"onDragRelease",()=>{}),O(this,"onMouseUp",()=>{}),O(this,"onLocationChange",()=>{}),O(this,"onIntensityChange",()=>{}),O(this,"onClickToSegment",()=>{}),O(this,"onImageLoaded",()=>{}),O(this,"onMeshLoaded",()=>{}),O(this,"onFrameChange",()=>{}),O(this,"onError",()=>{}),O(this,"onColormapChange",()=>{}),O(this,"onInfo",()=>{}),O(this,"onWarn",()=>{}),O(this,"onDebug",()=>{}),O(this,"onVolumeAddedFromUrl",()=>{}),O(this,"onVolumeWithUrlRemoved",()=>{}),O(this,"onVolumeUpdated",()=>{}),O(this,"onMeshAddedFromUrl",()=>{}),O(this,"onMeshAdded",()=>{}),O(this,"onMeshWithUrlRemoved",()=>{}),O(this,"onZoom3DChange",()=>{}),O(this,"onAzimuthElevationChange",()=>{}),O(this,"onClipPlaneChange",()=>{}),O(this,"onCustomMeshShaderAdded",()=>{}),O(this,"onMeshShaderChanged",()=>{}),O(this,"onMeshPropertyChanged",()=>{}),O(this,"onDicomLoaderFinishedWithImages",()=>{}),O(this,"onDocumentLoaded",()=>{}),O(this,"document",new lf),O(this,"mediaUrlMap",new Map),O(this,"initialized",!1),O(this,"currentDrawUndoBitmap");for(const t in e)typeof e[t]=="function"?this[t]=e[t]:this.opts[t]=Ln[t]===void 0?Ln[t]:e[t];this.opts.forceDevicePixelRatio===0?this.uiData.dpr=window.devicePixelRatio||1:this.opts.forceDevicePixelRatio<0?this.uiData.dpr=1:this.uiData.dpr=this.opts.forceDevicePixelRatio,this.currentDrawUndoBitmap=this.opts.maxDrawUndoBitmaps,this.opts.drawingEnabled&&this.createEmptyDrawing(),this.opts.thumbnail.length>0&&(this.thumbnailVisible=!0),H.setLogLevel(this.opts.logLevel)}get scene(){return this.document.scene}get opts(){return this.document.opts}get sliceMosaicString(){return this.document.opts.sliceMosaicString||""}set sliceMosaicString(e){this.document.opts.sliceMosaicString=e}get isAlphaClipDark(){return this.document.opts.isAlphaClipDark}set isAlphaClipDark(e){this.document.opts.isAlphaClipDark=e}get volumes(){return this.document.volumes}set volumes(e){this.document.volumes=e}get meshes(){return this.document.meshes}set meshes(e){this.document.meshes=e}get drawBitmap(){return this.document.drawBitmap}set drawBitmap(e){this.document.drawBitmap=e}get volScaleMultiplier(){return this.scene.volScaleMultiplier}set volScaleMultiplier(e){this.setScale(e)}async saveScene(e="niivue.png"){function t(s,a){const o=document.createElement("a");document.body.appendChild(o),o.style.display="none";const l=window.URL.createObjectURL(s);o.href=l,o.download=a,o.click(),o.remove()}const i=this.canvas;if(!i)throw new Error("canvas not defined");this.drawScene(),i.toBlob(s=>{s&&(e===""&&(e=`niivue-screenshot-${new Date().toString()}.png`,e=e.replace(/\s/g,"_")),t(s,e))})}async attachTo(e,t=null){return await this.attachToCanvas(document.getElementById(e),t),H.debug("attached to element with id: ",e),this}async attachToCanvas(e,t=null){return this.canvas=e,t===null&&(t=navigator.hardwareConcurrency>6,H.debug("AntiAlias ",t," Threads ",navigator.hardwareConcurrency)),this.gl=this.canvas.getContext("webgl2",{alpha:!0,antialias:t}),H.info("NIIVUE VERSION ",mp),this.canvas.parentElement.style.backgroundColor="black",this.opts.isResizeCanvas&&(this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,window.addEventListener("resize",()=>{requestAnimationFrame(()=>{this.resizeListener()})}),this.resizeObserver=new ResizeObserver(()=>{requestAnimationFrame(()=>{this.resizeListener()})}),this.resizeObserver.observe(this.canvas.parentElement)),this.opts.interactive&&this.registerInteractions(),await this.init(),this.drawScene(),this}syncWith(e,t={"2d":!0,"3d":!0}){e instanceof Array||(e=[e]),this.otherNV=e,this.syncOpts={...t}}broadcastTo(e,t={"2d":!0,"3d":!0}){e instanceof Array||(e=[e]),this.otherNV=e,this.syncOpts=t}doSync3d(e){e.scene.renderAzimuth=this.scene.renderAzimuth,e.scene.renderElevation=this.scene.renderElevation,e.scene.volScaleMultiplier=this.scene.volScaleMultiplier}doSync2d(e){const t=this.frac2mm(this.scene.crosshairPos);e.scene.crosshairPos=e.mm2frac(t),e.scene.pan2Dxyzmm=tn(this.scene.pan2Dxyzmm)}doSyncGamma(e){const t=this.scene.gamma,i=e.scene.gamma;t!==i&&e.setGamma(t)}doSyncZoomPan(e){e.scene.pan2Dxyzmm=tn(this.scene.pan2Dxyzmm)}doSyncCrosshair(e){const t=this.frac2mm(this.scene.crosshairPos);e.scene.crosshairPos=e.mm2frac(t)}doSyncCalMin(e){this.volumes[0].cal_min!==e.volumes[0].cal_min&&(e.volumes[0].cal_min=this.volumes[0].cal_min,e.updateGLVolume())}doSyncCalMax(e){this.volumes[0].cal_max!==e.volumes[0].cal_max&&(e.volumes[0].cal_max=this.volumes[0].cal_max,e.updateGLVolume())}doSyncSliceType(e){e.setSliceType(this.opts.sliceType)}doSyncClipPlane(e){e.setClipPlane(this.scene.clipPlaneDepthAziElev)}sync(){if(!(!this.gl||!this.otherNV||typeof this.otherNV>"u")&&this.gl.canvas.matches(":focus"))for(let e=0;e<this.otherNV.length;e++)this.otherNV[e]!==this&&(this.syncOpts.gamma&&this.doSyncGamma(this.otherNV[e]),this.syncOpts.crosshair&&this.doSyncCrosshair(this.otherNV[e]),this.syncOpts.zoomPan&&this.doSyncZoomPan(this.otherNV[e]),this.syncOpts.sliceType&&this.doSyncSliceType(this.otherNV[e]),this.syncOpts.cal_min&&this.doSyncCalMin(this.otherNV[e]),this.syncOpts.cal_max&&this.doSyncCalMax(this.otherNV[e]),this.syncOpts.clipPlane&&this.doSyncClipPlane(this.otherNV[e]),this.syncOpts["2d"]&&this.doSync2d(this.otherNV[e]),this.syncOpts["3d"]&&this.doSync3d(this.otherNV[e]),this.otherNV[e].drawScene(),this.otherNV[e].createOnLocationChange())}arrayEquals(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((i,s)=>i===t[s])}resizeListener(){if(!(!this.canvas||!this.gl)){if(!this.opts.isResizeCanvas){this.opts.forceDevicePixelRatio>=0&&H.warn("this.opts.forceDevicePixelRatio requires isResizeCanvas"),this.drawScene();return}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.opts.forceDevicePixelRatio===0?this.uiData.dpr=window.devicePixelRatio||1:this.opts.forceDevicePixelRatio<0?this.uiData.dpr=1:this.uiData.dpr=this.opts.forceDevicePixelRatio,H.debug("devicePixelRatio: "+this.uiData.dpr),"width"in this.canvas.parentElement?(this.canvas.width=this.canvas.parentElement.width*this.uiData.dpr,this.canvas.height=this.canvas.parentElement.height*this.uiData.dpr):(this.canvas.width=this.canvas.offsetWidth*this.uiData.dpr,this.canvas.height=this.canvas.offsetHeight*this.uiData.dpr),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.drawScene()}}getRelativeMousePosition(e,t){if(t=t||e.target,!t)return;const i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}getNoPaddingNoBorderCanvasRelativeMousePosition(e,t){return t=t||e.target,this.getRelativeMousePosition(e,t)}mouseContextMenuListener(e){e.preventDefault()}mouseDownListener(e){e.preventDefault(),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.uiData.mousedown=!0,this.setDragStart(0,0),this.setDragEnd(0,0),H.debug("mouse down"),H.debug(e);const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!t)return;const[i,s]=[t.x*this.uiData.dpr,t.y*this.uiData.dpr];this.opts.clickToSegment&&(this.clickToSegmentXY=[i,s]);const a=this.getLabelAtPoint([i,s]);if(a){if(a.onClick){a.onClick(a);return}for(const o of this.meshes)if(o.type==="connectome")for(const l of o.nodes)l.label===a&&(this.scene.crosshairPos=this.mm2frac([l.x,l.y,l.z]),this.updateGLVolume(),this.drawScene())}this.uiData.clickedTile=this.tileIndex(i,s),e.button===Vp&&e.shiftKey?(this.uiData.mouseButtonCenterDown=!0,this.mouseCenterButtonHandler(e)):e.button===Vp?(this.uiData.mouseButtonLeftDown=!0,this.mouseLeftButtonHandler(e)):e.button===nE?(this.uiData.mouseButtonRightDown=!0,this.mouseRightButtonHandler(e)):e.button===iE&&(this.uiData.mouseButtonCenterDown=!0,this.mouseCenterButtonHandler(e))}mouseLeftButtonHandler(e){if(e.ctrlKey||this.opts.dragModePrimary===0){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);this.mouseDown(t.x,t.y),this.mouseClick(t.x,t.y)}else this.opts.dragModePrimary===1&&(this.uiData.windowX=e.x,this.uiData.windowY=e.y)}mouseCenterButtonHandler(e){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);this.mousePos=[t.x*this.uiData.dpr,t.y*this.uiData.dpr],this.opts.dragMode!==0&&(this.setDragStart(t.x,t.y),this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=tn(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.dragClipPlaneStartDepthAziElev=this.scene.clipPlaneDepthAziElev)}mouseRightButtonHandler(e){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);this.mousePos=[t.x*this.uiData.dpr,t.y*this.uiData.dpr],this.opts.dragMode!==0&&(this.setDragStart(t.x,t.y),this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=tn(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.dragClipPlaneStartDepthAziElev=this.scene.clipPlaneDepthAziElev)}calculateMinMaxVoxIdx(e){if(e.length>2)throw new Error("array must not contain more than two values");return[Math.floor(Math.min(e[0],e[1])),Math.floor(Math.max(e[0],e[1]))]}calculateNewRange({volIdx:e=0}={}){if(this.opts.sliceType===4&&this.sliceMosaicString.length<1||this.uiData.dragStart[0]===this.uiData.dragEnd[0]&&this.uiData.dragStart[1]===this.uiData.dragEnd[1])return;let t=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]);if(t[0]<0)return;const i=this.frac2vox(t,e);if(t=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]),t[0]<0)return;const s=this.frac2vox(t,e);let a=-Number.MAX_VALUE,o=Number.MAX_VALUE;const l=this.calculateMinMaxVoxIdx([i[0],s[0]]),h=this.calculateMinMaxVoxIdx([i[1],s[1]]),u=this.calculateMinMaxVoxIdx([i[2],s[2]]);i[0]-s[0]===0?l[1]=i[0]+1:i[1]-s[1]===0?h[1]=i[1]+1:i[2]-s[2]===0&&(u[1]=i[2]+1);const f=this.volumes[e].hdr,m=this.volumes[e].img;if(!f||!m)return;const g=f.dims[1],p=f.dims[2];for(let y=u[0];y<u[1];y++){const b=y*g*p;for(let C=h[0];C<h[1];C++){const E=C*g;for(let S=l[0];S<l[1];S++){const M=b+E+S;o>m[M]&&(o=m[M]),a<m[M]&&(a=m[M])}}}if(o>=a)return;const A=Dp(f,o),x=Dp(f,a);this.volumes[e].cal_min=A,this.volumes[e].cal_max=x,this.onIntensityChange(this.volumes[e])}generateMouseUpCallback(e,t){const i=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]),s=this.tileIndex(this.uiData.dragEnd[0],this.uiData.dragEnd[1]);let a=-1;i===s&&(a=s);let o=-1;a>=0&&(o=this.screenSlices[a].axCorSag);const l=this.frac2mm(e),h=this.frac2mm(t),u=Zt();ap(u,ut(l[0],l[1],l[2]),ut(h[0],h[1],h[2]));const f=to(u),m=this.frac2vox(e),g=this.frac2vox(t);this.onDragRelease({fracStart:e,fracEnd:t,voxStart:m,voxEnd:g,mmStart:l,mmEnd:h,mmLength:f,tileIdx:a,axCorSag:o})}mouseUpListener(){function e(s){return Object.prototype.toString.call(s).indexOf("Function")>-1}const t={mouseButtonRightDown:this.uiData.mouseButtonRightDown,mouseButtonCenterDown:this.uiData.mouseButtonCenterDown,isDragging:this.uiData.isDragging,mousePos:this.mousePos,fracPos:this.canvasPos2frac(this.mousePos)};this.uiData.mousedown=!1,this.uiData.mouseButtonRightDown=!1;const i=this.uiData.mouseButtonCenterDown;if(this.uiData.mouseButtonCenterDown=!1,this.uiData.mouseButtonLeftDown=!1,this.drawPenFillPts.length>0)this.drawPenFilled();else if(this.drawPenAxCorSag>=0&&this.opts.clickToSegment){const s=this.sumBitmap(this.drawBitmap);this.sumBitmap(this.clickToSegmentGrowingBitmap)>s&&this.updateBitmapFromClickToSegment()}if(this.drawAddUndoBitmap(),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,e(this.onMouseUp)&&this.onMouseUp(t),this.uiData.isDragging){this.uiData.isDragging=!1,this.opts.dragMode===5&&this.drawScene();const s=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),a=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);if(this.generateMouseUpCallback(s,a),this.opts.dragMode===6||this.opts.dragMode!==1||i||this.uiData.dragStart[0]===this.uiData.dragEnd[0]&&this.uiData.dragStart[1]===this.uiData.dragEnd[1])return;this.calculateNewRange({volIdx:0}),this.refreshLayers(this.volumes[0],0)}this.drawScene()}checkMultitouch(e){if(this.uiData.touchdown&&!this.uiData.multiTouchGesture){const t=this.canvas.getBoundingClientRect();this.mouseDown(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top),this.mouseClick(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top)}}touchStartListener(e){e.preventDefault(),this.uiData.touchTimer||(this.uiData.touchTimer=setTimeout(()=>{this.resetBriCon(e)},this.opts.longTouchTimeout)),this.uiData.touchdown=!0,this.uiData.currentTouchTime=new Date().getTime();const t=this.uiData.currentTouchTime-this.uiData.lastTouchTime;if(t<this.opts.doubleTouchTimeout&&t>0){this.uiData.doubleTouch=!0,this.setDragStart(e.targetTouches[0].clientX-e.target.getBoundingClientRect().left,e.targetTouches[0].clientY-e.target.getBoundingClientRect().top),this.resetBriCon(e),this.uiData.lastTouchTime=this.uiData.currentTouchTime;return}else this.uiData.doubleTouch=!1,this.setDragStart(0,0),this.setDragEnd(0,0),this.uiData.lastTouchTime=this.uiData.currentTouchTime;this.uiData.touchdown&&e.touches.length<2?this.uiData.multiTouchGesture=!1:this.uiData.multiTouchGesture=!0,setTimeout(this.checkMultitouch.bind(this),1,e)}touchEndListener(e){if(e.preventDefault(),this.uiData.touchdown=!1,this.uiData.lastTwoTouchDistance=0,this.uiData.multiTouchGesture=!1,this.uiData.touchTimer&&(clearTimeout(this.uiData.touchTimer),this.uiData.touchTimer=null),this.uiData.isDragging){this.uiData.isDragging=!1,this.opts.dragMode===1&&(this.calculateNewRange(),this.refreshLayers(this.volumes[0],0));const t=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),i=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);this.generateMouseUpCallback(t,i)}this.mouseUpListener()}windowingHandler(e,t,i=0){const s=this.uiData.windowX,a=this.uiData.windowY;let o=this.volumes[0].cal_min,l=this.volumes[0].cal_max;const h=this.volumes[0].global_min,u=this.volumes[0].global_max;t<a?(o+=1,l+=1):t>a&&(o-=1,l-=1),e>s?(o-=1,l+=1):e<s&&(o+=1,l-=1),l-o<1&&(l=o+1),o<h&&(o=h),l>u&&(l=u),o>l&&(o=l-1),this.volumes[i].cal_min=o,this.volumes[i].cal_max=l,this.refreshLayers(this.volumes[i],0),this.uiData.windowX=e,this.uiData.windowY=t}mouseMoveListener(e){if(this.uiData.mousedown){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!t)return;const i=t.x*this.uiData.dpr,s=t.y*this.uiData.dpr;if(this.tileIndex(i,s)!==this.uiData.clickedTile)return;if(this.uiData.mouseButtonLeftDown){const o=this.opts.dragModePrimary===0,l=this.opts.dragModePrimary===1;e.ctrlKey||o?(this.mouseMove(t.x,t.y),this.mouseClick(t.x,t.y)):l&&this.windowingHandler(e.x,e.y)}else(this.uiData.mouseButtonRightDown||this.uiData.mouseButtonCenterDown)&&this.setDragEnd(t.x,t.y);this.drawScene(),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY}else if(!this.uiData.mousedown&&this.opts.clickToSegment){const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!t)return;const i=t.x*this.uiData.dpr,s=t.y*this.uiData.dpr;this.mousePos=[i,s],this.drawScene()}}resetBriCon(e=null){if(this.uiData.isDragging)return;let t=!1;this.opts.sliceType===4&&(t=!0);let i=0,s=0;if(e!==null&&("targetTouches"in e?(i=e.targetTouches[0].clientX-e.target.getBoundingClientRect().left,s=e.targetTouches[0].clientY-e.target.getBoundingClientRect().top):(i=e.offsetX,s=e.offsetY),i*=this.uiData.dpr,s*=this.uiData.dpr,this.inRenderTile(i,s)>=0&&(t=!0)),t){this.uiData.mouseDepthPicker=!0,this.drawScene(),this.drawScene();return}this.opts.dragMode!==4&&(this.volumes.length<1||this.uiData.doubleTouch||(this.volumes[0].cal_min=this.volumes[0].robust_min,this.volumes[0].cal_max=this.volumes[0].robust_max,this.onIntensityChange(this.volumes[0]),this.refreshLayers(this.volumes[0],0),this.drawScene()))}setDragStart(e,t){e*=this.uiData.dpr,t*=this.uiData.dpr,this.uiData.dragStart[0]=e,this.uiData.dragStart[1]=t}setDragEnd(e,t){e*=this.uiData.dpr,t*=this.uiData.dpr,this.uiData.dragEnd[0]=e,this.uiData.dragEnd[1]=t}touchMoveListener(e){if(this.uiData.touchdown&&e.touches.length<2){const t=this.canvas.getBoundingClientRect();if(this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=tn(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.doubleTouch&&this.uiData.isDragging){this.setDragEnd(e.targetTouches[0].clientX-e.target.getBoundingClientRect().left,e.targetTouches[0].clientY-e.target.getBoundingClientRect().top),this.drawScene();return}const i=this.opts.dragModePrimary===0,s=this.opts.dragModePrimary===1;i?(this.mouseClick(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top),this.mouseMove(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top)):s&&(this.windowingHandler(e.touches[0].pageX,e.touches[0].pageY),this.drawScene())}else this.handlePinchZoom(e)}handlePinchZoom(e){if(e.targetTouches.length===2&&e.changedTouches.length===2){const t=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY),i=this.canvas.getBoundingClientRect();this.mousePos=[e.touches[0].clientX-i.left,e.touches[0].clientY-i.top],t<this.uiData.lastTwoTouchDistance?this.sliceScroll2D(-.01,e.touches[0].clientX-i.left,e.touches[0].clientY-i.top):this.sliceScroll2D(.01,e.touches[0].clientX-i.left,e.touches[0].clientY-i.top),this.uiData.lastTwoTouchDistance=t}}keyUpListener(e){if(e.code===this.opts.clipPlaneHotKey){const t=new Date().getTime();if(t-this.lastCalled>this.opts.keyDebounceTime){switch(this.currentClipPlaneIndex=(this.currentClipPlaneIndex+1)%7,this.currentClipPlaneIndex){case 0:this.scene.clipPlaneDepthAziElev=[2,0,0];break;case 1:this.scene.clipPlaneDepthAziElev=[0,270,0];break;case 2:this.scene.clipPlaneDepthAziElev=[0,90,0];break;case 3:this.scene.clipPlaneDepthAziElev=[0,0,0];break;case 4:this.scene.clipPlaneDepthAziElev=[0,180,0];break;case 5:this.scene.clipPlaneDepthAziElev=[0,0,-90];break;case 6:this.scene.clipPlaneDepthAziElev=[0,0,90];break}this.setClipPlane(this.scene.clipPlaneDepthAziElev)}this.lastCalled=t}else if(e.code===this.opts.viewModeHotKey){const t=new Date().getTime();t-this.lastCalled>this.opts.keyDebounceTime&&(this.setSliceType((this.opts.sliceType+1)%5),this.lastCalled=t)}}keyDownListener(e){e.code==="KeyH"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth-1,this.scene.renderElevation):e.code==="KeyL"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth+1,this.scene.renderElevation):e.code==="KeyJ"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation+1):e.code==="KeyK"&&this.opts.sliceType===4?this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation-1):e.code==="KeyH"&&this.opts.sliceType!==4?this.moveCrosshairInVox(-1,0,0):e.code==="KeyL"&&this.opts.sliceType!==4?this.moveCrosshairInVox(1,0,0):e.code==="KeyU"&&this.opts.sliceType!==4&&e.ctrlKey?this.moveCrosshairInVox(0,0,1):e.code==="KeyD"&&this.opts.sliceType!==4&&e.ctrlKey?this.moveCrosshairInVox(0,0,-1):e.code==="KeyJ"&&this.opts.sliceType!==4?this.moveCrosshairInVox(0,-1,0):e.code==="KeyK"&&this.opts.sliceType!==4?this.moveCrosshairInVox(0,1,0):e.code==="KeyM"&&this.opts.sliceType!==4?(this.opts.dragMode++,this.opts.dragMode>=4&&(this.opts.dragMode=0),H.info("drag mode changed to ",$v[this.opts.dragMode])):e.code==="ArrowLeft"?this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D-1):e.code==="ArrowRight"?this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D+1):e.code==="Slash"&&e.shiftKey&&alert(`NIIVUE VERSION: ${mp}`)}wheelListener(e){if(e.preventDefault(),e.stopPropagation(),this.thumbnailVisible)return;const t=this.uiData.dragStart.reduce((o,l)=>o+l,0),i=this.uiData.dragEnd.reduce((o,l)=>o+l,0),s=t>0&&i>0;if(this.opts.dragMode===6&&s){const o=e.deltaY>0?1:-1;this.uiData.dragStart[0]<this.uiData.dragEnd[0]?(this.uiData.dragStart[0]-=o,this.uiData.dragEnd[0]+=o):(this.uiData.dragStart[0]+=o,this.uiData.dragEnd[0]-=o),this.uiData.dragStart[1]<this.uiData.dragEnd[1]?(this.uiData.dragStart[1]-=o,this.uiData.dragEnd[1]+=o):(this.uiData.dragStart[1]+=o,this.uiData.dragEnd[1]-=o),this.uiData.isDragging=!0,this.drawScene(),this.uiData.isDragging=!1;const l=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]);this.generateMouseUpCallback(this.screenXY2TextureFrac(this.uiData.dragStart[0],this.uiData.dragStart[1],l),this.screenXY2TextureFrac(this.uiData.dragEnd[0],this.uiData.dragEnd[1],l));return}const a=this.canvas.getBoundingClientRect();e.deltaY<0?this.sliceScroll2D(-.01,e.clientX-a.left,e.clientY-a.top):this.sliceScroll2D(.01,e.clientX-a.left,e.clientY-a.top)}registerInteractions(){if(!this.canvas)throw new Error("canvas undefined");this.canvas.addEventListener("mousedown",this.mouseDownListener.bind(this)),this.canvas.addEventListener("mouseup",this.mouseUpListener.bind(this)),this.canvas.addEventListener("mousemove",this.mouseMoveListener.bind(this)),this.canvas.addEventListener("touchstart",this.touchStartListener.bind(this)),this.canvas.addEventListener("touchend",this.touchEndListener.bind(this)),this.canvas.addEventListener("touchmove",this.touchMoveListener.bind(this)),this.canvas.addEventListener("wheel",this.wheelListener.bind(this)),this.canvas.addEventListener("contextmenu",this.mouseContextMenuListener.bind(this)),this.canvas.addEventListener("dblclick",this.resetBriCon.bind(this)),this.canvas.addEventListener("dragenter",this.dragEnterListener.bind(this),!1),this.canvas.addEventListener("dragover",this.dragOverListener.bind(this),!1),this.canvas.addEventListener("drop",this.dropListener.bind(this),!1),this.canvas.setAttribute("tabindex","0"),this.canvas.addEventListener("keyup",this.keyUpListener.bind(this),!1),this.canvas.addEventListener("keydown",this.keyDownListener.bind(this),!1)}dragEnterListener(e){e.stopPropagation(),e.preventDefault()}dragOverListener(e){e.stopPropagation(),e.preventDefault()}getFileExt(e,t=!0){H.debug("fullname: ",e);const i=/(?:\.([^.]+))?$/;let s=i.exec(e)[1];if(s=s.toUpperCase(),s==="GZ")s=i.exec(e.slice(0,-3))[1],s=s.toUpperCase();else if(s==="CBOR"){const a=s;s=i.exec(e.slice(0,-5))[1],s=s.toUpperCase(),s=`${s}.${a}`}return t?s:s.toLowerCase()}async addVolumeFromUrl(e){const t=await Oe.loadFromUrl(e);return this.document.addImageOptions(t,e),t.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(t,e.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(e,t),this.addVolume(t),t}async addVolumesFromUrl(e){const t=e.map(async s=>{const a=this.getFileExt(s.name||s.url);if(a==="DCM")throw new Error("DICOM files must be loaded using useDicomLoader");if(this.loaders[a]){let h=s.url;const u=this.loaders[a].toExt;let f=s.name||s.url;if(f=f.split("/").pop(),typeof s.url=="string"){const g=s.url;try{const p=await fetch(g);if(!p.ok)throw new Error(`Failed to load file: ${p.statusText}`);h=await p.arrayBuffer()}catch(p){throw new Error(`Failed to load url ${g}: ${p}`)}}const m=await this.loaders[a].loader(h);s.url=m,s.name=`${f}.${u}`}const o={url:s.url,headers:s.headers,name:s.name,colormap:s.colormap?s.colormap:s.colorMap,colormapNegative:s.colormapNegative?s.colormapNegative:s.colorMapNegative,opacity:s.opacity,urlImgData:s.urlImgData,cal_min:s.cal_min,cal_max:s.cal_max,trustCalMinMax:this.opts.trustCalMinMax,isManifest:s.isManifest,frame4D:s.frame4D,limitFrames4D:s.limitFrames4D||this.opts.limitFrames4D,colorbarVisible:s.colorbarVisible},l=await Oe.loadFromUrl(o);return this.document.addImageOptions(l,o),l.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(l,o.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(o,l),l}),i=await Promise.all(t);for(let s=0;s<i.length;s++)this.addVolume(i[s]);return i}getMediaByUrl(e){return[...this.mediaUrlMap.entries()].filter(t=>t[1]===e).map(t=>t[0]).pop()}removeVolumeByUrl(e){const t=this.getMediaByUrl(e);if(t)this.removeVolume(t);else throw new Error("No volume with URL present")}async traverseFileTree(e,t="",i){return new Promise(s=>{if(e.isFile)e.file(a=>{a.fullPath=t+a.name,a._webkitRelativePath=t+a.name,i.push(a),s(i)});else if(e.isDirectory){const a=e.createReader(),o=()=>{a.readEntries(l=>{if(l.length>0){const h=[];for(const u of l)h.push(this.traverseFileTree(u,t+e.name+"/",i));Promise.all(h).then(o).catch(u=>{throw u})}else s(i)})};o()}})}readDirectory(e){const t=e.createReader();let i=[];const s=async o=>{const l=[],h=async u=>new Promise((f,m)=>u.file(f,m));for(let u=0;u<o.length;u++)l.push(await h(o[u])),console.log(l);return l},a=()=>{t.readEntries(o=>{o.length?(i=i.concat(o),a()):s(i).then(async l=>{console.log(l)}).catch(l=>{throw l})})};return a(),i}isMeshExt(e){const t=this.getFileExt(e);return H.debug("dropped ext"),H.debug(t),cs.includes(t)}async loadFromArrayBuffer(e,t){const i=this.getFileExt(t);if(cs.includes(i)){await this.addMeshFromUrl({url:t,buffer:e});return}const s=_l(t);s.buffer=e,s.name=t,await this.addVolumeFromUrl(s)}async loadFromFile(e){const t=this.getFileExt(e.name);if(cs.includes(t)){await ma.loadFromFile({file:e,gl:this.gl,name:e.name}).then(i=>{this.addMesh(i)});return}await Oe.loadFromFile({file:e,name:e.name}).then(i=>{this.addVolume(i)})}useLoader(e,t,i){this.loaders={...this.loaders,[t.toUpperCase()]:{loader:e,toExt:i}}}useDicomLoader(e){this.dicomLoader=e}getDicomLoader(){return this.dicomLoader}async dropListener(e){if(e.stopPropagation(),e.preventDefault(),!this.opts.dragAndDropEnabled)return;const t=[],i=e.dataTransfer;if(!i)return;const s=i.getData("text/uri-list");if(s){const a=_l(s),o=this.getFileExt(s);H.debug("dropped ext"),H.debug(o),cs.includes(o)?this.addMeshFromUrl({url:s}).catch(l=>{throw l}):o==="NVD"?this.loadDocumentFromUrl(s).catch(l=>{throw l}):this.addVolumeFromUrl(a).catch(l=>{throw l})}else{const a=i.items;if(a.length>0){!e.shiftKey&&!e.altKey&&(this.volumes=[],this.overlays=[],this.meshes=[]),this.closeDrawing();for(const o of Array.from(a)){const l=o.webkitGetAsEntry();if(H.debug(l),!l)throw new Error("could not get entry from file");if(l.isFile){const h=this.getFileExt(l.name);let u;if(l.name.lastIndexOf("HEAD")!==-1)for(const f of Array.from(a)){const m=f.webkitGetAsEntry();if(!m)throw new Error("could not get paired entry");const g=l.name.substring(0,l.name.lastIndexOf("HEAD")),p=m.name.substring(0,m.name.lastIndexOf("BRIK"));g===p&&(u=m)}if(l.name.lastIndexOf("BRIK")!==-1)continue;if(this.loaders[h]){const f=await JM(l);await this.loadImages([{url:f,name:`${l.name}`}]);continue}if(cs.includes(h)){l.file(f=>{(async()=>{try{const m=await ma.loadFromFile({file:f,gl:this.gl,name:f.name});this.addMesh(m)}catch(m){console.error("Error loading mesh:",m)}})().catch(m=>console.error(m))});continue}else if(h==="NVD"){l.file(f=>{(async()=>{try{const m=await lf.loadFromFile(f);await this.loadDocument(m),H.debug("loaded document")}catch(m){console.error(m)}})().catch(m=>console.error(m))});break}l.file(f=>{(async()=>{try{if(u)u.file(m=>{(async()=>{try{const g=await Oe.loadFromFile({file:f,urlImgData:m,limitFrames4D:this.opts.limitFrames4D});this.addVolume(g)}catch(g){console.error(g)}})().catch(console.error)});else{const m=await Oe.loadFromFile({file:f,urlImgData:u,limitFrames4D:this.opts.limitFrames4D});e.altKey?(H.debug("alt key detected: assuming this is a drawing overlay"),this.drawClearAllUndoBitmaps(),this.loadDrawing(m)):this.addVolume(m)}}catch(m){console.error(m)}})().catch(console.error)})}else l.isDirectory&&this.traverseFileTree(l,"",t).then(h=>{const u=this.getDicomLoader().loader;if(!u)throw new Error("No loader for DICOM files");u(h).then(async f=>{console.log(f);const m=f.map(g=>Oe.loadFromUrl({url:g.data,name:g.name,limitFrames4D:this.opts.limitFrames4D}));Promise.all(m).then(async g=>{console.log("from dicom loader"),console.log(g),await this.onDicomLoaderFinishedWithImages(g)}).catch(g=>{throw g})}).catch(f=>{console.error("Error loading DICOM files:",f)})}).catch(h=>{throw h})}}}this.drawScene()}setMultiplanarPadPixels(e){this.opts.multiplanarPadPixels=e,this.drawScene()}setMultiplanarLayout(e){typeof e=="string"&&(e=parseInt(e)),this.opts.multiplanarLayout=e,this.drawScene()}setCornerOrientationText(e){this.opts.isCornerOrientationText=e,this.updateGLVolume()}setHeroImage(e){this.opts.heroImageFraction=e,this.drawScene()}setRadiologicalConvention(e){this.opts.isRadiologicalConvention=e,this.updateGLVolume()}setDefaults(e={},t=!1){this.document.opts={...Ln},this.scene.sceneData={...tc};for(const i in e)typeof e[i]=="function"?this[i]=e[i]:this.opts[i]=Ln[i]===void 0?Ln[i]:e[i];if(this.scene.pan2Dxyzmm=[0,0,0,1],t&&this.volumes&&this.volumes.length>0)for(let i=0;i<this.volumes.length;i++)this.volumes[i].cal_min=this.volumes[i].robust_min,this.volumes[i].cal_max=this.volumes[i].robust_max;this.updateGLVolume()}setMeshThicknessOn2D(e){this.opts.meshThicknessOn2D=e,this.updateGLVolume()}setSliceMosaicString(e){this.sliceMosaicString=e,this.updateGLVolume()}setSliceMM(e){this.opts.isSliceMM=e,this.updateGLVolume()}setAdditiveBlend(e){this.opts.isAdditiveBlend=e,this.updateGLVolume()}getRadiologicalConvention(){return this.opts.isRadiologicalConvention}setHighResolutionCapable(e){typeof e=="boolean"&&(e=e?0:-1),this.opts.forceDevicePixelRatio=e,this.resizeListener(),this.drawScene()}addVolume(e){this.volumes.push(e);const t=this.volumes.length===1?0:this.volumes.length-1;this.setVolume(e,t),this.onImageLoaded(e),H.debug("loaded volume",e.name),H.debug(e)}addMesh(e){this.meshes.push(e);const t=this.meshes.length===1?0:this.meshes.length-1;this.setMesh(e,t),this.onMeshLoaded(e)}getVolumeIndexByID(e){const t=this.volumes.length;for(let i=0;i<t;i++)if(this.volumes[i].id===e)return i;return-1}drawAddUndoBitmap(){if(!this.drawBitmap||this.drawBitmap.length<1){H.debug("drawAddUndoBitmap error: No drawing open");return}this.currentDrawUndoBitmap++,this.currentDrawUndoBitmap>=this.opts.maxDrawUndoBitmaps&&(this.currentDrawUndoBitmap=0),this.drawUndoBitmaps[this.currentDrawUndoBitmap]=eE(this.drawBitmap)}drawClearAllUndoBitmaps(){if(this.currentDrawUndoBitmap=this.opts.maxDrawUndoBitmaps,!(!this.drawUndoBitmaps||this.drawUndoBitmaps.length<1))for(let e=this.drawUndoBitmaps.length-1;e>=0;e--)this.drawUndoBitmaps[e]=new Uint8Array}drawUndo(){if(this.drawUndoBitmaps.length<1){H.debug("undo bitmaps not loaded");return}if(this.currentDrawUndoBitmap--,this.currentDrawUndoBitmap<0&&(this.currentDrawUndoBitmap=this.drawUndoBitmaps.length-1),this.currentDrawUndoBitmap>=this.drawUndoBitmaps.length&&(this.currentDrawUndoBitmap=0),this.drawUndoBitmaps[this.currentDrawUndoBitmap].length<2){H.debug("drawUndo is misbehaving");return}this.drawBitmap=Tp(this.drawUndoBitmaps[this.currentDrawUndoBitmap],this.drawBitmap.length),this.refreshDrawing(!0)}loadDrawing(e){if(this.drawBitmap&&H.debug("Overwriting open drawing!"),!this.back)throw new Error("back undefined");this.drawClearAllUndoBitmaps();const t=e.hdr.dims;if(t[1]!==this.back.hdr.dims[1]||t[2]!==this.back.hdr.dims[2]||t[3]!==this.back.hdr.dims[3])return H.debug("drawing dimensions do not match background image"),!1;e.img.constructor!==Uint8Array&&H.debug("Drawings should be UINT8");const i=e.permRAS,s=t[1]*t[2]*t[3];this.drawBitmap=new Uint8Array(s),this.drawTexture=this.r8Tex(this.drawTexture,la,this.back.dims,!0);const a=[0,0,0];for(let x=0;x<3;x++)for(let y=0;y<3;y++)Math.abs(i[x])-1===y&&(a[y]=x*Math.sign(i[x]));let o=1;const l=[1,1,1],h=[!1,!1,!1];for(let x=0;x<a.length;x++)for(let y=0;y<a.length;y++)Math.abs(a[y])===x&&(l[y]=o,(a[y]<0||Object.is(a[y],-0))&&(h[y]=!0),o*=t[y+1]);let u=ft.range(0,t[1]-1,1);h[0]&&(u=ft.range(t[1]-1,0,-1));for(let x=0;x<t[1];x++)u[x]*=l[0];let f=ft.range(0,t[2]-1,1);h[1]&&(f=ft.range(t[2]-1,0,-1));for(let x=0;x<t[2];x++)f[x]*=l[1];let m=ft.range(0,t[3]-1,1);h[2]&&(m=ft.range(t[3]-1,0,-1));for(let x=0;x<t[3];x++)m[x]*=l[2];const g=e.img,p=this.drawBitmap;let A=0;for(let x=0;x<t[3];x++)for(let y=0;y<t[2];y++)for(let b=0;b<t[1];b++)p[u[b]+f[y]+m[x]]=g[A],A++;return this.drawAddUndoBitmap(),this.refreshDrawing(!1),this.drawScene(),!0}binarize(e){const t=e.hdr.dims,i=t[1]*t[2]*t[3],s=new Uint8Array(i);for(let a=0;a<i;a++)e.img[a]!==0&&(s[a]=1);e.img=s,e.hdr.datatypeCode=2,e.hdr.cal_min=0,e.hdr.cal_max=1}async loadDrawingFromUrl(e,t=!1){this.drawBitmap&&H.debug("Overwriting open drawing!"),this.drawClearAllUndoBitmaps();let i=!1;try{const s=await Oe.loadFromUrl(_l(e));t&&await this.binarize(s),i=this.loadDrawing(s)}catch{H.error("loadDrawingFromUrl() failed to load "+e),this.drawClearAllUndoBitmaps()}return i}findOtsu(e=2){if(this.volumes.length<1)return[];const t=this.volumes[0].img,i=t.length;if(i<1)return[];const s=256,a=s-1,o=new Array(s).fill(0),l=this.volumes[0].cal_min,h=this.volumes[0].cal_max;if(h<=l)return[];const u=(h-l)/s;function f(C){return C*u+l}const m=(s-1)/Math.abs(h-l),g=this.volumes[0].hdr.scl_inter,p=this.volumes[0].hdr.scl_slope;for(let C=0;C<i;C++){let E=t[C]*p+g;E=Math.min(Math.max(E,l),h),E=Math.round((E-l)*m),o[E]++}const A=Array(s).fill(0).map(()=>Array(s).fill(0)),x=Array(s).fill(0).map(()=>Array(s).fill(0));for(let C=1;C<s;++C)A[C][C]=o[C],x[C][C]=C*o[C];for(let C=1;C<s-1;++C)A[1][C+1]=A[1][C]+o[C+1],x[1][C+1]=x[1][C]+(C+1)*o[C+1];for(let C=2;C<s;C++)for(let E=C+1;E<s;E++)A[C][E]=A[1][E]-A[1][C-1],x[C][E]=x[1][E]-x[1][C-1];for(let C=1;C<s;++C)for(let E=C+1;E<s;E++)A[C][E]!==0&&(A[C][E]=x[C][E]*x[C][E]/A[C][E]);let y=0;const b=[1/0,1/0,1/0];if(e>3)for(let C=0;C<s-3;C++)for(let E=C+1;E<s-2;E++)for(let S=E+1;S<s-1;S++){const M=A[0][C]+A[C+1][E]+A[E+1][S]+A[S+1][a];M>y&&(b[0]=C,b[1]=E,b[2]=S,y=M)}else if(e===3)for(let C=0;C<s-2;C++)for(let E=C+1;E<s-1;E++){const S=A[0][C]+A[C+1][E]+A[E+1][a];S>y&&(b[0]=C,b[1]=E,y=S)}else for(let C=0;C<s-1;C++){const E=A[0][C]+A[C+1][a];E>y&&(b[0]=C,y=E)}return[f(b[0]),f(b[1]),f(b[2])]}drawOtsu(e=2){if(this.volumes.length===0)return;const t=this.volumes[0].img.length,i=this.findOtsu(e);if(i.length<3)return;this.drawBitmap||this.createEmptyDrawing();const s=this.drawBitmap,a=this.volumes[0].img;for(let o=0;o<t;o++){if(s[o]!==0)continue;const l=a[o];l>i[0]&&(s[o]=1),l>i[1]&&(s[o]=2),l>i[2]&&(s[o]=3)}this.drawAddUndoBitmap(),this.refreshDrawing(!0)}removeHaze(e=5,t=0){const i=this.volumes[t].img,s=this.volumes[t].hdr,a=i.length;let o=2;(e===5||e===1)&&(o=4),(e===4||e===2)&&(o=3);const l=this.findOtsu(o);if(l.length<3)return;let h=l[0];e===1&&(h=l[2]),e===2&&(h=l[1]);const u=s.scl_inter,f=s.scl_slope,m=this.volumes[t].global_min;for(let g=0;g<a;g++)i[g]*f+u<h&&(i[g]=m);this.refreshLayers(this.volumes[t],0),this.drawScene()}async saveImage(e=Fp){var l;const t={...Fp,...e},{filename:i,isSaveDrawing:s,volumeByIndex:a}=t;if(H.debug("saveImage",i,s,a),((l=this.back)==null?void 0:l.dims)===void 0)return H.debug("No voxelwise image open"),!1;if(s){if(!this.drawBitmap)return H.debug("No drawing open"),!1;const h=this.volumes[0].permRAS;if(h[0]===1&&h[1]===2&&h[2]===3)return H.debug("saving drawing"),await this.volumes[0].saveToDisk(i,this.drawBitmap);{H.debug("saving drawing");const u=this.volumes[0].hdr.dims,f=[0,0,0];for(let M=0;M<3;M++)for(let T=0;T<3;T++)Math.abs(h[M])-1===T&&(f[T]=M*Math.sign(h[M]));let m=1;const g=[1,1,1],p=[!1,!1,!1];for(let M=0;M<f.length;M++)for(let T=0;T<f.length;T++)Math.abs(f[T])===M&&(g[T]=m,(f[T]<0||Object.is(f[T],-0))&&(p[T]=!0),m*=u[T+1]);let A=ft.range(0,u[1]-1,1);p[0]&&(A=ft.range(u[1]-1,0,-1));for(let M=0;M<u[1];M++)A[M]*=g[0];let x=ft.range(0,u[2]-1,1);p[1]&&(x=ft.range(u[2]-1,0,-1));for(let M=0;M<u[2];M++)x[M]*=g[1];let y=ft.range(0,u[3]-1,1);p[2]&&(y=ft.range(u[3]-1,0,-1));for(let M=0;M<u[3];M++)y[M]*=g[2];const b=new Uint8Array(this.drawBitmap),C=new Uint8Array(u[1]*u[2]*u[3]);let E=0;for(let M=0;M<u[3];M++)for(let T=0;T<u[2];T++)for(let I=0;I<u[1];I++)C[E]=b[A[I]+x[T]+y[M]],E++;return H.debug("saving drawing"),this.volumes[0].saveToDisk(i,C)}}return H.debug("saving image"),this.volumes[a].saveToDisk(i)}getMeshIndexByID(e){if(typeof e=="number")return e>=this.meshes.length?-1:e;const t=this.meshes.length;for(let i=0;i<t;i++)if(this.meshes[i].id===e)return i;return-1}setMeshProperty(e,t,i){const s=this.getMeshIndexByID(e);if(s<0){H.warn("setMeshProperty() id not loaded",e);return}this.meshes[s].setProperty(t,i,this.gl),this.updateGLVolume(),this.onMeshPropertyChanged(s,t,i)}indexNearestXYZmm(e,t,i,s){const a=this.getMeshIndexByID(e);return a<0?(H.warn("indexNearestXYZmm() id not loaded",e),[NaN,NaN]):this.meshes[a].indexNearestXYZmm(t,i,s)}decimateHierarchicalMesh(e,t=3){const i=this.getMeshIndexByID(e);if(i<0){H.warn("reverseFaces() id not loaded",e);return}const s=this.meshes[i].decimateHierarchicalMesh(this.gl,t);return this.updateGLVolume(),s}reverseFaces(e){const t=this.getMeshIndexByID(e);if(t<0){H.warn("reverseFaces() id not loaded",e);return}this.meshes[t].reverseFaces(this.gl),this.updateGLVolume()}async setMeshLayerProperty(e,t,i,s){const a=this.getMeshIndexByID(e);if(a<0){H.warn("setMeshLayerProperty() id not loaded",e);return}await this.meshes[a].setLayerProperty(t,i,s,this.gl),this.updateGLVolume()}setPan2Dxyzmm(e){this.scene.pan2Dxyzmm=e,this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=e[3]),this.drawScene()}setRenderAzimuthElevation(e,t){this.scene.renderAzimuth=e,this.scene.renderElevation=t,this.onAzimuthElevationChange(e,t),this.drawScene()}getOverlayIndexByID(e){const t=this.overlays.length;for(let i=0;i<t;i++)if(this.overlays[i].id===e)return i;return-1}setVolume(e,t=0){const i=this.volumes.length;if(t>i)return;const s=this.getVolumeIndexByID(e.id);t===0?(this.volumes.splice(s,1),this.volumes.unshift(e),this.back=this.volumes[0],this.overlays=this.volumes.slice(1)):t<0?(this.volumes.splice(this.getVolumeIndexByID(e.id),1),this.back=this.volumes[0],this.volumes.length>1?this.overlays=this.volumes.slice(1):this.overlays=[]):(this.volumes.splice(s,1),this.volumes.splice(t,0,e),this.overlays=this.volumes.slice(1),this.back=this.volumes[0]),this.updateGLVolume()}setMesh(e,t=0){this.meshes.forEach(a=>{H.debug("MESH: ",a.name)});const i=this.meshes.length;if(t>i)return;const s=this.getMeshIndexByID(e.id);t===0?(this.meshes.splice(s,1),this.meshes.unshift(e)):t<0?this.meshes.splice(this.getMeshIndexByID(e.id),1):(this.meshes.splice(s,1),this.meshes.splice(t,0,e)),this.updateGLVolume(),this.meshes.forEach(a=>{H.debug(a.name)})}removeVolume(e){if(this.setVolume(e,-1),this.mediaUrlMap.has(e)){const t=this.mediaUrlMap.get(e);this.onVolumeWithUrlRemoved(t),this.mediaUrlMap.delete(e)}this.drawScene()}removeVolumeByIndex(e){if(e>=this.volumes.length)throw new Error("Index of volume out of bounds");this.removeVolume(this.volumes[e])}removeMesh(e){if(e.unloadMesh(this.gl),this.setMesh(e,-1),this.mediaUrlMap.has(e)){const t=this.mediaUrlMap.get(e);this.onMeshWithUrlRemoved(t),this.mediaUrlMap.delete(e)}}removeMeshByUrl(e){const t=this.getMediaByUrl(e);t&&(this.removeMesh(t),this.mediaUrlMap.delete(t),this.onMeshWithUrlRemoved(e))}moveVolumeToBottom(e){this.setVolume(e,0)}moveVolumeUp(e){const t=this.getVolumeIndexByID(e.id);this.setVolume(e,t+1)}moveVolumeDown(e){const t=this.getVolumeIndexByID(e.id);this.setVolume(e,t-1)}moveVolumeToTop(e){this.setVolume(e,this.volumes.length-1)}mouseDown(e,t){e*=this.uiData.dpr,t*=this.uiData.dpr,this.mousePos=[e,t]}mouseMove(e,t){e*=this.uiData.dpr,t*=this.uiData.dpr;const i=(e-this.mousePos[0])/this.uiData.dpr,s=(t-this.mousePos[1])/this.uiData.dpr;this.mousePos=[e,t],!(this.inRenderTile(e,t)<0)&&(Math.abs(i)<1&&Math.abs(s)<1||(this.scene.renderAzimuth+=i,this.scene.renderElevation+=s,this.drawScene()))}sph2cartDeg(e,t){const i=-t*(Math.PI/180),s=(e-90)%360*(Math.PI/180),a=[Math.cos(i)*Math.cos(s),Math.cos(i)*Math.sin(s),Math.sin(i)],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return o<=0||(a[0]/=o,a[1]/=o,a[2]/=o),a}setClipPlane(e){const t=this.sph2cartDeg(e[1]+180,e[2]);this.scene.clipPlane=[t[0],t[1],t[2],e[0]],this.scene.clipPlaneDepthAziElev=e,this.onClipPlaneChange(this.scene.clipPlane),this.drawScene()}setCrosshairColor(e){this.opts.crosshairColor=e,this.drawScene()}setCrosshairWidth(e){this.opts.crosshairWidth=e,this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN),this.drawScene()}setDrawColormap(e){this.drawLut=Ht.makeDrawLut(e),this.updateGLVolume()}setDrawingEnabled(e){this.opts.drawingEnabled=e,this.opts.drawingEnabled&&(this.drawBitmap||this.createEmptyDrawing()),this.drawScene()}setPenValue(e,t=!1){this.opts.penValue=e,this.opts.isFilledPen=t,this.drawScene()}setDrawOpacity(e){this.drawOpacity=e,this.drawScene()}setSelectionBoxColor(e){this.opts.selectionBoxColor=e}sliceScroll2D(e,t,i,s=!0){if(this.opts.scrollRequiresFocus&&this.canvas!==document.activeElement){H.warn("Canvas element does not have focus. Scroll events will not be processed.");return}if(this.inGraphTile(t,i)){let a=this.volumes[0].frame4D;e>0&&a++,e<0&&a--,this.setFrame4D(this.volumes[0].id,a);return}if(e!==0&&this.opts.dragMode===3&&this.inRenderTile(this.uiData.dpr*t,this.uiData.dpr*i)===-1){let a=this.scene.pan2Dxyzmm[3]*(1+10*e);a=Math.round(a*10)/10;const o=this.scene.pan2Dxyzmm[3]-a;this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=a),this.scene.pan2Dxyzmm[3]=a;const l=this.frac2mm(this.scene.crosshairPos);this.scene.pan2Dxyzmm[0]+=o*l[0],this.scene.pan2Dxyzmm[1]+=o*l[1],this.scene.pan2Dxyzmm[2]+=o*l[2],this.drawScene(),this.canvas.focus(),this.sync();return}this.mouseClick(t,i,e,s)}setSliceType(e){return this.opts.sliceType=e,this.drawScene(),this}setOpacity(e,t){this.volumes[e].opacity=t,this.updateGLVolume()}setScale(e){this.scene.volScaleMultiplier=e,this.drawScene()}setClipPlaneColor(e){this.opts.clipPlaneColor=e,this.renderShader.use(this.gl),this.gl.uniform4fv(this.renderShader.uniforms.clipPlaneColor,this.opts.clipPlaneColor),this.drawScene()}setClipPlaneThick(e){this.opts.clipThick=e,this.renderShader.use(this.gl),this.gl.uniform1f(this.renderShader.uniforms.clipThick,this.opts.clipThick),this.drawScene()}setClipVolume(e,t){this.opts.clipVolumeLow=[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.min(e[2],t[2])],this.opts.clipVolumeHigh=[Math.max(e[0],t[0]),Math.max(e[1],t[1]),Math.max(e[2],t[2])],this.renderShader.use(this.gl),this.gl.uniform3fv(this.renderShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.renderShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.pickingImageShader.use(this.gl),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.drawScene()}async setVolumeRenderIllumination(e=0){this.renderGradientValues=Number.isNaN(e),this.renderShader=this.renderVolumeShader,this.renderGradientValues?this.renderShader=this.renderGradientValuesShader:e>0||this.opts.gradientOpacity>0?this.renderShader=this.renderGradientShader:e<0&&(this.renderShader=this.renderSliceShader),this.initRenderShader(this.renderShader,e),this.renderShader.use(this.gl),this.setClipPlaneColor(this.opts.clipPlaneColor),Number.isNaN(e)?this.gradientTextureAmount=1:this.gradientTextureAmount=e,!(this.volumes.length<1)&&(this.refreshLayers(this.volumes[0],0),this.drawScene())}async setGradientOpacity(e=0){this.opts.gradientOpacity=e,this.renderGradientValues?this.renderShader=this.renderGradientValuesShader:this.gradientTextureAmount>0||e>0?this.renderShader=this.renderGradientShader:this.gradientTextureAmount<0&&(this.renderShader=this.renderSliceShader),this.initRenderShader(this.renderShader,this.gradientTextureAmount),this.renderShader.use(this.gl),this.drawScene()}overlayRGBA(e){const t=e.hdr,i=t.dims[1]*t.dims[2]*t.dims[3],s=new Uint8ClampedArray(i*4),a=.2*Math.min(Math.min(t.dims[1],t.dims[2]),t.dims[3]),o=.5*t.dims[1],l=.5*t.dims[2],h=.5*t.dims[3];let u=0;for(let f=0;f<t.dims[3];f++)for(let m=0;m<t.dims[2];m++)for(let g=0;g<t.dims[1];g++){const p=Math.abs(g-o),A=Math.abs(m-l),x=Math.abs(f-h),y=Math.sqrt(p*p+A*A+x*x);let b=0;y<a&&(b=255),s[u++]=0,s[u++]=b,s[u++]=0,s[u++]=b*.5}return s}vox2mm(e,t){return ft.vox2mm(e,t)}cloneVolume(e){return this.volumes[e].clone()}async loadDocumentFromUrl(e){const t=await lf.loadFromUrl(e);await this.loadDocument(t)}async loadDocument(e){this.volumes=[],this.meshes=[],this.document=e,this.document.labels=this.document.labels?this.document.labels:[];const t={...Ln,...e.opts};this.scene.pan2Dxyzmm=e.scene.pan2Dxyzmm?e.scene.pan2Dxyzmm:[0,0,0,1],this.document.opts=t,this.setClipPlane(this.scene.clipPlaneDepthAziElev),H.debug("load document",e),this.mediaUrlMap.clear(),this.createEmptyDrawing();const i=e.encodedImageBlobs;for(let a=0;a<e.imageOptionsArray.length;a++){const o=e.imageOptionsArray[a],l=i[a];if(l){"colorMap"in o&&(o.colormap=o.colorMap);const h=await Oe.loadFromBase64({base64:l,...o});if(h){if(h.colormapLabel){const u=Object.keys(h.colormapLabel.lut).length,f=new Uint8ClampedArray(u);for(const m in h.colormapLabel.lut)f[m]=h.colormapLabel.lut[m];h.colormapLabel.lut=f}this.addVolume(h)}}}this.volumes.length>0&&(this.back=this.volumes[0]);for(const a of e.meshDataObjects??[]){const o={gl:this.gl,...a};a.offsetPt0&&(o.rgba255[3]=0,o.tris=new Uint32Array(a.offsetPt0)),H.debug(o);const l=new ma(o.pts,o.tris,o.name,o.rgba255,o.opacity,o.visible,this.gl,o.connectome,o.dpg,o.dps,o.dpv);a.offsetPt0&&(l.fiberGroupColormap=a.fiberGroupColormap,l.fiberColor=a.fiberColor,l.fiberDither=a.fiberDither,l.fiberRadius=a.fiberRadius,l.colormap=a.colormap),l.meshShaderIndex=o.meshShaderIndex,l.layers=o.layers,l.updateMesh(this.gl),H.debug(l),this.addMesh(l)}if(e.data.connectomes)for(const a of e.data.connectomes){const o=JSON.parse(a),l=this.loadConnectomeAsMesh(o);l.updateMesh(this.gl),this.addMesh(l)}this.createEmptyDrawing();const s=e.encodedDrawingBlob;if(s){const a=await ft.b64toUint8(s);if(a){const o=this.back.dims;let l=o[1]*o[2]*o[3];if(a.length-352===l&&(l+=352),a.length!==l)throw new Error(`drawBitmap size does not match the texture dimensions (${o[1]}×${o[2]}×${o[3]}) ${l} != ${o[1]*o[2]*o[3]}.`);this.drawBitmap=a,this.refreshDrawing()}}return this.updateGLVolume(),this.drawScene(),this.onDocumentLoaded(e),this}async generateLoadDocumentJavaScript(e,t){const i=this.json(),s=await ft.compressToBase64String(JSON.stringify(i));return`
        ${t}

        async function saveNiivueAsHtml(pageName) {
          //get new docstring
          const docString = nv1.json();
          const html =
          document.getElementsByTagName("html")[0]
              .innerHTML.replace(base64, await NVUtilities.compressToBase64String(JSON.stringify(docString)));
          NVUtilities.download(html, pageName, "application/html");
        }

        var nv1 = new Niivue();
        nv1.attachTo("${e}");
        var base64 = "${s}";
        NVUtilities.decompressBase64String(base64).then((jsonText) => {
          var json = JSON.parse(jsonText); // string -> JSON
          var doc = NVDocument.loadFromJSON(json);
          nv1.loadDocument(doc);
          nv1.updateGLVolume();
        });

      `}async generateHTML(e="gl1",t){return`<!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="utf-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta name="viewport" content="width=device-width,initial-scale=1.0" />
            <title>Save as HTML</title>
            <style>
            html {
              height: auto;
              min-height: 100%;
              margin: 0;
            }
            body {
              display: flex;
              flex-direction: column;
              margin: 0;
              min-height: 100%;
              width: 100%;
              position: absolute;
              font-family: system-ui, Arial, Helvetica, sans-serif;
              background: #ffffff;
              color: black;
              user-select: none; /* Standard syntax */
            }
            header {
              margin: 10px;
            }
            main {
              flex: 1;
              background: #000000;
              position: relative;
            }
            footer {
              margin: 10px;
            }
            canvas {
              position: absolute;
              cursor: crosshair;
            }
            canvas:focus {
              outline: 0px;
            }
            div {
              display: table-row;
              background-color: blue;
            }
            </style>
          </head>
          <body>
            <noscript>niivue requires JavaScript.</noscript>
            <header>
            Save the current scene as HTML
            <button id="save">Save as HTML</button>
            </header>
            <main>
              <canvas id="gl1"></canvas>
            </main>
            <script type="module" async>
              ${await this.generateLoadDocumentJavaScript(e,t)}
              function saveAsHtml() {
                saveNiivueAsHtml("page.html");
              }
              // assign our event handler
              var button = document.getElementById("save");
              button.onclick = saveAsHtml;
            <\/script>
          </body>
        </html>`}async saveHTML(e="untitled.html",t="gl1",i){const s=await this.generateHTML(t,i);return ft.download(s,e,"application/html")}json(){return this.document.opts=this.opts,this.document.scene=this.scene,this.document.volumes=this.volumes,this.document.meshes=this.meshes,this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL(),this.document.json()}async saveDocument(e="untitled.nvd",t=!0){return this.document.title=e,H.debug("saveDocument",this.volumes[0]),this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL(),this.document.volumes=this.volumes,this.document.meshes=this.meshes,this.document.download(e,t)}async loadImages(e){const t=[],i=[];for(const s of e)if("url"in s){const a=this.getFileExt(s.name?s.name:s.url);if(this.loaders[a]){const o=this.loaders[a].toExt.toUpperCase();cs.includes(o)?i.push(s):t.push(s);continue}cs.includes(a.toUpperCase())?i.push(s):t.push(s)}return t.length>0&&await this.loadVolumes(t),i.length>0&&await this.loadMeshes(i),this}async loadDicoms(e){if(!this.getDicomLoader())throw new Error("No dicom loader set. Please set a dicom loader before loading dicoms");this.drawScene(),this.volumes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);const t=e.map(async s=>{let a=null;if(s.isManifest)a=await Oe.fetchDicomData(s.url);else{const m=await fetch(s.url);if(!m.ok)throw new Error(`Failed to load file: ${m.statusText}`);const g=await m.arrayBuffer();a=[{name:s.url.split("/").pop(),data:g}]}const o=this.getDicomLoader().loader,l=await o(a);console.log(l);const h=l[0].name,u=l[0].data;return await Oe.loadFromUrl({url:u,name:h})}),i=await Promise.all(t);return i.length===1?this.addVolume(i[0]):this.onDicomLoaderFinishedWithImages(i),this}async loadVolumes(e){return this.drawScene(),this.thumbnailVisible?(this.deferredVolumes=e,this):(this.volumes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),await this.addVolumesFromUrl(e),this)}async addMeshFromUrl(e){const t=this.getFileExt(e.url);if(t==="JCON"||t==="JSON"){const a=await(await fetch(e.url,{})).json(),o=this.loadConnectomeAsMesh(a);return this.mediaUrlMap.set(o,e.url),this.onMeshAddedFromUrl(e,o),this.addMesh(o),o}const i=await ma.loadFromUrl({...e,gl:this.gl});return this.mediaUrlMap.set(i,e.url),this.onMeshAddedFromUrl(e,i),this.addMesh(i),i}async addMeshesFromUrl(e){const t=e.map(async s=>{const a=this.getFileExt(s.name||s.url);if(this.loaders[a]){let l=s.url;const h=this.loaders[a].toExt;let u=s.name||s.url;if(u=u.split("/").pop(),typeof s.url=="string"){const A=s.url;try{const x=await fetch(A);if(!x.ok)throw new Error(`Failed to load file: ${x.statusText}`);l=await x.arrayBuffer()}catch(x){throw new Error(`Failed to load url ${A}: ${x}`)}}const{positions:f,indices:m,colors:g=null}=await this.loaders[a].loader(l);s.name=`${u}.${h}`;const p=await hs.createMZ3Async(f,m,!1,g);s.buffer=p}if(a==="JCON"||a==="JSON"){const h=await(await fetch(s.url,{})).json(),u=this.loadConnectomeAsMesh(h);return this.mediaUrlMap.set(u,s.url),this.onMeshAddedFromUrl(s,u),u}const o=await ma.loadFromUrl({...s,gl:this.gl});return this.mediaUrlMap.set(o,s.url),this.onMeshAddedFromUrl(s,o),o}),i=await Promise.all(t);for(let s=0;s<i.length;s++)this.addMesh(i[s]);return i}async loadMeshes(e){return this.drawScene(),this.thumbnailVisible?(this.deferredMeshes=e,this):(this.initialized,this.meshes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),await this.addMeshesFromUrl(e),this.updateGLVolume(),this.drawScene(),this)}async loadConnectomeFromUrl(e,t={}){const s=await(await fetch(e,{headers:t})).json();return this.loadConnectome(s)}async loadFreeSurferConnectomeFromUrl(e,t={}){const s=await(await fetch(e,{headers:t})).json();return this.loadFreeSurferConnectome(s)}async loadFreeSurferConnectome(e){const t=kl.convertFreeSurferConnectome(e);return this.loadConnectome(t)}handleNodeAdded(e){const t=e.detail.node,i=[1,1,1,1];this.addLabel(t.name,{textColor:i,bulletScale:1,bulletColor:i,lineWidth:0,lineColor:i,lineTerminator:"none",textScale:1},[t.x,t.y,t.z]),this.drawScene()}loadConnectomeAsMesh(e){let t=e;if("data_type"in e&&e.data_type==="fs_pointset")t=kl.convertFreeSurferConnectome(e),H.warn("converted FreeSurfer connectome",t);else if("nodes"in e){const i=e.nodes;"names"in i&&"X"in i&&"Y"in i&&"Z"in i&&"Color"in i&&"Size"in i&&(t=kl.convertLegacyConnectome(e),H.warn("converted legacy connectome",t))}else throw new Error("not a known connectome format");return new kl(this.gl,t)}loadConnectome(e){this.drawScene(),this.meshes=[],this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);const t=this.loadConnectomeAsMesh(e);return this.addMesh(t),this.drawScene(),this}createEmptyDrawing(){if(this.back===null||!this.back.dims||Math.min(Math.min(this.back.dims[1],this.back.dims[2]),this.back.dims[3])<1)return;const t=this.back.dims[1]*this.back.dims[2]*this.back.dims[3];this.drawBitmap=new Uint8Array(t),this.clickToSegmentGrowingBitmap=new Uint8Array(t),this.drawClearAllUndoBitmaps(),this.drawAddUndoBitmap(),this.drawTexture=this.r8Tex(this.drawTexture,la,this.back.dims,!0),this.refreshDrawing(!1)}r16Tex(e,t,i,s){e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_3D,e),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16I,i[1],i[2],i[3]);const a=i[1]*i[2]*i[3];return s.length!==a&&(s=new Int16Array(a)),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RED_INTEGER,this.gl.SHORT,s),e}drawGrowCut(){if(!this.back||!this.back.dims)throw new Error("back not defined");const e=this.back.hdr,t=this.gl,i=e.dims[1]*e.dims[2]*e.dims[3];if(!this.drawBitmap||this.drawBitmap.length!==i){H.debug("bitmap dims are wrong");return}const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.disable(t.CULL_FACE),t.viewport(0,0,this.back.dims[1],this.back.dims[2]),t.disable(t.BLEND);let a=_M(this.back);const o=this.r16Tex(null,oE,this.back.dims,a);for(let M=1;M<i;M++)a[M]=this.drawBitmap[M];const l=this.r16Tex(null,uE,this.back.dims,a),h=this.r16Tex(null,hE,this.back.dims,a),u=1e4;for(let M=1;M<i;M++)a[M]>0&&(a[M]=u);const f=this.r16Tex(null,lE,this.back.dims,a),m=this.r16Tex(null,cE,this.back.dims,a);t.bindVertexArray(this.genericVAO);const g=this.growCutShader;g.use(t);const p=128;t.uniform1i(g.uniforms.finalPass,0),t.uniform1i(g.uniforms.backTex,11);for(let M=0;M<p;M++){t.uniform1i(g.uniforms.labelTex,14),t.uniform1i(g.uniforms.strengthTex,12);for(let T=0;T<this.back.dims[3];T++){const I=1/this.back.dims[3]*(T+.5);t.uniform1f(g.uniforms.coordZ,I),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,h,0,T),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,m,0,T),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&H.error("Incomplete framebuffer"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}M===p-1&&t.uniform1i(g.uniforms.finalPass,1),t.uniform1i(g.uniforms.labelTex,15),t.uniform1i(g.uniforms.strengthTex,13);for(let T=0;T<this.back.dims[3];T++){const I=1/this.back.dims[3]*(T+.5);t.uniform1f(g.uniforms.coordZ,I),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,l,0,T),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,f,0,T),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&H.error("Incomplete framebuffer"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}t.drawBuffers([t.COLOR_ATTACHMENT0]);const A=t.COLOR_ATTACHMENT1,x=l;t.readBuffer(A);const y=t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT),b=t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE);(y!==t.RED_INTEGER||b!==t.SHORT)&&H.debug("readPixels will fail."),a=new Int16Array;const C=this.back.dims[1]*this.back.dims[2],E=new Int16Array(C);for(let M=0;M<this.back.dims[3];M++)t.framebufferTextureLayer(t.FRAMEBUFFER,A,x,0,M),t.readPixels(0,0,this.back.dims[1],this.back.dims[2],y,b,E),a=Int16Array.from([...a,...E]);let S=a[0];for(let M=0;M<a.length;M++)S=Math.max(S,a[M]);for(let M=1;M<i;M++)this.drawBitmap[M]=a[M];t.deleteTexture(o),t.deleteTexture(f),t.deleteTexture(m),t.deleteTexture(l),t.deleteTexture(h),t.bindVertexArray(this.unusedVAO),t.viewport(0,0,t.canvas.width,t.canvas.height),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(s),this.drawAddUndoBitmap(),this.refreshDrawing(!0)}drawPt(e,t,i,s){var m;if(!((m=this.back)!=null&&m.dims))throw new Error("back.dims not set");const a=this.back.dims[1],o=this.back.dims[2],l=this.back.dims[3];e=Math.min(Math.max(e,0),a-1),t=Math.min(Math.max(t,0),o-1),i=Math.min(Math.max(i,0),l-1),this.drawBitmap[e+t*a+i*a*o]=s;const h=this.drawPenAxCorSag===0,u=this.drawPenAxCorSag===1,f=this.drawPenAxCorSag===2;if(this.opts.penSize>1){const g=Math.floor(this.opts.penSize/2);for(let p=-g;p<=g;p++)for(let A=-g;A<=g;A++)h?this.drawBitmap[e+p+(t+A)*a+i*a*o]=s:u?this.drawBitmap[e+p+t*a+(i+A)*a*o]=s:f&&(this.drawBitmap[e+(t+A)*a+(i+p)*a*o]=s)}}drawPenLine(e,t,i){const s=Math.abs(e[0]-t[0]),a=Math.abs(e[1]-t[1]),o=Math.abs(e[2]-t[2]);let l=-1,h=-1,u=-1;t[0]>e[0]&&(l=1),t[1]>e[1]&&(h=1),t[2]>e[2]&&(u=1);let f=e[0],m=e[1],g=e[2];const p=t[0],A=t[1],x=t[2];if(s>=a&&s>=o){let y=2*a-s,b=2*o-s;for(;f!==p;)f+=l,y>=0&&(m+=h,y-=2*s),b>=0&&(g+=u,b-=2*s),y+=2*a,b+=2*o,this.drawPt(f,m,g,i)}else if(a>=s&&a>=o){let y=2*s-a,b=2*o-a;for(;m!==A;)m+=h,y>=0&&(f+=l,y-=2*a),b>=0&&(g+=u,b-=2*a),y+=2*s,b+=2*o,this.drawPt(f,m,g,i)}else{let y=2*a-o,b=2*s-o;for(;g!==x;)g+=u,y>=0&&(m+=h,y-=2*o),b>=0&&(f+=l,b-=2*o),y+=2*a,b+=2*s,this.drawPt(f,m,g,i)}}drawingBinaryDilationWithSeed(e,t=6){try{let i=function(b){return b[0]+b[1]*h+b[2]*u};const s=this.drawBitmap,a=this.back.dims[1],o=this.back.dims[2],l=this.back.dims[3],h=a,u=a*o,f=u*l,m=i(e);if(m<0||m>=f)throw new Error("Seed index is out of bounds.");const g=s[m];if(g===0)throw new Error("Seed voxel is not part of a filled cluster.");const p=s.slice();for(let b=0;b<f;b++)p[b]=p[b]===g?1:0;this.drawFloodFillCore(p,m,t);const A=s.slice(),x=[],y=[-u,u,-a,a,-1,1];x.push(...y),t>6&&x.push(-a-1,-a+1,a-1,a+1,-u-a,-u+a,-u-1,-u+1,u-a,u+a,u-1,u+1),t>18&&x.push(-u-a-1,-u-a+1,-u+a-1,-u+a+1,u-a-1,u-a+1,u+a-1,u+a+1);for(let b=0;b<f;b++)if(p[b]===2){const C=b%a,E=Math.floor(b%u/a),S=Math.floor(b/u);for(const M of x){const T=b+M;if(T<0||T>=f)continue;const I=T%a,R=Math.floor(T%u/a),D=Math.floor(T/u);Math.abs(I-C)>1||Math.abs(R-E)>1||Math.abs(D-S)>1||s[T]===0&&(A[T]=g)}}this.drawBitmap=A,this.drawAddUndoBitmap(),this.refreshDrawing(!0)}catch(i){H.error("Error in drawingBinaryDilationWithSeed:",i)}}drawFloodFillCore(e,t,i=6){var f;if(!((f=this.back)!=null&&f.dims))throw new Error("back.dims undefined");const s=[this.back.dims[1],this.back.dims[2],this.back.dims[3]],a=s[0],o=a*s[1];function l(m){return m[0]+m[1]*a+m[2]*o}function h(m){const g=Math.floor(m/o),p=Math.floor((m-g*o)/a);return[Math.floor(m%a),p,g]}const u=[];for(u.push(t),e[t]=2;u.length>0;){let m=function(A){const x=p.slice();if(x[0]+=A[0],x[1]+=A[1],x[2]+=A[2],x[0]<0||x[1]<0||x[2]<0||x[0]>=s[0]||x[1]>=s[1]||x[2]>=s[2])return;const y=l(x);e[y]===1&&(e[y]=2,u.push(y))};const g=u[0];u.shift();const p=h(g);m([0,0,-1]),m([0,0,1]),m([0,-1,0]),m([0,1,0]),m([-1,0,0]),m([1,0,0]),!(i<=6)&&(m([-1,-1,0]),m([1,1,0]),m([-1,1,0]),m([1,1,0]),m([0,-1,-1]),m([0,1,-1]),m([-1,0,-1]),m([1,0,-1]),m([0,-1,1]),m([0,1,1]),m([-1,0,1]),m([1,0,1]),!(i<=18)&&(m([-1,-1,-1]),m([1,-1,-1]),m([-1,1,-1]),m([1,1,-1]),m([-1,-1,1]),m([1,-1,1]),m([-1,1,1]),m([1,1,1])))}}drawFloodFill(e,t=0,i=0,s=NaN,a=NaN,o=6,l=Number.POSITIVE_INFINITY,h=!1){var R;if(!this.drawBitmap)throw new Error("drawBitmap undefined");if(!((R=this.back)!=null&&R.dims))throw new Error("back.dims undefined");t=Math.abs(t);const u=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];if(e[0]<0||e[1]<0||e[2]<0||e[0]>=u[0]||e[1]>=u[1]||e[2]>=u[2])return;const f=u[0],m=f*u[1],g=m*u[2];let p=this.drawBitmap.slice(),A=this.drawBitmap;if(this.clickToSegmentIsGrowing&&(p=this.clickToSegmentGrowingBitmap.slice(),A=this.clickToSegmentGrowingBitmap),p.length!==m*u[2])return;let x=-1;h&&this.drawPenAxCorSag===0?x=2:h&&this.drawPenAxCorSag===1?x=1:h&&this.drawPenAxCorSag===2&&(x=0);function y(D){const U=Math.floor(D/m),F=Math.floor((D-U*m)/f);return[Math.floor(D%f),F,U]}function b(D){return D[0]+D[1]*f+D[2]*m}const C=D=>this.vox2mm(D,this.back.matRAS),E=C(e),S=l**2;function M(D){const U=y(D);if(x>=0&&U[x]!==e[x])return!1;const F=C(U);return(F[0]-E[0])**2+(F[1]-E[1])**2+(F[2]-E[2])**2<=S}const T=b(e),I=p[T];if(I===t){i!==0?H.debug("drawFloodFill selected voxel is not part of a drawing"):H.debug("drawFloodFill selected voxel is already desired color");return}for(let D=1;D<g;D++)if(p[D]=0,A[D]===I){if(!M(D))continue;p[D]=1}if(this.drawFloodFillCore(p,T,o),i!==0){const D=this.volumes[0].img2RAS();let U=D[T],F=U;if(isFinite(a)&&isFinite(s))U=a,F=s;else{for(let P=1;P<g;P++)p[P]===2&&(U=Math.max(U,D[P]),F=Math.min(F,D[P]));i===Number.POSITIVE_INFINITY&&(U=i),i===Number.NEGATIVE_INFINITY&&(F=i)}H.debug("Intensity range of selected cluster :",F,U);for(let P=1;P<g;P++)if(p[P]=0,D[P]>=F&&D[P]<=U){if(!M(P))continue;p[P]=1}this.drawFloodFillCore(p,T,o),t=I}for(let D=1;D<g;D++)p[D]===2&&(A[D]=t);this.clickToSegmentIsGrowing?(this.clickToSegmentGrowingBitmap=A,this.refreshDrawing(!0,this.clickToSegmentIsGrowing)):(this.drawBitmap=A.slice(),this.opts.clickToSegment||this.drawAddUndoBitmap(),this.refreshDrawing(!0,this.clickToSegmentIsGrowing))}drawPenFilled(){var A;const e=this.drawPenFillPts.length;if(e<2){this.drawPenFillPts=[];return}const t=this.drawPenAxCorSag;let i=0,s=1;if(t===1&&(s=2),t===2&&(i=1,s=2),!((A=this.back)!=null&&A.dims))throw new Error("back.dims undefined");const a=[this.back.dims[i+1],this.back.dims[s+1]],o=new Uint8Array(a[0]*a[1]);let l=1;function h(x,y){const b=Math.abs(x[0]-y[0]),C=Math.abs(x[1]-y[1]);o[x[0]+x[1]*a[0]]=l,o[y[0]+y[1]*a[0]]=l;let E=-1,S=-1;y[0]>x[0]&&(E=1),y[1]>x[1]&&(S=1);let M=x[0],T=x[1];const I=y[0],R=y[1];if(b>=C){let D=2*C-b;for(;M!==I;)M+=E,D>=0&&(T+=S,D-=2*b),D+=2*C,o[M+T*a[0]]=l}else{let D=2*b-C;for(;T!==R;)T+=S,D>=0&&(M+=E,D-=2*C),D+=2*b,o[M+T*a[0]]=l}}const u=[this.drawPenFillPts[0][i],this.drawPenFillPts[0][s]];let f=u;for(let x=1;x<e;x++){const y=[this.drawPenFillPts[x][i],this.drawPenFillPts[x][s]];h(f,y),f=y}h(u,f);const m=[];function g(x){if(x[0]<0||x[1]<0||x[0]>=a[0]||x[1]>=a[1])return;const y=x[0]+x[1]*a[0];o[y]===0&&(m.push(x),o[y]=2)}for(let x=0;x<a[0];x++)g([x,0]);for(let x=0;x<a[0];x++)g([x,a[1]-1]);for(let x=0;x<a[1];x++)g([0,x]);for(let x=0;x<a[1];x++)g([a[0]-1,x]);for(;m.length>0;){const x=m.shift();g([x[0]-1,x[1]]),g([x[0]+1,x[1]]),g([x[0],x[1]-1]),g([x[0],x[1]+1])}l=this.opts.penValue;const p=this.drawPenFillPts[0][3-(i+s)];if(!this.drawBitmap)throw new Error("drawBitmap undefined");if(t===0){const x=p*a[0]*a[1];for(let y=0;y<a[0]*a[1];y++)o[y]!==2&&(this.drawBitmap[y+x]=l)}else{let x=1;const y=this.back.dims[1]*this.back.dims[2];let b=p*this.back.dims[1];t===2&&(x=this.back.dims[1],b=p);let C=0;for(let E=0;E<a[1];E++)for(let S=0;S<a[0];S++)o[C]!==2&&(this.drawBitmap[S*x+E*y+b]=l),C++}if(!this.drawFillOverwrites&&this.drawUndoBitmaps[this.currentDrawUndoBitmap].length>0){const x=this.drawBitmap.length,y=Tp(this.drawUndoBitmaps[this.currentDrawUndoBitmap],x);for(let b=0;b<x;b++)y[b]!==0&&(this.drawBitmap[b]=y[b])}this.drawPenFillPts=[],this.drawAddUndoBitmap(),this.refreshDrawing(!1)}closeDrawing(){this.drawClearAllUndoBitmaps(),this.rgbaTex(this.drawTexture,la,[2,2,2,2],!0),this.drawBitmap=null,this.clickToSegmentGrowingBitmap=null,this.drawScene()}refreshDrawing(e=!0,t=!1){var a;if(!((a=this.back)!=null&&a.dims))throw new Error("back.dims undefined");if(!this.drawBitmap)throw new Error("drawBitmap undefined");const i=this.back.dims.slice(),s=this.back.dims[1]*this.back.dims[2]*this.back.dims[3];this.drawBitmap.length===8?(i[1]=2,i[2]=2,i[3]=2):s!==this.drawBitmap.length&&H.warn("Drawing bitmap must match the background image"),this.gl.activeTexture(la),this.gl.bindTexture(this.gl.TEXTURE_3D,this.drawTexture),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RED,this.gl.UNSIGNED_BYTE,t?this.clickToSegmentGrowingBitmap:this.drawBitmap),e&&this.drawScene()}r8Tex(e,t,i,s=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_3D,e),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R8,i[1],i[2],i[3]),s){const a=new Uint8Array(i[1]*i[2]*i[3]);this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RED,this.gl.UNSIGNED_BYTE,a)}return e}rgbaTex(e,t,i,s=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_3D,e),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGBA8,i[1],i[2],i[3]),s){const a=new Uint8Array(i[1]*i[2]*i[3]*4);this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RGBA,this.gl.UNSIGNED_BYTE,a)}return e}rgba16Tex(e,t,i,s=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_3D,e),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,2),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,2),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGBA16UI,i[1],i[2],i[3]),s){const a=new Uint16Array(i[1]*i[2]*i[3]*4);this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],this.gl.RGBA_INTEGER,this.gl.UNSIGNED_SHORT,a)}return e}requestCORSIfNotSameOrigin(e,t){new URL(t,window.location.href).origin!==window.location.origin&&(e.crossOrigin="")}async loadPngAsTexture(e,t){return new Promise((i,s)=>{const a=new Image;a.onload=()=>{if(!this.bmpShader)return;let o;t===4?(this.bmpTexture!==null&&this.gl.deleteTexture(this.bmpTexture),this.bmpTexture=this.gl.createTexture(),o=this.bmpTexture,this.bmpTextureWH=a.width/a.height,this.gl.activeTexture(aE),this.bmpShader.use(this.gl),this.gl.uniform1i(this.bmpShader.uniforms.bmpTexture,4)):t===5?(this.gl.activeTexture(Rp),this.matCapTexture!==null&&this.gl.deleteTexture(this.matCapTexture),this.matCapTexture=this.gl.createTexture(),o=this.matCapTexture):(this.fontShader.use(this.gl),this.gl.activeTexture(sE),this.gl.uniform1i(this.fontShader.uniforms.fontTexture,3),this.fontTexture!==null&&this.gl.deleteTexture(this.fontTexture),this.fontTexture=this.gl.createTexture(),o=this.fontTexture),this.gl.bindTexture(this.gl.TEXTURE_2D,o),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,a),i(o),t!==4&&this.drawScene()},a.onerror=s,this.requestCORSIfNotSameOrigin(a,e),a.src=e})}async loadFontTexture(e){return this.loadPngAsTexture(e,3)}async loadBmpTexture(e){return this.loadPngAsTexture(e,4)}async loadMatCapTexture(e){return this.loadPngAsTexture(e,5)}initFontMets(){if(!this.fontMetrics)throw new Error("fontMetrics undefined");this.fontMets={distanceRange:this.fontMetrics.atlas.distanceRange,size:this.fontMetrics.atlas.size,mets:{}};for(let i=0;i<256;i++)this.fontMets.mets[i]={xadv:0,uv_lbwh:[0,0,0,0],lbwh:[0,0,0,0]};const e=this.fontMetrics.atlas.width,t=this.fontMetrics.atlas.height;for(let i=0;i<this.fontMetrics.glyphs.length;i++){const s=this.fontMetrics.glyphs[i],a=s.unicode;if(this.fontMets.mets[a].xadv=s.advance,s.planeBounds===void 0)continue;let o=s.atlasBounds.left/e,l=(t-s.atlasBounds.top)/t,h=(s.atlasBounds.right-s.atlasBounds.left)/e,u=(s.atlasBounds.top-s.atlasBounds.bottom)/t;this.fontMets.mets[a].uv_lbwh=[o,l,h,u],o=s.planeBounds.left,l=s.planeBounds.bottom,h=s.planeBounds.right-s.planeBounds.left,u=s.planeBounds.top-s.planeBounds.bottom,this.fontMets.mets[a].lbwh=[o,l,h,u]}}async loadFont(e=bp,t=Cp){await this.loadFontTexture(e);const i=await fetch(t);if(!i.ok)throw Error(i.statusText);const s=await i.text();this.fontMetrics=JSON.parse(s),this.initFontMets(),this.fontShader.use(this.gl),this.drawScene()}async loadDefaultMatCap(){return this.loadMatCapTexture(WM)}async loadDefaultFont(){await this.loadFontTexture(this.DEFAULT_FONT_GLYPH_SHEET),this.fontMetrics=this.DEFAULT_FONT_METRICS,this.initFontMets()}async initText(){this.fontShader=new Ft(this.gl,qC,QC),this.fontShader.use(this.gl),await this.loadDefaultFont(),await this.loadDefaultMatCap(),this.drawLoadingText(this.opts.loadingText)}meshShaderNameToNumber(e="Phong"){const t=e.toLowerCase();for(let i=0;i<this.meshShaders.length;i++)if(this.meshShaders[i].Name.toLowerCase()===t)return i}setMeshShader(e,t=2){let i=0;if(typeof t=="number"?i=t:i=this.meshShaderNameToNumber(t),i===void 0)throw new Error("shaderIndex undefined");i=Math.min(i,this.meshShaders.length-1),i=Math.max(i,0);const s=this.getMeshIndexByID(e);if(s>=this.meshes.length){H.debug("Unable to change shader until mesh is loaded (maybe you need async)");return}this.meshes[s].meshShaderIndex=i,this.updateGLVolume(),this.onMeshShaderChanged(s,i)}createCustomMeshShader(e,t="Custom"){if(!e)throw new Error("Need fragment shader");const i=this.meshShaderNameToNumber(t);i>=0&&(this.gl.deleteProgram(this.meshShaders[i].shader.program),this.meshShaders.splice(i,1));const s=new Ft(this.gl,rf,e);return s.use(this.gl),{Name:t,Frag:e,shader:s}}setCustomMeshShader(e="",t="Custom"){const i=this.createCustomMeshShader(e,t);return this.meshShaders.push(i),this.onCustomMeshShaderAdded(e,t),this.meshShaders.length-1}meshShaderNames(e=!0){const t=[];for(let i=0;i<this.meshShaders.length;i++)t.push(this.meshShaders[i].Name);return e===!0?t.sort():t}initRenderShader(e,t=0){e.use(this.gl),this.gl.uniform1i(e.uniforms.volume,0),this.gl.uniform1i(e.uniforms.colormap,1),this.gl.uniform1i(e.uniforms.overlay,2),this.gl.uniform1i(e.uniforms.drawing,7),this.gl.uniform1fv(e.uniforms.renderDrawAmbientOcclusion,[this.renderDrawAmbientOcclusion,1]),this.gl.uniform1f(e.uniforms.gradientAmount,t);const i=new Float32Array(256);for(let s=0;s<256;s++)this.opts.gradientOpacity===0?i[s]=1:i[s]=Math.pow(s/255,this.opts.gradientOpacity*8);this.gl.uniform1fv(this.gl.getUniformLocation(e.program,"gradientOpacity"),i)}async init(){const e=this.gl.getExtension("WEBGL_debug_renderer_info");if(e){const o=this.gl.getParameter(e.UNMASKED_VENDOR_WEBGL),l=this.gl.getParameter(e.UNMASKED_RENDERER_WEBGL);H.info("renderer vendor: ",o),H.info("renderer: ",l)}else H.info("debug_renderer_info unavailable");const t=this.gl.getParameter(this.gl.RENDERER);H.info("firefox renderer: ",t),this.gl.clearDepth(0),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.volumeTexture=this.rgbaTex(this.volumeTexture,zl,[2,2,2,2],!0),this.overlayTexture=this.rgbaTex(this.overlayTexture,hf,[2,2,2,2],!0),this.drawTexture=this.r8Tex(this.drawTexture,la,[2,2,2,2],!0);const i=[1,1,0,1,0,0,0,1,0,0,0,0],s=this.gl;this.cuboidVertexBuffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.cuboidVertexBuffer),s.bufferData(s.ARRAY_BUFFER,new Float32Array(i),s.STATIC_DRAW),this.genericVAO=s.createVertexArray(),s.bindVertexArray(this.genericVAO),s.bindBuffer(s.ARRAY_BUFFER,this.cuboidVertexBuffer),s.enableVertexAttribArray(0),s.vertexAttribPointer(0,3,s.FLOAT,!1,0,0),s.bindVertexArray(this.unusedVAO),this.pickingMeshShader=new Ft(s,rf,sS),this.pickingMeshShader.use(s),this.pickingImageShader=new Ft(s,Fr,AS),this.pickingImageShader.use(s),s.uniform1i(this.pickingImageShader.uniforms.volume,0),s.uniform1i(this.pickingImageShader.uniforms.colormap,1),s.uniform1i(this.pickingImageShader.uniforms.overlay,2),s.uniform1i(this.pickingImageShader.uniforms.drawing,7),this.sliceMMShader=new Ft(s,gp,OC),this.sliceMMShader.use(s),s.uniform1i(this.sliceMMShader.uniforms.volume,0),s.uniform1i(this.sliceMMShader.uniforms.colormap,1),s.uniform1i(this.sliceMMShader.uniforms.overlay,2),s.uniform1i(this.sliceMMShader.uniforms.drawing,7),s.uniform1f(this.sliceMMShader.uniforms.drawOpacity,this.drawOpacity),this.sliceV1Shader=new Ft(s,gp,PC),this.sliceV1Shader.use(s),s.uniform1i(this.sliceV1Shader.uniforms.volume,0),s.uniform1i(this.sliceV1Shader.uniforms.colormap,1),s.uniform1i(this.sliceV1Shader.uniforms.overlay,2),s.uniform1i(this.sliceV1Shader.uniforms.drawing,7),s.uniform1f(this.sliceV1Shader.uniforms.drawOpacity,this.drawOpacity),this.orientCubeShader=new Ft(s,vS,xS),this.orientCubeShaderVAO=s.createVertexArray(),s.bindVertexArray(this.orientCubeShaderVAO);const a=s.createBuffer();s.enableVertexAttribArray(0),s.enableVertexAttribArray(1),s.bindBuffer(s.ARRAY_BUFFER,a),s.bufferData(s.ARRAY_BUFFER,ES,s.STATIC_DRAW),s.vertexAttribPointer(0,3,s.FLOAT,!1,24,0),s.enableVertexAttribArray(1),s.vertexAttribPointer(1,3,s.FLOAT,!1,24,12),s.bindVertexArray(this.unusedVAO),this.rectShader=new Ft(s,pp,nf),this.rectShader.use(s),this.rectOutlineShader=new Ft(s,pp,kC),this.rectOutlineShader.use(s),this.lineShader=new Ft(s,YC,nf),this.lineShader.use(s),this.line3DShader=new Ft(s,GC,nf),this.line3DShader.use(s),this.circleShader=new Ft(s,XC,ZC),this.circleShader.use(s),this.renderVolumeShader=new Ft(s,Fr,FC),this.initRenderShader(this.renderVolumeShader),this.renderSliceShader=new Ft(s,Fr,UC),this.initRenderShader(this.renderSliceShader),this.renderGradientShader=new Ft(s,Fr,NC),this.initRenderShader(this.renderGradientShader,.3),s.uniform1i(this.renderGradientShader.uniforms.matCap,5),s.uniform1i(this.renderGradientShader.uniforms.gradient,6),this.renderGradientValuesShader=new Ft(s,Fr,LC),this.initRenderShader(this.renderGradientValuesShader),s.uniform1i(this.renderGradientValuesShader.uniforms.matCap,5),s.uniform1i(this.renderGradientValuesShader.uniforms.gradient,6),this.renderShader=this.renderVolumeShader,this.colorbarShader=new Ft(s,zC,jC),this.colorbarShader.use(s),s.uniform1i(this.colorbarShader.uniforms.colormap,1),this.blurShader=new Ft(s,Nl,bS),this.sobelBlurShader=new Ft(s,Nl,CS),this.sobelFirstOrderShader=new Ft(s,Nl,SS),this.sobelSecondOrderShader=new Ft(s,Nl,MS),this.growCutShader=new Ft(s,_C,$C),this.passThroughShader=new Ft(s,yS,wS),this.orientShaderAtlasU=new Ft(s,oa,sf.concat(vp)),this.orientShaderAtlasI=new Ft(s,oa,Ap.concat(vp)),this.orientShaderU=new Ft(s,oa,sf.concat(af)),this.orientShaderI=new Ft(s,oa,Ap.concat(af)),this.orientShaderF=new Ft(s,oa,WC.concat(af)),this.orientShaderRGBU=new Ft(s,oa,sf.concat(JC)),this.surfaceShader=new Ft(s,tS,eS),this.surfaceShader.use(s),this.fiberShader=new Ft(s,iS,nS),this.pickingImageShader.use(s);for(let o=0;o<this.meshShaders.length;o++){const l=this.meshShaders[o];l.Name==="Flat"?l.shader=new Ft(s,pS,xp):l.shader=new Ft(s,rf,l.Frag),l.shader.use(s),l.shader.isMatcap=l.Name==="Matcap",l.shader.isMatcap&&s.uniform1i(l.shader.uniforms.matCap,5)}return this.bmpShader=new Ft(s,HC,KC),await this.initText(),this.opts.thumbnail.length>0&&(await this.loadBmpTexture(this.opts.thumbnail),this.thumbnailVisible=!0),this.updateGLVolume(),this.initialized=!0,this.resizeListener(),this.drawScene(),this}gradientGL(e){const t=this.gl,i=[0,0,0,0,1,0,1,0,0,1,1,0],s=t.createVertexArray();t.bindVertexArray(s);const a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,3,t.FLOAT,!1,0,0);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.disable(t.CULL_FACE),t.viewport(0,0,e.dims[1],e.dims[2]),t.disable(t.BLEND);const l=this.rgbaTex(null,Bp,e.dims,!0),h=this.opts.gradientOrder===2?this.sobelBlurShader:this.blurShader;h.use(t),t.activeTexture(zl),t.bindTexture(t.TEXTURE_3D,this.volumeTexture);const u=.7;t.uniform1i(h.uniforms.intensityVol,0),t.uniform1f(h.uniforms.dX,u/e.dims[1]),t.uniform1f(h.uniforms.dY,u/e.dims[2]),t.uniform1f(h.uniforms.dZ,u/e.dims[3]),t.bindVertexArray(s);for(let g=0;g<e.dims[3]-1;g++){const p=1/e.dims[3]*(g+.5);t.uniform1f(h.uniforms.coordZ,p),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,l,0,g);const A=t.checkFramebufferStatus(t.FRAMEBUFFER);A!==t.FRAMEBUFFER_COMPLETE&&H.error("framebuffer status: ",A),t.clear(t.DEPTH_BUFFER_BIT),t.drawArrays(t.TRIANGLE_STRIP,0,i.length/3)}const f=this.opts.gradientOrder===2?this.sobelSecondOrderShader:this.sobelFirstOrderShader;f.use(t),t.activeTexture(Bp),t.bindTexture(t.TEXTURE_3D,l),t.uniform1i(f.uniforms.intensityVol,8);const m=.7;t.uniform1f(f.uniforms.dX,m/e.dims[1]),t.uniform1f(f.uniforms.dY,m/e.dims[2]),t.uniform1f(f.uniforms.dZ,m/e.dims[3]),this.opts.gradientOrder===2&&(t.uniform1f(f.uniforms.dX2,2*m/e.dims[1]),t.uniform1f(f.uniforms.dY2,2*m/e.dims[2]),t.uniform1f(f.uniforms.dZ2,2*m/e.dims[3])),t.uniform1f(f.uniforms.coordZ,.5),t.bindVertexArray(s),this.gradientTexture!==null&&t.deleteTexture(this.gradientTexture),this.gradientTexture=this.rgbaTex(this.gradientTexture,Ip,e.dims);for(let g=0;g<e.dims[3]-1;g++){const p=1/e.dims[3]*(g+.5);t.uniform1f(f.uniforms.coordZ,p),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,this.gradientTexture,0,g);const A=t.checkFramebufferStatus(t.FRAMEBUFFER);A!==t.FRAMEBUFFER_COMPLETE&&H.error("framebuffer status: ",A),t.clear(t.DEPTH_BUFFER_BIT),t.drawArrays(t.TRIANGLE_STRIP,0,i.length/3)}t.deleteFramebuffer(o),t.deleteTexture(l),t.deleteBuffer(a),t.bindFramebuffer(t.FRAMEBUFFER,null)}updateGLVolume(){var i;let e=0;const t=this.volumes.length;this.refreshColormaps();for(let s=0;s<t;s++)this.volumes[s].toRAS&&(this.refreshLayers(this.volumes[s],e),e++);if(this.furthestVertexFromOrigin=0,t>0&&(this.furthestVertexFromOrigin=((i=this.volumeObject3D)==null?void 0:i.furthestVertexFromOrigin)??0),this.meshes)for(let s=0;s<this.meshes.length;s++)this.furthestVertexFromOrigin=Math.max(this.furthestVertexFromOrigin,this.meshes[s].furthestVertexFromOrigin);this.onVolumeUpdated&&this.onVolumeUpdated(),this.drawScene()}getDescriptives(e){const{layer:t=0,masks:i=[],drawingIsMask:s=!1,roiIsMask:a=!1,startVox:o=[0,0,0],endVox:l=[0,0,0]}=e;let h=null;const u=this.volumes[t].hdr,f=this.volumes[t].pixDimsRAS;let m=u.scl_slope;isNaN(m)&&(m=1);let g=u.scl_inter;isNaN(g)&&(g=1);const p=this.volumes[t].img,A=p.length,x=new Float32Array(A);for(let N=0;N<A;N++)x[N]=p[N]*m+g;const y=new Uint8Array(A);for(let N=0;N<A;N++)y[N]=1;if(i.length>0)for(let N=0;N<i.length;N++){const k=this.volumes[i[N]].img;if(k.length!==A){H.debug("Mask resolution does not match image. Skipping masking layer "+i[N]);continue}for(let z=0;z<A;z++)(k[z]===0||isNaN(k[z]))&&(y[z]=0)}else if(i.length<1&&s)for(let N=0;N<A;N++)(this.drawBitmap[N]===0||isNaN(this.drawBitmap[N]))&&(y[N]=0);else if(i.length<1&&a){y.fill(0),console.log("startVox",o),console.log("endVox",l);let N=-1;if(o[0]===l[0])N=0;else if(o[1]===l[1])N=1;else if(o[2]===l[2])N=2;else{console.error("Error: No constant dimension found.");return}const z=[0,1,2].filter(pe=>pe!==N),q=[];q[N]=o[N],q[z[0]]=(o[z[0]]+l[z[0]])/2,q[z[1]]=(o[z[1]]+l[z[1]])/2;const j=Math.abs(l[z[0]]-o[z[0]])/2,Q=Math.abs(l[z[1]]-o[z[1]])/2,tt=u.dims[1],ot=u.dims[2],Y=Math.max(0,Math.floor(q[z[0]]-j)),it=Math.min(u.dims[z[0]+1]-1,Math.ceil(q[z[0]]+j)),ct=Math.max(0,Math.floor(q[z[1]]-Q)),lt=Math.min(u.dims[z[1]+1]-1,Math.ceil(q[z[1]]+Q)),mt=q[N];if(mt<0||mt>=u.dims[N+1]){console.error("Error: Constant dimension value is out of bounds.");return}for(let pe=Y;pe<=it;pe++)for(let se=ct;se<=lt;se++){const Xt=[];Xt[N]=mt,Xt[z[0]]=pe,Xt[z[1]]=se;const Oi=(Xt[z[0]]-q[z[0]])/j,xs=(Xt[z[1]]-q[z[1]])/Q;if(Oi*Oi+xs*xs<=1){const xc=Xt[0],oi=Xt[1],uo=Xt[2]*tt*ot+oi*tt+xc;y[uo]=1}}const Ct=f[z[0]+1]*f[z[1]+1];h=y.reduce((pe,se)=>pe+(se===1?1:0),0)*Ct;const Qt=j*f[z[0]+1],Bt=Q*f[z[1]+1];h=Math.PI*Qt*Bt}let b=0,C=0,E=0,S=Number.NEGATIVE_INFINITY,M=Number.POSITIVE_INFINITY,T=0,I=0,R=0;for(let N=0;N<A;N++){if(y[N]<1)continue;const k=x[N];b++;let z=C+(k-C)/b;E=E+(k-C)*(k-z),C=z,k!==0&&(T++,z=I+(k-I)/T,R=R+(k-I)*(k-z),I=z,M=Math.min(k,S),S=Math.max(k,S))}const D=Math.sqrt(E/(b-1)),U=Math.sqrt(R/(T-1)),F=M,P=S;return b!==T&&(M=Math.min(0,S),S=Math.max(0,S)),{mean:C,stdev:D,nvox:b,volumeMM3:b*u.pixDims[1]*u.pixDims[2]*u.pixDims[3],volumeML:b*u.pixDims[1]*u.pixDims[2]*u.pixDims[3]*.001,min:M,max:S,meanNot0:I,stdevNot0:U,nvoxNot0:T,minNot0:F,maxNot0:P,cal_min:this.volumes[t].cal_min,cal_max:this.volumes[t].cal_max,robust_min:this.volumes[t].robust_min,robust_max:this.volumes[t].robust_max,area:h}}refreshLayers(e,t){var I;if(this.volumes.length<1)return;this.refreshColormaps();const i=e.hdr;let s=e.img;e.frame4D>0&&e.frame4D<e.nFrame4D&&(s=e.img.slice(e.frame4D*e.nVox3D,(e.frame4D+1)*e.nVox3D));const a=e.opacity;if(t>1&&a===0)return;let o=null;if(!this.back)throw new Error("back undefined");this.gl.bindVertexArray(this.unusedVAO),this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN);let l=he(e.toRAS);if(t===0){this.volumeObject3D=e.toNiivueObject3D(this.VOLUME_ID,this.gl),Xe(l,l),this.back.matRAS=e.matRAS,this.back.dims=e.dimsRAS,this.back.pixDims=e.pixDimsRAS,o=this.rgbaTex(this.volumeTexture,zl,e.dimsRAS);const{volScale:R,vox:D}=this.sliceScale(!0);if(this.volScale=R,this.vox=D,this.volumeObject3D.scale=R,!this.renderShader)throw new Error("renderShader undefined");this.renderShader.use(this.gl),this.gl.uniform3fv(this.renderShader.uniforms.texVox,D),this.gl.uniform3fv(this.renderShader.uniforms.volScale,R);const U=this.pickingImageShader;U.use(this.gl),this.gl.uniform1i(U.uniforms.volume,0),this.gl.uniform1i(U.uniforms.colormap,1),this.gl.uniform1i(U.uniforms.overlay,2),this.gl.uniform3fv(U.uniforms.volScale,R),H.debug(this.volumeObject3D)}else{((I=this.back)==null?void 0:I.dims)===void 0&&H.error("Fatal error: Unable to render overlay: background dimensions not defined!");const R=this.mm2frac(e.mm000,0,!0);let D=this.mm2frac(e.mm100,0,!0),U=this.mm2frac(e.mm010,0,!0),F=this.mm2frac(e.mm001,0,!0);D=te(D,D,R),U=te(U,U,R),F=te(F,F,R),l=si(D[0],U[0],F[0],R[0],D[1],U[1],F[1],R[1],D[2],U[2],F[2],R[2],0,0,0,1),Xe(l,l),t===1?(o=this.rgbaTex(this.overlayTexture,hf,this.back.dims),this.overlayTexture=o,this.overlayTextureID=o):o=this.overlayTextureID}const h=this.gl.createFramebuffer();this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,h),this.gl.disable(this.gl.CULL_FACE),this.gl.viewport(0,0,this.back.dims[1],this.back.dims[2]),this.gl.disable(this.gl.BLEND);const u=this.gl.createTexture();this.gl.activeTexture(rE),this.gl.bindTexture(this.gl.TEXTURE_3D,u),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1);let f=this.orientShaderU;if(!i)throw new Error("hdr undefined");if(!s)throw new Error("img undefined");if(i.datatypeCode===2)i.intent_code===1002&&(f=this.orientShaderAtlasU),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R8UI,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED_INTEGER,this.gl.UNSIGNED_BYTE,s);else if(i.datatypeCode===4)f=this.orientShaderI,i.intent_code===1002&&(f=this.orientShaderAtlasI),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16I,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED_INTEGER,this.gl.SHORT,s);else if(i.datatypeCode===16)this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R32F,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED,this.gl.FLOAT,s),f=this.orientShaderF;else if(i.datatypeCode===64){let R=new Float32Array;R=Float32Array.from(s),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R32F,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED,this.gl.FLOAT,R),f=this.orientShaderF}else i.datatypeCode===128?(f=this.orientShaderRGBU,f.use(this.gl),this.gl.uniform1i(f.uniforms.hasAlpha,0),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGB8UI,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RGB_INTEGER,this.gl.UNSIGNED_BYTE,s)):i.datatypeCode===512?(i.intent_code===1002&&(f=this.orientShaderAtlasU),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.R16UI,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED_INTEGER,this.gl.UNSIGNED_SHORT,s)):i.datatypeCode===2304&&(f=this.orientShaderRGBU,f.use(this.gl),this.gl.uniform1i(f.uniforms.hasAlpha,1),this.gl.texStorage3D(this.gl.TEXTURE_3D,1,this.gl.RGBA8UI,i.dims[1],i.dims[2],i.dims[3]),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RGBA_INTEGER,this.gl.UNSIGNED_BYTE,s));e.global_min===void 0&&e.calMinMax();let m=null;if(this.gl.bindVertexArray(this.genericVAO),t>1){if(!this.back.dims)throw new Error("back.dims undefined");m=this.rgbaTex(m,Up,this.back.dims),this.gl.bindTexture(this.gl.TEXTURE_3D,m);const R=this.passThroughShader;R.use(this.gl),this.gl.uniform1i(R.uniforms.in3D,2);for(let D=0;D<this.back.dims[3];D++){const U=1/this.back.dims[3]*(D+.5);this.gl.uniform1f(R.uniforms.coordZ,U),this.gl.framebufferTextureLayer(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,m,0,D),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}else m=this.rgbaTex(m,Up,[2,2,2,2]);f.use(this.gl),this.gl.activeTexture(jl);let g=null;if(e.colormapLabel!==null&&e.colormapLabel.lut.length>7){const R=e.colormapLabel.max-e.colormapLabel.min+1;g=this.createColormapTexture(g,1,R),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,R,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e.colormapLabel.lut),this.gl.uniform1f(f.uniforms.cal_min,e.colormapLabel.min-.5),this.gl.uniform1f(f.uniforms.cal_max,e.colormapLabel.max+.5),this.gl.bindTexture(this.gl.TEXTURE_2D,g)}else this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.uniform1f(f.uniforms.cal_min,e.cal_min),this.gl.uniform1f(f.uniforms.cal_max,e.cal_max);"alphaThreshold"in e&&(H.warn("alphaThreshold is deprecated: use colormapType"),e.alphaThreshold===!0&&(e.colormapType=2),e.alphaThreshold===!1&&(e.colormapType=1),delete e.alphaThreshold);const p=e.colormapType!==0?1:0,A=e.colormapType===2?1:0;this.gl.uniform1i(f.uniforms.isAlphaThreshold,A),this.gl.uniform1i(f.uniforms.isColorbarFromZero,p),this.gl.uniform1i(f.uniforms.isAdditiveBlend,this.opts.isAdditiveBlend?1:0);let x=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;if(e.colormapNegative.length>0&&(x=Math.min(-e.cal_min,-e.cal_max),y=Math.max(-e.cal_min,-e.cal_max),isFinite(e.cal_minNeg)&&isFinite(e.cal_maxNeg)&&(x=Math.min(e.cal_minNeg,e.cal_maxNeg),y=Math.max(e.cal_minNeg,e.cal_maxNeg))),t>0&&this.overlayOutlineWidth>0){const R=e.cal_min,D=e.cal_max;let U=Math.min(R,D)<=0&&Math.max(R,D)>=0;!U&&x<y&&(U=x<=0&&y>=0),U&&H.error("issue1139: do not use overlayOutlineWidth when thresholds cross or touch zero")}if(!f)throw new Error("orientShader undefined");this.gl.uniform1f(f.uniforms.layer??null,t),this.gl.uniform1f(f.uniforms.cal_minNeg??null,x),this.gl.uniform1f(f.uniforms.cal_maxNeg??null,y),this.gl.bindTexture(this.gl.TEXTURE_3D,u),this.gl.uniform1i(f.uniforms.intensityVol??null,9),this.gl.uniform1i(f.uniforms.blend3D??null,10),this.gl.uniform1i(f.uniforms.colormap??null,1),this.gl.uniform1f(f.uniforms.scl_inter??null,i.scl_inter),this.gl.uniform1f(f.uniforms.scl_slope??null,i.scl_slope),this.gl.uniform1f(f.uniforms.opacity??null,a),this.gl.uniform1i(f.uniforms.modulationVol??null,7);let b=null;if(e.modulationImage!==null&&e.modulationImage>=0&&e.modulationImage<this.volumes.length){H.debug("modulating",this.volumes);const R=this.volumes[e.modulationImage].hdr;if(R.dims[1]===i.dims[1]&&R.dims[2]===i.dims[2]&&R.dims[3]===i.dims[3]){e.modulateAlpha?(this.gl.uniform1i(f.uniforms.modulation,2),this.gl.uniform1f(f.uniforms.opacity,1)):this.gl.uniform1i(f.uniforms.modulation,1),b=this.r8Tex(b,this.gl.TEXTURE7,i.dims,!0),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_3D,b);const D=i.dims[1]*i.dims[2]*i.dims[3],U=new Uint8Array(D),F=this.volumes[e.modulationImage].cal_min,P=1/(this.volumes[e.modulationImage].cal_max-F),N=this.volumes[e.modulationImage].img.buffer;let k=new Uint8Array(N);switch(R.datatypeCode){case 4:k=new Int16Array(N);break;case 16:k=new Float32Array(N);break;case 64:k=new Float64Array(N);break;case 128:k=new Uint8Array(N);break;case 512:k=new Uint16Array(N);break}H.debug(this.volumes[e.modulationImage]);const z=this.volumes[e.modulationImage].colormapNegative.length>0;let q=this.volumes[e.modulationImage].cal_min,j=this.volumes[e.modulationImage].cal_max;isFinite(this.volumes[e.modulationImage].cal_minNeg)&&isFinite(this.volumes[e.modulationImage].cal_maxNeg)&&(q=this.volumes[e.modulationImage].cal_minNeg,j=this.volumes[e.modulationImage].cal_minNeg),q=Math.abs(q),j=Math.abs(j),q>j&&([q,j]=[j,q]);const Q=1/(j-q);let tt=Math.abs(e.modulateAlpha);tt=Math.max(tt,1);const ot=this.volumes[e.modulationImage].frame4D*D;for(let Y=0;Y<D;Y++){const it=k[Y+ot]*R.scl_slope+R.scl_inter;let ct=(it-F)*P;z&&it<0&&(ct=(Math.abs(it)-q)*Q),ct=Math.min(Math.max(ct,0),1),ct=Math.pow(ct,tt)*255,U[Y]=ct}this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],this.gl.RED,this.gl.UNSIGNED_BYTE,U)}else H.debug("Modulation image dimensions do not match target")}else this.gl.uniform1i(f.uniforms.modulation,0);if(this.gl.uniformMatrix4fv(f.uniforms.mtx,!1,l),!this.back.dims)throw new Error("back.dims undefined");let C=0;i.intent_code===1002&&(C=this.opts.atlasOutline),this.gl.uniform4fv(f.uniforms.xyzaFrac,[1/this.back.dims[1],1/this.back.dims[2],1/this.back.dims[3],C]),H.debug("back dims: ",this.back.dims);for(let R=0;R<this.back.dims[3];R++){const D=1/this.back.dims[3]*(R+.5);this.gl.uniform1f(f.uniforms.coordZ,D),this.gl.framebufferTextureLayer(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,o,0,R),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}if(this.gl.bindVertexArray(this.unusedVAO),this.gl.deleteTexture(u),this.gl.deleteTexture(b),this.gl.deleteTexture(m),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.deleteFramebuffer(h),t===0&&(this.volumeTexture=o,this.gradientTextureAmount>0?this.gradientGL(i):(this.gradientTexture!==null&&this.gl.deleteTexture(this.gradientTexture),this.gradientTexture=null)),!this.renderShader)throw new Error("renderShader undefined");this.renderShader.use(this.gl);const E=this.sliceScale(!0),S=E.vox,M=E.volScale;if(this.gl.uniform1f(this.renderShader.uniforms.overlays,this.overlays),this.gl.uniform4fv(this.renderShader.uniforms.clipPlaneColor,this.opts.clipPlaneColor),this.gl.uniform1f(this.renderShader.uniforms.clipThick,this.opts.clipThick),this.gl.uniform3fv(this.renderShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.renderShader.uniforms.clipHi,this.opts.clipVolumeHigh),this.gl.uniform1f(this.renderShader.uniforms.backOpacity,this.volumes[0].opacity),this.gl.uniform1f(this.renderShader.uniforms.renderOverlayBlend,this.opts.renderOverlayBlend),this.gl.uniform4fv(this.renderShader.uniforms.clipPlane,this.scene.clipPlane),this.gl.uniform3fv(this.renderShader.uniforms.texVox,S),this.gl.uniform3fv(this.renderShader.uniforms.volScale,M),!this.pickingImageShader)throw new Error("pickingImageShader undefined");this.pickingImageShader.use(this.gl),this.gl.uniform1f(this.pickingImageShader.uniforms.overlays,this.overlays.length),this.gl.uniform3fv(this.pickingImageShader.uniforms.texVox,S),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipLo,this.opts.clipVolumeLow),this.gl.uniform3fv(this.pickingImageShader.uniforms.clipHi,this.opts.clipVolumeHigh);let T=this.sliceMMShader;if(this.opts.isV1SliceShader&&(T=this.sliceV1Shader),!T)throw new Error("slice shader undefined");T.use(this.gl),this.gl.uniform1f(T.uniforms.overlays,this.overlays.length),this.gl.uniform1f(T.uniforms.drawOpacity,this.drawOpacity),g!==null&&(this.gl.deleteTexture(g),this.gl.activeTexture(jl),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture)),this.gl.uniform1i(T.uniforms.drawing,7),this.gl.activeTexture(la),this.gl.bindTexture(this.gl.TEXTURE_3D,this.drawTexture),this.updateInterpolation(t)}colormaps(){return Ht.colormaps()}addColormap(e,t){Ht.addColormap(e,t)}setColormap(e,t){const i=this.getVolumeIndexByID(e);this.volumes[i].colormap=t,this.updateGLVolume()}idx(e,t,i,s){return i*s[0]*s[1]+t*s[0]+e}check_previous_slice(e,t,i,s,a,o,l,h){const u=new Uint32Array(27);let f=0;if(!a)return 0;const m=e[this.idx(i,s,a,o)];if(l>=6){const g=this.idx(i,s,a-1,o);m===e[g]&&(u[f++]=t[g])}if(l>=18){if(i){const g=this.idx(i-1,s,a-1,o);m===e[g]&&(u[f++]=t[g])}if(s){const g=this.idx(i,s-1,a-1,o);m===e[g]&&(u[f++]=t[g])}if(i<o[0]-1){const g=this.idx(i+1,s,a-1,o);m===e[g]&&(u[f++]=t[g])}if(s<o[1]-1){const g=this.idx(i,s+1,a-1,o);m===e[g]&&(u[f++]=t[g])}}if(l===26){if(i&&s){const g=this.idx(i-1,s-1,a-1,o);m===e[g]&&(u[f++]=t[g])}if(i<o[0]-1&&s){const g=this.idx(i+1,s-1,a-1,o);m===e[g]&&(u[f++]=t[g])}if(i&&s<o[1]-1){const g=this.idx(i-1,s+1,a-1,o);m===e[g]&&(u[f++]=t[g])}if(i<o[0]-1&&s<o[1]-1){const g=this.idx(i+1,s+1,a-1,o);m===e[g]&&(u[f++]=t[g])}}return f?(this.fill_tratab(h,u,f),u[0]):0}do_initial_labelling(e,t,i){let s=1;const a=8192;let o=a,l=new Uint32Array(o).fill(0);const h=new Uint32Array(t[0]*t[1]*t[2]).fill(0),u=new Uint32Array(27);for(let f=0;f<t[2];f++)for(let m=0;m<t[1];m++)for(let g=0;g<t[0];g++){let p=0;const A=e[this.idx(g,m,f,t)];if(A!==0){if(u[0]=this.check_previous_slice(e,h,g,m,f,t,i,l),u[0]&&(p+=1),i>=6){if(g){const x=this.idx(g-1,m,f,t);A===e[x]&&(u[p++]=h[x])}if(m){const x=this.idx(g,m-1,f,t);A===e[x]&&(u[p++]=h[x])}}if(i>=18){if(m&&g){const x=this.idx(g-1,m-1,f,t);A===e[x]&&(u[p++]=h[x])}if(m&&g<t[0]-1){const x=this.idx(g+1,m-1,f,t);A===e[x]&&(u[p++]=h[x])}}if(p)h[this.idx(g,m,f,t)]=u[0],this.fill_tratab(l,u,p);else{if(h[this.idx(g,m,f,t)]=s,s>=o){o+=a;const x=new Uint32Array(o);x.set(l),l=x}l[s-1]=s,s++}}}for(let f=0;f<s-1;f++){let m=f;for(;l[m]!==m+1;)m=l[m]-1;l[f]=m+1}return[s-1,l,h]}fill_tratab(e,t,i){let s=0;const a=new Uint32Array(i+5).fill(0);let l=2147483647;for(let h=0;h<i;h++){let u=t[h];for(s=0;e[u-1]!==u;)if(u=e[u-1],s++,s>100){H.info(`
Ooh no!!`);break}a[h]=u,l=Math.min(l,u)}for(let h=0;h<i;h++)e[a[h]-1]=l}translate_labels(e,t,i,s){const a=t[0]*t[1]*t[2];let o=0;const l=new Uint32Array(a).fill(0);for(let f=0;f<s;f++)o=Math.max(o,i[f]);const h=new Uint32Array(o).fill(0);let u=0;for(let f=0;f<a;f++)e[f]&&(h[i[e[f]-1]-1]||(u+=1,h[i[e[f]-1]-1]=u),l[f]=h[i[e[f]-1]-1]);return[u,l]}largest_original_cluster_labels(e,t,i){const s=e.length,a=new Uint32Array(t+1).fill(0),o=new Uint32Array(t+1).fill(0);for(let u=0;u<s;u++){const f=e[u],m=i[u];a[m]=f,o[m]++}let l=0;for(let u=0;u<t+1;u++){const f=a[u];l=Math.max(l,f);for(let m=0;m<t+1;m++)m!==u&&f===a[m]&&(o[u]<o[m]||o[u]===o[m]&&u<m)&&(a[u]=0)}const h=new Uint32Array(s).fill(0);for(let u=0;u<s;u++)h[u]=a[i[u]];return[l,h]}bwlabel(e,t,i=26,s=!1,a=!1){const o=Date.now(),l=t[0]*t[1]*t[2],h=new Uint32Array(l).fill(0);if(![6,18,26].includes(i))return H.info("bwlabel: conn must be 6, 18 or 26."),[0,h];if(t[0]<2||t[1]<2||t[2]<1)return H.info("bwlabel: img must be 2 or 3-dimensional"),[0,h];if(s)for(let A=0;A<l;A++)e[A]!==0&&(h[A]=1);else h.set(e);let[u,f,m]=this.do_initial_labelling(h,t,i);f===void 0&&(f=new Uint32Array);const[g,p]=this.translate_labels(m,t,f,u);if(H.info(i+" neighbor clustering into "+g+" regions in "+(Date.now()-o)+"ms"),a){const[A,x]=this.largest_original_cluster_labels(h,g,p);return[A,x]}return[g,p]}async createConnectedLabelImage(e,t=26,i=!1,s=!1){var m,g;const a=this.getVolumeIndexByID(e),o=Uint32Array.from(((m=this.volumes[a].dims)==null?void 0:m.slice(1,4))??[]),l=Uint32Array.from(((g=this.volumes[a].img)==null?void 0:g.slice())??[]),[h,u]=this.bwlabel(l,o,t,i,s),f=this.volumes[a].clone();f.opacity=.5,f.colormap="random";for(let p=0;p<f.img.length;p++)f.img[p]=u[p];return f.cal_min=0,f.cal_max=h,f}async scalecropUint8(e,t=0,i=255,s,a){const o=e.length,l=new Uint8Array(o);for(let h=0;h<o;h++){let u=e[h];u=t+a*(u-s),u=Math.max(u,t),u=Math.min(u,i),l[h]=u}return l}async scalecropFloat32(e,t=0,i=1,s,a){const o=e.length,l=new Float32Array(o);for(let h=0;h<o;h++){let u=e[h];u=t+a*(u-s),u=Math.max(u,t),u=Math.min(u,i),l[h]=u}return l}getScale(e,t=0,i=255,s=0,a=.999){let o=e.global_min,l=e.global_max;if(e.hdr.datatypeCode===2)return[o,1];if((!isFinite(s)||!isFinite(a))&&isFinite(e.cal_min)&&isFinite(e.cal_max)&&e.cal_max>e.cal_min){o=e.cal_min,l=e.cal_max;const E=(i-t)/(l-o);return H.info(" Robust Rescale:  min: "+o+"  max: "+l+" scale: "+E),console.log("Robust Rescale:  min: "+o+"  max: "+l+" scale: "+E),[o,E]}const h=e.img,u=e.hdr.dims[1]*e.hdr.dims[2]*e.hdr.dims[3];if(e.hdr.scl_slope!==1||e.hdr.scl_inter!==0){const E=e.img,S=new Float32Array(e.img.length);for(let M=0;M<u;M++)S[M]=E[M]*e.hdr.scl_slope+e.hdr.scl_inter}if(o<0&&H.warn("WARNING: Input image has value(s) below 0.0 !"),H.info(" Input:    min: "+o+"  max: "+l),s===0&&a===1)return[o,1];let f=0;for(let E=0;E<u;E++)Math.abs(h[E])>=1e-15&&f++;const m=1e3,g=(l-o)/m,p=new Array(m).fill(0);for(let E=0;E<u;E++){const S=h[E];let M=Math.floor((S-o)/g);M=Math.min(M,m-1),p[M]++}const A=new Array(m).fill(0);A[0]=p[0];for(let E=1;E<m;E++)A[E]=A[E-1]+p[E];let x=Math.floor(s*u),y=0;for(;y<m&&!(A[y]>=x);)y++;const b=o;for(o=y*g+b,x=u-Math.floor((1-a)*f),y=0;y<m-1&&!(A[y+1]>=x);)y++;l=y*g+b;let C=1;return o!==l&&(C=(i-t)/(l-o)),H.info(" Rescale:  min: "+o+"  max: "+l+" scale: "+C),[o,C]}conformVox2Vox(e,t,i=256,s=1,a=!1){const o=t.flat(),l=si(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]),h=Wt(e[1]/2,e[2]/2,e[3]/2,1),u=an(),f=It();ai(f,l),Ve(u,h,f);const m=ut(u[0],u[1],u[2]),g=ut(s,s,s);let p=si(-1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);a&&(p=si(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),ai(p,p);const A=Wt(i,i,i,1),x=It();np(x,p,g);const y=Wt(A[0],A[1],A[2],1);Ve(y,y,x),Q8(y,y,.5);const b=Zt();te(b,m,ut(y[0],y[1],y[2]));const C=It();ai(C,x),C[3]=b[0],C[7]=b[1],C[11]=b[2];const E=It();Xe(E,C);const S=It();Rv(S,l,E);const M=It();return Xe(M,S),[C,S,M]}async createNiftiArray(e=[256,256,256],t=[1,1,1],i=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],s=2,a=new Uint8Array){return await Oe.createNiftiArray(e,t,i,s,a)}async niftiArray2NVImage(e=new Uint8Array){return await Oe.loadFromUrl({url:e})}async loadFromUrl(e){return await Oe.loadFromUrl({url:e})}async conform(e,t=!1,i=!0,s=!1,a=!1){const h=this.conformVox2Vox(e.hdr.dims,e.hdr.affine.flat(),256,1,t),u=h[0],f=h[2],m=256*256*256,g=new Float32Array(m),p=new Float32Array(e.img),A=e.hdr.dims[1]*e.hdr.dims[2]*e.hdr.dims[3];if(e.hdr.scl_slope!==1||e.hdr.scl_inter!==0)for(let F=0;F<A;F++)p[F]=p[F]*e.hdr.scl_slope+e.hdr.scl_inter;const x=e.hdr.dims[1],y=e.hdr.dims[2],b=e.hdr.dims[3],C=x*y;let E=-1;function S(F,P,N){return F+P*x+N*C}const M=f[0],T=f[4],I=f[8];if(i)for(let F=0;F<256;F++)for(let P=0;P<256;P++){const N=P*f[1]+F*f[2]+f[3],k=P*f[5]+F*f[6]+f[7],z=P*f[9]+F*f[10]+f[11];for(let q=0;q<256;q++){const j=q*M+N,Q=q*T+k,tt=q*I+z,ot=Math.floor(j),Y=Math.floor(Q),it=Math.floor(tt);if(E++,ot<0||Y<0||it<0)continue;const ct=Math.ceil(j),lt=Math.ceil(Q),mt=Math.ceil(tt);if(ct>=x||lt>=y||mt>=b)continue;const Ct=j-ot,At=Q-Y,Qt=tt-it,Bt=1-Ct,Se=1-At,pe=1-Qt,se=S(ot,Y,it);let Xt=0;Xt+=p[se]*Bt*Se*pe,Xt+=p[se+C]*Bt*Se*Qt,Xt+=p[se+x]*Bt*At*pe,Xt+=p[se+x+C]*Bt*At*Qt,Xt+=p[se+1]*Ct*Se*pe,Xt+=p[se+1+C]*Ct*Se*Qt,Xt+=p[se+1+x]*Ct*At*pe,Xt+=p[se+1+x+C]*Ct*At*Qt,g[E]=Xt}}else for(let F=0;F<256;F++)for(let P=0;P<256;P++){const N=P*f[1]+F*f[2]+f[3],k=P*f[5]+F*f[6]+f[7],z=P*f[9]+F*f[10]+f[11];for(let q=0;q<256;q++){const j=Math.round(q*M+N),Q=Math.round(q*T+k),tt=Math.round(q*I+z);E++,!(j<0||Q<0||tt<0)&&(j>=x||Q>=y||tt>=b||(g[E]=p[S(j,Q,tt)]))}}let R=0;a&&(R=NaN);let D=new Uint8Array;if(s){const F=await this.getScale(e,0,1,R),P=await this.scalecropFloat32(g,0,1,F[0],F[1]);D=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(u),16,new Uint8Array(P.buffer))}else{const F=await this.getScale(e,0,255,R),P=await this.scalecropUint8(g,0,255,F[0],F[1]);D=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(u),2,P)}return await this.niftiArray2NVImage(D)}setRenderDrawAmbientOcclusion(e){if(!this.renderShader)throw new Error("renderShader undefined");this.renderDrawAmbientOcclusion=e,this.renderShader.use(this.gl),this.gl.uniform1fv(this.renderShader.uniforms.renderDrawAmbientOcclusion,[this.renderDrawAmbientOcclusion,1]),this.drawScene()}setColorMap(e,t){this.setColormap(e,t)}setColormapNegative(e,t){const i=this.getVolumeIndexByID(e);this.volumes[i].colormapNegative=t,this.updateGLVolume()}setModulationImage(e,t,i=0){const s=this.getVolumeIndexByID(e);let a=null;t.length>0&&(a=this.getVolumeIndexByID(t)),this.volumes[s].modulationImage=a,this.volumes[s].modulateAlpha=i,this.updateGLVolume()}setGamma(e=1){this.scene.gamma=e,Ht.gamma=e,this.updateGLVolume()}async loadDeferred4DVolumes(e){const t=this.getVolumeIndexByID(e),i=this.volumes[t];if(i.nTotalFrame4D<=i.nFrame4D)return;i.nTotalFrame4D=i.nFrame4D;let s;i.fileObject?s=await Oe.loadFromFile({file:i.fileObject}):s=await Oe.loadFromUrl({url:i.url}),s&&(i.img=s.img.slice(),i.nTotalFrame4D=s.nTotalFrame4D,i.nFrame4D=s.nFrame4D,this.updateGLVolume())}setFrame4D(e,t){const i=this.getVolumeIndexByID(e),s=this.volumes[i];t>s.nFrame4D-1&&(t=s.nFrame4D-1),t<0&&(t=0),t!==s.frame4D&&(s.frame4D=t,this.updateGLVolume(),this.onFrameChange(s,t),this.createOnLocationChange())}getFrame4D(e){const t=this.getVolumeIndexByID(e);return this.volumes[t].frame4D}colormapFromKey(e){return Ht.colormapFromKey(e)}colormap(e="",t=!1){return Ht.colormap(e,t)}createColormapTexture(e=null,t=0,i=256){return e!==null&&this.gl.deleteTexture(e),t<1||i<1?null:(e=this.gl.createTexture(),this.gl.activeTexture(jl),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.RGBA8,i,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),e)}addColormapList(e="",t=NaN,i=NaN,s=!1,a=!1,o=!0,l=!1){e.length<1&&(o=!1),this.colormapLists.push({name:e,min:t,max:i,isColorbarFromZero:s,negative:a,visible:o,invert:l})}refreshColormaps(){if(this.colormapLists=[],this.volumes.length<1&&this.meshes.length<1)return;const e=this.volumes.length;if(e>0)for(let o=0;o<e;o++){const l=this.volumes[o],h=cf(l.cal_min,l.cal_max,l.cal_minNeg,l.cal_maxNeg),u=l.colormapType!==0;this.addColormapList(l.colormapNegative,h[0],h[1],u,!0,l.colorbarVisible,l.colormapInvert),this.addColormapList(l.colormap,l.cal_min,l.cal_max,u,!1,l.colorbarVisible,l.colormapInvert)}const t=this.meshes.length;if(t>0)for(let o=0;o<t;o++){const l=this.meshes[o];if(!l.colorbarVisible)continue;const h=l.layers.length;if("edgeColormap"in l&&"edges"in l&&l.edges!==void 0){const u=cf(l.edgeMin,l.edgeMax,NaN,NaN);this.addColormapList(l.edgeColormapNegative,u[0],u[1],!1,!0,!0,l.colormapInvert),this.addColormapList(l.edgeColormap,l.edgeMin,l.edgeMax,!1,!1,!0,l.colormapInvert)}if(!(h<1))for(let u=0;u<h;u++){const f=this.meshes[o].layers[u];if(!f.colorbarVisible||f.colormap.length<1)continue;const m=f.colormapType!==0,g=cf(f.cal_min,f.cal_max,f.cal_minNeg,f.cal_maxNeg);this.addColormapList(f.colormapNegative,g[0],g[1],m,!0,!0,f.colormapInvert),this.addColormapList(f.colormap,f.cal_min,f.cal_max,m,!1,!0,f.colormapInvert)}}const i=this.colormapLists.length;if(i<1)return;this.colormapTexture=this.createColormapTexture(this.colormapTexture,i+1);let s=new Uint8ClampedArray;function a(o){const l=new Uint8ClampedArray(s.length+o.length);l.set(s),l.set(o,s.length),s=l}for(let o=0;o<i;o++)a(Array.from(this.colormap(this.colormapLists[o].name,this.colormapLists[o].invert)));return a(Array.from(this.drawLut.lut)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,256,i+1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,s),this}sliceScale(e=!1){var o;let t=this.screenFieldOfViewMM(0);e&&(t=this.screenFieldOfViewVox(0));const i=Math.max(t[0],Math.max(t[1],t[2])),s=[t[0]/i,t[1]/i,t[2]/i];if(!((o=this.back)!=null&&o.dims))throw new Error("back.dims undefined");const a=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];return{volScale:s,vox:a,longestAxis:i,dimsMM:t}}tileIndex(e,t){for(let i=0;i<this.screenSlices.length;i++){const s=this.screenSlices[i].leftTopWidthHeight;if(e>s[0]&&t>s[1]&&e<s[0]+s[2]&&t<s[1]+s[3])return i}return-1}inRenderTile(e,t){const i=this.tileIndex(e,t);return i>=0&&this.screenSlices[i].axCorSag===4?i:-1}sliceScroll3D(e=0){if(e!==0){if(this.volumes.length>0&&this.scene.clipPlaneDepthAziElev[0]<1.8){const t=this.scene.clipPlaneDepthAziElev.slice();return e>0&&(t[0]=Math.min(1.5,t[0]+.025)),e<0&&(t[0]=Math.max(-1.5,t[0]-.025)),t[0]!==this.scene.clipPlaneDepthAziElev[0]?(this.scene.clipPlaneDepthAziElev=t,this.setClipPlane(this.scene.clipPlaneDepthAziElev)):void 0}e>0&&(this.scene.volScaleMultiplier=Math.min(2,this.scene.volScaleMultiplier*1.1)),e<0&&(this.scene.volScaleMultiplier=Math.max(.5,this.scene.volScaleMultiplier*.9)),this.drawScene()}}deleteThumbnail(){this.bmpTexture&&(this.gl.deleteTexture(this.bmpTexture),this.bmpTexture=null,this.thumbnailVisible=!1)}inGraphTile(e,t){if(this.graph.opacity<=0||this.volumes.length<1||this.volumes[0].nFrame4D<1||!this.graph.plotLTWH||this.graph.plotLTWH[2]<1||this.graph.plotLTWH[3]<1)return!1;const i=[(e-this.graph.LTWH[0])/this.graph.LTWH[2],(t-this.graph.LTWH[1])/this.graph.LTWH[3]];return i[0]>0&&i[1]>0&&i[0]<=1&&i[1]<=1}updateBitmapFromClickToSegment(){if(this.clickToSegmentGrowingBitmap===null||this.drawBitmap===null||this.clickToSegmentGrowingBitmap.length!==this.drawBitmap.length)return;const e=this.drawBitmap.length;for(let t=0;t<e;t++)this.drawBitmap[t]=this.clickToSegmentGrowingBitmap[t]}sumBitmap(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t}mouseClick(e,t,i=0,s=!0){if(e*=this.uiData.dpr,t*=this.uiData.dpr,this.canvas.focus(),this.thumbnailVisible){this.thumbnailVisible=!1,Promise.all([this.loadVolumes(this.deferredVolumes),this.loadMeshes(this.deferredMeshes)]).catch(a=>{throw a});return}if(this.inGraphTile(e,t)){if(!this.graph.plotLTWH)throw new Error("plotLTWH undefined");const a=[(e-this.graph.plotLTWH[0])/this.graph.plotLTWH[2],(t-this.graph.plotLTWH[1])/this.graph.plotLTWH[3]];if(a[0]>0&&a[1]>0&&a[0]<=1&&a[1]<=1){const o=Math.round(a[0]*(this.volumes[0].nFrame4D-1));this.setFrame4D(this.volumes[0].id,o);return}a[0]>.5&&a[1]>1&&this.loadDeferred4DVolumes(this.volumes[0].id).catch(o=>{throw o});return}if(this.inRenderTile(e,t)>=0){this.sliceScroll3D(i),this.drawScene();return}if(!(this.screenSlices.length<1||this.gl.canvas.height<1||this.gl.canvas.width<1))for(let a=0;a<this.screenSlices.length;a++){const o=this.screenSlices[a].axCorSag;if(this.drawPenAxCorSag>=0&&this.drawPenAxCorSag!==o||o>2)continue;let l=this.screenXY2TextureFrac(e,t,a,!1);if(!(l[0]<0)){if(!s){this.scene.crosshairPos[2-o]=i,this.drawScene();return}if(i!==0){let h=1;i<0&&(h=-1);const u=[0,0,0];u[2-o]=h,this.moveCrosshairInVox(u[0],u[1],u[2]),this.drawScene(),this.createOnLocationChange(o);return}if(this.opts.isForceMouseClickToVoxelCenters?this.scene.crosshairPos=Gr(this.vox2frac(this.frac2vox(l))):this.scene.crosshairPos=Gr(l),this.opts.drawingEnabled){let h=this.frac2vox(this.scene.crosshairPos);if(this.opts.clickToSegment){l=this.screenXY2TextureFrac(this.clickToSegmentXY[0],this.clickToSegmentXY[1],a,!1),h=this.frac2vox(l);let u=0,f=this.opts.clickToSegmentPercent+u;if(this.uiData.mousedown){const A=(this.clickToSegmentXY[0]-e)/this.gl.canvas.width,x=(this.clickToSegmentXY[1]-t)/this.gl.canvas.height;u=Math.max(Math.abs(A),Math.abs(x)),f=this.opts.clickToSegmentPercent+u}let m=this.back.getValue(h[0],h[1],h[2]);this.opts.clickToSegmentAutoIntensity&&(f!==0&&(m===0&&(m=.01),this.opts.clickToSegmentIntensityMax=m*(1+f),this.opts.clickToSegmentIntensityMin=m*(1-f)),m>(this.back.cal_min+this.back.cal_max)*.5?this.opts.clickToSegmentBright=!0:this.opts.clickToSegmentBright=!1);const g=this.opts.clickToSegmentBright?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.drawPenAxCorSag=o,this.drawPenAxCorSag===0){const A=[this.back.pixDimsRAS[0],this.back.pixDimsRAS[1]],x=Math.min(...A);this.opts.penSize=Math.ceil(this.opts.clickToSegmentRadius/x)}else if(this.drawPenAxCorSag===1){const A=[this.back.pixDimsRAS[0],this.back.pixDimsRAS[2]],x=Math.min(...A);this.opts.penSize=Math.ceil(this.opts.clickToSegmentRadius/x)}else if(this.drawPenAxCorSag===2){const A=[this.back.pixDimsRAS[1],this.back.pixDimsRAS[2]],x=Math.min(...A);this.opts.penSize=Math.ceil(this.opts.clickToSegmentRadius/x)}if(this.drawPt(h[0],h[1],h[2],this.opts.penValue),u!==0?(this.clickToSegmentIsGrowing=!0,this.clickToSegmentGrowingBitmap=this.drawBitmap.slice()):this.clickToSegmentIsGrowing=!1,this.drawFloodFill([h[0],h[1],h[2]],0,g,this.opts.clickToSegmentIntensityMin,this.opts.clickToSegmentIntensityMax,this.opts.floodFillNeighbors,this.opts.clickToSegmentMaxDistanceMM,this.opts.clickToSegmentIs2D),this.drawScene(),this.createOnLocationChange(o),this.clickToSegmentIsGrowing)return;const p=this.getDescriptives({layer:0,masks:[],drawingIsMask:!0});this.onClickToSegment({mL:p.volumeML,mm3:p.volumeMM3});return}if(!isFinite(this.opts.penValue)||this.opts.penValue<0||Object.is(this.opts.penValue,-0)){isFinite(this.opts.penValue)?this.drawFloodFill(h,Math.abs(this.opts.penValue),this.opts.penValue,NaN,NaN,this.opts.floodFillNeighbors):this.drawFloodFill(h,0,this.opts.penValue,NaN,NaN,this.opts.floodFillNeighbors);return}if(isNaN(this.drawPenLocation[0]))this.drawPenAxCorSag=o,this.drawPenFillPts=[],this.drawPt(...h,this.opts.penValue);else{if(h[0]===this.drawPenLocation[0]&&h[1]===this.drawPenLocation[1]&&h[2]===this.drawPenLocation[2])return;this.drawPenLine(h,this.drawPenLocation,this.opts.penValue)}this.drawPenLocation=h,this.opts.isFilledPen&&this.drawPenFillPts.push(h),this.refreshDrawing(!1)}this.drawScene(),this.createOnLocationChange(o);return}}}drawRuler(){let e=[],t=[];for(let m=0;m<this.screenSlices.length;m++)if(this.screenSlices[m].axCorSag!==4&&this.screenSlices[m].fovMM.length>1){t=this.screenSlices[m].leftTopWidthHeight,e=this.screenSlices[m].fovMM;break}if(t.length<4)return;const s=100/e[0]*t[2],a=Math.max(Math.round(s*.1),2),o=Math.floor(t[0]+.5*t[2]-.5*s),l=Number(this.opts.rulerWidth),h=Math.floor(t[1]+t[3]-a)+.5*l,u=[o,h,o+s,h];let f=[0,0,0,1];this.opts.rulerColor[0]+this.opts.rulerColor[1]+this.opts.rulerColor[2]<.8&&(f=[1,1,1,1]),this.drawRuler10cm(u,f,l+1),this.drawRuler10cm(u,this.opts.rulerColor,l)}drawRuler10cm(e,t,i=1){if(!this.lineShader)throw new Error("lineShader undefined");this.gl.bindVertexArray(this.genericVAO),this.lineShader.use(this.gl),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,i),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);const s=-.1*(e[0]-e[2]),a=e[1]-Math.floor(.5*this.opts.rulerWidth),o=Math.floor(a-.35*s),l=Math.floor(a-.7*s);for(let h=0;h<11;h++){let u=e[0]+h*s;u=Math.max(u,e[0]+.5*i),u=Math.min(u,e[2]-.5*i);const f=[u,a,u,o];h%5===0&&(f[3]=l),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,f),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}this.gl.bindVertexArray(this.unusedVAO)}screenXY2mm(e,t,i=-1){let s;for(let a=0;a<this.screenSlices.length;a++){let o=a;if(i>=0&&(o=i),this.screenSlices[o].axCorSag>2)continue;const h=this.screenSlices[o].leftTopWidthHeight;if(e<h[0]||t<h[1]||e>h[0]+h[2]||t>h[1]+h[3]||(s=this.screenXY2TextureFrac(e,t,o,!1),s[0]<0))continue;const u=this.frac2mm(s);return Wt(u[0],u[1],u[2],o)}return Wt(NaN,NaN,NaN,NaN)}dragForPanZoom(e){const t=this.screenXY2mm(e[2],e[3]);if(isNaN(t[0]))return;const i=this.screenXY2mm(e[0],e[1],t[3]);if(isNaN(i[0])||isNaN(t[0])||isNaN(t[3]))return;const s=an(),a=this.uiData.pan2DxyzmmAtMouseDown[3];X8(s,t,i),this.scene.pan2Dxyzmm[0]=this.uiData.pan2DxyzmmAtMouseDown[0]+a*s[0],this.scene.pan2Dxyzmm[1]=this.uiData.pan2DxyzmmAtMouseDown[1]+a*s[1],this.scene.pan2Dxyzmm[2]=this.uiData.pan2DxyzmmAtMouseDown[2]+a*s[2],this.canvas.focus()}dragForCenterButton(e){this.dragForPanZoom(e)}dragForSlicer3D(e){let t=this.uiData.pan2DxyzmmAtMouseDown[3];const i=e[3]-e[1];t+=i*.01,t=Math.max(t,.1),t=Math.min(t,10);const a=this.scene.pan2Dxyzmm[3]-t;this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=t),this.scene.pan2Dxyzmm[3]=t;const o=this.frac2mm(this.scene.crosshairPos);this.scene.pan2Dxyzmm[0]+=a*o[0],this.scene.pan2Dxyzmm[1]+=a*o[1],this.scene.pan2Dxyzmm[2]+=a*o[2]}drawMeasurementTool(e){function t(u,f,m,g,p){const A=u-m,x=f-g;if(A===0&&x===0)return{origin:[m+p,g],terminus:[m+p,g]};const y=Math.sqrt(A*A+x*x),b=p*A/y,C=p*x/y;return{origin:[u+b,f+C],terminus:[m-b,g-C]}}const i=this.gl;if(i.bindVertexArray(this.genericVAO),i.depthFunc(i.ALWAYS),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),i.uniform4fv(this.lineShader.uniforms.lineColor,this.opts.rulerColor),i.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[i.canvas.width,i.canvas.height]),i.uniform1f(this.lineShader.uniforms.thickness,this.opts.rulerWidth),i.uniform4fv(this.lineShader.uniforms.startXYendXY,e),i.drawArrays(i.TRIANGLE_STRIP,0,4);const s=this.opts.measureLineColor;s[3]=1,i.uniform4fv(this.lineShader.uniforms.lineColor,s);const a=this.opts.rulerWidth;i.uniform1f(this.lineShader.uniforms.thickness,a*2);let o=[e[0],e[1]-a,e[0],e[1]+a];i.uniform4fv(this.lineShader.uniforms.startXYendXY,o),i.drawArrays(i.TRIANGLE_STRIP,0,4),o=[e[2],e[3]-a,e[2],e[3]+a],i.uniform4fv(this.lineShader.uniforms.startXYendXY,o),i.drawArrays(i.TRIANGLE_STRIP,0,4);let l=this.canvasPos2frac([e[0],e[1]]),h=this.canvasPos2frac([e[2],e[3]]);if(l[0]>=0&&h[0]>=0){const u=this.frac2mm(l);l=ut(u[0],u[1],u[2]);const f=this.frac2mm(h);h=ut(f[0],f[1],f[2]);const m=Zt();ap(m,l,h);const g=to(m);let p=2;g>9&&(p=1),g>99&&(p=0);let A=g.toFixed(p);this.opts.showMeasureUnits&&(A=`${A} mm`);let x=e;const[y,b,C,E]=e,{origin:S,terminus:M}=t(y,b,C,E,30);switch(this.opts.measureTextJustify){case"start":x=[...S,...S.map(T=>T+1)];break;case"end":x=x=[...M,...M.map(T=>T+1)];break;default:x=e;break}this.drawTextBetween(x,A,this.opts.measureTextHeight/this.opts.textHeight,this.opts.measureTextColor)}i.bindVertexArray(this.unusedVAO)}drawRect(e,t=[1,0,0,-1]){if(t[3]<0&&(t=this.opts.crosshairColor),!this.rectShader)throw new Error("rectShader undefined");this.opts.selectionBoxIsOutline?(this.drawCircle(e,t,.1),this.rectOutlineShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform1f(this.rectOutlineShader.uniforms.thickness,this.opts.selectionBoxLineThickness),this.gl.uniform4fv(this.rectOutlineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.rectOutlineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectOutlineShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)):(this.rectShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.rectShader.uniforms.lineColor,t),this.gl.uniform2fv(this.rectShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO))}drawCircle(e,t=this.opts.fontColor,i=1){if(!this.circleShader)throw new Error("circleShader undefined");this.circleShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,t),this.gl.uniform2fv(this.circleShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.circleShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.uniform1f(this.circleShader.uniforms.fillPercent,i),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,t),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawSelectionBox(e){if(this.opts.dragMode===6){this.drawCircle(e,this.opts.selectionBoxColor,.1);return}this.drawRect(e,this.opts.selectionBoxColor)}effectiveCanvasHeight(){return this.gl.canvas.height-this.colorbarHeight}effectiveCanvasWidth(){return this.gl.canvas.width-this.getLegendPanelWidth()}getAllLabels(){const s=this.meshes.filter(o=>o.type==="connectome").flatMap(o=>o.nodes).map(o=>o.label).filter(o=>o!==void 0);return[...this.document.labels,...s]}getConnectomeLabels(){const s=this.meshes.filter(l=>l.type==="connectome").flatMap(l=>l.nodes).map(l=>l.label).filter(l=>l!==void 0),a=this.document.labels.filter(l=>l.anchor==null||l.anchor===0),o=new Set(s);for(const l of a)o.add(l);return Array.from(o)}getBulletMarginWidth(){let e=0;const t=this.getConnectomeLabels();if(t.length===0)return 0;const i=t.length===1?t[0].style.bulletScale:t.reduce((o,l)=>o.style.bulletScale>l.style.bulletScale?o:l).style.bulletScale,s=t.length===1?t[0]:t.reduce((o,l)=>{const h=this.opts.textHeight*this.gl.canvas.height*o.style.textScale,u=this.opts.textHeight*this.gl.canvas.height*l.style.textScale;return this.textHeight(h,o.text)>this.textHeight(u,l.text)?o:l}),a=this.opts.textHeight*this.gl.canvas.height*s.style.textScale;return e=this.textHeight(a,s.text)*i,e+=a,e}getLegendPanelWidth(){const e=this.getConnectomeLabels();if(!this.opts.showLegend||e.length===0)return 0;const i=this.opts.textHeight*this.gl.canvas.height*1;let s=0;const a=e.reduce((u,f)=>{const m=this.opts.textHeight*this.gl.canvas.height*u.style.textScale,g=this.opts.textHeight*this.gl.canvas.height*f.style.textScale;return this.textWidth(m,u.text)>this.textWidth(g,f.text)?u:f}),o=this.opts.textHeight*this.gl.canvas.height*a.style.textScale,l=this.textWidth(o,a.text),h=this.getBulletMarginWidth();return l&&(s=h+l,s+=i*2),s>=this.gl.canvas.width?0:s}getLegendPanelHeight(){const e=this.getConnectomeLabels();let t=0;const s=this.opts.textHeight*this.gl.canvas.height*1;for(const a of e){const o=this.opts.textHeight*this.gl.canvas.height*a.style.textScale,l=this.textHeight(o,a.text);t+=l}return t&&(t+=s/2*(e.length+1)),t}reserveColorbarPanel(){let e=Math.max(this.opts.textHeight,.01);e=e*Math.min(this.gl.canvas.height,this.gl.canvas.width);const t=3*e,i=[0,this.gl.canvas.height-t,this.gl.canvas.width,t];return this.colorbarHeight=i[3]+1,i}drawColorbarCore(e=0,t=[0,0,0,0],i=!1,s=0,a=1,o){if(t[2]<=0||t[3]<=0)return;let l=Math.max(this.opts.textHeight,.01);l=l*Math.min(this.gl.canvas.height,this.gl.canvas.width);let h=l;const u=3*l;let f=l;if(t[3]<u){if(t[3]<3)return;h=1,f=t[3]-2}this.gl.disable(this.gl.DEPTH_TEST),this.colorbarHeight=t[3]+1;const m=[t[0]+h,t[1],t[2]-2*h,f],g=[m[0]-1,m[1]-1,m[2]+2,m[3]+2];if(this.drawRect(g,this.opts.crosshairColor),!this.colorbarShader)throw new Error("colorbarShader undefined");this.colorbarShader.use(this.gl),this.gl.activeTexture(jl),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);const p=e;if(this.gl.uniform1f(this.colorbarShader.uniforms.layer,p),this.gl.uniform2fv(this.colorbarShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.disable(this.gl.CULL_FACE),i){const I=[m[0]+m[2],m[1],-m[2],m[3]];this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,I)}else this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,m);this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);let A=0;if(o&&a<0&&i?(A=a,a=0):o&&s>0&&(A=s,s=0),s===a||l<1)return;const x=Math.abs(a-s);let[y,b]=Mp(s,a);b<s&&(b+=y);function C(I){return I.toFixed(6).replace(/\.?0*$/,"")}let E=b;const S=[0,m[1]+m[3]-l*.5,2,l*.75],M=S[1]+S[3],T=1;for(;E<=a;){S[0]=m[0]+(E-s)/x*m[2],this.drawRect(S);const I=C(T*E);this.drawTextBelow([S[0],M],I),E+=y}if(A!==0){const I=[m[0]+(A-s)/x*m[2],m[1]-m[3]*.25,2,m[3]*1.5];this.drawRect(I)}}drawColorbar(){const e=this.colormapLists,t=e.length;if(t<1)return;let i=0;for(let h=0;h<t;h++)e[h].visible&&i++;if(i<1)return;let s=this.reserveColorbarPanel(),a=Math.max(this.opts.textHeight,.01);a=a*Math.min(this.gl.canvas.height,this.gl.canvas.width);const o=3*a;let l=s[2]/i;(s[2]<=0||s[3]<=0)&&(l=this.gl.canvas.width/i,s=[0,this.gl.canvas.height-o,l,o]),s[2]=l;for(let h=0;h<t;h++)e[h].visible&&(this.drawColorbarCore(h,s,e[h].negative,e[h].min,e[h].max,e[h].isColorbarFromZero),s[0]+=l)}textWidth(e,t){if(!t)return 0;let i=0;const s=new TextEncoder().encode(t);for(let a=0;a<t.length;a++)i+=e*this.fontMets.mets[s[a]].xadv;return i}textHeight(e,t){if(!t)return 0;const i=new Set(Array.from(t)),s=new TextEncoder().encode(Array.from(i).join("")),o=Object.values(this.fontMets.mets).filter((l,h)=>s.includes(h)).reduce((l,h)=>l.lbwh[3]>h.lbwh[3]?l:h).lbwh[3];return e*o}drawChar(e,t,i){if(!this.fontShader)throw new Error("fontShader undefined");const s=this.fontMets.mets[i],a=e[0]+t*s.lbwh[0],o=-(t*s.lbwh[1]),l=t*s.lbwh[2],h=t*s.lbwh[3],u=e[1]+(o-h)+t;return this.gl.uniform4f(this.fontShader.uniforms.leftTopWidthHeight,a,u,l,h),this.gl.uniform4fv(this.fontShader.uniforms.uvLeftTopWidthHeight,s.uv_lbwh),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),t*s.xadv}drawLoadingText(e){if(e){if(!this.canvas)throw new Error("canvas undefined");this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.drawTextBelow([this.canvas.width/2,this.canvas.height/2],e,3)}}drawText(e,t,i=1,s=null){if(this.opts.textHeight<=0)return;if(!this.fontShader)throw new Error("fontShader undefined");this.fontShader.use(this.gl);const a=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*i;this.gl.enable(this.gl.BLEND),this.gl.uniform2f(this.fontShader.uniforms.canvasWidthHeight,this.gl.canvas.width,this.gl.canvas.height),s===null&&(s=this.opts.fontColor),this.gl.uniform4fv(this.fontShader.uniforms.fontColor,s);let o=a/this.fontMets.size*this.fontMets.distanceRange;o=Math.max(o,1),this.gl.uniform1f(this.fontShader.uniforms.screenPxRange,o);const l=new TextEncoder().encode(t);this.gl.bindVertexArray(this.genericVAO);for(let h=0;h<t.length;h++)e[0]+=this.drawChar(e,a,l[h]);this.gl.bindVertexArray(this.unusedVAO)}drawTextRight(e,t,i=1,s=null){this.opts.textHeight<=0||(e[1]-=.5*this.opts.textHeight*this.gl.canvas.height,this.drawText(e,t,i,s))}drawTextLeft(e,t,i=1,s=null){if(this.opts.textHeight<=0)return;const a=this.opts.textHeight*this.gl.canvas.height*i;e[0]-=this.textWidth(a,t),e[1]-=.5*a,this.drawText(e,t,i,s)}drawTextRightBelow(e,t,i=1,s=null){this.opts.textHeight<=0||this.drawText(e,t,i,s)}drawTextBetween(e,t,i=1,s=null){if(this.opts.textHeight<=0)return;const a=[(e[0]+e[2])*.5,(e[1]+e[3])*.5],o=this.opts.textHeight*this.gl.canvas.height*i,l=this.textWidth(o,t);a[0]-=.5*l,a[1]-=.5*o;const h=[a[0]-1,a[1]-1,l+2,o+2];let u=s;u===null&&(u=this.opts.crosshairColor),u&&u[0]+u[1]+u[2]>.8?u=[0,0,0,.5]:u=[1,1,1,.5],this.drawRect(h,u),this.drawText(a,t,i,s)}drawTextBelow(e,t,i=1,s=null){if(this.opts.textHeight<=0)return;if(!this.canvas)throw new Error("canvas undefined");let a=this.opts.textHeight*this.gl.canvas.height*i,o=this.textWidth(a,t);o>this.canvas.width&&(i*=(this.canvas.width-2)/o,a=this.opts.textHeight*this.gl.canvas.height*i,o=this.textWidth(a,t)),e[0]-=.5*this.textWidth(a,t),e[0]=Math.max(e[0],1),e[0]=Math.min(e[0],this.canvas.width-o-1),this.drawText(e,t,i,s)}updateInterpolation(e,t=!1){let i=this.gl.LINEAR;!t&&this.opts.isNearestInterpolation&&(i=this.gl.NEAREST),e===0?this.gl.activeTexture(zl):this.gl.activeTexture(hf),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,i),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,i)}setAtlasOutline(e){this.opts.atlasOutline=e,this.updateGLVolume(),this.drawScene()}setInterpolation(e){this.opts.isNearestInterpolation=e;const t=this.volumes.length;if(!(t<1)){for(let i=0;i<t;i++)this.updateInterpolation(i);this.drawScene()}}calculateMvpMatrix2D(e,t,i,s=1/0,a=0,o=0,l=0,h){this.gl.viewport(e[0],this.gl.canvas.height-(e[1]+e[3]),e[2],e[3]);let f=t[0],m=i[0],g=[f,t[1]],p=[m-f,i[1]-t[1]];h&&(g=[i[0],t[1]],p=[t[0]-i[0],i[1]-t[1]],f=-i[0],m=-t[0]);const A=2*Math.max(Math.abs(t[2]),Math.abs(i[2])),x=It();let y=.01,b=A*8;if(s!==1/0){let I=h;l===0&&(o===0||o===180)&&(I=!I);let R=A*1.8-a;I||(R=A*1.8+a),y=R-s,b=R+s}Bl(x,f,m,t[1],i[1],y,b);const C=It();C[0]=-1;const E=ut(0,0,-A*1.8);ha(C,C,E),Rl(C,C,Fn(270-l)),Il(C,C,Fn(o-180));const S=It();Xe(S,C);const M=It();ai(M,S);const T=It();return On(T,x,C),{modelViewProjectionMatrix:T,modelMatrix:C,normalMatrix:M,leftTopMM:g,fovMM:p}}swizzleVec3MM(e,t){return t===1?e=Ue(e,[0,2,1]):t===2&&(e=Ue(e,[1,2,0])),e}screenFieldOfViewVox(e=0){const t=Gr(this.volumeObject3D.fieldOfViewDeObliqueMM);return this.swizzleVec3MM(t,e)}screenFieldOfViewMM(e=0,t=!1){if(!t&&!this.opts.isSliceMM)return this.screenFieldOfViewVox(e);const i=this.volumeObject3D.extentsMin,s=this.volumeObject3D.extentsMax;let a=ut(i[0],i[1],i[2]),o=ut(s[0],s[1],s[2]);a=this.swizzleVec3MM(a,e),o=this.swizzleVec3MM(o,e);const l=Zt();return te(l,o,a),l}screenFieldOfViewExtendedVox(e=0){const t=this.volumes[0].extentsMinOrtho,i=this.volumes[0].extentsMaxOrtho;let s=ut(t[0],t[1],t[2]),a=ut(i[0],i[1],i[2]);const o=It();s=this.swizzleVec3MM(s,e),a=this.swizzleVec3MM(a,e);const l=Zt();return te(l,a,s),{mnMM:s,mxMM:a,rotation:o,fovMM:l}}screenFieldOfViewExtendedMM(e=0){if(!this.volumeObject3D)throw new Error("volumeObject3D undefined");const t=this.volumeObject3D.extentsMin,i=this.volumeObject3D.extentsMax;let s=ut(t[0],t[1],t[2]),a=ut(i[0],i[1],i[2]);const o=It();s=this.swizzleVec3MM(s,e),a=this.swizzleVec3MM(a,e);const l=Zt();return te(l,a,s),{mnMM:s,mxMM:a,rotation:o,fovMM:l}}drawSliceOrientationText(e,t,i=[NaN,NaN]){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let s="S";t===0&&(s="A");let a=this.opts.isRadiologicalConvention?"R":"L";if(t===2&&(a=this.opts.sagittalNoseLeft?"A":"P"),this.opts.isCornerOrientationText){this.drawTextRightBelow([e[0],e[1]],a+s);return}let o=!0,l=!0;if(!isNaN(i[0])){const h=this.opts.textHeight*this.gl.canvas.height+2;i[1]>h&&(this.drawTextBelow([e[0]+e[2]*.5,e[1]+i[1]-h],s),o=!1);const u=this.textWidth(h,a)+2;i[0]>u&&(this.drawTextRight([e[0]+i[0]-u,e[1]+e[3]*.5],a),l=!1)}o&&this.drawTextBelow([e[0]+e[2]*.5,e[1]],s),l&&this.drawTextRight([e[0],e[1]+e[3]*.5],a)}xyMM2xyzMM(e,t){let i=2;e===1&&(i=1),e===2&&(i=0);let s=[0,0,0],a=[1,1,0],o=[1,0,1];s[i]=t,a[i]=t,o[i]=t,s=this.frac2mm(s),a=this.frac2mm(a),o=this.frac2mm(o),s=this.swizzleVec3MM(ut(s[0],s[1],s[2]),e),a=this.swizzleVec3MM(ut(a[0],a[1],a[2]),e),o=this.swizzleVec3MM(ut(o[0],o[1],o[2]),e);const l=(a[0]-s[0])*(o[1]-s[1])-(o[0]-s[0])*(a[1]-s[1]);let h=(a[0]-s[0])*(o[2]-s[2])-(o[0]-s[0])*(a[2]-s[2]);h/=l;let u=(a[1]-s[1])*(o[2]-s[2])-(o[1]-s[1])*(a[2]-s[2]);u/=l;const f=[0,0,0,0,0];return f[0]=s[0],f[1]=s[1],f[2]=s[2],f[3]=u,f[4]=h,f}draw2DMain(e,t,i=NaN){let s=this.volumes[0].frac2mm.slice(),a=this.screenFieldOfViewExtendedMM(t),o=It();this.opts.isSliceMM||(s=this.volumes[0].frac2mmOrtho.slice(),o=he(this.volumes[0].mm2ortho),a=this.screenFieldOfViewExtendedVox(t));let l=this.opts.isRadiologicalConvention&&t<2;i===1/0||i===-1/0?(l=i!==1/0,t===1&&(l=!l)):this.opts.sagittalNoseLeft&&t===2&&(l=!l);let h=0,u=0;t===2?u=l?90:-90:t===1?u=l?180:0:(u=l?180:0,h=l?-90:90);const f=this.gl;let m=!1;if(e[2]===0||e[3]===0){m=!0;const C=f.canvas.width/a.fovMM[0],E=f.canvas.height/a.fovMM[1],S=Math.min(C,E),M=C/S,T=E/S;a.fovMM[0]*=M,a.fovMM[1]*=T;let I=(a.mnMM[0]+a.mxMM[0])*.5;a.mnMM[0]=I-a.fovMM[0]*.5,a.mxMM[0]=I+a.fovMM[0]*.5,I=(a.mnMM[1]+a.mxMM[1])*.5,a.mnMM[1]=I-a.fovMM[1]*.5,a.mxMM[1]=I+a.fovMM[1]*.5,e=[0,0,f.canvas.width,f.canvas.height]}if(isNaN(i)){const C=this.scene.pan2Dxyzmm,E=this.swizzleVec3MM(ut(C[0],C[1],C[2]),t),S=this.scene.pan2Dxyzmm[3];a.mnMM[0]-=E[0],a.mxMM[0]-=E[0],a.mnMM[1]-=E[1],a.mxMM[1]-=E[1],a.mnMM[0]/=S,a.mxMM[0]/=S,a.mnMM[1]/=S,a.mxMM[1]/=S}let g=2;t===1&&(g=1),t===2&&(g=0);let p=this.scene.crosshairPos[g],A=this.frac2mm(this.scene.crosshairPos);!isNaN(i)&&i!==1/0&&i!==-1/0&&(A=this.frac2mm([.5,.5,.5]),A[g]=i,p=this.mm2frac(A)[g]);const x=A[g];f.clear(f.DEPTH_BUFFER_BIT);let y=this.calculateMvpMatrix2D(e,a.mnMM,a.mxMM,1/0,0,u,h,l);if(i===1/0||i===-1/0){const C=e.slice();this.draw3D(e,y.modelViewProjectionMatrix,y.modelMatrix,y.normalMatrix,u,h);const E=this.screenSlices[this.screenSlices.length-1];E.leftTopWidthHeight=C,E.axCorSag=t,E.sliceFrac=1/0,E.AxyzMxy=this.xyMM2xyzMM(t,p),E.leftTopMM=y.leftTopMM,E.fovMM=y.fovMM;return}f.enable(f.DEPTH_TEST),f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA),f.disable(f.BLEND),f.depthFunc(f.GREATER),f.disable(f.CULL_FACE);let b=this.sliceMMShader;if(this.opts.isV1SliceShader&&(b=this.sliceV1Shader),!b)throw new Error("slice Shader undefined");if(b.use(this.gl),f.uniform1f(b.uniforms.overlayOutlineWidth,this.overlayOutlineWidth),f.uniform1f(b.uniforms.overlayAlphaShader,this.overlayAlphaShader),f.uniform1i(b.uniforms.isAlphaClipDark,this.isAlphaClipDark?1:0),f.uniform1i(b.uniforms.backgroundMasksOverlays,this.backgroundMasksOverlays),f.uniform1f(b.uniforms.drawOpacity,this.drawOpacity),f.enable(f.BLEND),f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA),f.uniform1f(b.uniforms.opacity,this.volumes[0].opacity),f.uniform1i(b.uniforms.axCorSag,t),f.uniform1f(b.uniforms.slice,p),f.uniformMatrix4fv(b.uniforms.frac2mm,!1,s),f.uniformMatrix4fv(b.uniforms.mvpMtx,!1,y.modelViewProjectionMatrix.slice()),f.bindVertexArray(this.genericVAO),f.drawArrays(f.TRIANGLE_STRIP,0,4),f.bindVertexArray(this.unusedVAO),this.screenSlices.push({leftTopWidthHeight:e,axCorSag:t,sliceFrac:p,AxyzMxy:this.xyMM2xyzMM(t,p),leftTopMM:y.leftTopMM,screen2frac:[],fovMM:y.fovMM}),isNaN(i)&&this.drawCrosshairs3D(!0,1,y.modelViewProjectionMatrix,!0,this.opts.isSliceMM),this.opts.meshThicknessOn2D>0){this.opts.meshThicknessOn2D!==1/0&&(y=this.calculateMvpMatrix2D(e,a.mnMM,a.mxMM,this.opts.meshThicknessOn2D,x,u,h,l));const C=he(y.modelViewProjectionMatrix);On(C,C,o),this.drawMesh3D(!0,1,C,y.modelMatrix,y.normalMatrix)}isNaN(i)&&this.drawCrosshairs3D(!1,.15,y.modelViewProjectionMatrix,!0,this.opts.isSliceMM),m&&this.drawSliceOrientationText(e,t),this.readyForSync=!0}draw2D(e,t,i=NaN,s=[NaN,NaN]){const a=[NaN,NaN];if(s[0]===1/0){const o=this.sliceScale().volScale;let l=this.scaleSlice(o[0],o[1],[0,0],[e[2],e[3]]);t===1&&(l=this.scaleSlice(o[0],o[2],[0,0],[e[2],e[3]])),t===2&&(l=this.scaleSlice(o[1],o[2],[0,0],[e[2],e[3]])),s[0]=l[2],s[1]=l[3]}if(isNaN(s[0]))this.draw2DMain(e,t,i);else{const o=e.slice();a[0]=Math.floor(.5*(o[2]-s[0])),a[1]=Math.floor(.5*(o[3]-s[1])),o[0]+=a[0],o[1]+=a[1],o[2]=s[0],o[3]=s[1],this.draw2DMain(o,t,i)}i===1/0||i===-1/0||t===4||e[2]!==0&&e[3]!==0&&this.drawSliceOrientationText(e,t,a)}calculateMvpMatrix(e,t=[0,0,0,0],i,s){(t[2]===0||t[3]===0)&&(t=[0,0,this.gl.canvas.width,this.gl.canvas.height]);const a=t[2]/t[3];let o=this.furthestFromPivot;const l=this.pivot3D,h=It();o=.8*o/this.scene.volScaleMultiplier,a<1?Bl(h,-o,o,-o/a,o/a,o*.01,o*8):Bl(h,-o*a,o*a,-o,o,o*.01,o*8);const u=It();u[0]=-1;const f=ut(0,0,-o*1.8);ha(u,u,f),this.position&&ha(u,u,this.position),Rl(u,u,Fn(270-s)),Il(u,u,Fn(i-180)),ha(u,u,[-l[0],-l[1],-l[2]]);const m=It();Xe(m,u);const g=It();ai(g,m);const p=It();return On(p,h,u),[p,u,g]}calculateModelMatrix(e,t){if(!this.back)throw new Error("back undefined");const i=It();if(i[0]=-1,Rl(i,i,Fn(270-t)),Il(i,i,Fn(e-180)),this.back.obliqueRAS){const s=he(this.back.obliqueRAS);On(i,i,s)}return i}calculateRayDirection(e,t){const i=this.calculateModelMatrix(e,t),s=si(1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1),a=It();On(a,s,i);const o=It();Xe(o,a);const l=Wt(0,0,-1,1);Ve(l,l,o);const h=ut(l[0],l[1],l[2]);xi(h,h);const u=5e-5;return Math.abs(h[0])<u&&(h[0]=u),Math.abs(h[1])<u&&(h[1]=u),Math.abs(h[2])<u&&(h[2]=u),h}sceneExtentsMinMax(e=!0){let t=ut(0,0,0),i=ut(0,0,0);if(this.volumes.length>0){if(!this.volumeObject3D)throw new Error("volumeObject3D undefined");t=ut(this.volumeObject3D.extentsMin[0],this.volumeObject3D.extentsMin[1],this.volumeObject3D.extentsMin[2]),i=ut(this.volumeObject3D.extentsMax[0],this.volumeObject3D.extentsMax[1],this.volumeObject3D.extentsMax[2]),e||(t=ut(this.volumes[0].extentsMinOrtho[0],this.volumes[0].extentsMinOrtho[1],this.volumes[0].extentsMinOrtho[2]),i=ut(this.volumes[0].extentsMaxOrtho[0],this.volumes[0].extentsMaxOrtho[1],this.volumes[0].extentsMaxOrtho[2]))}if(this.meshes.length>0){if(this.volumes.length<1){const a=this.meshes[0].extentsMin,o=this.meshes[0].extentsMax;t=ut(a[0],a[1],a[2]),i=ut(o[0],o[1],o[2])}for(let a=0;a<this.meshes.length;a++){const o=this.meshes[a].extentsMin,l=this.meshes[a].extentsMax,h=ut(o[0],o[1],o[2]);C0(t,t,h);const u=ut(l[0],l[1],l[2]);S0(i,i,u)}}const s=Zt();return te(s,i,t),[t,i,s]}setPivot3D(){const[e,t]=this.sceneExtentsMinMax(),i=Zt();ps(i,e,t),Y8(i,i,.5),this.pivot3D=[i[0],i[1],i[2]],te(i,t,e),this.extentsMin=e,this.extentsMax=t,this.furthestFromPivot=Pn(i)*.5}getMaxVols(){if(this.volumes.length<1)return 0;let e=0;for(let t=0;t<this.volumes.length;t++)e=Math.max(e,this.volumes[t].nFrame4D);return e}detectPartialllyLoaded4D(){if(this.volumes.length<1)return!1;for(let e=0;e<this.volumes.length;e++)if(this.volumes[e].nFrame4D<this.volumes[e].hdr.dims[4])return!0;return!1}drawGraph(){if(this.getMaxVols()<2)return;const e=this.graph;let t=0;if(this.graph.autoSizeMultiplanar&&this.opts.sliceType===3)for(let k=0;k<this.screenSlices.length;k++){const z=this.screenSlices[k].axCorSag;if(z===0&&(t=this.screenSlices[k].leftTopWidthHeight[1]),z!==2)continue;const q=this.screenSlices[k].leftTopWidthHeight.slice();q[1]===t?(e.LTWH[0]=q[0]+q[2],e.LTWH[1]=q[1]):(e.LTWH[0]=q[0],e.LTWH[1]=q[1]+q[3]),e.LTWH[2]=q[2],e.LTWH[3]=q[2]}if(e.opacity<=0||e.LTWH[2]<=5||e.LTWH[3]<=5||Math.floor(e.LTWH[0]+e.LTWH[2])>this.gl.canvas.width||Math.floor(e.LTWH[1]+e.LTWH[3])>this.gl.canvas.height)return;e.backColor=[.15,.15,.15,e.opacity],e.lineColor=[1,1,1,1],this.opts.backColor[0]+this.opts.backColor[1]+this.opts.backColor[2]>1.5&&(e.backColor=[.95,.95,.95,e.opacity],e.lineColor=[0,0,0,1]),e.textColor=e.lineColor.slice(),e.lineThickness=4,e.lineAlpha=1,e.lines=[];const i=[];if(e.vols.length<1)this.volumes[0]!=null&&i.push(0);else for(let k=0;k<e.vols.length;k++){const z=e.vols[k];this.volumes[z]==null||this.volumes[z].nFrame4D<2||i.push(z)}if(i.length<1)return;const s=this.volumes[i[0]].nFrame4D;if(this.graph.selectedColumn=this.volumes[i[0]].frame4D,s<2){H.debug("Unable to generate a graph: Selected volume is 3D not 4D");return}for(let k=0;k<i.length;k++){e.lines[k]=[];const z=this.frac2vox(this.scene.crosshairPos),q=this.volumes[i[k]];let j=q.nFrame4D;j=Math.min(j,s);for(let Q=0;Q<j;Q++){const tt=q.getValue(z[0],z[1],z[2],Q);e.lines[k].push(tt)}}e.lineRGB=[[1,0,0],[0,.7,0],[0,0,1],[1,1,0],[1,0,1],[0,1,1],[1,1,1],[0,0,0]];let a=e.lines[0][0],o=e.lines[0][0];for(let k=0;k<e.lines.length;k++)for(let z=0;z<e.lines[k].length;z++){const q=e.lines[k][z];a=Math.min(q,a),o=Math.max(q,o)}const l=this.volumes[i[0]].cal_min,h=this.volumes[i[0]].cal_max;if(e.isRangeCalMinMax&&l<h&&isFinite(l)&&isFinite(h)&&(a=l,o=h),e.normalizeValues&&o>a){const k=o-a;for(let z=0;z<e.lines.length;z++)for(let q=0;q<e.lines[z].length;q++){const j=e.lines[z][q];e.lines[z][q]=(j-a)/k}a=0,o=1}a>=o&&(o=a+1),this.drawRect(e.LTWH,e.backColor);const[u,f,m]=Mp(a,o),g=Math.max(0,-1*Math.floor(Math.log(u)/Math.log(10)));a=Math.min(f,a),o=Math.max(m,o);function p(k){return k.toFixed(6).replace(/\.?0*$/,"")}const x=.07*(Math.min(e.LTWH[2],e.LTWH[3])/(this.fontMets.size*this.uiData.dpr));let y=this.opts.textHeight*this.gl.canvas.height*x;y<16&&(y=0);let b=0,C=f;if(y>0)for(;C<=o;){const k=C.toFixed(g),z=this.textWidth(y,k);b=Math.max(z,b),C+=u}const E=.05,S=Math.abs(e.LTWH[2]),M=Math.abs(e.LTWH[3]),T=[e.LTWH[0]+E*S+b,e.LTWH[1]+E*M,e.LTWH[2]-b-2*E*S,e.LTWH[3]-y-2*E*M];this.graph.LTWH=e.LTWH,this.graph.plotLTWH=T,this.drawRect(T,this.opts.backColor);const I=o-a,R=T[3]/I,D=T[2]/(e.lines[0].length-1),U=T[1]+T[3];C=f+.5*u;const F=e.lineColor.slice();for(F[3]=.25*e.lineColor[3];C<=o;){const k=U-(C-a)*R;this.drawLine([T[0],k,T[0]+T[2],k],.5*e.lineThickness,F),C+=u}C=f;const P=.5*e.lineThickness;for(;C<=o;){const k=U-(C-a)*R;this.drawLine([T[0]-P,k,T[0]+T[2]+e.lineThickness,k],e.lineThickness,e.lineColor);const z=C.toFixed(g);y>0&&this.drawTextLeft([T[0]-6,k],z,x,e.textColor),C+=u}let N=1;for(;e.lines[0].length/N>20;)N*=5;for(let k=0;k<e.lines[0].length;k+=N){const z=k*D+T[0];let q=e.lineThickness;if(k%2===1)q*=.5,this.drawLine([z,T[1],z,T[1]+T[3]],q,F);else{const j=p(k);y>0&&this.drawTextBelow([z,2+T[1]+T[3]],j,x,e.textColor),this.drawLine([z,T[1],z,T[1]+T[3]],q,e.lineColor)}}for(let k=0;k<e.lines.length;k++){let z=[1,0,0,e.lineAlpha];k<e.lineRGB.length&&(z=[e.lineRGB[k][0],e.lineRGB[k][1],e.lineRGB[k][2],e.lineAlpha]);for(let q=1;q<e.lines[k].length;q++){const j=(q-1)*D,Q=q*D,tt=(e.lines[k][q-1]-a)*R,ot=(e.lines[k][q]-a)*R,Y=[T[0]+j,T[1]+T[3]-tt,T[0]+Q,T[1]+T[3]-ot];this.drawLine(Y,e.lineThickness,z)}}if(e.selectedColumn>=0&&e.selectedColumn<e.lines[0].length){const k=e.selectedColumn*D+T[0];this.drawLine([k,T[1],k,T[1]+T[3]],e.lineThickness,[e.lineRGB[3][0],e.lineRGB[3][1],e.lineRGB[3][2],1])}this.detectPartialllyLoaded4D()&&this.drawTextBelow([T[0]+T[2],T[1]+T[3]+y*.5],"...",x,e.textColor)}depthPicker(e,t){if(!this.uiData.mouseDepthPicker)return;this.uiData.mouseDepthPicker=!1;const i=this.gl,s=this.mousePos[0]*e[2]/e[2],a=i.canvas.height-this.mousePos[1]*e[3]/e[3]-1,o=new Uint8Array(4);if(i.readPixels(s,a,1,1,i.RGBA,i.UNSIGNED_BYTE,o),this.selectedObjectId=o[3],this.selectedObjectId===this.VOLUME_ID){this.scene.crosshairPos=new Float32Array(o.slice(0,3)).map(g=>g/255);return}const l=tE(o);if(l>1)return;const h=(this.mousePos[0]-e[0])/e[2],u=(i.canvas.height-this.mousePos[1]-e[1])/e[3],f=$M(h,u,l,t),m=this.mm2frac(f,0,!0);m[0]<0||m[0]>1||m[1]<0||m[1]>1||m[2]<0||m[2]>1||(this.scene.crosshairPos=this.mm2frac(f,0,!0))}drawImage3D(e,t,i){if(this.volumes.length===0)return;const s=this.gl,a=this.calculateRayDirection(t,i),o=this.volumeObject3D;if(o){s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.enable(s.CULL_FACE),s.cullFace(s.FRONT);let l=this.renderShader;if(this.uiData.mouseDepthPicker&&(l=this.pickingImageShader),l.use(this.gl),s.uniform1i(l.uniforms.backgroundMasksOverlays,this.backgroundMasksOverlays),this.gradientTextureAmount>0){s.activeTexture(Ip),s.bindTexture(s.TEXTURE_3D,this.gradientTexture);const h=this.calculateModelMatrix(t,i),u=It();Xe(u,h);const f=It();ai(f,u),s.uniformMatrix4fv(l.uniforms.normMtx,!1,f)}this.drawBitmap&&this.drawBitmap.length>8?s.uniform2f(l.uniforms.renderDrawAmbientOcclusionXY,this.renderDrawAmbientOcclusion,this.drawOpacity):s.uniform2f(l.uniforms.renderDrawAmbientOcclusionXY,this.renderDrawAmbientOcclusion,0),s.uniformMatrix4fv(l.uniforms.mvpMtx,!1,e),s.uniformMatrix4fv(l.uniforms.matRAS,!1,this.back.matRAS),s.uniform3fv(l.uniforms.rayDir,a),this.gradientTextureAmount<0?s.uniform4fv(l.uniforms.clipPlane,[this.scene.crosshairPos[0],this.scene.crosshairPos[1],this.scene.crosshairPos[2],30]):s.uniform4fv(l.uniforms.clipPlane,this.scene.clipPlane),s.uniform1f(l.uniforms.drawOpacity,1),s.bindVertexArray(o.vao),s.drawElements(o.mode,o.indexCount,s.UNSIGNED_SHORT,0),s.bindVertexArray(this.unusedVAO)}}drawOrientationCube(e,t=0,i=0){if(!this.opts.isOrientCube)return;const s=.05*Math.min(e[2],e[3]);if(s<5)return;const a=this.gl;a.enable(a.CULL_FACE),a.cullFace(a.BACK),this.orientCubeShader.use(this.gl),a.bindVertexArray(this.orientCubeShaderVAO);const o=It(),l=It();Bl(l,0,a.canvas.width,0,a.canvas.height,-10*s,10*s);let h=0;e[1]===0&&(h=a.canvas.height-this.effectiveCanvasHeight()),ha(o,o,[1.8*s+e[0],h+1.8*s+e[1],0]),np(o,o,[s,s,s]),Rl(o,o,Fn(270-i)),Il(o,o,Fn(-t));const u=It();On(u,l,o),a.uniformMatrix4fv(this.orientCubeShader.uniforms.u_matrix,!1,u),a.drawArrays(a.TRIANGLE_STRIP,0,168),a.bindVertexArray(this.unusedVAO),this.gl.disable(this.gl.CULL_FACE)}createOnLocationChange(e=NaN){const[t,i,s]=this.sceneExtentsMinMax(!0),a=Math.max(Math.max(s[0],s[1]),s[2]);function o(g){return Math.max(0,-Math.ceil(Math.log10(Math.abs(g))))}let l=o(a*.001);const h=this.frac2mm(this.scene.crosshairPos,0,!0);function u(g,p=0){return parseFloat(g.toFixed(p))}let f=u(h[0],l)+"×"+u(h[1],l)+"×"+u(h[2],l);if(this.volumes.length>0&&this.volumes[0].nFrame4D>0&&(f+="×"+u(this.volumes[0].frame4D)),this.volumes.length>0){let g=" = ";for(let x=0;x<this.volumes.length;x++){const y=this.volumes[x].mm2vox(h);let b=this.volumes[x].getValue(y[0],y[1],y[2],this.volumes[x].frame4D);if(l=3,this.volumes[x].colormapLabel!==null){const C=Math.round(b);C>=0&&C<this.volumes[x].colormapLabel.labels.length?g+=this.volumes[x].colormapLabel.labels[C]:g+="undefined("+u(b,l)+")"}else g+=u(b,l);this.volumes[x].imaginary&&(b=this.volumes[x].getValue(y[0],y[1],y[2],this.volumes[x].frame4D,!0),b>=0&&(g+="+"),g+=u(b,l)),g+="   "}f+=g;const p=this.back.dimsRAS,A=p[1]*p[2]*p[3];if(this.drawBitmap&&this.drawBitmap.length===A){const x=this.frac2vox(this.scene.crosshairPos),y=x[0]+x[1]*p[1]+x[2]*p[1]*p[2];f+=" "+this.drawLut.labels[this.drawBitmap[y]]}}const m={mm:this.frac2mm(this.scene.crosshairPos,0,!0),axCorSag:e,vox:this.frac2vox(this.scene.crosshairPos),frac:this.scene.crosshairPos,xy:[this.mousePos[0],this.mousePos[1]],values:this.volumes.map(g=>{const p=this.frac2mm(this.scene.crosshairPos,0,!0),A=g.mm2vox(p),x=g.getValue(A[0],A[1],A[2],g.frame4D);return{name:g.name,value:x,id:g.id,mm:p,vox:A}}),string:f};this.onLocationChange(m)}addLabel(e,t,i,s,a){const o={textColor:this.opts.legendTextColor,textScale:1,textAlignment:"left",lineWidth:0,lineColor:this.opts.legendTextColor,lineTerminator:"none",bulletScale:0,bulletColor:this.opts.legendTextColor},l=t?{...o,...t}:{...o},h=new t5(e,{...l},i,s,a);return this.document.labels.push(h),h}calculateScreenPoint(e,t,i){const s=an();return Ve(s,[...e,1],t),s[3]!==0&&(s[0]=(s[0]/s[3]+1)*.5*i[2],s[1]=(1-s[1]/s[3])*.5*i[3],s[2]/=s[3],s[0]+=i[0],s[1]+=i[1]),s}getLabelAtPoint(e){const i=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,s=this.opts.textHeight*this.gl.canvas.height*1;for(const f of this.document.labels){if(f.anchor==null||f.anchor===0)continue;const m=this.opts.textHeight*this.gl.canvas.height*f.style.textScale,g=this.textHeight(m,f.text),p=this.textWidth(m,f.text);if(!(f.anchor&1&&e[0]>p)&&!(f.anchor&2&&(e[0]<(this.gl.canvas.width-p)/2||e[0]>(this.gl.canvas.width+p)/2))&&!(f.anchor&4&&e[0]<this.gl.canvas.width-p)&&!(f.anchor&8&&(e[1]<s/2||e[1]>g+s/2))&&!(f.anchor&16&&(e[1]<(this.gl.canvas.height-g-s)/2||e[1]>(this.gl.canvas.height+g-s/2)/2))&&!(f.anchor&32&&(e[1]<this.gl.canvas.height-g-s||e[1]>this.gl.canvas.height-s/2)))return f}H.debug("screenPoint",e);const a=this.getLegendPanelHeight(),o=this.getLegendPanelWidth(),l=this.gl.canvas.width-o;let h=(this.canvas.height-a)/2;if(H.debug("panelrect",l,h,l+o,h+a),e[0]<l||e[1]<h||e[0]>l+o||e[1]>h+a)return null;const u=this.getConnectomeLabels();for(const f of u){const m=this.opts.textHeight*this.gl.canvas.height*f.style.textScale,g=this.textHeight(m,f.text);if(e[1]>=h&&e[1]<=h+g+i/2)return f;h+=g,h+=i/2}return null}drawLabelLine(e,t,i,s,a=!1){const o=Array.isArray(e.points)&&Array.isArray(e.points[0])?e.points:[e.points];for(const l of o){const h=this.calculateScreenPoint(l,i,s);a?this.drawDottedLine([...t,h[0],h[1]],e.style.lineWidth,e.style.lineColor):this.draw3DLine(t,[h[0],h[1],h[2]],e.style.lineWidth,e.style.lineColor)}}draw3DLabel(e,t,i,s,a,o,l){const h=e.text,u=t[0],f=t[1],m=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,g=this.textHeight(e.style.textScale,h)*m;if(e.style.lineWidth>0&&Array.isArray(e.points)&&this.drawLabelLine(e,[u,f+g],i,s,l),e.style.bulletScale){const A=e.style.bulletScale*g,x=g-A,y=f+x/2+A/2,b=u+(a-A)/2;this.drawCircle([b,y,A,A],e.style.bulletColor)}let p=u;if(o)if(e.style.textAlignment!=="left"){const A=this.textWidth(e.style.textScale,e.text)*m;if(e.style.textAlignment==="right")p=u+o-m*1.5-A;else{const x=o-(a||m);p+=(x-A)/2}}else p+=a;this.drawText([p,f],h,e.style.textScale,e.style.textColor)}draw3DLabels(e,t,i=!1){const s=this.getConnectomeLabels();if(!this.opts.showLegend||s.length===0)return;if(!this.canvas)throw new Error("canvas undefined");const a=this.gl;a.disable(a.CULL_FACE),a.viewport(0,0,this.canvas.width,this.canvas.height);const l=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,h=this.getBulletMarginWidth(),u=this.getLegendPanelHeight(),f=this.getLegendPanelWidth(),m=a.canvas.width-f;let g=(this.canvas.height-u)/2;this.drawRect([a.canvas.width-f,g,f-l,u],this.opts.legendBackgroundColor);const p=a.getParameter(a.BLEND),A=a.getParameter(a.DEPTH_FUNC);i||(a.disable(a.BLEND),a.depthFunc(a.GREATER));for(const x of s){this.draw3DLabel(x,[m,g],e,t,h,f,i);const y=this.opts.textHeight*this.gl.canvas.height*x.style.textScale,b=this.textHeight(y,x.text);g+=b,g+=l/2}i||(a.depthFunc(A),p&&a.enable(a.BLEND))}drawAnchoredLabels(){const e=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1,t=this.document.labels.filter(i=>i.anchor!=null&&i.anchor!==0);for(const i of t){const s=i.text,a=this.textHeight(i.style.textScale,s)*e,o=this.textWidth(i.style.textScale,s)*e;let l,h;const f=this.opts.textHeight*this.gl.canvas.height*1,m=f;let g=f/4,p=0,A=0;i.anchor&1&&(l=0),i.anchor&4&&(l=this.canvas.width-o,p-=f/4),i.anchor&2&&(l=(this.canvas.width-o)/2,p-=f/4,g+=f/4),i.anchor&8&&(h=0),i.anchor&16&&(h=(this.canvas.height-a-f)/2,A-=f/4),i.anchor&32&&(h=this.canvas.height-a-f,A-=f/4),this.drawRect([l+p,h+A,o+g,a+m],i.style.backgroundColor),this.draw3DLabel(i,[l,h])}}draw3D(e=[0,0,0,0],t=null,i=null,s=null,a=null,o=0){const l=a!==null;this.setPivot3D(),l||(a=this.scene.renderAzimuth,o=this.scene.renderElevation);const h=this.gl;t===null&&([t,i,s]=this.calculateMvpMatrix(null,e,a,o));let u=[...e];if(e[2]===0||e[3]===0?(e=[0,0,h.canvas.width,h.canvas.height],u=[...e],this.screenSlices.push({leftTopWidthHeight:e,axCorSag:4,sliceFrac:0,AxyzMxy:[],leftTopMM:[],fovMM:[Ep(i),0]})):(this.screenSlices.push({leftTopWidthHeight:e.slice(),axCorSag:4,sliceFrac:0,AxyzMxy:[],leftTopMM:[],fovMM:[Ep(i),0]}),e[1]=h.canvas.height-e[3]-e[1]),h.enable(h.DEPTH_TEST),h.depthFunc(h.ALWAYS),h.depthMask(!0),h.clearDepth(0),this.draw3DLabels(t,u,!1),h.viewport(e[0],e[1],e[2],e[3]),this.volumes.length>0&&(this.updateInterpolation(0,!0),this.updateInterpolation(1,!0),this.drawImage3D(t,a,o)),this.updateInterpolation(0),this.updateInterpolation(1),l||this.drawCrosshairs3D(!0,1,t),this.drawMesh3D(!0,1,t,i,s),this.uiData.mouseDepthPicker){this.depthPicker(e,t),this.createOnLocationChange(),this.draw3D(e,t,i,s,a,o);return}this.opts.meshXRay>0&&this.drawMesh3D(!1,this.opts.meshXRay,t,i,s),this.draw3DLabels(t,u,!1),h.viewport(e[0],e[1],e[2],e[3]),l||this.drawCrosshairs3D(!1,.15,t),h.viewport(0,0,h.canvas.width,h.canvas.height),this.drawOrientationCube(e,a,o);const f="azimuth: "+this.scene.renderAzimuth.toFixed(0)+" elevation: "+this.scene.renderElevation.toFixed(0);return this.readyForSync=!0,this.sync(),this.draw3DLabels(t,u,!0),f}drawMesh3D(e=!0,t=1,i,s,a){if(this.meshes.length<1)return;const o=this.gl;i||([i,s,a]=this.calculateMvpMatrix(this.volumeObject3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),o.enable(o.DEPTH_TEST),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.disable(o.BLEND),o.depthFunc(o.GREATER),o.disable(o.CULL_FACE),e?(o.disable(o.BLEND),o.depthFunc(o.GREATER)):(o.enable(o.BLEND),o.depthFunc(o.ALWAYS),o.enable(o.CULL_FACE)),o.cullFace(o.BACK);let l=this.meshShaders[0].shader,h=!1;for(let u=0;u<this.meshes.length;u++)if(this.meshes[u].visible!==!1&&(l=this.meshShaders[this.meshes[u].meshShaderIndex].shader,this.uiData.mouseDepthPicker&&(l=this.pickingMeshShader),l.use(this.gl),o.uniformMatrix4fv(l.uniforms.mvpMtx,!1,i),o.uniformMatrix4fv(l.uniforms.normMtx,!1,a),o.uniform1f(l.uniforms.opacity,t),!(this.meshes[u].indexCount<3))){if(this.meshes[u].offsetPt0&&(this.meshes[u].fiberSides<3||this.meshes[u].fiberRadius<=0)){h=!0;continue}l.isMatcap&&(o.activeTexture(Rp),o.bindTexture(o.TEXTURE_2D,this.matCapTexture)),o.bindVertexArray(this.meshes[u].vao),o.drawElements(o.TRIANGLES,this.meshes[u].indexCount,o.UNSIGNED_INT,0),o.bindVertexArray(this.unusedVAO)}if(!h){o.enable(o.BLEND),o.depthFunc(o.ALWAYS);return}l=this.fiberShader,l.use(this.gl),o.uniformMatrix4fv(l.uniforms.mvpMtx,!1,i),o.uniform1f(l.uniforms.opacity,t);for(let u=0;u<this.meshes.length;u++)this.meshes[u].indexCount<3||this.meshes[u].offsetPt0&&(this.meshes[u].fiberSides>=3&&this.meshes[u].fiberRadius>0||(o.bindVertexArray(this.meshes[u].vaoFiber),o.drawElements(o.LINE_STRIP,this.meshes[u].indexCount,o.UNSIGNED_INT,0),o.bindVertexArray(this.unusedVAO)));o.enable(o.BLEND),o.depthFunc(o.ALWAYS),this.readyForSync=!0}drawCrosshairs3D(e=!0,t=1,i=null,s=!1,a=!0){var A,x;if(!this.opts.show3Dcrosshair&&!s||this.opts.crosshairWidth<=0&&s)return;const o=this.gl,l=this.frac2mm(this.scene.crosshairPos,0,a);let h=1;const[u,f,m]=this.sceneExtentsMinMax(a);if(this.volumes.length>0){if(!this.back)throw new Error("back undefined");h=.5*Math.min(Math.min(this.back.pixDims[1],this.back.pixDims[2]),this.back.pixDims[3])}else(m[0]<50||m[0]>1e3)&&(h=m[0]*.02);if(h*=this.opts.crosshairWidth,((A=this.opts)==null?void 0:A.crosshairWidthUnit)==="percent"&&(h=m[0]*this.opts.crosshairWidth*.5*.01),((x=this.opts)==null?void 0:x.crosshairWidthUnit)==="mm"&&(h=this.opts.crosshairWidth*.5),(this.crosshairs3D===null||this.crosshairs3D.mm[0]!==l[0]||this.crosshairs3D.mm[1]!==l[1]||this.crosshairs3D.mm[2]!==l[2])&&(this.crosshairs3D!==null&&(o.deleteBuffer(this.crosshairs3D.indexBuffer),o.deleteBuffer(this.crosshairs3D.vertexBuffer)),this.crosshairs3D=As.generateCrosshairs(this.gl,1,l,u,f,h,20,this.opts.crosshairGap),this.crosshairs3D.mm=l),!this.surfaceShader)throw new Error("surfaceShader undefined");const g=this.surfaceShader;g.use(this.gl),i==null&&([i]=this.calculateMvpMatrix(this.crosshairs3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),o.uniformMatrix4fv(g.uniforms.mvpMtx,!1,i),o.disable(o.CULL_FACE),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.crosshairs3D.indexBuffer),o.enable(o.DEPTH_TEST);const p=[...this.opts.crosshairColor];e?(o.disable(o.BLEND),o.depthFunc(o.GREATER)):(o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.depthFunc(o.ALWAYS)),p[3]=t,o.uniform4fv(g.uniforms.surfaceColor,p),o.bindVertexArray(this.crosshairs3D.vao),o.drawElements(o.TRIANGLES,this.crosshairs3D.indexCount,o.UNSIGNED_INT,0),o.bindVertexArray(this.unusedVAO)}mm2frac(e,t=0,i=!1){if(this.volumes.length<1){const s=ut(.1,.5,.5),[a,o,l]=this.sceneExtentsMinMax();return s[0]=(e[0]-a[0])/l[0],s[1]=(e[1]-a[1])/l[1],s[2]=(e[2]-a[2])/l[2],isFinite(s)||(isFinite(s[0])||(s[0]=.5),isFinite(s[1])||(s[1]=.5),isFinite(s[2])||(s[2]=.5),this.meshes.length<1&&H.error("mm2frac() not finite: objects not (yet) loaded.")),s}return this.volumes[t].convertMM2Frac(e,i||this.opts.isSliceMM)}vox2frac(e,t=0){return this.volumes[t].convertVox2Frac(e)}frac2vox(e,t=0){return this.volumes.length<=t?[0,0,0]:this.volumes[t].convertFrac2Vox(e)}moveCrosshairInVox(e,t,i){const s=this.frac2vox(this.scene.crosshairPos);s[0]+=e,s[1]+=t,s[2]+=i,s[0]=uf(s[0],0,this.volumes[0].dimsRAS[1]-1),s[1]=uf(s[1],0,this.volumes[0].dimsRAS[2]-1),s[2]=uf(s[2],0,this.volumes[0].dimsRAS[3]-1),this.scene.crosshairPos=this.vox2frac(s),this.createOnLocationChange(),this.drawScene()}frac2mm(e,t=0,i=!1){const s=Wt(e[0],e[1],e[2],1);if(this.volumes.length>0)return this.volumes[t].convertFrac2MM(e,i||this.opts.isSliceMM);{const[a,o]=this.sceneExtentsMinMax(),l=(h,u,f)=>h*(1-f)+u*f;s[0]=l(a[0],o[0],e[0]),s[1]=l(a[1],o[1],e[1]),s[2]=l(a[2],o[2],e[2])}return s}screenXY2TextureFrac(e,t,i,s=!0){const a=ut(-1,-1,-1),o=this.screenSlices[i].axCorSag;if(o>2)return a;const l=this.screenSlices[i].leftTopWidthHeight.slice();let h=!1;l[2]<0&&(h=!0,l[0]+=l[2],l[2]=-l[2]);let u=(e-l[0])/l[2];h&&(u=1-u);const f=1-(t-l[1])/l[3];if(u<0||u>1||f<0||f>1||this.screenSlices[i].AxyzMxy.length<4)return a;let m=ut(0,0,0);m[0]=this.screenSlices[i].leftTopMM[0]+u*this.screenSlices[i].fovMM[0],m[1]=this.screenSlices[i].leftTopMM[1]+f*this.screenSlices[i].fovMM[1];const g=this.screenSlices[i].AxyzMxy;m[2]=g[2]+g[4]*(m[1]-g[1])-g[3]*(m[0]-g[0]),o===1&&(m=Ue(m,[0,2,1])),o===2&&(m=Ue(m,[2,0,1]));const p=this.mm2frac(m);return s&&(p[0]<0||p[0]>1||p[1]<0||p[1]>1||p[2]<0||p[2]>1)?a:p}canvasPos2frac(e){for(let t=0;t<this.screenSlices.length;t++){const i=this.screenXY2TextureFrac(e[0],e[1],t);if(i[0]>=0)return i}return[-1,-1,-1]}scaleSlice(e,t,i=[0,0],s=[0,0]){const a=s[0]===0?this.effectiveCanvasWidth()-i[0]:s[0]-i[0],o=s[1]===0?this.effectiveCanvasHeight()-i[1]:s[1]-i[1];let l=a/e;t*l>o&&(l=o/t);const h=e*l,u=t*l;return[(a-h)*.5,(o-u)*.5,h,u,l]}drawThumbnail(){if(!this.bmpShader)throw new Error("bmpShader undefined");this.bmpShader.use(this.gl),this.gl.uniform2f(this.bmpShader.uniforms.canvasWidthHeight,this.gl.canvas.width,this.gl.canvas.height);let e=this.gl.canvas.height,t=this.gl.canvas.height*this.bmpTextureWH;t>this.gl.canvas.width&&(e=this.gl.canvas.width/this.bmpTextureWH,t=this.gl.canvas.width),this.gl.uniform4f(this.bmpShader.uniforms.leftTopWidthHeight,0,0,t,e),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawLine(e,t=1,i=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),i[3]<0&&(i=this.opts.crosshairColor),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,i),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}draw3DLine(e,t,i=1,s=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.line3DShader)throw new Error("line3DShader undefined");this.line3DShader.use(this.gl),s[3]<0&&(s=this.opts.crosshairColor),this.gl.uniform4fv(this.line3DShader.uniforms.lineColor,s),this.gl.uniform2fv(this.line3DShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.line3DShader.uniforms.thickness,i),this.gl.uniform2fv(this.line3DShader.uniforms.startXY,e),this.gl.uniform3fv(this.line3DShader.uniforms.endXYZ,t),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawDottedLine(e,t=1,i=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl);const s=i[3]<0?[...this.opts.crosshairColor]:[...i];s[3]=.3;const a=op(e[2]-e[0],e[3]-e[1]),o=lp(a);J8(a,a);const h=this.opts.textHeight*Math.min(this.gl.canvas.height,this.gl.canvas.width)*1;W8(a,a,h/2);const u=lp(a);let f=Math.floor(o/u);o%u&&f++;const m=[e[0],e[1]];this.gl.uniform4fv(this.lineShader.uniforms.lineColor,s),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t);for(let g=0;g<f-1;g++){if(g%2){m[0]+=a[0],m[1]+=a[1];continue}const p=[m[0],m[1],m[0]+a[0],m[1]+a[1]];this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,p),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),m[0]+=a[0],m[1]+=a[1]}this.gl.bindVertexArray(this.unusedVAO)}drawGraphLine(e,t=[1,0,0,.5],i=2){this.drawLine(e,i,t)}drawCrossLinesMM(e,t,i,s,a){if(e<0||this.screenSlices.length<=e)return;const o=this.screenSlices[e];let l=o.sliceFrac;l===1/0&&H.warn("Rendering approximate cross lines in world view mode"),l===1/0&&(l=.5);let u=s.slice(),f=a.slice();const m=Math.max(1,this.opts.crosshairWidth);t===1&&(u=i.slice()),t===2&&(u=i.slice(),f=s.slice());function g(p){const A=op(0,0);return A[0]=o.leftTopWidthHeight[0]+(p[0]-o.leftTopMM[0])/o.fovMM[0]*o.leftTopWidthHeight[2],A[1]=o.leftTopWidthHeight[1]+o.leftTopWidthHeight[3]-(p[1]-o.leftTopMM[1])/o.fovMM[1]*o.leftTopWidthHeight[3],A}if(u.length>0&&t===0){const p=l,A=1;for(let x=0;x<u.length;x++){const y=this.frac2mm([.5,.5,.5]);y[A]=u[x];let b=this.mm2frac(y);b=b[A];let C=this.frac2mm([0,b,p]);C=Ue(C,[0,1,2]);let E=this.frac2mm([1,b,p]);E=Ue(E,[0,1,2]),C=g(C),E=g(E),this.drawLine([C[0],C[1],E[0],E[1]],m)}}if(u.length>0&&t===1){const p=l,A=2;for(let x=0;x<u.length;x++){const y=this.frac2mm([.5,.5,.5]);y[A]=u[x];let b=this.mm2frac(y);b=b[A];let C=this.frac2mm([0,p,b]);C=Ue(C,[0,2,1]);let E=this.frac2mm([1,p,b]);E=Ue(E,[0,2,1]),C=g(C),E=g(E),this.drawLine([C[0],C[1],E[0],E[1]],m)}}if(u.length>0&&t===2){const p=l,A=2;for(let x=0;x<u.length;x++){const y=this.frac2mm([.5,.5,.5]);y[A]=u[x];let b=this.mm2frac(y);b=b[A];let C=this.frac2mm([p,0,b]);C=Ue(C,[1,2,0]);let E=this.frac2mm([p,1,b]);E=Ue(E,[1,2,0]),C=g(C),E=g(E),this.drawLine([C[0],C[1],E[0],E[1]],m)}}if(f.length>0&&t===0){const p=l,A=0;for(let x=0;x<f.length;x++){const y=this.frac2mm([.5,.5,.5]);y[A]=f[x];let b=this.mm2frac(y);b=b[A];let C=this.frac2mm([b,0,p]);C=Ue(C,[0,1,2]);let E=this.frac2mm([b,1,p]);E=Ue(E,[0,1,2]),C=g(C),E=g(E),this.drawLine([C[0],C[1],E[0],E[1]],m)}}if(f.length>0&&t===1){const p=l,A=0;for(let x=0;x<f.length;x++){const y=this.frac2mm([.5,.5,.5]);y[A]=f[x];let b=this.mm2frac(y);b=b[A];let C=this.frac2mm([b,p,0]);C=Ue(C,[0,2,1]);let E=this.frac2mm([b,p,1]);E=Ue(E,[0,2,1]),C=g(C),E=g(E),this.drawLine([C[0],C[1],E[0],E[1]],m)}}if(f.length>0&&t===2){const p=l,A=1;for(let x=0;x<f.length;x++){const y=this.frac2mm([.5,.5,.5]);y[A]=f[x];let b=this.mm2frac(y);b=b[A];let C=this.frac2mm([p,b,0]);C=Ue(C,[1,2,0]);let E=this.frac2mm([p,b,1]);E=Ue(E,[1,2,0]),C=g(C),E=g(E),this.drawLine([C[0],C[1],E[0],E[1]],m)}}}drawCrossLines(e,t,i,s,a){if(e<0||this.screenSlices.length<=e)return;if(this.opts.isSliceMM)return this.drawCrossLinesMM(e,t,i,s,a);if(this.screenSlices[e].sliceFrac===1/0)return this.drawCrossLinesMM(e,t,i,s,a);const o=this.screenSlices[e];let l=s.slice(),h=a.slice();if(t===1&&(l=i.slice()),t===2&&(l=i.slice(),h=s.slice()),l.length>0){const u=o.leftTopWidthHeight.slice();let f=2;t===0&&(f=1);const m=this.frac2mm([.5,.5,.5]);for(let g=0;g<l.length;g++){m[f]=l[g];const p=this.mm2frac(m);this.drawRect([u[0],u[1]+u[3]-p[f]*u[3],u[2],1])}}if(h.length>0){const u=o.leftTopWidthHeight.slice(),f=o.fovMM[0]<0;let m=0;t===2&&(m=1);const g=this.frac2mm([.5,.5,.5]);for(let p=0;p<h.length;p++){g[m]=h[p];const A=this.mm2frac(g);f?this.drawRect([u[0]+(u[2]-A[m]*u[2]),u[1],1,u[3]]):this.drawRect([u[0]+A[m]*u[2],u[1],1,u[3]])}}}drawMosaic(e){if(this.volumes.length===0){H.debug("Unable to draw mosaic until voxel-based image is loaded");return}this.screenSlices=[];const t=this.screenFieldOfViewMM(0,!0),i=this.screenFieldOfViewMM(0);e=e.replaceAll(";"," ;").trim();const s=[],a=[],o=[],l=e.split(/\s+/);let h=1;const u=this.opts.textHeight;let f=0,m=0;for(let g=0;g<2;g++){let p=!1,A=!1;p=!1;let x=0,y=0,b=0,C=0,E=!1,S=0;for(let I=0;I<l.length;I++){const R=l[I];if(R.includes("X")){A=!0;continue}if(R.includes("L")){E=!R.includes("-");continue}if(R.includes("V")||R.includes("H")){I++;continue}R.includes("A")&&(S=0),R.includes("C")&&(S=1),R.includes("S")&&(S=2),R.includes("R")&&(p=!0),R.includes(";")&&(b+=x,C=Math.max(C,y),x=0,y=0);const D=parseFloat(R);if(isNaN(D))continue;let U=0,F=0,P=i;if(p&&(P=t),S===2?U=P[1]:U=P[0],S===0?F=P[1]:F=P[2],g===0)p||(S===0&&s.push(D),S===1&&a.push(D),S===2&&o.push(D));else{const N=[f+h*y,m+h*b,h*U,h*F];if(this.opts.textHeight=E?u:0,p){let k=D<0?-1/0:1/0;Object.is(D,-0)&&(k=-1/0),this.draw2D(N,S,k)}else this.draw2D(N,S,D);A&&this.drawCrossLines(this.screenSlices.length-1,S,s,a,o),p=!1,A=!1}y+=U,x=Math.max(x,F)}if(b+=x,C=Math.max(C,y),C<=0||b<=0)break;const M=this.gl.canvas.width/C,T=this.effectiveCanvasHeight()/b;h=Math.min(M,T),this.opts.centerMosaic&&(f=Math.floor(.5*(this.gl.canvas.width-C*h)),m=Math.floor(.5*(this.effectiveCanvasHeight()-b*h)))}this.opts.textHeight=u}drawSceneCore(){var a,o,l;if(!this.initialized)return;if(this.colorbarHeight=0,this.gl.clearColor(this.opts.backColor[0],this.opts.backColor[1],this.opts.backColor[2],this.opts.backColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.bmpTexture&&this.thumbnailVisible){this.drawThumbnail();return}let e="";if(this.volumes.length===0||typeof this.volumes[0].dims>"u"){if(this.meshes.length>0){this.screenSlices=[],this.draw3D(),this.opts.isColorbar&&this.drawColorbar();return}this.drawLoadingText(this.opts.loadingText);return}if(this.back===null)return;if(this.uiData.isDragging&&this.scene.clipPlaneDepthAziElev[0]<1.8&&this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])>=0){const h=this.uiData.dragStart[0]-this.uiData.dragEnd[0],u=this.uiData.dragStart[1]-this.uiData.dragEnd[1],f=this.uiData.dragClipPlaneStartDepthAziElev.slice();if(f[1]-=h,f[1]=f[1]%360,f[2]+=u,f[1]!==this.scene.clipPlaneDepthAziElev[1]||f[2]!==this.scene.clipPlaneDepthAziElev[2])return this.scene.clipPlaneDepthAziElev=f,this.setClipPlane(this.scene.clipPlaneDepthAziElev)}if(this.sliceMosaicString.length<1&&this.opts.sliceType===4){this.opts.isColorbar&&this.reserveColorbarPanel(),this.screenSlices=[],this.draw3D(),this.opts.isColorbar&&this.drawColorbar();return}this.opts.isColorbar&&this.reserveColorbarPanel();const t=this.getMaxVols(),i=this.opts.sliceType===3&&t>1&&this.graph.autoSizeMultiplanar&&this.graph.opacity>0;if(this.sliceMosaicString.length>0)this.drawMosaic(this.sliceMosaicString);else{const h=[0,0];let u=!1;if(this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.screenSlices=[],this.opts.sliceType===0)this.draw2D([0,0,0,0],0);else if(this.opts.sliceType===1)this.draw2D([0,0,0,0],1);else if(this.opts.sliceType===2)this.draw2D([0,0,0,0],2);else{let f=function(tt,ot){return[(tt-1)*x+tt*y,(ot-1)*x+ot*y]},m=!1;this.opts.multiplanarForceRender?(m=!0,this.opts.multiplanarForceRender?this.opts.multiplanarShowRender=1:this.opts.multiplanarShowRender=2,delete this.opts.multiplanarForceRender):this.opts.multiplanarShowRender===1&&(m=!0);const g=isFinite(this.drawPenLocation[0])&&this.opts.drawingEnabled,{volScale:p}=this.sliceScale(),A=p.slice();this.opts.multiplanarEqualSize&&(p[0]=1,p[1]=1,p[2]=1),typeof this.opts.multiplanarPadPixels!="number"&&H.debug("multiplanarPadPixels must be numeric");const x=parseFloat(`${this.opts.multiplanarPadPixels}`);let y=this.opts.tileMargin;y<0&&(y=2*(2+Math.ceil(Math.max(this.opts.textHeight,.01)*Math.min(this.gl.canvas.height,this.gl.canvas.width))));let b=[this.effectiveCanvasWidth(),this.effectiveCanvasHeight()];this.opts.heroImageFraction>0&&this.opts.heroImageFraction<1&&(m=!1,u=!0,b[0]>b[1]&&this.opts.multiplanarLayout!==3?h[0]=b[0]*this.opts.heroImageFraction:h[1]=b[1]*this.opts.heroImageFraction,b=[b[0]-h[0],b[1]-h[1]]);const C=this.scaleSlice(p[0]+p[1],p[1]+p[2],f(2,2),b),E=Math.max(Math.max(p[1],p[2]),p[0]),S=this.scaleSlice(p[0]+p[0]+p[1],Math.max(p[1],p[2]),f(3,1),b),M=this.scaleSlice(p[0]+p[0]+p[1]+E,Math.max(p[1],p[2]),f(4,1),b),T=this.scaleSlice(E,p[1]+p[2]+p[2],f(1,3),b),I=this.scaleSlice(E,p[1]+p[2]+p[2]+E,f(1,4),b);let R=!g&&(t<2||!i),D=!1,U=!1,F=!1;this.opts.multiplanarLayout===1?D=!0:this.opts.multiplanarLayout===2?U=!0:this.opts.multiplanarLayout===3?F=!0:T[4]>S[4]&&T[4]>C[4]?D=!0:S[4]>C[4]?F=!0:U=!0;let P=C;if(D?(P=T,!u&&(m||this.opts.multiplanarShowRender===2&&I[4]>=T[4])?P=I:R=!1):F&&(P=S,!u&&(m||this.opts.multiplanarShowRender===2&&M[4]>=S[4])?P=M:R=!1),u){const tt=h[0]===0?this.effectiveCanvasWidth():h[0],ot=h[1]===0?this.effectiveCanvasHeight():h[1];if(((a=this.opts)==null?void 0:a.heroSliceType)===0||((o=this.opts)==null?void 0:o.heroSliceType)===1||((l=this.opts)==null?void 0:l.heroSliceType)===2)this.draw2D([0,0,tt,ot],this.opts.heroSliceType,NaN,[1/0,1/0]);else{const Y=P.slice(),it=this.effectiveCanvasWidth();tt===it&&(Y[0]=0),this.draw3D([Y[0],0,tt,ot])}P[0]+=h[0],P[1]+=h[1],R=!1}const N=p[0]*P[4]+y,k=p[1]*P[4]+y,z=p[2]*P[4]+y,q=A[0]*P[4],j=A[1]*P[4],Q=A[2]*P[4];if(D){if(this.draw2D([P[0],P[1],N,k],0,NaN,[q,j]),this.draw2D([P[0],P[1]+k+x,N,z],1,NaN,[q,Q]),this.draw2D([P[0],P[1]+k+x+z+x,k,z],2,NaN,[j,Q]),R){const tt=E*P[4];this.draw3D([P[0],P[1]+k+z+z+x*3,tt,tt])}}else if(F){if(this.draw2D([P[0],P[1],N,k],0,NaN,[q,j]),this.draw2D([P[0]+N+x,P[1],N,z],1,NaN,[q,Q]),this.draw2D([P[0]+N+N+x*2,P[1],k,z],2,NaN,[j,Q]),R){const tt=E*P[4];this.draw3D([P[0]+N+N+k+x*3,P[1],tt,tt])}}else U&&(m||(R=!1),this.opts.multiplanarShowRender===2&&(R=!0),u&&(R=!1),this.draw2D([P[0],P[1]+z+x,N,k],0,NaN,[q,j]),this.draw2D([P[0],P[1],N,z],1,NaN,[q,Q]),this.draw2D([P[0]+N+x,P[1],k,z],2,NaN,[j,Q]),R&&this.draw3D([P[0]+N+x,P[1]+z+x,k,k]))}}if(this.opts.isRuler&&this.drawRuler(),this.opts.isColorbar&&this.drawColorbar(),i&&this.drawGraph(),this.uiData.isDragging){if(this.uiData.mouseButtonCenterDown){this.dragForCenterButton([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.opts.dragMode===4){this.dragForSlicer3D([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.opts.dragMode===3){this.dragForPanZoom([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])>=0)return;if(this.opts.dragMode===2){this.drawMeasurementTool([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}const h=Math.abs(this.uiData.dragStart[0]-this.uiData.dragEnd[0]),u=Math.abs(this.uiData.dragStart[1]-this.uiData.dragEnd[1]);this.drawSelectionBox([Math.min(this.uiData.dragStart[0],this.uiData.dragEnd[0]),Math.min(this.uiData.dragStart[1],this.uiData.dragEnd[1]),h,u]);return}if(this.opts.clickToSegment){const h=this.mousePos[0],u=this.mousePos[1];if(this.inRenderTile(h,u)>=0)return;const f=this.tileIndex(h,u);if(f>-1){const m=this.screenSlices[f].fovMM,p=this.screenSlices[f].leftTopWidthHeight[2]/m[0],A=this.opts.crosshairColor,x=[A[0],A[1],A[2],.4],y=this.opts.clickToSegmentRadius*p;this.drawCircle([h-y,u-y,y*2,y*2],x,1)}}const s=this.frac2mm([this.scene.crosshairPos[0],this.scene.crosshairPos[1],this.scene.crosshairPos[2]]);return e=s[0].toFixed(2)+"×"+s[1].toFixed(2)+"×"+s[2].toFixed(2),this.readyForSync=!0,this.sync(),this.drawAnchoredLabels(),e}drawScene(){if(this.isBusy){this.needsRefresh=!0;return}this.isBusy=!1,this.needsRefresh=!1;let e=this.drawSceneCore();return this._gl!==null&&this.gl.finish(),this.needsRefresh&&(e=this.drawScene()),e}get gl(){if(!this._gl)throw new Error("unable to get WebGL context. Maybe the browser doesn't support WebGL2.");return this._gl}set gl(e){this._gl=e}};function dE(e){return!e||/^https?:\/\//i.test(e)?e:`/vesselverse/${e.replace(/^\//,"")}`}const Np=({niftiPath:e})=>{const t=Z.useRef(null);return Z.useEffect(()=>{const i=new fE({show3Dcrosshair:!0,backColor:[0,0,0,1],dragMode:"contrast"});i.attachToCanvas(t.current);const s=()=>{const a=t.current;a&&a.parentElement&&(a.width=a.parentElement.clientWidth,a.height=a.parentElement.clientHeight,i.drawScene())};return s(),window.addEventListener("resize",s),i.loadVolumes([{url:dE(e),volume:{hdr:null,img:null}}]),()=>{window.removeEventListener("resize",s)}},[e]),B.jsx("div",{style:{width:"100%",height:"100%"},children:B.jsx("canvas",{ref:t,style:{width:"100%",height:"100%",display:"block"}})})};function mE(e){return!e||/^https?:\/\//i.test(e)?e:`/vesselverse/${e.replace(/^\//,"")}`}const $i={dataset1:{name:"IXI (experiment 1)",filters:["Original","FrangiFilter","nnUNet","StochasticAL","STAPLE"],niftiPaths:{Original:"/imagesNII/IXI_AI/IXI022-Guys-0701-MRA.nii.gz",FrangiFilter:"/imagesNII/IXI_AI/IXI022-Guys-0701-MRA-Filtering.nii.gz",nnUNet:"/imagesNII/IXI_AI/IXI027-Guys-071-nnUNet.nii.gz",StochasticAL:"/imagesNII/IXI_AI/restored_IXI022-Guys-0701-MRA_vessel_mask.nii.gz",STAPLE:"/imagesNII/IXI_AI/IXI022-Guys-0701-MRA-STAPLE.nii.gz"}},dataset2:{name:"IXI (experiment 2)",filters:["Original","Manual","COSTA","SPOCKMIP","STAPLE"],niftiPaths:{Original:"/imagesNII/IXI_manual/IXI020-Guys-0700-MRA.nii.gz",Manual:"/imagesNII/IXI_manual/IXI020-Guys-0700-MRA-TOT.nii.gz",COSTA:"/imagesNII/IXI_manual/translated_IXI013_vessel_mask.nii.gz",SPOCKMIP:"/imagesNII/IXI_manual/IXI020-Guys-0700-MRA-SPOCKMIP.nii.gz",STAPLE:"/imagesNII/IXI_manual/IXI022-Guys-0701-MRA-STAPLE.nii.gz"}},dataset3:{name:"TubeTK",filters:["Original","JOBVS","nnUNet","SPOCKMIP","STAPLE"],niftiPaths:{Original:"/imagesNII/TubeTK/Normal001-MRA.nii.gz",JOBVS:"/imagesNII/TubeTK/Normal001-MRA_JOVBS.nii.gz",nnUNet:"/imagesNII/TubeTK/Normal001-MRA-nnUNet.nii.gz",SPOCKMIP:"/imagesNII/TubeTK/Normal001-MRA-SPOCKMIP.nii.gz",STAPLE:"/imagesNII/TubeTK/Normal001-MRA-STAPLE.nii.gz"}},dataset4:{name:"TopCoW MRA",filters:["Original","JOBVS","nnUNet","Manual","STAPLE"],niftiPaths:{Original:"/imagesNII/COW-MR/topcow_mr_whole_001.nii.gz",JOBVS:"/imagesNII/COW-MR/topcow_mr_whole_001-JOBVS.nii.gz",nnUNet:"/imagesNII/COW-MR/topcow_mr_whole_001-nnUNet.nii.gz",Manual:"/imagesNII/COW-MR/topcow_mr_whole_001-manual.nii.gz",STAPLE:"/imagesNII/COW-MR/topcow_mr_whole_001-STAPLE.nii.gz"}},dataset5:{name:"TopCoW CT",filters:["Original","JOBVS","nnUNet","Manual","STAPLE"],niftiPaths:{Original:"/imagesNII/COW-CT/topcow_ct_whole_001.nii.gz",JOBVS:"/imagesNII/COW-CT/topcow_ct_whole_001-JOBVS.nii.gz",nnUNet:"/imagesNII/COW-CT/topcow_ct_whole_001-nnUNet.nii.gz",Manual:"/imagesNII/COW-CT/topcow_ct_whole_001-Manual.nii.gz",STAPLE:"/imagesNII/COW-CT/topcow_ct_whole_001-STAPLE.nii.gz"}}};function gE(){const e=Object.keys($i),[t,i]=Z.useState(e[0]),[s,a]=Z.useState($i[e[0]].filters[0]),o=h=>{i(h),$i[h].filters.includes(s)||a($i[h].filters[0])},l=mE($i[t].niftiPaths[s]);return B.jsxs("div",{className:"dataset-explorer",children:[B.jsx("div",{className:"desktop-layout",children:B.jsxs("div",{className:"container-layout",children:[B.jsx("div",{className:"sidebar",children:e.map(h=>B.jsx("button",{className:`sidebar-button ${t===h?"selected":""}`,onClick:()=>o(h),children:$i[h].name},h))}),B.jsxs("div",{className:"main-content",children:[B.jsx("div",{className:"filters-row",children:$i[t].filters.map(h=>B.jsx("button",{className:`filter-button ${s===h?"selected":""}`,onClick:()=>a(h),children:h},h))}),B.jsx("div",{className:"black-box",children:B.jsx(Ff.div,{className:"image-wrapper",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:B.jsx(Np,{niftiPath:l})})})]})]})}),B.jsxs("div",{className:"mobile-layout",children:[B.jsxs("div",{className:"mobile-selects",children:[B.jsx("strong",{children:"Dataset:"}),B.jsx("select",{value:t,onChange:h=>o(h.target.value),children:e.map(h=>B.jsx("option",{value:h,children:$i[h].name},h))}),B.jsx("strong",{style:{marginTop:"0.7em"},children:"Annotations:"}),B.jsx("select",{value:s,onChange:h=>a(h.target.value),children:$i[t].filters.map(h=>B.jsx("option",{value:h,children:h},h))})]}),B.jsx("div",{className:"black-box",children:B.jsx(Ff.div,{className:"image-wrapper",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:B.jsx(Np,{niftiPath:l})})})]})]})}function pE(){return B.jsxs("div",{className:"dataset-page",children:[B.jsxs("header",{className:"dataset-hero",children:[B.jsx("h1",{style:{marginBottom:"0.5em",color:"black"},children:"The VesselVerse Dataset:"}),B.jsx("p",{className:"hero-subtitle",style:{color:"black"},children:"The Largest Collection of Brain Vessel Annotations"}),B.jsx(gE,{})]}),B.jsxs("div",{className:"inside-container",children:[B.jsxs("section",{className:"info-section",children:[B.jsx("h2",{className:"section-title",children:"What's Inside VesselVerse?"}),B.jsxs("div",{className:"content-row first-row",children:[B.jsxs("p",{style:{textAlign:"start"},children:["The ",B.jsx("strong",{children:"VesselVerse database"})," is the largest publicly available collection of brain vessel annotations to date, comprising ",B.jsx("strong",{children:"1,130 images"})," from three major datasets: ",B.jsx("strong",{children:"IXI"}),", ",B.jsx("strong",{children:"TubeTK"}),", and ",B.jsx("strong",{children:"TopCoW"}),".",B.jsx("br",{}),"These images cover multiple imaging modalities including ",B.jsx("strong",{children:"TOF-MRA"})," (Time-of-Flight Magnetic Resonance Angiographies) and ",B.jsx("strong",{children:"CTA"})," (Computed Tomography angiographies).",B.jsx("br",{}),"Each image in the database is associated with ",B.jsx("strong",{children:"multiple expert-level annotations"})," (including both ",B.jsx("strong",{children:"manual"})," and ",B.jsx("strong",{children:"automatically generated"})," segmentations). The automated annotations were produced by a range of state-of-the-art models such as ",B.jsx("strong",{children:"nnU-Net"}),", ",B.jsx("strong",{children:"A2V"}),", ",B.jsx("strong",{children:"SPOCKMIP (S-MIP in the table below)"}),", ",B.jsx("strong",{children:"VesselBoost (VB)"}),", ",B.jsx("strong",{children:"JOB-VS"}),", and ",B.jsx("strong",{children:"StochasticBatchAL (SB-AL)"}),", as well as traditional techniques like the ",B.jsx("strong",{children:"Frangi filter (FF)"}),".",B.jsx("br",{}),"For each dataset, VesselVerse also provides a ",B.jsx("strong",{children:B.jsx(wa,{to:"/framework#pillars",style:{color:"#ff6565"},children:"STAPLE-based consensus annotation"})}),", allowing users to access high-confidence segmentations derived from multiple inputs."]}),B.jsxs("a",{href:"https://anonymous.4open.science/r/VesselverseDatasets",target:"_blank",className:"btn clickable",rel:"noopener noreferrer",children:[B.jsx("img",{className:"btn",src:"/vesselverse/github_icon.png",alt:""}),"More about the Dataset"]})]})]}),B.jsxs("section",{className:"info-section",children:[B.jsx("h2",{className:"section-title",style:{textAlign:"end"},children:"The expert annotations"}),B.jsxs("p",{style:{textAlign:"end"},children:["Each image in VesselVerse can have up to ",B.jsx("strong",{children:"nine expert-level annotations"}),", combining both ",B.jsx("strong",{children:"manual input"})," and ",B.jsx("strong",{children:"algorithmic outputs"}),". Beyond traditional expert-guided annotations and ",B.jsx("strong",{children:"Frangi filter-derived labels"}),", six different models were employed to generate automated segmentations. These include ",B.jsx("strong",{children:"nnU-Net"})," and ",B.jsx("strong",{children:"A2V"})," (notable for handling both ",B.jsx("strong",{children:"CTA"})," and ",B.jsx("strong",{children:"MRA"}),"), as well as ",B.jsx("strong",{children:"SPOCKMIP"}),", ",B.jsx("strong",{children:"VesselBoost"}),", ",B.jsx("strong",{children:"JOB-VS"}),", and ",B.jsx("strong",{children:"StochasticBatchAL"}),", which refines outputs using active learning. The models for ",B.jsx("strong",{children:"MRA"})," were trained on 22 manually labeled images from the ",B.jsx("strong",{children:"IXI dataset"}),", while ",B.jsx("strong",{children:"CTA"})," models were fine-tuned on corrected ",B.jsx("strong",{children:"Frangi-based labels"}),"."]}),B.jsx("div",{className:"table-responsive",children:B.jsxs("table",{children:[B.jsxs("thead",{children:[B.jsxs("tr",{children:[B.jsx("th",{colSpan:"3"}),B.jsx("th",{colSpan:"9",children:"Available Annotations"})]}),B.jsxs("tr",{children:[B.jsx("th",{children:"Dataset"}),B.jsx("th",{children:"#Images"}),B.jsx("th",{children:"#Annot."}),B.jsx("th",{children:"MA"}),B.jsx("th",{children:"FF"}),B.jsx("th",{children:"nnU-Net"}),B.jsx("th",{children:"A2V"}),B.jsx("th",{children:"S-MIP"}),B.jsx("th",{children:"VB"}),B.jsx("th",{children:"JOB-VS"}),B.jsx("th",{children:"SB-AL"}),B.jsx("th",{children:"CA"})]})]}),B.jsxs("tbody",{children:[B.jsxs("tr",{children:[B.jsx("td",{children:"IXI TOF-MRA"}),B.jsx("td",{children:"600"}),B.jsx("td",{children:"4,822"}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})})]}),B.jsxs("tr",{children:[B.jsx("td",{children:"TubeTK T1-MRA"}),B.jsx("td",{children:"100"}),B.jsx("td",{children:"800"}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"red-x",children:"✕"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})})]}),B.jsxs("tr",{children:[B.jsx("td",{children:"TopCoW MRA"}),B.jsx("td",{children:"215"}),B.jsx("td",{children:"1720"}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"red-x",children:"✕"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})})]}),B.jsxs("tr",{children:[B.jsx("td",{children:"TopCoW CT"}),B.jsx("td",{children:"215"}),B.jsx("td",{children:"1085"}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"red-x",children:"✕"})}),B.jsx("td",{children:B.jsx("span",{className:"red-x",children:"✕"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})}),B.jsx("td",{children:B.jsx("span",{className:"red-x",children:"✕"})}),B.jsx("td",{children:B.jsx("span",{className:"green-check",children:"✓"})})]})]})]})})]})]})]})}const ff=[{key:"annotations",label:"Annotations",paragraphs:["The first core pillar is <strong>Expert Annotations</strong>. VesselVerse supports <strong>multiple annotations per image</strong>, which can originate from various sources including <strong>manual expert labeling</strong>, <strong>AI-driven models</strong>, and <strong>algorithmic methods</strong> like the Frangi filter. This inclusive approach captures different annotation styles and protocols, such as variations in labeling veins versus arteries or defining vessel boundaries. Notably, <strong>model-generated outputs are treated as expert-level annotations</strong>, enabling scalable dataset expansion while embracing the evolving role of AI in medical imaging."]},{key:"consensus",label:"Consensus",paragraphs:["The second pillar is <strong>Consensus Generation</strong>. To reconcile differing annotations, VesselVerse uses the <strong>STAPLE algorithm</strong>, a probabilistic method that fuses multiple annotations into a single, unified result. It estimates the <strong>sensitivity and specificity</strong> of each input and produces a consensus segmentation by weighting each annotation accordingly. This helps resolve disagreements between experts or models and provides a <strong>high-confidence reference mask</strong> that reflects collective input while minimizing individual bias."]},{key:"versionControl",label:"Version control",paragraphs:["The third pillar is <strong>Version Control</strong>. VesselVerse integrates a robust version tracking system that allows users to <strong>refine annotations collaboratively</strong>, track changes over time, and even <strong>revert to previous versions</strong> if needed. Every update is subjected to <strong>validation checks</strong> for spatial consistency, metadata completeness, and quality standards before being committed. This ensures that the dataset remains reliable and transparent, and it allows for continuous improvement without compromising annotation integrity."]}];function AE(){const[e,t]=Z.useState("annotations"),[i,s]=Z.useState(["annotations"]),a=ff.find(l=>l.key===e),o=l=>{s(h=>h.includes(l)?h.filter(u=>u!==l):[...h,l])};return B.jsxs("section",{className:"pillars-section no-pointer",id:"pillars",children:[B.jsx("h2",{className:"pillars-title",children:"The 3 pillars of the framework"}),B.jsxs("div",{className:"desktop-pillars",children:[B.jsx("div",{className:"pillar-row",children:ff.map(l=>{const h=l.key===e;return B.jsxs("div",{className:"col",children:[B.jsx("div",{className:`pillar clickable ${h?"active":""}`,onClick:()=>t(l.key),children:B.jsx("h3",{children:l.label})}),B.jsx("div",{className:`pillarBot clickable ${h?"active":""}`,style:{padding:"0.7rem"}})]},l.key)})}),B.jsx("div",{className:"pillar-text",children:a==null?void 0:a.paragraphs.map((l,h)=>B.jsx("p",{dangerouslySetInnerHTML:{__html:l}},h))})]}),B.jsx("div",{className:"mobile-pillars",children:ff.map(l=>{const h=i.includes(l.key);return B.jsxs("div",{className:"accordion-item clickable",children:[B.jsxs("div",{className:"accordion-header",onClick:()=>o(l.key),children:[B.jsx("h3",{children:l.label}),B.jsx("span",{children:h?"▲":"▼"})]}),h&&B.jsx("div",{className:"accordion-content",children:l.paragraphs.map((u,f)=>B.jsx("p",{dangerouslySetInnerHTML:{__html:u}},f))})]},l.key)})})]})}function Lp(e){return!e||/^https?:\/\//i.test(e)?e:`/vesselverse/${e.replace(/^\//,"")}`}function vE(){const[e,t]=Z.useState(50),i=Z.useRef(null),s=a=>{if(!i.current)return;const o=i.current.getBoundingClientRect(),l=(a.clientX-o.left)/o.width*100;t(Math.min(100,Math.max(0,l)))};return B.jsxs("div",{ref:i,className:"vessel-animation-container",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:0,overflow:"hidden",cursor:"ew-resize"},onMouseMove:s,children:[B.jsx("img",{src:Lp("/brain_xray_before.png"),alt:"Brain X-ray Before",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",pointerEvents:"none"}}),B.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",clipPath:`inset(0 ${100-e}% 0 0)`,pointerEvents:"none"},children:B.jsx("img",{src:Lp("/brain_xray_after.png"),alt:"Brain X-ray After",style:{width:"100%",height:"100%",objectFit:"cover",pointerEvents:"none"}})}),B.jsx("div",{className:"slider-handle",style:{position:"absolute",top:0,bottom:0,width:"4px",background:"red",left:`${e}%`,transform:"translateX(-50%)",pointerEvents:"auto",cursor:"ew-resize"}})]})}function i5(){const{hash:e}=jn();return Z.useEffect(()=>{if(e){const t=e.replace("#",""),i=document.getElementById(t);i&&i.scrollIntoView({behavior:"smooth"})}},[e]),null}function xE(){return B.jsxs("div",{className:"framework-page",children:[B.jsx(i5,{}),B.jsx(vE,{}),B.jsxs("div",{className:"hero-overlay",children:[B.jsx("h1",{className:"hero-title",children:"The VesselVerse Framework"}),B.jsx("p",{className:"hero-subtitle",style:{color:"white"},children:"A collaborative system integrating expert annotations and AI models for accurate brain vessel segmentation."})]}),B.jsxs("section",{className:"info-section no-pointer",children:[B.jsx("h2",{className:"section-title",children:"How does VesselVerse Framework work?"}),B.jsxs("div",{className:"content-row first-row",children:[B.jsxs("p",{children:["The ",B.jsx("strong",{children:"VesselVerse framework"})," is a collaborative system designed to manage, refine, and enhance brain vessel annotations over time. It brings together contributions from multiple experts and automated tools, enabling users to compare, evaluate, and improve annotations within a unified environment. The framework is integrated as a ",B.jsx("strong",{children:"3D Slicer extension"})," and supports full"," ",B.jsx("strong",{children:"multi-source annotations"}),","," ",B.jsx("strong",{children:"consensus generation"})," and"," "," ",B.jsx("strong",{children:"version control"}),", making it a powerful tool for producing high-quality, traceable, and adaptable segmentation datasets."]}),B.jsxs("a",{href:"https://anonymous.4open.science/r/VesselverseModule",target:"_blank",className:"btn clickable",rel:"noopener noreferrer",children:[B.jsx("img",{className:"btn",src:"/vesselverse/github_icon.png",alt:""}),"More about the Framework"]})]})]}),B.jsx("div",{id:"pillars",children:B.jsx(AE,{})})]})}function yE(e){return!e||/^https?:\/\//i.test(e)?e:`/vesselverse/${e.replace(/^\//,"")}`}function wE(){const[e,t]=Z.useState("down");return Z.useEffect(()=>{let i=window.pageYOffset;const s=()=>{const a=window.pageYOffset;a>i?t("down"):a<i&&t("up"),i=a>0?a:0};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),e}const bE=[{id:"annotations",title:"Annotation Sources",description:"<strong>Annotations in VesselVerse</strong> come from a diverse set of sources including <strong>human experts</strong> and <strong>AI models</strong>. Each image can be annotated multiple times, reflecting different <strong>labeling protocols</strong> and <strong>expertise levels</strong>. This enables broader representation and more robust learning, while treating both <strong>manual and model-based outputs as expert-level annotations</strong>.",image:"/overview/overview1.png"},{id:"staple",title:"Consensus Generation (STAPLE)",description:"VesselVerse uses a <strong>STAPLE-based consensus algorithm</strong> to combine multiple annotations into one probabilistic reference mask. This approach automatically <strong>weighs and integrates annotations</strong> based on their estimated accuracy, helping <strong>resolve disagreements</strong> and offering a <strong>reliable standard</strong> for evaluation and training.",image:"/overview/overview2.png"},{id:"refinement",title:"Human Refinement & New Annotations",description:"After consensus generation, <strong>experts can contribute new annotations or refine existing ones</strong>. This step ensures annotations reflect <strong>high-quality domain knowledge</strong>, allows <strong>error correction</strong>, and supports <strong>continuous dataset evolution</strong> through collaborative updates.",image:"/overview/overview3.png"},{id:"database",title:"VesselVerse Database",description:"<strong>All annotations and refinements</strong> are versioned and stored in a centralized repository. The database supports <strong>multi-expert annotations</strong>, <strong>consensus masks</strong>, and <strong>incremental updates</strong>, ensuring traceability and reproducibility across the annotation lifecycle.",image:"/overview/overview4.png"},{id:"validation",title:"Validation & Manual Correction",description:"Before being finalized, <strong>annotations undergo strict validation</strong>. Experts or validators <strong>manually review the data</strong>, ensuring <strong>spatial consistency</strong>, <strong>accuracy</strong>, and <strong>metadata integrity</strong>. If errors are found, they are corrected, and each change is <strong>tracked through VesselVerse’s built-in version control system</strong>.",image:"/overview/overview5.png"}];function CE(){const t=wE()==="down"?{hidden:{y:100,opacity:0},visible:{y:0,opacity:1}}:{hidden:{y:-100,opacity:0},visible:{y:0,opacity:1}},i=bE.map(s=>({...s,image:yE(s.image)}));return B.jsxs("div",{className:"vertical-timeline-container",children:[B.jsx("div",{className:"vertical-line"}),i.map(s=>B.jsxs("div",{className:"timeline-step",children:[B.jsx("div",{className:"step-circle"}),B.jsxs(Ff.div,{className:"step-content",variants:t,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.5},transition:{duration:.6},children:[B.jsxs("div",{className:"text-block",children:[B.jsx("h2",{className:"step-title",children:s.title}),B.jsx("p",{className:"step-description",dangerouslySetInnerHTML:{__html:s.description}})]}),B.jsx("div",{className:"image-block",children:B.jsx("img",{src:s.image,alt:s.title,className:"step-image"})})]})]},s.id))]})}function SE({question:e,answer:t}){const[i,s]=Z.useState(!1);return B.jsxs("div",{className:i?"faq-item sel":"faq-item",children:[B.jsx(i5,{}),B.jsxs("div",{className:"faq-question",onClick:()=>s(!i),children:[B.jsx("h3",{children:e}),B.jsx("span",{className:"toggle",children:i?"-":"+"})]}),i&&B.jsx("div",{className:"faq-answer",children:B.jsx("p",{dangerouslySetInnerHTML:{__html:t}})})]})}function ME(){const e=[{question:"Can I contribute to the dataset?",answer:"Yes. VesselVerse is designed to support <strong>community-driven collaboration</strong>. You can contribute by <strong>adding new annotations</strong>, <strong>refining existing ones</strong>, or <strong>reporting errors</strong>. All contributions are versioned, validated, and integrated into the dataset using the <strong>built-in version control system</strong>."},{question:"What makes VesselVerse different from other medical imaging datasets?",answer:"Unlike static datasets, VesselVerse is a dynamic and collaborative framework that supports <strong>multi-expert annotations</strong>, <strong>STAPLE-based consensus generation</strong>, and <strong>version control</strong>. This allows for continuous improvement of annotations and ensures full traceability of changes over time."},{question:"Are model-generated segmentations treated the same as manual annotations?",answer:"Yes. VesselVerse embraces an inclusive approach by treating <strong>AI-generated segmentations as expert-level annotations</strong>. This reflects the framework’s commitment to scalability and acknowledges the evolving role of machine learning in medical image interpretation."},{question:"How is annotation quality ensured within VesselVerse?",answer:"Annotation quality is maintained through a combination of <strong>expert validation</strong>, <strong>consensus generation using the STAPLE algorithm</strong>, and a robust <strong>version control system</strong> that tracks all modifications. This ensures that annotations are accurate, consistent, and transparently auditable."}];return B.jsxs("div",{children:[B.jsx("section",{className:"title",children:B.jsx("div",{className:"hero-content-learn",children:B.jsx("h1",{children:"Overview of the VesselVerse dataset and framework architecture"})})}),B.jsx("section",{className:"info-section-learn",children:B.jsx(CE,{})}),B.jsx("section",{className:"tutorial-video",id:"tutorial-video",style:{paddingTop:"2em"},children:B.jsxs("div",{className:"hero-content",children:[B.jsx("h1",{style:{paddingBottom:"1em"},children:"Tutorial: How to use VesselVerse on 3DSlicer"}),B.jsx("div",{className:"video-container",children:B.jsx("video",{src:"/DEMO_VESSELVERSE.mp4",controls:!0,title:"Tutorial VesselVerse su 3DSlicer"})})]})}),B.jsx("section",{style:{backgroundColor:"#FFE8E8",padding:"1em"},children:B.jsxs("div",{className:"FAQ",children:[B.jsx("h2",{children:"FAQ"}),e.map((t,i)=>B.jsx(SE,{question:t.question,answer:t.answer},i))]})})]})}function EE(){const e="/vesselverse/",t=[{name:"Vincenzo",surname:"Marciano",affiliation:"EURECOM"},{name:"Kaiyuan",surname:"Yang",affiliation:"University of Zurich"},{name:"Jon",surname:"Cleary",affiliation:"King's College London"},{name:"Loic",surname:"Legris",affiliation:"CHU Grenoble"},{name:"Massimiliano D.",surname:"Rizzaro",affiliation:"University of Milan"},{name:"Ioannis",surname:"Pitsiorlas",affiliation:"EURECOM"},{name:"Hava",surname:"Chaptoukaev",affiliation:"EURECOM"},{name:"Benjamin",surname:"Lemasson",affiliation:"Grenoble Institute of Neuroscience"},{name:"Bjoern",surname:"Menze",affiliation:"University of Zurich"},{name:"Maria A.",surname:"Zuluaga",affiliation:"EURECOM"}];return B.jsxs(B.Fragment,{children:[B.jsx("section",{className:"highlight-section",children:B.jsxs("div",{className:"hero-content",children:[B.jsx("h1",{style:{marginBottom:"1em"},children:"Do you want to learn more about VesselVerse?"}),B.jsxs("div",{className:"button-paper",children:[B.jsxs("a",{href:`${e}VesselVerse.pdf`,download:"VesselVerse.pdf",className:"btn",children:[B.jsx("i",{className:"fas fa-file-download",style:{marginRight:"0.5rem"}}),"Download the paper"]}),B.jsxs("a",{href:"https://anonymous.4open.science/r/VesselverseDatasets",target:"_blank",className:"btn clickable",rel:"noopener noreferrer",children:[B.jsx("img",{className:"btn",src:`${e}github_icon.png`,alt:""}),"More about the Dataset"]}),B.jsxs("a",{href:"https://anonymous.4open.science/r/VesselverseModule",target:"_blank",className:"btn clickable",rel:"noopener noreferrer",children:[B.jsx("img",{className:"btn",src:`${e}github_icon.png`,alt:""}),"More about the Framework"]})]})]})}),B.jsxs("section",{className:"paper-page",children:[B.jsx("img",{className:"desktop-photo",src:`${e}vesselverse_rettangolo.png`,alt:""}),B.jsx("img",{className:"mobile-photo",src:`${e}logo_home.png`,alt:""}),B.jsx("h1",{className:"section-heading",children:"Authors"}),B.jsxs("div",{className:"author-main-card",children:[B.jsx("div",{className:"author-name",children:"Daniele"}),B.jsx("div",{className:"author-surname",children:"Falcetta"}),B.jsx("div",{className:"author-affiliation",children:"EURECOM"})]}),B.jsx("div",{className:"authors-container",children:t.map((i,s)=>B.jsxs("div",{className:"author-card",children:[B.jsx("div",{className:"author-name",children:i.name}),B.jsx("div",{className:"author-surname",children:i.surname}),B.jsx("div",{className:"author-affiliation",children:i.affiliation})]},s))}),B.jsx("h2",{className:"section-heading",children:"Citation"}),B.jsx("p",{children:"If you use VesselVerse, please cite:"}),B.jsx("pre",{className:"bibtex-block",children:`@InProceedings{ FalDan_VesselVerse_MICCAI2025,
  author = { Falcetta, Daniele and Marciano, Vincenzo and Yang, Kaiyuan and Cleary, Jon and Legris, Loïc and Rizzaro, Massimiliano Domenico and Pitsiorlas, Ioannis and Chaptoukaev, Hava and Lemasson, Benjamin and Menze, Bjoern and Zuluaga, Maria A. },
  title = { { VesselVerse: A Dataset and Collaborative Framework for Vessel Annotation } }, 
  booktitle = {Medical Image Computing and Computer Assisted Intervention -- MICCAI 2025},
  year = {2025},
  publisher = {Springer Nature Switzerland},
  volume = { LNCS 15972 },
  month = {October},
  pages = { 656 -- 666 }
}
`}),B.jsx("h1",{className:"section-heading",children:"Contact"}),B.jsxs("div",{className:"contact-wrap",children:[B.jsx("p",{className:"contact-subtitle",children:"Questions about VesselVerse? Reach out to the project contacts below."}),B.jsxs("div",{className:"contact-grid",children:[B.jsxs("div",{className:"contact-card",children:[B.jsx("div",{className:"contact-avatar","aria-hidden":"true",children:"DF"}),B.jsxs("div",{className:"contact-id",children:[B.jsx("span",{className:"contact-name",children:"Daniele"}),B.jsx("span",{className:"contact-surname",children:"Falcetta"})]}),B.jsxs("a",{href:"mailto:daniele.falcetta@eurecom.fr",className:"contact-btn",children:[B.jsx("span",{className:"contact-btn-icon","aria-hidden":"true"}),"daniele.falcetta@eurecom.fr"]})]}),B.jsxs("div",{className:"contact-card",children:[B.jsx("div",{className:"contact-avatar","aria-hidden":"true",children:"MZ"}),B.jsxs("div",{className:"contact-id",children:[B.jsx("span",{className:"contact-name",children:"Maria A."}),B.jsx("span",{className:"contact-surname",children:"Zuluaga"})]}),B.jsxs("a",{href:"mailto:maria.zuluaga@eurecom.fr",className:"contact-btn",children:[B.jsx("span",{className:"contact-btn-icon","aria-hidden":"true"}),"maria.zuluaga@eurecom.fr"]})]})]})]}),B.jsx("h2",{className:"section-heading",children:"Funding"}),B.jsxs("div",{className:"funding",children:[B.jsx("img",{src:`${e}ANR-funded-project.jpg`,alt:""}),B.jsx("img",{src:`${e}new_fundingEU.png`,alt:""})]})]})]})}function TE(){const e="/vesselverse/";return B.jsxs("footer",{className:"big-footer",children:[B.jsxs("div",{className:"footer",children:[B.jsxs("div",{className:"footer-container1",children:[B.jsx("img",{src:`${e}logo_esteso_trasp.png`,className:"logo-footer",alt:"VesselVerse"}),"Copyright © 2025 | EURECOM | All rights reserved."]}),B.jsxs("div",{className:"footer-container2",children:[B.jsxs("div",{className:"line-footer",children:[B.jsx("img",{src:`${e}Al4Health.png`,alt:"Al4Health@EURECOM"}),B.jsx("span",{className:"partOf",children:"part of Al4Health@EURECOM"})]}),B.jsxs("div",{className:"line-footer",children:[B.jsx("img",{src:`${e}logo_alex.png`,alt:"Alex Argese"}),B.jsxs("span",{className:"partOf",children:["Website, graphics & animations by ",B.jsx("strong",{children:B.jsx("a",{target:"_blank",rel:"noopener noreferrer",style:{color:"#ff4081"},href:"https://alexargese.github.io",children:"Alex Argese"})})]})]})]})]}),B.jsx("p",{className:"footer-note",children:"Some images on this website are AI-generated."})]})}function DE(){return B.jsxs(B.Fragment,{children:[B.jsx(sy,{}),B.jsxs(Ex,{children:[B.jsx(ca,{path:"/",element:B.jsx(ry,{})}),B.jsx(ca,{path:"/dataset",element:B.jsx(pE,{})}),B.jsx(ca,{path:"/framework",element:B.jsx(xE,{})}),B.jsx(ca,{path:"/learn-more",element:B.jsx(ME,{})}),B.jsx(ca,{path:"/paper",element:B.jsx(EE,{})})]}),B.jsx(TE,{})]})}N3.createRoot(document.getElementById("root")).render(B.jsx(T3.StrictMode,{children:B.jsx(Zx,{basename:"/vesselverse/",children:B.jsx(DE,{})})}));
